/*! For license information please see controls-smart-select-smart-select-component-stories.9ec38081.iframe.bundle.js.LICENSE.txt */
(self.webpackChunkocap=self.webpackChunkocap||[]).push([[7784,5652],{"./packages/angular/controls/smart-select/smart-select.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,":host {\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  justify-content: flex-end;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./packages/angular/controls/smart-filter.service.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{o:()=>NgmSmartFilterService});var _NgmSmartFilterService,tslib__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/tslib/tslib.es6.js"),_angular_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),_metad_ocap_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/angular/core/core.service.ts"),_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/core/src/index.ts");let NgmSmartFilterService=((_NgmSmartFilterService=class NgmSmartFilterService extends _metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.Ryo{constructor(dsCoreService){super(dsCoreService)}ngOnDestroy(){super.onDestroy()}}).ctorParameters=()=>[{type:_metad_ocap_angular_core__WEBPACK_IMPORTED_MODULE_1__.q}],_NgmSmartFilterService);NgmSmartFilterService=(0,tslib__WEBPACK_IMPORTED_MODULE_2__.gn)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_3__.Injectable)(),(0,tslib__WEBPACK_IMPORTED_MODULE_2__.w6)("design:paramtypes",[_metad_ocap_angular_core__WEBPACK_IMPORTED_MODULE_1__.q])],NgmSmartFilterService)},"./packages/angular/controls/smart-select/smart-select.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{t:()=>NgmSmartSelectComponent});var asyncToGenerator=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.js");var _NgmSmartSelectComponent,smart_select_componentngResource=__webpack_require__("./packages/angular/controls/smart-select/smart-select.component.scss?ngResource"),smart_select_componentngResource_default=__webpack_require__.n(smart_select_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),fesm2022_forms=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs"),displayDensity=__webpack_require__("./packages/angular/core/directives/displayDensity.ts"),appearance=__webpack_require__("./packages/angular/core/directives/appearance.ts"),src=__webpack_require__("./packages/core/src/index.ts"),combineLatestWith=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/combineLatestWith.js"),map=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),combineLatest=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/combineLatest.js"),distinctUntilChanged=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js"),BehaviorSubject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js"),withLatestFrom=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/withLatestFrom.js"),switchMap=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/switchMap.js"),of=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/of.js"),shareReplay=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/shareReplay.js"),firstValueFrom=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/firstValueFrom.js"),smart_filter_service=__webpack_require__("./packages/angular/controls/smart-filter.service.ts"),rxjs_interop=__webpack_require__("./node_modules/@angular/core/fesm2022/rxjs-interop.mjs"),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),form_field=__webpack_require__("./node_modules/@angular/material/fesm2022/form-field.mjs"),fesm2022_select=__webpack_require__("./node_modules/@angular/material/fesm2022/select.mjs"),icon=__webpack_require__("./node_modules/@angular/material/fesm2022/icon.mjs"),progress_spinner=__webpack_require__("./node_modules/@angular/material/fesm2022/progress-spinner.mjs"),fesm2022_button=__webpack_require__("./node_modules/@angular/material/fesm2022/button.mjs");let NgmSmartSelectComponent=((_NgmSmartSelectComponent=class NgmSmartSelectComponent{get dataSettings(){return this._dataSettings()}set dataSettings(value){this._dataSettings.set(value)}get dimension(){return this._dimension()}set dimension(value){this._dimension.set(value)}get options(){return this._options()}set options(value){this._options.set(value)}get displayBehaviour(){return this.dimension?.displayBehaviour??src.CXV.descriptionOnly}constructor(){this.smartFilterService=(0,core.inject)(smart_filter_service.o),this._dataSettings=(0,core.signal)(null),this._dimension=(0,core.signal)(null),this._options=(0,core.signal)(null),this.options$=(0,rxjs_interop.Dx)(this._options),this.loadingChanging=new core.EventEmitter,this.property$=(0,rxjs_interop.Dx)(this._dimension).pipe((0,combineLatestWith.V)(this.smartFilterService.selectEntityType()),(0,map.U)((([dimension,entityType])=>(0,src.ZBB)(entityType,dimension)))),this.label$=(0,combineLatest.a)([this.options$.pipe((0,map.U)((options=>options?.label))),this.property$]).pipe((0,map.U)((([label,property])=>label||property?.caption||property?.name))),this.placeholder$=this.options$.pipe((0,map.U)((options=>options?.placeholder))),this.autoActiveFirst$=this.options$.pipe((0,map.U)((options=>options?.autoActiveFirst))),this.multiple$=this.options$.pipe((0,map.U)((options=>options?.selectionType===src.ucB.Multiple||options?.multiple)),(0,distinctUntilChanged.x)()),this.slicer$=new BehaviorSubject.X(null),this.members$=this.slicer$.pipe((0,map.U)((slicer=>slicer?.members))),this.memberValues$=this.members$.pipe((0,withLatestFrom.M)(this.multiple$),(0,map.U)((([members,multiple])=>multiple?members?.map((({value})=>value)):members?.[0]?.value)),(0,distinctUntilChanged.x)(src.Xyp)),this.isInitial$=this.members$.pipe((0,map.U)((members=>(0,src.xbD)(members)))),this.data$=this.options$.pipe((0,map.U)((options=>options?.data))),this.selectOptions$=this.data$.pipe((0,map.U)((data=>data?.filter((item=>!!item)))),(0,switchMap.w)((data=>(0,src.xbD)(data)?this.smartFilterService.selectOptions$:(0,of.of)(data))),(0,withLatestFrom.M)(this.autoActiveFirst$,this.members$),(0,map.U)((([selectOptions,autoActiveFirst,members])=>(selectOptions[0]&&autoActiveFirst&&(0,src.xbD)(members)&&this.toggleMember(selectOptions[0]),selectOptions))),(0,rxjs_interop.sL)(),(0,shareReplay.d)(1)),this.loading$=this.smartFilterService.loading$,this.loadingSub=this.smartFilterService.loading$.pipe((0,rxjs_interop.sL)()).subscribe((loading=>{this.loadingChanging.emit(loading)})),this.serviceSub=this.smartFilterService.onAfterServiceInit().pipe((0,rxjs_interop.sL)()).subscribe((()=>{this.smartFilterService.refresh()})),this.slicerSub=this.slicer$.pipe((0,rxjs_interop.sL)()).subscribe((slicer=>{this.onChange?.({...slicer,dimension:this.dimension})})),(0,core.effect)((()=>{this.dataSettings&&(this.smartFilterService.dataSettings=this.dataSettings)})),(0,core.effect)((()=>{this.smartFilterService.options={...this.options??{},dimension:this.dimension}})),(0,core.effect)((()=>{this.options?.defaultMembers&&this.setMembers(this.options.defaultMembers)}),{allowSignalWrites:!0})}writeValue(obj){obj&&this.slicer$.next(obj)}registerOnChange(fn){this.onChange=fn,this.slicer$.value&&this.onChange(this.slicer$.value)}registerOnTouched(fn){}setDisabledState(isDisabled){this.disabled=isDisabled}toggleMember(member){const slicer=this.slicer$.value??{dimension:this.dimension};if(this.options?.selectionType===src.ucB.Multiple){const index=slicer.members?.findIndex((item=>item.value===member.value));index>-1?slicer.members.splice(index,1):(slicer.members=slicer.members??[],slicer.members.push({key:member.key,value:member.value,caption:member.caption}))}else slicer.members=[{key:member.key,value:member.value,caption:member.caption}];this.slicer$.next(slicer),this.onChange?.(slicer)}setSelectedValues(values){var _this=this;return(0,asyncToGenerator.Z)((function*(){const selectOptions=yield(0,firstValueFrom.z)(_this.selectOptions$);values=Array.isArray(values)?values:(0,src.kKJ)(values)?null:[values],_this.setMembers(values?.map((value=>selectOptions.find((item=>item.key===value))??{value,key:value})))}))()}setMembers(members){const slicer=this.slicer$.value??{dimension:this.dimension};slicer.members=[...members??[]],this.slicer$.next(slicer),this.onChange?.(slicer)}}).ctorParameters=()=>[],_NgmSmartSelectComponent.propDecorators={dataSettings:[{type:core.Input}],dimension:[{type:core.Input}],options:[{type:core.Input}],appearance:[{type:core.Input}],disabled:[{type:core.Input}],loadingChanging:[{type:core.Output}]},_NgmSmartSelectComponent);NgmSmartSelectComponent=(0,tslib_es6.gn)([(0,core.Component)({standalone:!0,imports:[common.CommonModule,fesm2022_forms.u5,form_field.lN,fesm2022_select.LD,icon.Ps,fesm2022_button.ot,progress_spinner.Cq,displayDensity.Z,appearance.A],selector:"ngm-smart-select",template:'<label *ngIf="appearance?.displayDensity === \'cosy\' || appearance?.displayDensity === \'compact\'">{{label$ | async}}</label>\n\n<mat-form-field class="flex-1"\n  [appearance]="appearance?.appearance"\n  [floatLabel]="appearance?.floatLabel"\n  [color]="appearance?.color"\n  [displayDensity]="appearance?.displayDensity"\n>\n  <mat-label>{{label$ | async}}</mat-label>\n  @if (multiple$ | async) {\n    <mat-select [placeholder]="placeholder$ | async"\n      [disabled]="disabled"\n      [ngModel]="memberValues$ | async"\n      (ngModelChange)="setSelectedValues($event)"\n      multiple\n    >\n      @for (option of selectOptions$ | async; track option.key) {\n        <mat-option [value]="option.key ?? option.value">\n          {{ option.caption || (option.key ?? option.value) }}\n        </mat-option>\n      }\n    </mat-select>\n  } @else {\n    <mat-select [placeholder]="placeholder$ | async"\n    [disabled]="disabled"\n    [ngModel]="memberValues$ | async"\n    (ngModelChange)="setSelectedValues($event)"\n  >\n    @for (option of selectOptions$ | async; track option.key) {\n      <mat-option [value]="option.key ?? option.value">\n        {{ option.caption || (option.key ?? option.value) }}\n      </mat-option>\n    }\n  </mat-select>\n  }\n\n  <div matSuffix class="flex items-center">\n    <button *ngIf="(isInitial$ | async) === false" mat-icon-button [disabled]="disabled" aria-label="Clear"\n      ngmAppearance="danger"\n      (click)="$event.stopPropagation();setMembers(null)">\n      <mat-icon>close</mat-icon>\n    </button>\n\n    <mat-spinner *ngIf="loading$ | async" color="primary" strokeWidth="1" diameter="20"></mat-spinner>\n\n    <ng-content></ng-content>\n  </div>\n</mat-form-field>\n',host:{class:"ngm-smart-select"},providers:[smart_filter_service.o,{provide:fesm2022_forms.JU,multi:!0,useExisting:(0,core.forwardRef)((()=>NgmSmartSelectComponent))}],styles:[smart_select_componentngResource_default()]}),(0,tslib_es6.w6)("design:paramtypes",[])],NgmSmartSelectComponent)},"./packages/angular/core/core.module.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>OcapCoreModule,B:()=>provideOcapCore});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/tslib/tslib.es6.js"),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),_core_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/angular/core/core.service.ts"),_directives__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/angular/core/directives/displayDensity.ts"),_directives__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/angular/core/directives/appearance.ts"),_directives__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/angular/core/directives/button-group.directive.ts"),_services__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/angular/core/services/core.service.ts");let OcapCoreModule=class OcapCoreModule{};function provideOcapCore(){return[_core_service__WEBPACK_IMPORTED_MODULE_5__.q,_services__WEBPACK_IMPORTED_MODULE_6__.z]}OcapCoreModule=(0,tslib__WEBPACK_IMPORTED_MODULE_0__.gn)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.NgModule)({imports:[_directives__WEBPACK_IMPORTED_MODULE_2__.Z,_directives__WEBPACK_IMPORTED_MODULE_3__.A,_directives__WEBPACK_IMPORTED_MODULE_4__.d],exports:[_directives__WEBPACK_IMPORTED_MODULE_2__.Z,_directives__WEBPACK_IMPORTED_MODULE_3__.A,_directives__WEBPACK_IMPORTED_MODULE_4__.d],declarations:[],providers:[]})],OcapCoreModule)},"./packages/angular/core/core.service.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{q:()=>NgmDSCoreService});var _NgmAgentService,tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.js"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),src=__webpack_require__("./packages/core/src/index.ts"),Subject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Subject.js"),merge=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/merge.js"),empty=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/empty.js"),types=__webpack_require__("./packages/angular/core/types.ts");let NgmAgentService=((_NgmAgentService=class NgmAgentService{constructor(agents){this.agents=agents,this.error$=new Subject.x,this._error$=(0,merge.T)(...this.agents.map((agent=>agent.selectError())))}selectLocalAgentStatus(){const localAgent=this.agents.find((agent=>agent.type===src.buO.Local));if(!localAgent)throw new Error("Can't found Local Agent config");return localAgent?.selectStatus()??empty.E}error(err){this.error$.next(err)}selectError(){return this._error$}}).ctorParameters=()=>[{type:Array,decorators:[{type:core.Inject,args:[types.fH]}]}],_NgmAgentService);NgmAgentService=(0,tslib_es6.gn)([(0,core.Injectable)(),(0,tslib_es6.w6)("design:paramtypes",[Array])],NgmAgentService);let NgmDSCacheService=class NgmDSCacheService extends src.eNP{};var _NgmDSCoreService;NgmDSCacheService=(0,tslib_es6.gn)([(0,core.Injectable)()],NgmDSCacheService);let NgmDSCoreService=((_NgmDSCoreService=class NgmDSCoreService extends src.Q$V{constructor(agents,models,dataSourceFactory,cacheService){super(agents,models,dataSourceFactory,cacheService),this.agents=agents,this.models=models,this.dataSourceFactory=dataSourceFactory}ngOnDestroy(){super.onDestroy()}}).ctorParameters=()=>[{type:Array,decorators:[{type:core.Inject,args:[types.fH]}]},{type:Array,decorators:[{type:core.Optional},{type:core.Inject,args:[types.ET]}]},{type:Array,decorators:[{type:core.Optional},{type:core.Inject,args:[types.OF]}]},{type:NgmDSCacheService,decorators:[{type:core.Optional}]}],_NgmDSCoreService);NgmDSCoreService=(0,tslib_es6.gn)([(0,core.Injectable)(),(0,tslib_es6.w6)("design:paramtypes",[Array,Array,Array,NgmDSCacheService])],NgmDSCoreService)},"./packages/angular/core/directives/appearance.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>AppearanceDirective});var _AppearanceDirective,tslib__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/tslib/tslib.es6.js"),_angular_cdk_coercion__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@angular/cdk/fesm2022/coercion.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),_angular_material_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@angular/material/fesm2022/core.mjs"),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Subject.js");const _NgmAppearanceBase=(0,_angular_material_core__WEBPACK_IMPORTED_MODULE_0__.pj)(class{constructor(_elementRef){this._elementRef=_elementRef}});let AppearanceDirective=((_AppearanceDirective=class AppearanceDirective extends _NgmAppearanceBase{get outline(){return"outline"===this.ngmAppearance}set outline(value){(0,_angular_cdk_coercion__WEBPACK_IMPORTED_MODULE_1__.Ig)(value)&&(this.ngmAppearance="outline")}get hero(){return"hero"===this.ngmAppearance}set hero(value){(0,_angular_cdk_coercion__WEBPACK_IMPORTED_MODULE_1__.Ig)(value)&&(this.ngmAppearance="hero")}get acrylic(){return"acrylic"===this.ngmAppearance}set acrylic(value){(0,_angular_cdk_coercion__WEBPACK_IMPORTED_MODULE_1__.Ig)(value)&&(this.ngmAppearance="acrylic")}get opacity(){return"opacity"===this.ngmAppearance}set opacity(value){(0,_angular_cdk_coercion__WEBPACK_IMPORTED_MODULE_1__.Ig)(value)&&(this.ngmAppearance="opacity")}get dashed(){return"dashed"===this.ngmAppearance}set dashed(value){(0,_angular_cdk_coercion__WEBPACK_IMPORTED_MODULE_1__.Ig)(value)&&(this.ngmAppearance="dashed")}get danger(){return"danger"===this.ngmAppearance}set danger(value){(0,_angular_cdk_coercion__WEBPACK_IMPORTED_MODULE_1__.Ig)(value)&&(this.ngmAppearance="danger")}constructor(elementRef){super(elementRef),this.ngmAppearance="filled",this._onFocus=new rxjs__WEBPACK_IMPORTED_MODULE_2__.x,this._hasFocus=!1}focus(){this._hasFocus||(this._elementRef.nativeElement.focus(),this._onFocus.next({chip:this})),this._hasFocus=!0}getLabel(){throw new Error("Method not implemented.")}}).ctorParameters=()=>[{type:_angular_core__WEBPACK_IMPORTED_MODULE_3__.ElementRef}],_AppearanceDirective.propDecorators={ngmAppearance:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_3__.Input}],outline:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_3__.Input},{type:_angular_core__WEBPACK_IMPORTED_MODULE_3__.HostBinding,args:["class.ngm-appearance-outline"]}],hero:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_3__.Input},{type:_angular_core__WEBPACK_IMPORTED_MODULE_3__.HostBinding,args:["class.ngm-appearance-hero"]}],acrylic:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_3__.Input},{type:_angular_core__WEBPACK_IMPORTED_MODULE_3__.HostBinding,args:["class.ngm-appearance-acrylic"]}],opacity:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_3__.Input},{type:_angular_core__WEBPACK_IMPORTED_MODULE_3__.HostBinding,args:["class.ngm-appearance-opacity"]}],dashed:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_3__.Input},{type:_angular_core__WEBPACK_IMPORTED_MODULE_3__.HostBinding,args:["class.ngm-appearance-dashed"]}],danger:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_3__.Input},{type:_angular_core__WEBPACK_IMPORTED_MODULE_3__.HostBinding,args:["class.ngm-appearance-danger"]}]},_AppearanceDirective);AppearanceDirective=(0,tslib__WEBPACK_IMPORTED_MODULE_4__.gn)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_3__.Directive)({standalone:!0,selector:"[ngmAppearance]",inputs:["color"],host:{"(focus)":"focus()"}}),(0,tslib__WEBPACK_IMPORTED_MODULE_4__.w6)("design:paramtypes",[_angular_core__WEBPACK_IMPORTED_MODULE_3__.ElementRef])],AppearanceDirective)},"./packages/angular/core/directives/button-group.directive.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{d:()=>ButtonGroupDirective});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/tslib/tslib.es6.js"),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs");let ButtonGroupDirective=class ButtonGroupDirective{};ButtonGroupDirective=(0,tslib__WEBPACK_IMPORTED_MODULE_0__.gn)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.Directive)({standalone:!0,selector:"[ngmButtonGroup]",host:{class:"ngm-button-group"}})],ButtonGroupDirective)},"./packages/angular/core/directives/displayDensity.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>DisplayDensity,Z:()=>DensityDirective});var _DensityDirective,DisplayDensity,tslib__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/tslib/tslib.es6.js"),_angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs");!function(DisplayDensity){DisplayDensity.comfortable="comfortable",DisplayDensity.cosy="cosy",DisplayDensity.compact="compact"}(DisplayDensity||(DisplayDensity={}));let DensityDirective=((_DensityDirective=class DensityDirective{get densityCosy(){return this.displayDensity===DisplayDensity.comfortable}get densityCompact(){return this.displayDensity===DisplayDensity.compact}get densityComfortable(){return this.displayDensity===DisplayDensity.cosy}}).propDecorators={displayDensity:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input}],densityCosy:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.HostBinding,args:["class.ngm-density__comfortable"]}],densityCompact:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.HostBinding,args:["class.ngm-density__compact"]}],densityComfortable:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.HostBinding,args:["class.ngm-density__cosy"]}]},_DensityDirective);DensityDirective=(0,tslib__WEBPACK_IMPORTED_MODULE_1__.gn)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.Directive)({standalone:!0,selector:"[displayDensity]"})],DensityDirective)},"./packages/angular/core/i18n/missing-tanslation.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{l:()=>NgmMissingTranslationHandler});class NgmMissingTranslationHandler{handle(params){return params.interpolateParams&&params.interpolateParams.Default||params.key}}},"./packages/angular/core/models/date-function.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{FN:()=>DateVariableEnum,mD:()=>NGM_DATE_VARIABLES});var _angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/core/src/index.ts"),date_fns__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/date-fns/subDays.mjs"),date_fns__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/date-fns/startOfWeek.mjs"),date_fns__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/date-fns/startOfMonth.mjs"),date_fns__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/date-fns/subMonths.mjs"),date_fns__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/date-fns/endOfMonth.mjs"),date_fns__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/date-fns/startOfQuarter.mjs"),date_fns__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/date-fns/endOfWeek.mjs"),date_fns__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/date-fns/endOfQuarter.mjs"),date_fns__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/date-fns/startOfYear.mjs"),date_fns__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/date-fns/endOfYear.mjs"),date_fns__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/date-fns/subYears.mjs");const NGM_DATE_VARIABLES=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.InjectionToken("Date Variables",{providedIn:"root",factory:function NX_DATE_VARIABLES_FACTORY(){return[{id:DateVariableEnum.SYSTEMTIME,name:"系统时间",deps:[],useFactory:()=>new Date},{id:DateVariableEnum.TODAY,name:"当前日期",deps:["SYSTEMTIME"],useFactory:([systemTime])=>systemTime,dateRange:{type:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.D4M.Standard,granularity:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.AYn.Day,lookBack:0,lookAhead:0}},{id:DateVariableEnum.YESTERDAY,name:"昨天",deps:["TODAY"],useFactory:([today])=>(0,date_fns__WEBPACK_IMPORTED_MODULE_2__.k)(today,1),dateRange:{type:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.D4M.Offset,granularity:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.AYn.Day,lookBack:0,lookAhead:0,current:{direction:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.uM.LookBack,granularity:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.AYn.Day,amount:1}}},{id:DateVariableEnum.DBY,name:"前天",deps:["TODAY"],useFactory:([today])=>(0,date_fns__WEBPACK_IMPORTED_MODULE_2__.k)(today,2),dateRange:{type:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.D4M.Offset,granularity:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.AYn.Day,lookBack:0,lookAhead:0,current:{direction:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.uM.LookBack,granularity:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.AYn.Day,amount:2}}},{id:DateVariableEnum.DAYS_7_AGO,name:"七天前",deps:["TODAY"],useFactory:([today])=>(0,date_fns__WEBPACK_IMPORTED_MODULE_2__.k)(today,7),dateRange:{type:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.D4M.Offset,granularity:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.AYn.Day,lookBack:0,lookAhead:0,current:{direction:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.uM.LookBack,granularity:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.AYn.Day,amount:7}}},{id:DateVariableEnum.DAYS_8_AGO,name:"八天前",deps:["TODAY"],useFactory:([today])=>(0,date_fns__WEBPACK_IMPORTED_MODULE_2__.k)(today,8),dateRange:{type:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.D4M.Offset,granularity:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.AYn.Day,lookBack:0,lookAhead:0,current:{direction:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.uM.LookBack,granularity:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.AYn.Day,amount:8}}},{id:DateVariableEnum.DAYS_14_AGO,name:"十四天前",deps:["TODAY"],useFactory:([today])=>(0,date_fns__WEBPACK_IMPORTED_MODULE_2__.k)(today,14),dateRange:{type:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.D4M.Offset,granularity:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.AYn.Day,lookBack:0,lookAhead:0,current:{direction:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.uM.LookBack,granularity:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.AYn.Day,amount:14}}},{id:DateVariableEnum.DAYS_15_AGO,name:"十五天前",deps:["TODAY"],useFactory:([today])=>(0,date_fns__WEBPACK_IMPORTED_MODULE_2__.k)(today,15),dateRange:{type:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.D4M.Offset,granularity:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.AYn.Day,lookBack:0,lookAhead:0,current:{direction:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.uM.LookBack,granularity:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.AYn.Day,amount:15}}},{id:DateVariableEnum.DAYS_30_AGO,name:"三十天前",deps:["TODAY"],useFactory:([today])=>(0,date_fns__WEBPACK_IMPORTED_MODULE_2__.k)(today,30),dateRange:{type:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.D4M.Offset,granularity:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.AYn.Day,lookBack:0,lookAhead:0,current:{direction:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.uM.LookBack,granularity:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.AYn.Day,amount:30}}},{id:DateVariableEnum.DAYS_31_AGO,name:"三十一天前",deps:["TODAY"],useFactory:([today])=>(0,date_fns__WEBPACK_IMPORTED_MODULE_2__.k)(today,31),dateRange:{type:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.D4M.Offset,granularity:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.AYn.Day,lookBack:0,lookAhead:0,current:{direction:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.uM.LookBack,granularity:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.AYn.Day,amount:31}}},{id:DateVariableEnum.RECENT_7_DAYS,name:"最近七天",deps:["TODAY"],useFactory:([today])=>[(0,date_fns__WEBPACK_IMPORTED_MODULE_2__.k)(today,7),today],dateRange:{type:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.D4M.Standard,granularity:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.AYn.Day,lookBack:7,lookAhead:0}},{id:DateVariableEnum.RECENT_14_DAYS,name:"最近十四天",deps:["TODAY"],useFactory:([today])=>[(0,date_fns__WEBPACK_IMPORTED_MODULE_2__.k)(today,14),today],dateRange:{type:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.D4M.Standard,granularity:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.AYn.Day,lookBack:14,lookAhead:0}},{id:DateVariableEnum.RECENT_30_DAYS,name:"最近三十天",deps:["TODAY"],useFactory:([today])=>[(0,date_fns__WEBPACK_IMPORTED_MODULE_2__.k)(today,30),today],dateRange:{type:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.D4M.Standard,granularity:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.AYn.Day,lookBack:30,lookAhead:0}},{id:DateVariableEnum.RECENT_90_DAYS,name:"最近九十天",deps:["TODAY"],useFactory:([today])=>[(0,date_fns__WEBPACK_IMPORTED_MODULE_2__.k)(today,90),today],dateRange:{type:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.D4M.Standard,granularity:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.AYn.Day,lookBack:90,lookAhead:0}},{id:DateVariableEnum.RECENT_180_DAYS,name:"最近一百八十天",deps:["TODAY"],useFactory:([today])=>[(0,date_fns__WEBPACK_IMPORTED_MODULE_2__.k)(today,180),today],dateRange:{type:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.D4M.Standard,granularity:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.AYn.Day,lookBack:180,lookAhead:0}},{id:DateVariableEnum.THIS_WEEK,name:"本周",deps:["TODAY"],useFactory:([today])=>[(0,date_fns__WEBPACK_IMPORTED_MODULE_3__.z)(today,{weekStartsOn:1}),today]},{id:DateVariableEnum.THIS_MONTH,name:"本月",deps:["TODAY"],useFactory:([today])=>[(0,date_fns__WEBPACK_IMPORTED_MODULE_4__.N)(today),today],dateRange:{type:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.D4M.Standard,granularity:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.AYn.Month,lookBack:0,lookAhead:0}},{id:DateVariableEnum.PREVIOUS_MONTH,name:"上月",deps:["TODAY"],useFactory:([today])=>{const start=(0,date_fns__WEBPACK_IMPORTED_MODULE_5__.W)(today,1);return[start,(0,date_fns__WEBPACK_IMPORTED_MODULE_6__.V)(start)]},dateRange:{type:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.D4M.Offset,granularity:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.AYn.Month,lookBack:0,lookAhead:0,current:{direction:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.uM.LookBack,granularity:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.AYn.Month,amount:1}}},{id:DateVariableEnum.THIS_QUARTER,name:"本季度",deps:["TODAY"],useFactory:([today])=>[(0,date_fns__WEBPACK_IMPORTED_MODULE_7__.x)(today),today],dateRange:{type:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.D4M.Standard,granularity:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.AYn.Quarter,lookBack:0,lookAhead:0}},{id:DateVariableEnum.YEAR_TO_TODAY,name:"当前年至当天",deps:["TODAY"],useFactory:([today])=>[new Date(today.getFullYear(),0,1),today]},{id:DateVariableEnum.YEAR_TO_YESTERDAY,name:"当前年至昨天",deps:["TODAY"],useFactory:([today])=>[new Date(today.getFullYear(),0,1),(0,date_fns__WEBPACK_IMPORTED_MODULE_2__.k)(today,1)]},{id:DateVariableEnum.THIS_WHOLE_WEEK,name:"本周(包含整周)",deps:["TODAY"],useFactory:([today])=>[(0,date_fns__WEBPACK_IMPORTED_MODULE_3__.z)(today,{weekStartsOn:1}),(0,date_fns__WEBPACK_IMPORTED_MODULE_8__.v)(today,{weekStartsOn:1})]},{id:DateVariableEnum.THIS_WHOLE_MONTH,name:"本月(包含整月)",deps:["TODAY"],useFactory:([today])=>[(0,date_fns__WEBPACK_IMPORTED_MODULE_4__.N)(today),(0,date_fns__WEBPACK_IMPORTED_MODULE_6__.V)(today)]},{id:DateVariableEnum.THIS_WHOLE_QUARTER,name:"本季度(包含整季度)",deps:["TODAY"],useFactory:([today])=>[(0,date_fns__WEBPACK_IMPORTED_MODULE_7__.x)(today),(0,date_fns__WEBPACK_IMPORTED_MODULE_9__.x)(today)]},{id:DateVariableEnum.THIS_WHOLE_YEAR,name:"今年(包含整年)",deps:["TODAY"],useFactory:([today])=>[(0,date_fns__WEBPACK_IMPORTED_MODULE_10__.e)(today),(0,date_fns__WEBPACK_IMPORTED_MODULE_11__.w)(today)]},{id:DateVariableEnum.PREVIOUS_YEAR,name:"去年",deps:["TODAY"],useFactory:([today])=>{const lastYear=(0,date_fns__WEBPACK_IMPORTED_MODULE_12__.e)(today,1);return[(0,date_fns__WEBPACK_IMPORTED_MODULE_10__.e)(lastYear),(0,date_fns__WEBPACK_IMPORTED_MODULE_11__.w)(lastYear)]},dateRange:{type:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.D4M.Offset,granularity:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.AYn.Year,lookBack:0,lookAhead:0,current:{direction:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.uM.LookBack,amount:1}}}]}});var DateVariableEnum;!function(DateVariableEnum){DateVariableEnum.SYSTEMTIME="SYSTEMTIME",DateVariableEnum.TODAY="TODAY",DateVariableEnum.YESTERDAY="YESTERDAY",DateVariableEnum.DBY="DBY",DateVariableEnum.DAYS_7_AGO="DAYS_7_AGO",DateVariableEnum.DAYS_8_AGO="DAYS_8_AGO",DateVariableEnum.DAYS_14_AGO="DAYS_14_AGO",DateVariableEnum.DAYS_15_AGO="DAYS_15_AGO",DateVariableEnum.DAYS_30_AGO="DAYS_30_AGO",DateVariableEnum.DAYS_31_AGO="DAYS_31_AGO",DateVariableEnum.RECENT_7_DAYS="RECENT_7_DAYS",DateVariableEnum.RECENT_14_DAYS="RECENT_14_DAYS",DateVariableEnum.RECENT_30_DAYS="RECENT_30_DAYS",DateVariableEnum.RECENT_90_DAYS="RECENT_90_DAYS",DateVariableEnum.RECENT_180_DAYS="RECENT_180_DAYS",DateVariableEnum.THIS_WEEK="THIS_WEEK",DateVariableEnum.THIS_MONTH="THIS_MONTH",DateVariableEnum.PREVIOUS_MONTH="PREVIOUS_MONTH",DateVariableEnum.THIS_QUARTER="THIS_QUARTER",DateVariableEnum.THIS_WHOLE_WEEK="THIS_WHOLE_WEEK",DateVariableEnum.THIS_WHOLE_MONTH="THIS_WHOLE_MONTH",DateVariableEnum.THIS_WHOLE_QUARTER="THIS_WHOLE_QUARTER",DateVariableEnum.THIS_WHOLE_YEAR="THIS_WHOLE_YEAR",DateVariableEnum.YEAR_TO_TODAY="YEAR_TO_TODAY",DateVariableEnum.YEAR_TO_YESTERDAY="YEAR_TO_YESTERDAY",DateVariableEnum.PREVIOUS_YEAR="PREVIOUS_YEAR"}(DateVariableEnum||(DateVariableEnum={}))},"./packages/angular/core/services/core.service.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{z:()=>NgmOcapCoreService});var _entityUpdateEvent$,_openCalculation,_home_runner_work_ocap_ocap_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_classPrivateFieldInitSpec_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/classPrivateFieldInitSpec.js"),_home_runner_work_ocap_ocap_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_classPrivateFieldGet2_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/classPrivateFieldGet2.js"),_home_runner_work_ocap_ocap_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_classPrivateFieldSet2_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/classPrivateFieldSet2.js"),tslib__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/tslib/tslib.es6.js"),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),rxjs__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Subject.js"),rxjs__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/empty.js"),rxjs__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/of.js"),rxjs__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/switchMap.js"),_models__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/angular/core/models/date-function.ts");let NgmOcapCoreService=(_entityUpdateEvent$=new WeakMap,_openCalculation=new WeakMap,class NgmOcapCoreService{constructor(){(0,_home_runner_work_ocap_ocap_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_classPrivateFieldInitSpec_js__WEBPACK_IMPORTED_MODULE_0__.Z)(this,_entityUpdateEvent$,void 0),(0,_home_runner_work_ocap_ocap_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_classPrivateFieldInitSpec_js__WEBPACK_IMPORTED_MODULE_0__.Z)(this,_openCalculation,void 0),this.dateVariables=(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.inject)(_models__WEBPACK_IMPORTED_MODULE_2__.mD),(0,_home_runner_work_ocap_ocap_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_classPrivateFieldSet2_js__WEBPACK_IMPORTED_MODULE_3__.Z)(_entityUpdateEvent$,this,new rxjs__WEBPACK_IMPORTED_MODULE_4__.x),(0,_home_runner_work_ocap_ocap_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_classPrivateFieldSet2_js__WEBPACK_IMPORTED_MODULE_3__.Z)(_openCalculation,this,(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.signal)((params=>rxjs__WEBPACK_IMPORTED_MODULE_5__.E)))}updateEntity(event){(0,_home_runner_work_ocap_ocap_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_classPrivateFieldGet2_js__WEBPACK_IMPORTED_MODULE_6__.Z)(_entityUpdateEvent$,this).next(event)}onEntityUpdate(){return(0,_home_runner_work_ocap_ocap_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_classPrivateFieldGet2_js__WEBPACK_IMPORTED_MODULE_6__.Z)(_entityUpdateEvent$,this).asObservable()}getDateVariables(){return this.dateVariables}execDateVariables(id){const dateVariable=this.dateVariables.find((item=>item.id===id));if(!dateVariable)try{return new Date(id)}catch(err){throw new Error(`Can't found date variable or date '${id}'`)}return dateVariable.useFactory(dateVariable.deps?.map((dep=>this.execDateVariables(dep))))}openCalculation(params){return(0,rxjs__WEBPACK_IMPORTED_MODULE_7__.of)(params).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_8__.w)((0,_home_runner_work_ocap_ocap_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_classPrivateFieldGet2_js__WEBPACK_IMPORTED_MODULE_6__.Z)(_openCalculation,this).call(this)))}setCalculationHandler(handler){(0,_home_runner_work_ocap_ocap_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_classPrivateFieldGet2_js__WEBPACK_IMPORTED_MODULE_6__.Z)(_openCalculation,this).set(handler)}});NgmOcapCoreService=(0,tslib__WEBPACK_IMPORTED_MODULE_9__.gn)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.Injectable)()],NgmOcapCoreService)},"./packages/angular/core/types.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{ET:()=>OCAP_MODEL_TOKEN,OF:()=>OCAP_DATASOURCE_TOKEN,WS:()=>EntityCapacity,fH:()=>OCAP_AGENT_TOKEN});var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs");const OCAP_AGENT_TOKEN=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.InjectionToken("OCAP-Agent"),OCAP_MODEL_TOKEN=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.InjectionToken("OCAP-Model"),OCAP_DATASOURCE_TOKEN=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.InjectionToken("OCAP-DataSource");var EntityCapacity;!function(EntityCapacity){EntityCapacity.Dimension="Dimension",EntityCapacity.Hierarchy="Hierarchy",EntityCapacity.Measure="Measure",EntityCapacity.Indicator="Indicator",EntityCapacity.Calculation="Calculation",EntityCapacity.Parameter="Parameter"}(EntityCapacity||(EntityCapacity={}))},"./packages/angular/mock/agent-mock.service.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{ch:()=>MockAgent,fJ:()=>CUBE_SALES_ORDER_NAME,nH:()=>CUBE_SALES_ORDER});var tslib__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/tslib/tslib.es6.js"),_angular_core__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/core/src/index.ts"),_ngneat_falso__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@ngneat/falso/index.esm.js"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Subject.js"),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/of.js");const columns=[{name:"OrderId",label:"订单号",type:"string"},{name:"product",label:"产品",type:"string"},{name:"productCategory",label:"产品类别",type:"string"},{name:"Department",label:"部门",type:"string"},{name:"sales",label:"销售额",type:"number"},{name:"quantity",label:"销售量",type:"number"}],SalesOrder={name:"SalesOrder",label:"销售订单",columns},SalesOrder10s={name:"SalesOrder10s",label:"销售订单10秒",columns},SalesOrder3s={name:"SalesOrder3s",label:"销售订单3秒",columns},CUBE_SALES_ORDER_NAME="SalesOrder",CUBE_SALES_ORDER={name:CUBE_SALES_ORDER_NAME,caption:"销售订单",visible:!0,tables:[{name:"sales_order"}],dimensions:[{name:"Product",caption:"产品",hierarchies:[{name:"",caption:"产品",levels:[{name:"Product",column:"product",captionColumn:"ProductName"}]}]},{name:"Department",caption:"部门",hierarchies:[{name:"",levels:[{name:"Department",column:"department",captionColumn:"DepartmentName"}]}]}],measures:[{name:"Sales",column:"sales",caption:"销售额"},{name:"Cost",column:"cost",caption:"成本"}]};let MockAgent=class MockAgent{constructor(){this.type=_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.buO.Browser,this.error$=new rxjs__WEBPACK_IMPORTED_MODULE_1__.x}selectStatus(){return(0,rxjs__WEBPACK_IMPORTED_MODULE_2__.of)(_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.dJT.ONLINE)}selectError(){return this.error$}error(err){this.error$.next(err)}request(dataSource,options){return new Promise(((resolve,reject)=>{if("get"===options.method){if("schema"===options.url)switch(options.table){case SalesOrder10s.name:return resolve([{schema:"default",tables:[SalesOrder10s]}]);case SalesOrder3s.name:return resolve([{schema:"default",tables:[SalesOrder3s]}]);case SalesOrder.name:return resolve([{schema:"default",tables:[SalesOrder]}]);case"Empty":return resolve([{schema:"default",tables:[{name:"Empty",columns:[]}]}]);default:return'SELECT * FROM "SalesOrder"'===options.statement?resolve([{schema:"default",tables:[SalesOrder]}]):resolve([{schema:"default",tables:[{name:"Inventory",label:"库存",columns:[{name:"product",label:"产品",type:"string"},{name:"productCategory",label:"产品类别",type:"string"},{name:"sales",label:"销售额",type:"number"},{name:"quantity",label:"销售量",type:"number"}]}]}])}}else if("post"===options.method&&"query"===options.url){const results=[];if(options.body?.statement?.includes("AS `memberKey`")){const data=[];return(0,_ngneat_falso__WEBPACK_IMPORTED_MODULE_3__.mJl)({length:3}).forEach((product=>{data.push({memberKey:product,memberCaption:product}),(0,_ngneat_falso__WEBPACK_IMPORTED_MODULE_3__.mJl)({length:3}).filter((product2=>!data.find((item=>item.memberKey===product2)))).forEach((product2=>{data.push({memberKey:product2,memberCaption:product2,parentKey:product}),(0,_ngneat_falso__WEBPACK_IMPORTED_MODULE_3__.mJl)({length:5}).filter((product=>!data.find((item=>item.memberKey===product)))).forEach((product3=>{data.push({memberKey:product3,memberCaption:product3,parentKey:product2})}))}))})),resolve({data,columns:[{name:"memberKey",label:"成员 Key",type:"string"},{name:"parentKey",label:"父级 Key",type:"string"}]})}if(options.body?.statement?.includes('"Department" AS "Department"')){let departmentCode=0;return(0,_ngneat_falso__WEBPACK_IMPORTED_MODULE_3__.T1i)({length:5}).forEach((name=>{departmentCode++;const department1=departmentCode;results.push({Department:department1,DepartmentName:name,quantity:(0,_ngneat_falso__WEBPACK_IMPORTED_MODULE_3__.Qyw)()}),(0,_ngneat_falso__WEBPACK_IMPORTED_MODULE_3__.T1i)({length:5}).forEach((name=>{departmentCode++;const department2=departmentCode;results.push({Department:department2,DepartmentName:name,DepartmentParent:department1,quantity:(0,_ngneat_falso__WEBPACK_IMPORTED_MODULE_3__.Qyw)()}),(0,_ngneat_falso__WEBPACK_IMPORTED_MODULE_3__.T1i)({length:3}).forEach((name=>{departmentCode++;const department3=departmentCode;results.push({Department:department3,DepartmentName:name,DepartmentParent:department2,quantity:(0,_ngneat_falso__WEBPACK_IMPORTED_MODULE_3__.Qyw)()})}))}))})),resolve({data:results,columns:[{name:"Department",label:"部门",type:"string"},{name:"DepartmentName",label:"部门",type:"string"},{name:"DepartmentParent",label:"上级部门",type:"string"}]})}return(0,_ngneat_falso__WEBPACK_IMPORTED_MODULE_3__.ALu)({length:3}).forEach((productCategory=>{const DepartmentParent=(0,_ngneat_falso__WEBPACK_IMPORTED_MODULE_3__.T1i)();(0,_ngneat_falso__WEBPACK_IMPORTED_MODULE_3__.mJl)({length:5}).forEach((product=>{results.push({OrderId:(0,_ngneat_falso__WEBPACK_IMPORTED_MODULE_3__.s8S)(),"[Product]":(0,_ngneat_falso__WEBPACK_IMPORTED_MODULE_3__.s8S)(),"[Product].[MEMBER_CAPTION]":product,productCategory,Department:(0,_ngneat_falso__WEBPACK_IMPORTED_MODULE_3__.T1i)(),DepartmentParent,Sales:(0,_ngneat_falso__WEBPACK_IMPORTED_MODULE_3__.Qyw)(),quantity:(0,_ngneat_falso__WEBPACK_IMPORTED_MODULE_3__.Qyw)()})}))})),options.body?.statement?.includes(SalesOrder10s.name)?void setTimeout((()=>{resolve({data:results,columns})}),1e4):options.body?.statement?.includes(SalesOrder3s.name)?void setTimeout((()=>{resolve({data:results,columns})}),3e3):options.body?.statement?.includes("empty_")?resolve({data:[],columns:[]}):void setTimeout((()=>{resolve({data:results,columns:[{name:"OrderId",label:"订单号",type:"string"},{name:"[Product]",label:"产品",type:"string"},{name:"productCategory",label:"产品类别",type:"string"},{name:"[Department]",label:"部门",type:"string"},{name:"[DepartmentParent]",label:"上级部门",type:"string"}]})}),1e3)}resolve({})}))}};MockAgent=(0,tslib__WEBPACK_IMPORTED_MODULE_4__.gn)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_5__.Injectable)()],MockAgent)},"./node_modules/@angular/core/fesm2022/rxjs-interop.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Dx:()=>toObservable,O4:()=>toSignal,sL:()=>takeUntilDestroyed});var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Observable.js"),rxjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/ReplaySubject.js"),rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/takeUntil.js");function takeUntilDestroyed(destroyRef){destroyRef||((0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.assertInInjectionContext)(takeUntilDestroyed),destroyRef=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.inject)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.DestroyRef));const destroyed$=new rxjs__WEBPACK_IMPORTED_MODULE_1__.y((observer=>destroyRef.onDestroy(observer.next.bind(observer))));return source=>source.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.R)(destroyed$))}function toObservable(source,options){!options?.injector&&(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.assertInInjectionContext)(toObservable);const injector=options?.injector??(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.inject)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.Injector),subject=new rxjs__WEBPACK_IMPORTED_MODULE_3__.t(1),watcher=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.effect)((()=>{let value;try{value=source()}catch(err){return void(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.untracked)((()=>subject.error(err)))}(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.untracked)((()=>subject.next(value)))}),{injector,manualCleanup:!0});return injector.get(_angular_core__WEBPACK_IMPORTED_MODULE_0__.DestroyRef).onDestroy((()=>{watcher.destroy(),subject.complete()})),subject.asObservable()}function toSignal(source,options){ngDevMode&&(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.assertNotInReactiveContext)(toSignal,"Invoking `toSignal` causes new subscriptions every time. Consider moving `toSignal` outside of the reactive context and read the signal value where needed.");const requiresCleanup=!options?.manualCleanup;requiresCleanup&&!options?.injector&&(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.assertInInjectionContext)(toSignal);const cleanupRef=requiresCleanup?options?.injector?.get(_angular_core__WEBPACK_IMPORTED_MODULE_0__.DestroyRef)??(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.inject)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.DestroyRef):null;let state;state=options?.requireSync?(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.signal)({kind:0}):(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.signal)({kind:1,value:options?.initialValue});const sub=source.subscribe({next:value=>state.set({kind:1,value}),error:error=>{if(options?.rejectErrors)throw error;state.set({kind:2,error})}});if(ngDevMode&&options?.requireSync&&0===state().kind)throw new _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵRuntimeError"](601,"`toSignal()` called with `requireSync` but `Observable` did not emit synchronously.");return cleanupRef?.onDestroy(sub.unsubscribe.bind(sub)),(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.computed)((()=>{const current=state();switch(current.kind){case 1:return current.value;case 2:throw current.error;case 0:throw new _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵRuntimeError"](601,"`toSignal()` called with `requireSync` but `Observable` did not emit synchronously.")}}))}},"./packages/angular/controls/smart-select/smart-select.component.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _home_runner_work_ocap_ocap_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),_angular_platform_browser_animations__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@angular/platform-browser/fesm2022/animations.mjs"),_metad_ocap_angular_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/angular/core/core.module.ts"),_metad_ocap_angular_core__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/angular/core/i18n/missing-tanslation.ts"),_metad_ocap_angular_core__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/angular/core/core.service.ts"),_metad_ocap_angular_core__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/angular/core/types.ts"),_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/core/src/index.ts"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@ngx-translate/core/dist/fesm2022/ngx-translate-core.mjs"),_storybook_angular__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@storybook/angular/dist/index.mjs"),_mock_agent_mock_service__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./packages/angular/mock/agent-mock.service.ts");const __WEBPACK_DEFAULT_EXPORT__={title:"Controls/SmartSelect",component:__webpack_require__("./packages/angular/controls/smart-select/smart-select.component.ts").t,decorators:[(0,_storybook_angular__WEBPACK_IMPORTED_MODULE_1__.moduleMetadata)({imports:[_angular_platform_browser_animations__WEBPACK_IMPORTED_MODULE_3__.BrowserAnimationsModule,_metad_ocap_angular_core__WEBPACK_IMPORTED_MODULE_4__.A,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_5__.aw.forRoot({missingTranslationHandler:{provide:_ngx_translate_core__WEBPACK_IMPORTED_MODULE_5__.gC,useClass:_metad_ocap_angular_core__WEBPACK_IMPORTED_MODULE_6__.l}})],providers:[_metad_ocap_angular_core__WEBPACK_IMPORTED_MODULE_7__.q,{provide:_metad_ocap_angular_core__WEBPACK_IMPORTED_MODULE_8__.fH,useClass:_mock_agent_mock_service__WEBPACK_IMPORTED_MODULE_9__.ch,multi:!0},{provide:_metad_ocap_angular_core__WEBPACK_IMPORTED_MODULE_8__.OF,useValue:{type:"SQL",factory:(_ref=(0,_home_runner_work_ocap_ocap_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_10__.Z)((function*(){const{SQLDataSource}=yield __webpack_require__.e(3958).then(__webpack_require__.bind(__webpack_require__,"./packages/sql/src/index.ts"));return SQLDataSource})),function factory(){return _ref.apply(this,arguments)})},multi:!0},{provide:_metad_ocap_angular_core__WEBPACK_IMPORTED_MODULE_8__.ET,useValue:{name:"Sales",type:"SQL",agentType:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.buO.Browser,settings:{ignoreUnknownProperty:!0},schema:{cubes:[{name:"SalesOrder",tables:[{name:"SalesOrder"}],dimensions:[{name:"product",caption:"productName"},{name:"Department",caption:"DepartmentName"}]}]}},multi:!0}]})]};var _ref},"?d4c0":()=>{}}]);