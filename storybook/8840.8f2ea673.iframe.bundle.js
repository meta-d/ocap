(self.webpackChunkocap=self.webpackChunkocap||[]).push([[8840],{"./packages/angular/parameter/parameter/parameter.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,":host {\n  overflow: hidden;\n}\n\n.mat-mdc-radio-group .mat-mdc-radio-button {\n  margin: 0.5rem 0;\n}\n.mat-mdc-radio-group.ngm-density__cosy .mat-mdc-radio-button {\n  margin: 0.3rem 0;\n}\n.mat-mdc-radio-group.ngm-density__compact .mat-mdc-radio-button {\n  margin: 0;\n}\n\n.mat-mdc-slider {\n  width: calc(100% - 30px);\n  margin-left: auto;\n  margin-right: auto;\n  margin-top: 2rem;\n  display: block;\n}\n\n.mat-mdc-slider-thumb-label-showing.mat-mdc-slider-horizontal {\n  margin-top: 1rem;\n  margin-left: 1rem;\n  margin-right: 1rem;\n}\n.mat-mdc-slider-thumb-label-showing.mat-mdc-slider-vertical {\n  margin-left: 1rem;\n  margin-top: 1rem;\n  margin-bottom: 1rem;\n}\n\n.mat-mdc-radio-group {\n  margin-left: 1rem;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./packages/angular/selection/advanced-filter/advanced-filter.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,".pac-filter-tree {\n  display: flex;\n}\n\n.pac-filter-legend {\n  display: flex;\n  margin-left: auto;\n  pointer-events: none;\n}\n\n.mat-dialog-title {\n  display: flex;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./packages/angular/selection/advanced-slicer/advanced-slicer.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,":host {\n  display: block;\n  width: 24rem;\n  overflow: hidden;\n}\n\n.ngm-advanced-slicer__context {\n  padding-bottom: 1.34375em;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./packages/angular/selection/slicer-bar/slicer-bar.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./packages/angular/selection/slicer/slicer.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,":host {\n  display: block;\n}\n:host .mat-chip-list {\n  display: block;\n}\n:host .ngm-slicer__remove {\n  opacity: 0;\n}\n:host:hover .ngm-slicer__remove {\n  opacity: 1;\n}\n:host .ngm-slicer__label {\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n\n.mat-mdc-chip.mat-mdc-standard-chip {\n  --mdc-chip-container-height: auto;\n}\n\n:host::ng-deep .mat-mdc-standard-chip .mdc-evolution-chip__cell--primary,\n:host::ng-deep .mat-mdc-standard-chip .mdc-evolution-chip__action--primary,\n:host::ng-deep .mat-mdc-standard-chip .mat-mdc-chip-action-label {\n  overflow: hidden;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./packages/angular/selection/slicers/slicers.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,":host {\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n}\n\n.mat-divider {\n  margin: 0.5rem 0;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./packages/angular/selection/timer/time-filter-editor/time-filter-editor.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,":host .mat-expansion-panel-header-description {\n  justify-content: flex-end;\n  margin-right: 0;\n}\n:host .ngm-timer-editor__header {\n  display: flex;\n  justify-content: space-between;\n}\n\n.mat-expansion-panel-header {\n  padding-right: 0px;\n}\n\n.ngm-timer-editor__add {\n  margin-top: 1rem;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./packages/angular/parameter/parameter.module.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>NgmParameterModule});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/tslib/tslib.es6.js"),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),_parameter_select_parameter_select_component__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/angular/parameter/parameter-select/parameter-select.component.ts"),_parameter_parameter_component__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/angular/parameter/parameter/parameter.component.ts"),_parameter_create_parameter_create_component__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/angular/parameter/parameter-create/parameter-create.component.ts");let NgmParameterModule=class NgmParameterModule{};NgmParameterModule=(0,tslib__WEBPACK_IMPORTED_MODULE_0__.gn)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.NgModule)({imports:[_parameter_parameter_component__WEBPACK_IMPORTED_MODULE_2__.O,_parameter_create_parameter_create_component__WEBPACK_IMPORTED_MODULE_3__.R,_parameter_select_parameter_select_component__WEBPACK_IMPORTED_MODULE_4__.n],exports:[_parameter_parameter_component__WEBPACK_IMPORTED_MODULE_2__.O,_parameter_create_parameter_create_component__WEBPACK_IMPORTED_MODULE_3__.R,_parameter_select_parameter_select_component__WEBPACK_IMPORTED_MODULE_4__.n],declarations:[],providers:[]})],NgmParameterModule)},"./packages/angular/parameter/parameter/parameter.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{O:()=>NgmParameterComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.js");var _NgmParameterComponent,parameter_componentngResource=__webpack_require__("./packages/angular/parameter/parameter/parameter.component.scss?ngResource"),parameter_componentngResource_default=__webpack_require__.n(parameter_componentngResource),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),rxjs_interop=__webpack_require__("./node_modules/@angular/core/fesm2022/rxjs-interop.mjs"),fesm2022_forms=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs"),form_field=__webpack_require__("./node_modules/@angular/material/fesm2022/form-field.mjs"),input=__webpack_require__("./node_modules/@angular/material/fesm2022/input.mjs"),list=__webpack_require__("./node_modules/@angular/material/fesm2022/list.mjs"),fesm2022_radio=__webpack_require__("./node_modules/@angular/material/fesm2022/radio.mjs"),slider=__webpack_require__("./node_modules/@angular/material/fesm2022/slider.mjs"),common_module=__webpack_require__("./packages/angular/common/common.module.ts"),controls_module=__webpack_require__("./packages/angular/controls/controls.module.ts"),core_service=__webpack_require__("./packages/angular/core/core.service.ts"),core_module=__webpack_require__("./packages/angular/core/core.module.ts"),src=__webpack_require__("./packages/core/src/index.ts"),BehaviorSubject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js"),map=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),filter=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/filter.js"),distinctUntilChanged=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js"),switchMap=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/switchMap.js"),combineLatestWith=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/combineLatestWith.js"),of=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/of.js"),Subject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Subject.js"),debounceTime=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/debounceTime.js");let NgmParameterComponent=((_NgmParameterComponent=class NgmParameterComponent{constructor(){this.ParameterControlEnum=src.WTi,this.dsCoreService=(0,core.inject)(core_service.q),this.dataSettings$=new BehaviorSubject.X(null),this.parameter$=new BehaviorSubject.X(null),this.parameterChange=new core.EventEmitter,this.dataSource$=this.dataSettings$.pipe((0,map.U)((dataSettings=>dataSettings?.dataSource)),(0,filter.h)((value=>!!value)),(0,distinctUntilChanged.x)(),(0,switchMap.w)((dataSource=>this.dsCoreService.getDataSource(dataSource)))),this.dimension$=this.parameter$.pipe((0,filter.h)((value=>!!value?.dimension)),(0,map.U)((parameter=>(0,src.eiS)(parameter,"dimension","hierarchy"))),(0,distinctUntilChanged.x)(src.Xyp)),this.members$=this.dimension$.pipe((0,combineLatestWith.V)(this.dataSettings$.pipe((0,map.U)((dataSettings=>dataSettings?.entitySet)),(0,filter.h)((value=>!!value)),(0,distinctUntilChanged.x)()),this.dataSource$),(0,switchMap.w)((([parameter,entity,dataSource])=>dataSource.discoverMDMembers(entity,parameter))),(0,map.U)((members=>members?.map((item=>({key:item.memberKey,value:item.memberKey,caption:item.memberCaption})))))),this.availableMembers$=this.parameter$.pipe((0,map.U)((parameter=>parameter?.availableMembers)),(0,distinctUntilChanged.x)(),(0,switchMap.w)((availableMembers=>availableMembers?.length?(0,of.of)(availableMembers):this.members$))),this.slicer={},this.parameterValue=null,this.changeParameter$=new Subject.x,this.changeSub=this.changeParameter$.pipe((0,debounceTime.b)(500),(0,rxjs_interop.sL)()).subscribe((()=>this.parameterChange.emit(this.parameter)))}get dataSettings(){return this.dataSettings$.value}set dataSettings(value){this.dataSettings$.next(value)}get parameter(){return this.parameter$.value}set parameter(value){this.parameter$.next(value)}get multiple(){return this.options?.selectionType===src.ucB.Multiple}get paramType(){return this.parameter?.paramType}get availableMembers(){return this.parameter?.availableMembers??[]}get members(){return this.parameter.members}set members(members){(0,src.Xyp)(members,this.parameter.members)||(this.parameter={...this.parameter,members},this.changeParameter())}ngOnChanges({parameter}){parameter&&(this.parameterValue=parameter.currentValue?.value)}compareWith(a,b){return a.value===b.value}updateParameterValue(event){this.parameter={...this.parameter,value:event},this.changeParameter()}changeParameter(){this.changeParameter$.next()}onSlicerChange(slicer){this.updateParameterValue(slicer.members)}onSlicerEnd(event){this.updateParameterValue(event.value)}onBlur(event){this.updateParameterValue(event.target.value)}}).propDecorators={dataSettings:[{type:core.Input}],parameter:[{type:core.Input}],displayBehaviour:[{type:core.Input}],options:[{type:core.Input}],appearance:[{type:core.Input}],parameterChange:[{type:core.Output}]},_NgmParameterComponent);NgmParameterComponent=(0,tslib_es6.gn)([(0,core.Component)({standalone:!0,imports:[common.CommonModule,fesm2022_forms.u5,fesm2022_forms.UX,form_field.lN,input.c,fesm2022_radio.Fk,list.ie,slider.KP,core_module.A,common_module.N,controls_module.$],changeDetection:core.ChangeDetectionStrategy.OnPush,selector:"ngm-parameter",template:'<ng-container *ngIf="paramType === ParameterControlEnum.Input">\n    <mat-slider *ngIf="options?.slider; else input" class="w-full"\n        [step]="options?.sliderStep || 1"\n        [min]="options?.sliderMin || 0"\n        [max]="options?.sliderMax || 100"\n        [discrete]="options?.showThumbLabel"\n        [showTickMarks]="options?.showTickMarks"\n        [color]="options?.sliderColor"\n        >\n        <input matSliderThumb [(ngModel)]="parameterValue" (dragEnd)="onSlicerEnd($event)">\n    </mat-slider>\n\n    <ng-template #input>\n        <ngm-input class="block w-full px-2" [(ngModel)]="parameterValue" [type]="parameter.dataType ?? \'string\'"\n            (blur)="onBlur($event)"\n        >\n        </ngm-input>\n    </ng-template>\n</ng-container>\n\n\n<mat-radio-group *ngIf="paramType === ParameterControlEnum.Select" class="flex-1 flex flex-col justify-start items-start"\n    [displayDensity]="appearance?.displayDensity"\n    [ngModel]="$any(parameter.members?.[0])?.value"\n    (ngModelChange)="updateParameterValue($event)"\n>\n    <mat-radio-button *ngFor="let option of parameter.availableMembers"\n        [value]="option.value">{{ option.label }}</mat-radio-button>\n</mat-radio-group>\n\n\x3c!-- 暂时先用简易版:平铺展示维度成员 --\x3e\n<ng-container *ngIf="paramType === ParameterControlEnum.Dimensions">\n    <mat-selection-list *ngIf="multiple" class="flex-1"\n        [multiple]="true"\n        [displayDensity]="appearance?.displayDensity"\n        [compareWith]="compareWith"\n        [(ngModel)]="members"\n    >\n        <mat-list-option *ngFor="let availableMember of availableMembers$ | async" [value]="availableMember">\n            <ngm-display-behaviour [option]="availableMember" [displayBehaviour]="displayBehaviour"></ngm-display-behaviour>\n        </mat-list-option>\n    </mat-selection-list>\n\n    <mat-selection-list *ngIf="!multiple" class="flex-1"\n        [multiple]="false"\n        [displayDensity]="appearance?.displayDensity"\n        [compareWith]="compareWith"\n        [(ngModel)]="members"\n    >\n        <mat-list-option *ngFor="let availableMember of availableMembers$ | async" [value]="availableMember">\n            <ngm-display-behaviour [option]="availableMember" [displayBehaviour]="displayBehaviour"></ngm-display-behaviour>\n        </mat-list-option>\n    </mat-selection-list>\n</ng-container>\n\n<ngm-member-tree class="flex-1" *ngIf="parameter?.referenceDimension"\n    [dataSettings]="dataSettings"\n    [dimension]="dimension$ | async"\n    [options]="options"\n    [ngModel]="slicer"\n    (ngModelChange)="onSlicerChange($event)"\n></ngm-member-tree>\n',host:{class:"ngm-parameter"},styles:[parameter_componentngResource_default()]})],NgmParameterComponent)},"./packages/angular/selection/advanced-filter/advanced-filter.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{JJ:()=>NgmAdvancedFilterComponent});var asyncToGenerator=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.js");var _NgmAdvancedFilterComponent,advanced_filter_componentngResource=__webpack_require__("./packages/angular/selection/advanced-filter/advanced-filter.component.scss?ngResource"),advanced_filter_componentngResource_default=__webpack_require__.n(advanced_filter_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),dialog=__webpack_require__("./node_modules/@angular/material/fesm2022/dialog.mjs"),src=__webpack_require__("./packages/core/src/index.ts"),value_help_component=__webpack_require__("./packages/angular/controls/value-help/value-help.component.ts"),firstValueFrom=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/firstValueFrom.js"),types=__webpack_require__("./packages/angular/entity/types.ts"),property_select_component=__webpack_require__("./packages/angular/entity/property-select/property-select.component.ts");class ExpressionItem{constructor(parent){this.parent=parent}}class ExpressionGroupItem extends ExpressionItem{constructor(operator,parent){super(parent),this.operator=operator,this.children=[]}}class ExpressionOperandItem extends ExpressionItem{constructor(expression,parent){super(parent),this.expression=expression}}let NgmAdvancedFilterComponent=(_NgmAdvancedFilterComponent=class NgmAdvancedFilterComponent{constructor(cdr,dialog,_viewContainerRef,data,dialogRef){this.cdr=cdr,this.dialog=dialog,this._viewContainerRef=_viewContainerRef,this.data=data,this.dialogRef=dialogRef,this.isDialogContainer=!0,this.PropertyCapacity=types.F,this.DISPLAY_BEHAVIOUR=src.CXV,this.FilterOperator=src.pgc,this.selectedExpressions=[],this.selectedGroups=[],this._dblClickDelay=200,this._preventChipClick=!1}ngOnInit(){this.entityType=this.data.entityType,this.syntax=this.data.syntax,this.data?.advancedFilter&&(this.rootGroup=convertFilter2ExpressionItem(this.data.advancedFilter,null),this.currentGroup=this.rootGroup),this.syntax===src.GYg.MDX?this.operators=function getMDXOperators(){return[src.pgc.EQ,src.pgc.NE].map((o=>({value:o,label:src.bl9[o]})))}():this.operators=function getAllOperators(){return[src.pgc.EQ,src.pgc.NE,src.pgc.BT,src.pgc.GT,src.pgc.GE,src.pgc.LT,src.pgc.LE].map((o=>({value:o,label:src.bl9[o]})))}()}get selectedDimension(){return this._selectedDimension}set selectedDimension(value){this._selectedDimension=value}get filterableColumns(){return(0,src.n6Q)(this.entityType)}getEntityProperty(name){return(0,src.ZBB)(this.entityType,name)}addCondition(parent,afterExpression){this.cancelOperandAdd();const operandItem=new ExpressionOperandItem({dimension:null,operator:null,and:!0,members:null},parent);if(afterExpression){const index=parent.children.indexOf(afterExpression);parent.children.splice(index+1,0,operandItem)}else parent.children.push(operandItem);this.enterExpressionEdit(operandItem)}addAndGroup(parent,afterExpression){this.addGroup(src.vLo.And,parent,afterExpression)}addOrGroup(parent,afterExpression){this.addGroup(src.vLo.Or,parent,afterExpression)}endGroup(groupItem){this.currentGroup=groupItem.parent}commitOperandEdit(){this.editedExpression&&(this.editedExpression.expression.dimension=this.selectedDimension,this.editedExpression.expression.operator=this.selectedCondition,this.editedExpression.expression.members=[{key:this.searchValue,value:this.searchValue}],this.editedExpression.expression.operator!==src.pgc.BT||(0,src.kKJ)(this.highValue)||this.editedExpression.expression.members.push({key:this.highValue,value:this.highValue}),this.editedExpression.inEditMode=!1,this.editedExpression=null)}cancelOperandAdd(){this.addModeExpression&&(this.addModeExpression.inAddMode=!1,this.addModeExpression=null)}cancelOperandEdit(){this.editedExpression&&(this.editedExpression.inEditMode=!1,this.editedExpression.expression.dimension||this.deleteItem(this.editedExpression),this.editedExpression=null)}operandCanBeCommitted(){return this.selectedDimension&&this.selectedCondition&&!!this.searchValue}exitOperandEdit(){this.editedExpression&&(this.operandCanBeCommitted()?this.commitOperandEdit():this.cancelOperandEdit())}isExpressionGroup(expression){return expression instanceof ExpressionGroupItem}addGroup(operator,parent,afterExpression){this.cancelOperandAdd();const groupItem=new ExpressionGroupItem(operator,parent);if(parent)if(afterExpression){const index=parent.children.indexOf(afterExpression);parent.children.splice(index+1,0,groupItem)}else parent.children.push(groupItem);else this.rootGroup=groupItem;this.addCondition(groupItem),this.currentGroup=groupItem}enterExpressionEdit(expressionItem){this.clearSelection(),this.exitOperandEdit(),this.cancelOperandAdd(),this.editedExpression&&(this.editedExpression.inEditMode=!1),expressionItem.hovered=!1,this.selectedDimension=expressionItem.expression.dimension,this.selectedCondition=expressionItem.expression.operator?expressionItem.expression.operator:null,this.searchValue=expressionItem.expression.members?.[0]?.value,this.highValue=expressionItem.expression.members?.[1]?.value,expressionItem.inEditMode=!0,this.editedExpression=expressionItem,this.cdr.detectChanges(),this.selectedDimension||this.columnSelect.focus()}getPropertyByName(path){return this.filterableColumns.find((item=>item.name===path))}clearSelection(){for(const group of this.selectedGroups)group.selected=!1;this.selectedGroups=[];for(const expr of this.selectedExpressions)expr.selected=!1;this.selectedExpressions=[],this.toggleContextMenu()}enterExpressionAdd(expressionItem){this.clearSelection(),this.exitOperandEdit(),this.addModeExpression&&(this.addModeExpression.inAddMode=!1),expressionItem.inAddMode=!0,this.addModeExpression=expressionItem,expressionItem.selected&&this.toggleExpression(expressionItem)}onToggleExpression(expressionItem){this.exitOperandEdit(),this.toggleExpression(expressionItem)}toggleExpression(expressionItem){if(expressionItem.selected=!expressionItem.selected,expressionItem.selected)this.selectedExpressions.push(expressionItem);else{const index=this.selectedExpressions.indexOf(expressionItem);this.selectedExpressions.splice(index,1),this.deselectParentRecursive(expressionItem)}}toggleContextMenu(){const contextualGroup=this.findSingleSelectedGroup();(contextualGroup||this.selectedExpressions.length>1)&&(this.contextualGroup=contextualGroup,contextualGroup&&(this.filteringLogics=[{label:this.resourceStrings?.igx_grid_filter_operator_and,selected:contextualGroup.operator===src.vLo.And},{label:this.resourceStrings?.igx_grid_filter_operator_or,selected:contextualGroup.operator===src.vLo.Or}]))}findSingleSelectedGroup(){for(const group of this.selectedGroups){if(this.selectedExpressions.every((op=>this.isInsideGroup(op,group))))return group}return null}isInsideGroup(item,group){return!!item&&(item.parent===group||this.isInsideGroup(item.parent,group))}deleteItem(expressionItem){if(!expressionItem.parent)return this.rootGroup=null,void(this.currentGroup=null);expressionItem===this.currentGroup&&(this.currentGroup=this.currentGroup.parent);const children=expressionItem.parent.children,index=children.indexOf(expressionItem);children.splice(index,1),children.length||this.deleteItem(expressionItem.parent)}onChipRemove(expressionItem){this.deleteItem(expressionItem)}onChipClick(expressionItem){this._clickTimer=setTimeout((()=>{this._preventChipClick||this.onToggleExpression(expressionItem),this._preventChipClick=!1}),this._dblClickDelay)}onChipDblClick(expressionItem){clearTimeout(this._clickTimer),this._preventChipClick=!0,this.enterExpressionEdit(expressionItem)}getConditionFriendlyName(name){return this.resourceStrings?.[`igx_grid_filter_${name}`]||name}getConditionList(){return this.selectedDimension?function getFilterConditionByProperty(dim){return Object.keys(src.pgc)}(this.selectedDimension):[]}onGroupClick(groupItem){this.toggleGroup(groupItem)}toggleGroup(groupItem){this.exitOperandEdit(),this.currentGroup=groupItem}toggleGroupRecursive(groupItem,selected){}deselectParentRecursive(expressionItem){}invokeClick(eventArgs){"Enter"!==eventArgs.key&&" "!==eventArgs.key&&"Spacebar"!==eventArgs.key||(eventArgs.preventDefault(),eventArgs.currentTarget.click())}context(expression,afterExpression){return{$implicit:expression,afterExpression}}onClearButtonClick(event){this.rootGroup=null}onChipSelectionEnd(){const contextualGroup=this.findSingleSelectedGroup();(contextualGroup||this.selectedExpressions.length>1)&&(this.contextualGroup=contextualGroup)}getConditionByFilterOperator(operator){return{iconName:"contains",isUnary:!0}}openValueHelp(dimension){var _this=this;return(0,asyncToGenerator.Z)((function*(){return(0,firstValueFrom.z)(_this.dialog.open(value_help_component.v,{viewContainerRef:_this._viewContainerRef,data:{dataSettings:_this.data.dataSettings,dimension,options:{initialLevel:1,searchable:!0,showAllMember:!1}}}).afterClosed())}))()}openLowValueHelp(dimension){var _this2=this;return(0,asyncToGenerator.Z)((function*(){const slicer=yield _this2.openValueHelp(dimension);slicer&&(_this2.searchValue=slicer.members?.[0]?.value)}))()}openHighValueHelp(dimension){var _this3=this;return(0,asyncToGenerator.Z)((function*(){const slicer=yield _this3.openValueHelp(dimension);slicer&&(_this3.highValue=slicer.members?.[0]?.value)}))()}onApply(){this.dialogRef.close(convertExpressionItem2Filter(this.rootGroup))}isDate(value){return"[object Date]"===Object.prototype.toString.call(value)}},_NgmAdvancedFilterComponent.ctorParameters=()=>[{type:core.ChangeDetectorRef},{type:dialog.uw},{type:core.ViewContainerRef},{type:void 0,decorators:[{type:core.Optional},{type:core.Inject,args:[dialog.WI]}]},{type:dialog.so,decorators:[{type:core.Optional}]}],_NgmAdvancedFilterComponent.propDecorators={isDialogContainer:[{type:core.HostBinding,args:["class.ngm-dialog-container"]}],syntax:[{type:core.Input}],entitySet:[{type:core.Input}],entityType:[{type:core.Input}],resourceStrings:[{type:core.Input}],columnSelect:[{type:core.ViewChild,args:["columnSelect",{read:property_select_component.$}]}]},_NgmAdvancedFilterComponent);function convertExpressionItem2Filter(item){return item instanceof ExpressionGroupItem?{filteringLogic:item.operator,children:item.children.map((item=>convertExpressionItem2Filter(item)))}:item instanceof ExpressionOperandItem?item.expression:null}function convertFilter2ExpressionItem(iFilter,parent){if((0,src.wMY)(iFilter)){const exGroupItem=new ExpressionGroupItem(iFilter.filteringLogic,parent);return exGroupItem.children=iFilter.children.map((item=>convertFilter2ExpressionItem(item,exGroupItem))),exGroupItem}return new ExpressionOperandItem(iFilter,parent)}NgmAdvancedFilterComponent=(0,tslib_es6.gn)([(0,core.Component)({selector:"ngm-advanced-filter",template:'<header mat-dialog-title cdkDrag cdkDragRootElement=".cdk-overlay-pane" cdkDragHandle>\n    <h4 class="pac-typography__h6" style="pointer-events: none;">\n        {{ \'Ngm.AdvancedFilter.Title\' | translate: {Default: \'Combination Slicer\'} }}\n    </h4>\n    <div class="pac-filter-legend">\n        <div class="pac-filter-legend__item pac-filter-legend__item--and">\n            <span>{{ \'Ngm.AdvancedFilter.AND\' | translate: {Default: \'AND\'} }}</span>\n        </div>\n        <div class="pac-filter-legend__item pac-filter-legend__item--or">\n            <span>{{ \'Ngm.AdvancedFilter.OR\' | translate: {Default: \'OR\'} }}</span>\n        </div>\n    </div>\n</header>\n\n<mat-dialog-content class="mat-typography">\n    <ng-container *ngIf="!rootGroup">\n        <div class="flex gap-2">\n            <button #addRootAndGroupButton mat-stroked-button color="accent" ngmAppearance="dashed"\n                (click)="addAndGroup()"\n            >\n                <mat-icon>add</mat-icon>\n                <span>"{{ \'Ngm.AdvancedFilter.AND\' | translate: {Default: \'AND\'} }}" {{ \'Ngm.AdvancedFilter.GROUP\' | translate: {Default: \'GROUP\'} }}</span>\n            </button>\n\n            <button mat-stroked-button color="accent" ngmAppearance="dashed" (click)="addOrGroup()">\n                <mat-icon>add</mat-icon>\n                <span>"{{ \'Ngm.AdvancedFilter.OR\' | translate: {Default: \'OR\'} }}" {{ \'Ngm.AdvancedFilter.GROUP\' | translate: {Default: \'GROUP\'} }}</span>\n            </button>\n        </div>\n        \n        <div class="pac-filter-empty">\n            <h6 class="pac-filter-empty__title">\n                {{ \'Ngm.AdvancedFilter.Tips\' | translate: {Default: \'Start with creating a group of conditions linked with "And" or "Or"\'} }}\n            </h6>\n        </div>\n    </ng-container>\n\n    <ng-template #filterOperandTemplate let-expressionItem>\n        <div *ngIf="!expressionItem.inEditMode"\n            class="pac-filter-tree__expression-item"\n            (mouseenter)="expressionItem.hovered = true"\n            (mouseleave)="expressionItem.hovered = false"\n            >\n\n            <mat-chip-listbox >\n                <mat-chip-option [value]="expressionItem" [selected]="expressionItem.selected" removable selectable\n                    (removed)="onChipRemove(expressionItem)">\n                    <mat-chip-avatar>\n                        <button mat-icon-button displayDensity="cosy" (click)="enterExpressionEdit(expressionItem)">\n                            <mat-icon fontSet="material-icons-outlined">edit</mat-icon>\n                        </button>\n                    </mat-chip-avatar>\n                    <span class="pac-filter-tree__expression-column">{{ expressionItem.columnHeader || expressionItem.expression.dimension?.dimension }}</span>\n                    <span class="pac-filter-tree__expression-condition">\n                        {{ getConditionFriendlyName(expressionItem.expression.operator) }}\n                    </span>\n                    <span >\n                        {{ isDate(expressionItem.expression.members?.[0].value) ? (expressionItem.expression.members?.[0].value | date) : expressionItem.expression.members?.[0].value }}\n                    </span>\n                    <span *ngIf="expressionItem.expression.operator === FilterOperator.BT">\n                        =>\n                        {{ isDate(expressionItem.expression.members?.[1]?.value) ? (expressionItem.expression.members?.[1]?.value | date) : expressionItem.expression.members?.[1]?.value }}\n                    </span>\n\n                    <button matChipRemove>\n                        <mat-icon>cancel</mat-icon>\n                    </button>\n                </mat-chip-option>\n              </mat-chip-listbox>\n\n            <div class="pac-filter-tree__expression-actions"\n                *ngIf="(expressionItem.selected && selectedExpressions.length === 1) || expressionItem.hovered">\n            </div>\n        </div>\n\n        <div *ngIf="expressionItem.inEditMode"\n             #editingInputsContainer\n             class="pac-filter-tree__inputs flex gap-2"\n            >\n\n            <ngm-property-select #columnSelect floatLabel="always" displayDensity="cosy"\n                required\n                [entityType]="entityType"\n                [capacities]="[PropertyCapacity.Dimension]"\n                [ngModel]="selectedDimension"\n                (ngModelChange)="selectedDimension=$event">\n            </ngm-property-select>\n\n            <mat-form-field appearance="fill" floatLabel="always" displayDensity="cosy">\n                <mat-label>\n                    {{ \'Ngm.AdvancedFilter.Operator\' | translate: {Default: \'Operator\'} }}\n                </mat-label>\n                <mat-select required [(ngModel)]="selectedCondition"\n                    [disabled]="!selectedDimension">\n                  <mat-option *ngFor="let operator of operators" [value]="operator.value">\n                    <span class="pac-grid__filtering-dropdown-text">{{operator.label}}</span>\n                  </mat-option>\n                </mat-select>\n            </mat-form-field>\n            \n            <mat-form-field *ngIf="selectedDimension" appearance="fill" floatLabel="always" displayDensity="cosy">\n                <mat-label>{{ \'Ngm.AdvancedFilter.Value\' | translate: {Default: \'Value\'} }}</mat-label>\n                <input matInput [(ngModel)]="searchValue" [disabled]="!selectedDimension" required>\n                <button mat-icon-button matSuffix [disabled]="!selectedDimension" (click)="openLowValueHelp(selectedDimension)">\n                    <mat-icon>help_outline</mat-icon>\n                </button>\n            </mat-form-field>\n\n            <mat-form-field *ngIf="selectedDimension && selectedCondition === FilterOperator.BT" appearance="fill" floatLabel="always" displayDensity="cosy">\n                <mat-label>{{ \'Ngm.AdvancedFilter.Value\' | translate: {Default: \'Value\'} }}</mat-label>\n                <input matInput [(ngModel)]="highValue" [disabled]="!selectedDimension" required>\n                <button mat-icon-button matSuffix [disabled]="!selectedDimension" (click)="openHighValueHelp(selectedDimension)">\n                    <mat-icon>help_outline</mat-icon>\n                </button>\n            </mat-form-field>\n\n            <div class="pac-filter-tree__inputs-actions">\n                <button mat-icon-button color="primary"\n                        [disabled]="!operandCanBeCommitted()"\n                        (click)="commitOperandEdit()">\n                    <mat-icon>check</mat-icon>\n                </button>\n                <button mat-icon-button ngmAppearance="danger"\n                        (click)="cancelOperandEdit()">\n                    <mat-icon>close</mat-icon>\n                </button>\n            </div>\n        </div>\n    </ng-template>\n    \n    <ng-template #addExpressionsTemplate let-expressionItem let-afterExpression="afterExpression">\n        <button #addConditionButton\n            mat-stroked-button color="accent" ngmAppearance="dashed"\n                [disabled]="!!editedExpression"\n                (click)="addCondition(expressionItem, afterExpression)"\n        >\n            <mat-icon>add</mat-icon>\n            <span>{{ \'Ngm.AdvancedFilter.Condition\' | translate: {Default: \'Condition\'} }}</span>\n        </button>\n\n        <button mat-stroked-button color="accent" ngmAppearance="dashed"\n                [disabled]="!!editedExpression"\n                (click)="addAndGroup(expressionItem, afterExpression)">\n                <mat-icon>add</mat-icon>\n            <span>{{ \'Ngm.AdvancedFilter.AddGroup\' | translate: {Default: \'"ADD" GROUP\'} }}</span>\n        </button>\n\n        <button mat-stroked-button color="accent" ngmAppearance="dashed"\n                [disabled]="!!editedExpression"\n                (click)="addOrGroup(expressionItem, afterExpression)">\n            <mat-icon>add</mat-icon>\n            <span>{{ \'Ngm.AdvancedFilter.OrGroup\' | translate: {Default: \'"OR" GROUP\'} }}</span>\n        </button>\n    </ng-template>\n\n    <ng-template #expressionTreeTemplate let-expressionItem>\n        <div class="pac-filter-tree">\n            <div tabindex="0"\n                 class="pac-filter-tree__line"\n                 [ngClass]="{\n                    \'pac-filter-tree__line--and\': expressionItem.operator === 0,\n                    \'pac-filter-tree__line--or\': expressionItem.operator === 1,\n                    \'pac-filter-tree__line--selected\': expressionItem.selected\n                 }"\n                 (keydown)="invokeClick($event)"\n                 (click)="onGroupClick(expressionItem)"\n            ></div>\n\n            <div class="pac-filter-tree__expression">\n                <ng-container *ngFor="let expr of expressionItem.children">\n                    <ng-container *ngTemplateOutlet="isExpressionGroup(expr) ? expressionTreeTemplate : filterOperandTemplate; context: context(expr)"></ng-container>\n                </ng-container>\n                <div *ngIf="currentGroup === expressionItem" class="pac-filter-tree__buttons flex gap-4"\n                    #currentGroupButtonsContainer\n                >\n                    <ng-container *ngTemplateOutlet="addExpressionsTemplate; context: context(expressionItem)"></ng-container>\n                    <button mat-stroked-button color="accent" \n                            *ngIf="expressionItem !== rootGroup"\n                            [disabled]="!!editedExpression || expressionItem.children.length < 2"\n                            (click)="endGroup(expressionItem)">\n                        <span>{{ \'Ngm.AdvancedFilter.EndGroup\' | translate: {Default: \'END GROUP\'} }}</span>\n                    </button>\n\n                    <button mat-stroked-button color="accent" ngmAppearance="danger"\n                            *ngIf="expressionItem !== rootGroup"\n                            [disabled]="!!editedExpression"\n                            (click)="onChipRemove(expressionItem)">\n                        <span>{{ \'Ngm.AdvancedFilter.DeleteGroup\' | translate: {Default: \'DELETE GROUP\'} }}</span>\n                    </button>\n                </div>\n            </div>\n        </div>\n\n    </ng-template>\n\n    <ng-container *ngIf="rootGroup">\n        <ng-container *ngTemplateOutlet="expressionTreeTemplate; context: context(rootGroup)"></ng-container>\n    </ng-container>\n\n</mat-dialog-content>\n<mat-dialog-actions>\n    <button mat-button (click)="onClearButtonClick($event)">\n        {{ \'Ngm.Common.Clear\' | translate: {Default: \'Clear\'} }}\n    </button>\n    <div ngmButtonGroup>\n        <button mat-button mat-dialog-close>{{ \'Ngm.Common.Cancel\' | translate: {Default: \'Cancel\'} }}</button>\n        <button mat-raised-button color="accent" (click)="onApply()" cdkFocusInitial>{{ \'Ngm.Common.Apply\' | translate: {Default: \'Apply\'} }}</button>\n    </div>\n</mat-dialog-actions>\n',host:{class:"ngm-advanced-filter"},styles:[advanced_filter_componentngResource_default()]}),(0,tslib_es6.w6)("design:paramtypes",[core.ChangeDetectorRef,dialog.uw,core.ViewContainerRef,Object,dialog.so])],NgmAdvancedFilterComponent)},"./packages/angular/selection/advanced-slicer/advanced-slicer.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{m:()=>NgmAdvancedSlicerComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.js");var _NgmAdvancedSlicerComponent,advanced_slicer_componentngResource=__webpack_require__("./packages/angular/selection/advanced-slicer/advanced-slicer.component.scss?ngResource"),advanced_slicer_componentngResource_default=__webpack_require__.n(advanced_slicer_componentngResource),drag_drop=__webpack_require__("./node_modules/@angular/cdk/fesm2022/drag-drop.mjs"),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),rxjs_interop=__webpack_require__("./node_modules/@angular/core/fesm2022/rxjs-interop.mjs"),fesm2022_forms=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs"),fesm2022_button=__webpack_require__("./node_modules/@angular/material/fesm2022/button.mjs"),chips=__webpack_require__("./node_modules/@angular/material/fesm2022/chips.mjs"),dialog=__webpack_require__("./node_modules/@angular/material/fesm2022/dialog.mjs"),divider=__webpack_require__("./node_modules/@angular/material/fesm2022/divider.mjs"),icon=__webpack_require__("./node_modules/@angular/material/fesm2022/icon.mjs"),input=__webpack_require__("./node_modules/@angular/material/fesm2022/input.mjs"),menu=__webpack_require__("./node_modules/@angular/material/fesm2022/menu.mjs"),fesm2022_select=__webpack_require__("./node_modules/@angular/material/fesm2022/select.mjs"),slide_toggle=__webpack_require__("./node_modules/@angular/material/fesm2022/slide-toggle.mjs"),tooltip=__webpack_require__("./node_modules/@angular/material/fesm2022/tooltip.mjs"),common_module=__webpack_require__("./packages/angular/common/common.module.ts"),core_service=__webpack_require__("./packages/angular/core/core.service.ts"),types=__webpack_require__("./packages/angular/entity/types.ts"),entity_module=__webpack_require__("./packages/angular/entity/entity.module.ts"),parameter_module=__webpack_require__("./packages/angular/parameter/parameter.module.ts"),src=__webpack_require__("./packages/core/src/index.ts"),ngx_translate_core=__webpack_require__("./node_modules/@ngx-translate/core/dist/fesm2022/ngx-translate-core.mjs"),BehaviorSubject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js"),filter=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/filter.js"),switchMap=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/switchMap.js"),map=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),startWith=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/startWith.js");const ADVANCED_SLICER_OPERATORS=[{value:src.VQ4.Equal,label:"Equal"},{value:src.VQ4.NotEqual,label:"Not Equal"},{value:src.VQ4.LessThan,label:"Less Than"},{value:src.VQ4.GreaterThan,label:"Greater Than"},{value:src.VQ4.LessEqual,label:"Less Equal"},{value:src.VQ4.GreaterEqual,label:"Greater Equal"},{value:src.VQ4.Between,label:"Between",valueSize:2},{value:src.VQ4.NotBetween,label:"NotBetween",valueSize:2},{value:src.VQ4.TopCount,label:"Top Count",hasOther:!0},{value:src.VQ4.BottomCount,label:"Bottom Count",hasOther:!0},{value:src.VQ4.TopPercent,label:"Top Percent",hasOther:!0},{value:src.VQ4.BottomPercent,label:"Bottom Percent",hasOther:!0},{value:src.VQ4.TopSum,label:"Top Sum",hasOther:!0},{value:src.VQ4.BottomSum,label:"Bottom Sum",hasOther:!0}];let NgmAdvancedSlicerComponent=((_NgmAdvancedSlicerComponent=class NgmAdvancedSlicerComponent{get dataSettings(){return this.dataSettings$.value}set dataSettings(value){this.dataSettings$.next(value)}constructor(data){this.data=data,this.isDialogContainer=!0,this.DisplayBehaviour=src.CXV,this.PropertyCapacity=types.F,this.dsCoreService=(0,core.inject)(core_service.q),this.translateService=(0,core.inject)(ngx_translate_core.sK),this._formBuilder=(0,core.inject)(fesm2022_forms.qu),this.dialogRef=(0,core.inject)(dialog.so,{optional:!0}),this.dataSettings$=new BehaviorSubject.X(null),this.formGroup=new fesm2022_forms.cw({context:new fesm2022_forms.NI,path:new fesm2022_forms.NI,operator:new fesm2022_forms.NI,value:this._formBuilder.array([null,null]),measure:new fesm2022_forms.NI(null),other:new fesm2022_forms.NI}),this.entityType$=this.dataSettings$.pipe((0,filter.h)(src.vJr),(0,switchMap.w)((({dataSource,entitySet})=>this.dsCoreService.selectEntitySet(dataSource,entitySet))),(0,map.U)((({entityType})=>entityType))),this.operator=(0,rxjs_interop.O4)(this.formGroup.valueChanges.pipe((0,startWith.O)(this.formGroup.value),(0,map.U)((({operator})=>(operator=operator||this.formGroup.value.operator,ADVANCED_SLICER_OPERATORS.find((item=>item.value===operator))))))),this.to=(0,core.computed)((()=>2===this.operator()?.valueSize)),this.hasOther=(0,core.computed)((()=>this.operator()?.hasOther)),this.advancedSlicerOperators=(0,rxjs_interop.O4)(this.translateService.stream("Ngm.Selection.ADVANCED_SLICER").pipe((0,map.U)((i18n=>ADVANCED_SLICER_OPERATORS.map((item=>({...item,label:i18n[item.value]??item.label}))))))),this._operatorChanged=this.formGroup.get("operator").valueChanges.pipe((0,rxjs_interop.sL)()).subscribe((operator=>{2!==ADVANCED_SLICER_OPERATORS.find((item=>item.value===operator))?.valueSize&&this.formGroup.patchValue({value:[this.formGroup.value.value[0],null]})})),this.dataSettings=this.data?.dataSettings,this.data?.model&&this.formGroup.patchValue(this.data.model),this.data}onApply(){this.dialogRef.close(this.formGroup.value)}}).ctorParameters=()=>[{type:void 0,decorators:[{type:core.Optional},{type:core.Inject,args:[dialog.WI]}]}],_NgmAdvancedSlicerComponent.propDecorators={isDialogContainer:[{type:core.HostBinding,args:["class.ngm-dialog-container"]}],dataSettings:[{type:core.Input}]},_NgmAdvancedSlicerComponent);NgmAdvancedSlicerComponent=(0,tslib_es6.gn)([(0,core.Component)({standalone:!0,imports:[common.CommonModule,fesm2022_forms.UX,drag_drop._t,dialog.Is,icon.Ps,fesm2022_button.ot,input.c,chips.Hi,slide_toggle.rP,tooltip.AV,divider.t,menu.Tx,fesm2022_select.LD,ngx_translate_core.aw,common_module.N,entity_module.Q,parameter_module.A],selector:"ngm-advanced-slicer",template:'<header mat-dialog-title cdkDrag cdkDragRootElement=".cdk-overlay-pane" cdkDragHandle>\n    <h4 style="pointer-events: none;">\n        {{ \'Ngm.AdvancedSlicer.TITLE\' | translate: {Default: "Advanced Slicer"} }}\n    </h4>\n</header>\n\n<mat-dialog-content class="mat-typography">\n    <form [formGroup]="formGroup" class="flex flex-col justify-start items-stretch gap-2">\n        <div>{{ \'Ngm.AdvancedSlicer.CONTEXT\' | translate: {Default: "Context"} }}</div>\n\n        <ngm-property-array class="ngm-advanced-slicer__context"\n            formControlName="context"\n            [dataSettings]="dataSettings"\n            [entityType]="entityType$ | async"\n            [capacities]="[PropertyCapacity.Dimension]"\n        ></ngm-property-array>\n\n        <ngm-select formControlName="operator"\n            [label]="\'Ngm.AdvancedSlicer.OPERATOR\' | translate: {Default: \'Operator\'}"\n            [selectOptions]="advancedSlicerOperators()"\n        >\n            <ng-template ngmOptionContent let-operator>\n                <ngm-display-behaviour class="flex-1" [option]="operator" [displayBehaviour]="DisplayBehaviour.auto"></ngm-display-behaviour>\n            </ng-template>\n            <mat-slide-toggle ngmSuffix *ngIf="hasOther()" formControlName="other" (click)="$event.stopPropagation();">\n                {{ \'Ngm.AdvancedSlicer.ENABLE_OTHER\' | translate: {Default: "Enable Other"} }}\n            </mat-slide-toggle>\n        </ngm-select>\n\n        <div class="flex justify-start items-center gap-2" formArrayName="value">\n            <ngm-parameter-select [label]=" to() ? (\'Ngm.AdvancedSlicer.VALUE_FROM\' | translate: {Default: \'From\'}) : (\'Ngm.AdvancedSlicer.VALUE\' | translate: {Default: \'Value\'}) "\n                [dataSettings]="dataSettings"\n                [entityType]="entityType$ | async"\n                formControlName="0"\n                >\n            </ngm-parameter-select>\n            <ngm-parameter-select *ngIf="to()"\n                [label]=" \'Ngm.AdvancedSlicer.VALUE_TO\' | translate: {Default: \'To\'} "\n                [dataSettings]="dataSettings"\n                [entityType]="entityType$ | async"\n                formControlName="1"\n                >\n            </ngm-parameter-select>\n        </div>\n\n        <ngm-measure-select searchable formControlName="measure"\n            [label]="\'Ngm.AdvancedSlicer.MEASURE\' | translate: {Default: \'Measure\'}"\n            [placeholder]=" \'Ngm.AdvancedSlicer.MeasureSelectPlaceholder\' | translate: {Default: \'select or create a measure\'} "\n            [dataSettings]="dataSettings"\n        >\n        </ngm-measure-select>\n    </form>\n</mat-dialog-content>\n\n<mat-dialog-actions>\n    <button mat-button>\n        {{ \'Ngm.Common.Reset\' | translate: {Default: "Reset"} }}\n    </button>\n    \n    <div ngmButtonGroup>\n        <button mat-button mat-dialog-close>\n            {{ \'Ngm.Common.Cancel\' | translate: {Default: "Cancel"} }}\n        </button>\n        <button mat-raised-button color="accent" (click)="onApply()" cdkFocusInitial>\n            {{ \'Ngm.Common.Apply\' | translate: {Default: "Apply"} }}\n        </button>\n    </div>\n</mat-dialog-actions>\n',styles:[advanced_slicer_componentngResource_default()]}),(0,tslib_es6.w6)("design:paramtypes",[Object])],NgmAdvancedSlicerComponent)},"./packages/angular/selection/base-slicers.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{y:()=>BaseSlicersComponent});var _BaseSlicersComponent,_home_runner_work_ocap_ocap_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),tslib__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./node_modules/tslib/tslib.es6.js"),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),_angular_material_dialog__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@angular/material/fesm2022/dialog.mjs"),_metad_ocap_angular_controls__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./packages/angular/controls/value-help/value-help.component.ts"),_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/core/src/index.ts"),_metad_ocap_angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/angular/core/services/core.service.ts"),_metad_ocap_angular_core__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./packages/angular/core/models/date-function.ts"),lodash_es__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/lodash-es/pick.js"),rxjs__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js"),rxjs__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/firstValueFrom.js"),_advanced_slicer_advanced_slicer_component__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./packages/angular/selection/advanced-slicer/advanced-slicer.component.ts"),_types__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/angular/selection/types.ts"),_advanced_filter__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/angular/selection/advanced-filter/advanced-filter.component.ts"),_timer___WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./packages/angular/selection/timer/time-filter-editor/time-filter-editor.component.ts");let BaseSlicersComponent=((_BaseSlicersComponent=class BaseSlicersComponent{constructor(){this.isSemanticCalendar=_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.IaF,this.coreService=(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.inject)(_metad_ocap_angular_core__WEBPACK_IMPORTED_MODULE_2__.z),this._dialog=(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.inject)(_angular_material_dialog__WEBPACK_IMPORTED_MODULE_3__.uw),this.viewContainerRef=(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.inject)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.ViewContainerRef),this.dataSettings$=new rxjs__WEBPACK_IMPORTED_MODULE_4__.X(null),this.entityType$=new rxjs__WEBPACK_IMPORTED_MODULE_4__.X(null),this.editable=(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.input)(!1,{transform:_angular_core__WEBPACK_IMPORTED_MODULE_1__.booleanAttribute}),this.dateVariables=this.coreService.getDateVariables().filter((variable=>!!variable.dateRange))}get dataSettings(){return this.dataSettings$.value}set dataSettings(value){this.dataSettings$.next(value)}get entityType(){return this.entityType$.value}set entityType(value){this.entityType$.next(value)}openSlicerCreator(property){var _this=this;return(0,_home_runner_work_ocap_ocap_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_5__.Z)((function*(){const entityType=_this.entityType;if(property===_types__WEBPACK_IMPORTED_MODULE_6__.cw.CombinationSlicer){const combinationSlicer=yield(0,rxjs__WEBPACK_IMPORTED_MODULE_7__.z)(_this._dialog.open(_advanced_filter__WEBPACK_IMPORTED_MODULE_8__.JJ,{viewContainerRef:_this.viewContainerRef,data:{dataSettings:_this.dataSettings,entityType,syntax:entityType.syntax}}).afterClosed());combinationSlicer&&(yield _this.addSlicer(combinationSlicer))}else if(property===_types__WEBPACK_IMPORTED_MODULE_6__.cw.AdvancedSlicer){const advancedSlicer=yield(0,rxjs__WEBPACK_IMPORTED_MODULE_7__.z)(_this._dialog.open(_advanced_slicer_advanced_slicer_component__WEBPACK_IMPORTED_MODULE_9__.m,{viewContainerRef:_this.viewContainerRef,data:{dataSettings:{..._this.dataSettings}}}).afterClosed());advancedSlicer&&(yield _this.addSlicer(advancedSlicer))}else property.semantics?.semantic===_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.ZRQ.Calendar?yield _this.openDynamicDateHelp(property):yield _this.openValueHelp(property)}))()}openDynamicDateHelp(property,variable){var _this2=this;return(0,_home_runner_work_ocap_ocap_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_5__.Z)((function*(){const timeRangesSlicer=yield(0,rxjs__WEBPACK_IMPORTED_MODULE_7__.z)(_this2._dialog.open(_timer___WEBPACK_IMPORTED_MODULE_10__.c,{viewContainerRef:_this2.viewContainerRef,data:{currentDate:"SYSTEMTIME",dataSettings:_this2.dataSettings,entityType:_this2.entityType,slicer:{dimension:{dimension:property.name},currentDate:_metad_ocap_angular_core__WEBPACK_IMPORTED_MODULE_11__.FN.TODAY,ranges:variable?[variable]:[]}}}).afterClosed());timeRangesSlicer&&_this2.addSlicer(timeRangesSlicer)}))()}addSlicer(slicer){return(0,_home_runner_work_ocap_ocap_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_5__.Z)((function*(){}))()}openValueHelp(property){var _this3=this;return(0,_home_runner_work_ocap_ocap_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_5__.Z)((function*(){const slicer=yield(0,rxjs__WEBPACK_IMPORTED_MODULE_7__.z)(_this3._dialog.open(_metad_ocap_angular_controls__WEBPACK_IMPORTED_MODULE_12__.v,{viewContainerRef:_this3.viewContainerRef,data:{dataSettings:(0,lodash_es__WEBPACK_IMPORTED_MODULE_13__.Z)(_this3.dataSettings,["dataSource","entitySet"]),dimension:{dimension:property.name},options:{selectionType:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.ucB.Multiple,searchable:!0,initialLevel:1}}}).afterClosed());slicer&&(yield _this3.addSlicer({...slicer}))}))()}openSlicerEditor(slicer){var _this4=this;return(0,_home_runner_work_ocap_ocap_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_5__.Z)((function*(){if((0,_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.wMY)(slicer))return yield(0,rxjs__WEBPACK_IMPORTED_MODULE_7__.z)(_this4._dialog.open(_advanced_filter__WEBPACK_IMPORTED_MODULE_8__.JJ,{viewContainerRef:_this4.viewContainerRef,data:{dataSettings:_this4.dataSettings,entityType:_this4.entityType,syntax:_this4.entityType.syntax,advancedFilter:(0,_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.XhB)(slicer)}}).afterClosed());if((0,_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.ieb)(slicer))return yield(0,rxjs__WEBPACK_IMPORTED_MODULE_7__.z)(_this4._dialog.open(_advanced_slicer_advanced_slicer_component__WEBPACK_IMPORTED_MODULE_9__.m,{viewContainerRef:_this4.viewContainerRef,data:{dataSettings:_this4.dataSettings,model:slicer}}).afterClosed());if((0,_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.yNm)(slicer))return yield(0,rxjs__WEBPACK_IMPORTED_MODULE_7__.z)(_this4._dialog.open(_timer___WEBPACK_IMPORTED_MODULE_10__.c,{data:{entityType:_this4.entityType,slicer}}).afterClosed());{const dialogRef=_this4._dialog.open(_metad_ocap_angular_controls__WEBPACK_IMPORTED_MODULE_12__.v,{viewContainerRef:_this4.viewContainerRef,data:{dimension:(0,lodash_es__WEBPACK_IMPORTED_MODULE_13__.Z)(slicer?.dimension,"dimension","hierarchy","displayBehaviour"),slicer,dataSettings:_this4.dataSettings,options:{selectionType:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.ucB.Multiple,searchable:!0,initialLevel:1}}});return yield(0,rxjs__WEBPACK_IMPORTED_MODULE_7__.z)(dialogRef.afterClosed())}}))()}}).propDecorators={dataSettings:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input}],entityType:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input}],editable:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input,args:[{isSignal:!0,alias:"editable",required:!1,transform:void 0}]}]},_BaseSlicersComponent);BaseSlicersComponent=(0,tslib__WEBPACK_IMPORTED_MODULE_14__.gn)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.Directive)({})],BaseSlicersComponent)},"./packages/angular/selection/selection.module.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{T:()=>NgmSelectionModule});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/tslib/tslib.es6.js"),_angular_cdk_drag_drop__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@angular/cdk/fesm2022/drag-drop.mjs"),_angular_common__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),_angular_forms__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs"),_angular_material_button__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@angular/material/fesm2022/button.mjs"),_angular_material_chips__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@angular/material/fesm2022/chips.mjs"),_angular_material_dialog__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@angular/material/fesm2022/dialog.mjs"),_angular_material_divider__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./node_modules/@angular/material/fesm2022/divider.mjs"),_angular_material_icon__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@angular/material/fesm2022/icon.mjs"),_angular_material_input__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@angular/material/fesm2022/input.mjs"),_angular_material_menu__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./node_modules/@angular/material/fesm2022/menu.mjs"),_angular_material_select__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./node_modules/@angular/material/fesm2022/select.mjs"),_angular_material_slide_toggle__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/@angular/material/fesm2022/slide-toggle.mjs"),_angular_material_tooltip__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./node_modules/@angular/material/fesm2022/tooltip.mjs"),_metad_ocap_angular_common__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("./packages/angular/common/common.module.ts"),_metad_ocap_angular_controls__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("./packages/angular/controls/controls.module.ts"),_metad_ocap_angular_core__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("./packages/angular/core/core.module.ts"),_metad_ocap_angular_core__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("./packages/angular/core/directives/button-group.directive.ts"),_metad_ocap_angular_entity__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("./packages/angular/entity/entity.module.ts"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./node_modules/@ngx-translate/core/dist/fesm2022/ngx-translate-core.mjs"),_advanced_slicer_advanced_slicer_component__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("./packages/angular/selection/advanced-slicer/advanced-slicer.component.ts"),_slicer_bar_slicer_bar_component__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/angular/selection/slicer-bar/slicer-bar.component.ts"),_slicer_slicer_component__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/angular/selection/slicer/slicer.component.ts"),_slicers_slicers_component__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/angular/selection/slicers/slicers.component.ts"),_metad_ocap_angular_parameter__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("./packages/angular/parameter/parameter.module.ts");let NgmSelectionModule=class NgmSelectionModule{};NgmSelectionModule=(0,tslib__WEBPACK_IMPORTED_MODULE_0__.gn)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.NgModule)({declarations:[_slicer_slicer_component__WEBPACK_IMPORTED_MODULE_2__.N,_slicers_slicers_component__WEBPACK_IMPORTED_MODULE_3__.H,_slicer_bar_slicer_bar_component__WEBPACK_IMPORTED_MODULE_4__.K],imports:[_angular_common__WEBPACK_IMPORTED_MODULE_5__.CommonModule,_angular_forms__WEBPACK_IMPORTED_MODULE_6__.UX,_angular_cdk_drag_drop__WEBPACK_IMPORTED_MODULE_7__._t,_angular_material_dialog__WEBPACK_IMPORTED_MODULE_8__.Is,_angular_material_icon__WEBPACK_IMPORTED_MODULE_9__.Ps,_angular_material_button__WEBPACK_IMPORTED_MODULE_10__.ot,_angular_material_input__WEBPACK_IMPORTED_MODULE_11__.c,_angular_material_chips__WEBPACK_IMPORTED_MODULE_12__.Hi,_angular_material_slide_toggle__WEBPACK_IMPORTED_MODULE_13__.rP,_angular_material_tooltip__WEBPACK_IMPORTED_MODULE_14__.AV,_angular_material_divider__WEBPACK_IMPORTED_MODULE_15__.t,_angular_material_menu__WEBPACK_IMPORTED_MODULE_16__.Tx,_angular_material_select__WEBPACK_IMPORTED_MODULE_17__.LD,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_18__.aw,_metad_ocap_angular_controls__WEBPACK_IMPORTED_MODULE_19__.$,_metad_ocap_angular_core__WEBPACK_IMPORTED_MODULE_20__.A,_metad_ocap_angular_common__WEBPACK_IMPORTED_MODULE_21__.N,_metad_ocap_angular_core__WEBPACK_IMPORTED_MODULE_22__.d,_metad_ocap_angular_parameter__WEBPACK_IMPORTED_MODULE_23__.A,_metad_ocap_angular_entity__WEBPACK_IMPORTED_MODULE_24__.Q,_advanced_slicer_advanced_slicer_component__WEBPACK_IMPORTED_MODULE_25__.m],exports:[_slicer_slicer_component__WEBPACK_IMPORTED_MODULE_2__.N,_slicers_slicers_component__WEBPACK_IMPORTED_MODULE_3__.H,_slicer_bar_slicer_bar_component__WEBPACK_IMPORTED_MODULE_4__.K]})],NgmSelectionModule)},"./packages/angular/selection/slicer-bar/slicer-bar.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{K:()=>SlicerBarComponent});var asyncToGenerator=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.js");var _SlicerBarComponent,slicer_bar_componentngResource=__webpack_require__("./packages/angular/selection/slicer-bar/slicer-bar.component.scss?ngResource"),slicer_bar_componentngResource_default=__webpack_require__.n(slicer_bar_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),fesm2022_forms=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs"),dialog=__webpack_require__("./node_modules/@angular/material/fesm2022/dialog.mjs"),src=__webpack_require__("./packages/core/src/index.ts"),BehaviorSubject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js"),filter=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/filter.js"),map=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),base_slicers=__webpack_require__("./packages/angular/selection/base-slicers.ts"),types=__webpack_require__("./packages/angular/selection/types.ts");let SlicerBarComponent=((_SlicerBarComponent=class SlicerBarComponent extends base_slicers.y{get slicers(){return this.slicers$.value}set slicers(value){this.slicers$.next(value)}get showCombinationSlicer(){return this.entityType?.syntax===src.GYg.SQL&&this.capacities?.includes(types.cw.CombinationSlicer)}get showAdvancedSlicer(){return this.entityType?.syntax===src.GYg.MDX&&this.capacities?.includes(types.cw.AdvancedSlicer)}get highlight(){return this.searchControl.value}constructor(data){super(),this.data=data,this.DisplayBehaviour=src.CXV,this.SlicersCapacity=types.cw,this.isDialogContainer=!0,this.slicers$=new BehaviorSubject.X([]),this.removed=new core.EventEmitter,this.valueChange=new core.EventEmitter,this.dimensions$=this.entityType$.pipe((0,filter.h)(src.vJr),(0,map.U)(src.n6Q)),this.dateVariables=this.coreService.getDateVariables().filter((variable=>!!variable.dateRange)),this.searchControl=new fesm2022_forms.NI("")}ngOnInit(){this.data&&(this.slicers=this.data.value,this.entityType=this.data.entityType,this.dataSettings=this.data.dataSettings,this.capacities=this.data.capacities)}removeSelectOption(member){this.removed.emit(member)}update(value,index){this.slicers=[...this.slicers],this.slicers[index]=value}remove(index){this.slicers=[...this.slicers],this.slicers.splice(index,1)}addSlicer(slicer){var _this=this;return(0,asyncToGenerator.Z)((function*(){_this.slicers=_this.slicers??[];const index=_this.slicers.findIndex((item=>(0,src.HpB)(item.dimension)===(0,src.HpB)(slicer.dimension)));index>-1?_this.update(slicer,index):_this.slicers=[..._this.slicers,slicer]}))()}}).ctorParameters=()=>[{type:void 0,decorators:[{type:core.Optional},{type:core.Inject,args:[dialog.WI]}]}],_SlicerBarComponent.propDecorators={isDialogContainer:[{type:core.HostBinding,args:["class.ngm-dialog-container"]}],slicers:[{type:core.Input}],capacities:[{type:core.Input}],removed:[{type:core.Output}],valueChange:[{type:core.Output}]},_SlicerBarComponent);SlicerBarComponent=(0,tslib_es6.gn)([(0,core.Component)({selector:"ngm-slicer-bar",template:'<header mat-dialog-title cdkDrag cdkDragRootElement=".cdk-overlay-pane" cdkDragHandle>\n  <h4 style="pointer-events: none;">\n    {{ \'Ngm.Selection.Slicers\' | translate: {Default: "Slicers"} }}\n  </h4>\n</header>\n\n<mat-dialog-content class="mat-typography">\n  <ng-container *ngFor="let slicer of slicers$ | async; index as i">\n    <ngm-slicer [slicer]="slicer"\n      [dataSettings]="dataSettings"\n      [entityType]="entityType"\n      [editable]="editable()"\n      (slicerChange)="update($event, i)"\n      (removed)="remove(i)">\n    </ngm-slicer>\n    <mat-divider></mat-divider>\n  </ng-container>\n</mat-dialog-content>\n\n<mat-dialog-actions style="display: flex; justify-content: space-between; align-items: center;">\n  <button mat-button color="primary" ngmAppearance="dashed" [matMenuTriggerFor]="menu">\n    <mat-icon>add</mat-icon>\n    {{ \'Ngm.Common.ADD\' | translate: {Default: "Add"} }}\n  </button>\n\n  <div ngmButtonGroup>\n    <button mat-button mat-dialog-close cdkFocusInitial>\n      {{ \'Ngm.Common.Cancel\' | translate: {Default: \'Cancel\'} }}\n    </button>\n    <button mat-raised-button color="accent" cdkFocusInitial [mat-dialog-close]="slicers">\n      {{ \'Ngm.Common.Apply\' | translate: {Default: \'Apply\'} }}\n    </button>\n  </div>\n</mat-dialog-actions>\n\n<mat-menu #menu="matMenu" class="ngm-density__compact">\n  <ngm-search class="px-1" [formControl]="searchControl" (click)="$event.stopPropagation()"></ngm-search>\n\n  <ng-container *ngFor="let property of dimensions$ | async">\n    <button mat-menu-item *ngIf="isSemanticCalendar(property); else menuItem" (click)="openSlicerCreator(property)"\n      [matMenuTriggerFor]="calendarMenu"\n      [matMenuTriggerData]="{property: property}"\n    >\n      <ngm-entity-property [property]="property" [displayBehaviour]="DisplayBehaviour.auto"\n        [highlight]="highlight">\n      </ngm-entity-property>\n    </button>\n\n    <ng-template #menuItem>\n      <button mat-menu-item (click)="openValueHelp(property)">\n        <ngm-entity-property [property]="property" [displayBehaviour]="DisplayBehaviour.auto"\n          [highlight]="highlight">\n        </ngm-entity-property>\n      </button>\n    </ng-template>\n  </ng-container>\n\n  <button mat-menu-item *ngIf="showCombinationSlicer"\n    (click)="$event.preventDefault();openSlicerCreator(SlicersCapacity.CombinationSlicer)">\n    <mat-icon>tune</mat-icon>\n    {{ \'Ngm.Selection.CombinationSlicer\' | translate: {Default: \'Combination Slicer\'} }}\n  </button>\n\n  <button mat-menu-item *ngIf="showAdvancedSlicer"\n    (click)="$event.preventDefault();openSlicerCreator(SlicersCapacity.AdvancedSlicer)">\n    <mat-icon>data_array</mat-icon>\n    {{ \'Ngm.Selection.AdvancedSlicer\' | translate: {Default: \'Advanced Slicer\'} }}\n  </button>\n</mat-menu>\n\n<mat-menu #calendarMenu="matMenu" class="ngm-density__compact">\n  <ng-template matMenuContent let-property="property">\n    <button mat-menu-item (click)="openValueHelp(property)">\n      <mat-icon fontSet="material-icons-outlined">people_outline</mat-icon>\n      {{ \'Ngm.Selection.DimensionMembers\' | translate: {Default: \'Dimension Members\'} }}\n    </button>\n\n    <button mat-menu-item *ngFor="let variable of dateVariables"\n      (click)="openDynamicDateHelp(property, variable.dateRange)">\n      {{variable.name}}\n    </button>\n    \n  </ng-template>\n</mat-menu>\n',styles:[slicer_bar_componentngResource_default()]}),(0,tslib_es6.w6)("design:paramtypes",[Object])],SlicerBarComponent)},"./packages/angular/selection/slicer/slicer.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{N:()=>SlicerComponent});var asyncToGenerator=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.js");var _SlicerComponent,slicer_componentngResource=__webpack_require__("./packages/angular/selection/slicer/slicer.component.scss?ngResource"),slicer_componentngResource_default=__webpack_require__.n(slicer_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),rxjs_interop=__webpack_require__("./node_modules/@angular/core/fesm2022/rxjs-interop.mjs"),src=__webpack_require__("./packages/core/src/index.ts"),ngx_translate_core=__webpack_require__("./node_modules/@ngx-translate/core/dist/fesm2022/ngx-translate-core.mjs"),BehaviorSubject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js"),combineLatest=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/combineLatest.js"),filter=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/filter.js"),map=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),combineLatestWith=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/combineLatestWith.js"),base_slicers=__webpack_require__("./packages/angular/selection/base-slicers.ts");let SlicerComponent=((_SlicerComponent=class SlicerComponent extends base_slicers.y{constructor(){super(...arguments),this.translate=(0,core.inject)(ngx_translate_core.sK),this.slicer$=new BehaviorSubject.X(null),this.removed=new core.EventEmitter,this.slicerChange=new core.EventEmitter,this.title$=(0,combineLatest.a)([this.slicer$.pipe((0,filter.h)((value=>!!value))),this.entityType$]).pipe((0,map.U)((([slicer,entityType])=>{const SELECTION=this.translate.instant("Ngm.Selection",{Default:{}});if((0,src.ieb)(slicer))return SELECTION?.AdvancedSlicer??"Advanced Slicer";if((0,src.wMY)(slicer))return SELECTION?.CombinationSlicer??"Combination Slicer";if(entityType){const property=(0,src.ZBB)(entityType,slicer.dimension);return property?.caption||property?.name}return slicer.dimension?.dimension}))),this.slicerSignal=(0,rxjs_interop.O4)(this.slicer$),this.members=(0,core.computed)((()=>this.slicerSignal()?.members?.slice(0,this.limit||this.slicerSignal()?.members?.length).filter(src.vJr)??[])),this.more=(0,core.computed)((()=>this.limit?this.slicerSignal()?.members?.length-this.limit:0)),this.displayBehaviour$=this.slicer$.pipe((0,map.U)((slicer=>slicer?.dimension?.displayBehaviour))),this.advancedSlicer$=this.slicer$.pipe((0,combineLatestWith.V)(this.translate.stream("COMPONENTS.SELECTION")),(0,map.U)((([slicer,SELECTION])=>(0,src.ieb)(slicer)?(0,src.p6j)(slicer,SELECTION?.OnContext):(0,src.wMY)(slicer)?(0,src.J4Q)(slicer):(0,src.yNm)(slicer)?(0,src.P45)(slicer,SELECTION?.TimeRanges):null)))}get slicer(){return this.slicer$.value}set slicer(value){this.slicer$.next(value)}remove(){this.removed.emit()}removeMember(index){const value={...this.slicer,members:[...this.slicer.members]};value.members.splice(index,1),this.slicer=value,this.slicerChange.emit(value)}editSlicer(){var _this=this;return(0,asyncToGenerator.Z)((function*(){const slicer=yield _this.openSlicerEditor(_this.slicer);slicer&&(_this.slicer={..._this.slicer,...slicer},_this.slicerChange.emit(_this.slicer))}))()}}).propDecorators={slicer:[{type:core.Input}],disabled:[{type:core.Input}],limit:[{type:core.Input}],removed:[{type:core.Output}],slicerChange:[{type:core.Output}]},_SlicerComponent);SlicerComponent=(0,tslib_es6.gn)([(0,core.Component)({selector:"ngm-slicer",template:'<div class="flex justify-start items-center">\n  <button type="button" mat-icon-button *ngIf="editable()" [disabled]="disabled" displayDensity="cosy"\n    (click)="editSlicer()">\n    <mat-icon>edit</mat-icon>\n  </button>\n\n  <span *ngIf="title$ | async as title">{{title}}</span>\n\n  <button *ngIf="editable()" mat-icon-button [disabled]="disabled" displayDensity="cosy" class="ngm-slicer__remove"\n    (click)="remove()">\n    <mat-icon color="warn">remove_circle_outline</mat-icon>\n  </button>\n</div>\n\n<mat-chip-listbox *ngIf="slicer" [selectable]="false" >\n  <mat-chip-option *ngFor="let member of members(); index as i" [value]="member"\n    [removable]="editable()"\n    [matTooltip]="(member.key || member.value) + \':\\n\' + (member.caption || member.label)"\n    (removed)="removeMember(i)">\n    <ngm-display-behaviour class="ngm-slicer__label" [class.ngm-slicer__exclude]="slicer.exclude"\n      [displayBehaviour]="displayBehaviour$ | async"\n      [option]="member"\n    >\n    </ngm-display-behaviour>\n    <mat-icon *ngIf="editable()" matChipRemove>cancel</mat-icon>\n  </mat-chip-option>\n\n  <mat-chip-option *ngIf="more() > 0">\n    +{{ more() }}\n  </mat-chip-option>\n  <mat-chip-option *ngIf="advancedSlicer$ | async as advancedSlicer" [matTooltip]="advancedSlicer">\n    <div class="whitespace-normal">{{ advancedSlicer }}</div>\n  </mat-chip-option>\n</mat-chip-listbox>\n',styles:[slicer_componentngResource_default()]})],SlicerComponent)},"./packages/angular/selection/slicers/slicers.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{H:()=>SlicersComponent});var asyncToGenerator=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.js");var _SlicersComponent,slicers_componentngResource=__webpack_require__("./packages/angular/selection/slicers/slicers.component.scss?ngResource"),slicers_componentngResource_default=__webpack_require__.n(slicers_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),rxjs_interop=__webpack_require__("./node_modules/@angular/core/fesm2022/rxjs-interop.mjs"),fesm2022_forms=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs"),core_service=__webpack_require__("./packages/angular/core/core.service.ts"),src=__webpack_require__("./packages/core/src/index.ts"),pick=__webpack_require__("./node_modules/lodash-es/pick.js"),BehaviorSubject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js"),filter=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/filter.js"),combineLatestWith=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/combineLatestWith.js"),startWith=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/startWith.js"),map=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),switchMap=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/switchMap.js"),catchError=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/catchError.js"),empty=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/empty.js"),distinctUntilChanged=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js"),firstValueFrom=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/firstValueFrom.js"),base_slicers=__webpack_require__("./packages/angular/selection/base-slicers.ts"),slicer_bar_component=__webpack_require__("./packages/angular/selection/slicer-bar/slicer-bar.component.ts"),types=__webpack_require__("./packages/angular/selection/types.ts");let SlicersComponent=((_SlicersComponent=class SlicersComponent extends base_slicers.y{constructor(){super(...arguments),this.DisplayBehaviour=src.CXV,this.SlicersCapacity=types.cw,this.dsCoreService=(0,core.inject)(core_service.q),this.slicers$=new BehaviorSubject.X([]),this.inline=(0,core.input)(!1,{transform:core.booleanAttribute}),this.valueChange=new core.EventEmitter,this.searchControl=new fesm2022_forms.NI(null),this.dimensions$=this.entityType$.pipe((0,filter.h)((val=>!!val)),(0,combineLatestWith.V)(this.searchControl.valueChanges.pipe((0,startWith.O)(""))),(0,map.U)((([entityType,search])=>{const dimensions=(0,src.n6Q)(entityType),text=search?.trim().toLowerCase();return text?dimensions.filter((item=>item.name.toLowerCase().includes(text)||item.caption?.toLowerCase().includes(text))):dimensions.slice()}))),this.isDisabled=!1,this.entityTypeSub=this.dataSettings$.pipe((0,filter.h)((value=>!!value)),(0,filter.h)((({dataSource,entitySet})=>!!dataSource&&!!entitySet)),(0,switchMap.w)((({dataSource,entitySet})=>this.dsCoreService.selectEntitySet(dataSource,entitySet).pipe((0,catchError.K)((error=>(console.error(error),empty.E)))))),(0,map.U)((entitySet=>entitySet?.entityType)),(0,rxjs_interop.sL)()).subscribe((entityType=>{this.entityType=entityType}))}get slicers(){return this.slicers$.value}set slicers(value){this.slicers$.next(value)}get highlight(){return this.searchControl.value}get showCombinationSlicer(){return this.entityType?.syntax===src.GYg.SQL&&this.capacities?.includes(types.cw.CombinationSlicer)}get showAdvancedSlicer(){return this.entityType?.syntax===src.GYg.MDX&&this.capacities?.includes(types.cw.AdvancedSlicer)}ngOnInit(){this.slicers$.pipe((0,distinctUntilChanged.x)()).subscribe((value=>{value&&(this.valueChange.emit(value),this.onChange?.(value))}))}writeValue(obj){obj&&(this.slicers=obj)}registerOnChange(fn){this.onChange=fn}registerOnTouched(fn){}setDisabledState(isDisabled){this.isDisabled=isDisabled}openSlicerBar(event){var _this=this;return(0,asyncToGenerator.Z)((function*(){const slicer=yield(0,firstValueFrom.z)(_this._dialog.open(slicer_bar_component.K,{data:{value:_this.slicers,entityType:_this.entityType,dataSettings:(0,pick.Z)(_this.dataSettings,["dataSource","entitySet"])}}).afterClosed());slicer&&(_this.slicers=[...slicer])}))()}update(value,index){const values=[...this.slicers];values[index]=value,this.slicers=values}remove(index){const values=[...this.slicers];values.splice(index,1),this.slicers=values}addSlicer(slicer){var _this2=this;return(0,asyncToGenerator.Z)((function*(){_this2.slicers=_this2.slicers??[];const index=_this2.slicers.findIndex((item=>slicer.dimension&&(0,src.HpB)(item.dimension)===(0,src.HpB)(slicer.dimension)));index>-1?_this2.update(slicer,index):_this2.slicers=[..._this2.slicers,slicer]}))()}}).propDecorators={slicers:[{type:core.Input}],inline:[{type:core.Input,args:[{isSignal:!0,alias:"inline",required:!1,transform:void 0}]}],limit:[{type:core.Input}],capacities:[{type:core.Input}],valueChange:[{type:core.Output}]},_SlicersComponent);SlicersComponent=(0,tslib_es6.gn)([(0,core.Component)({selector:"ngm-slicers",template:'<ng-container *ngFor="let slicer of slicers$ | async; index as i">\n  <ngm-slicer [slicer]="slicer"\n    [dataSettings]="dataSettings"\n    [entityType]="entityType"\n    [editable]="editable()"\n    [disabled]="isDisabled"\n    [limit]="limit"\n    (slicerChange)="update($event, i)"\n    (removed)="remove(i)">\n  </ngm-slicer>\n  <mat-divider></mat-divider>\n</ng-container>\n\n<button *ngIf="editable() && !inline()" mat-button [disabled]="isDisabled" color="primary" displayDensity="cosy" ngmAppearance="dashed"\n  (click)="openSlicerBar($event)">\n  <mat-icon>edit</mat-icon>{{ \'Ngm.Common.Add\' | translate: {Default: "Add"} }}\n</button>\n\n<button *ngIf="editable() && inline()" mat-stroked-button [disabled]="isDisabled" displayDensity="cosy" ngmAppearance="dashed"\n  [matMenuTriggerFor]="menu">\n  <div class="flex items-center justify-center">\n    <mat-icon>add</mat-icon>\n    {{ \'Ngm.Common.Add\' | translate: {Default: "Add"} }}\n  </div>\n\n</button>\n\n\n<mat-menu #menu="matMenu" class="ngm-density__cosy">\n\n  <ngm-search class="px-1" [formControl]="searchControl" (click)="$event.stopPropagation()"></ngm-search>\n\n  <ng-container *ngFor="let property of dimensions$ | async">\n    <button mat-menu-item *ngIf="isSemanticCalendar(property); else menuItem" (click)="openSlicerCreator(property)"\n      [matMenuTriggerFor]="calendarMenu"\n      [matMenuTriggerData]="{property: property}"\n    >\n      <ngm-entity-property [property]="property" [displayBehaviour]="DisplayBehaviour.auto"\n        [highlight]="highlight"></ngm-entity-property>\n    </button>\n\n    <ng-template #menuItem>\n      <button mat-menu-item (click)="openSlicerCreator(property)">\n        <ngm-entity-property [property]="property" [displayBehaviour]="DisplayBehaviour.auto"\n          [highlight]="highlight"></ngm-entity-property>\n      </button>\n    </ng-template>\n  </ng-container>\n\n  <button mat-menu-item *ngIf="showCombinationSlicer" (click)="$event.preventDefault();openSlicerCreator(SlicersCapacity.CombinationSlicer)">\n    <mat-icon>tune</mat-icon>\n    {{ \'Ngm.Selection.CombinationSlicer\' | translate: {Default: "Combination Slicer"} }}\n  </button>\n\n  <button mat-menu-item *ngIf="showAdvancedSlicer" (click)="$event.preventDefault();openSlicerCreator(SlicersCapacity.AdvancedSlicer)">\n    <mat-icon>data_array</mat-icon>\n    {{ \'Ngm.Selection.AdvancedSlicer\' | translate: {Default: \'Advanced Slicer\'} }}\n  </button>\n</mat-menu>\n\n<mat-menu #calendarMenu="matMenu" class="ngm-density__compact">\n  <ng-template matMenuContent let-property="property">\n    <button mat-menu-item (click)="openValueHelp(property)">\n      <mat-icon fontSet="material-icons-outlined">people_outline</mat-icon>\n      {{ \'Ngm.Selection.DimensionMembers\' | translate: {Default: \'Dimension Members\'} }}\n    </button>\n\n    <button mat-menu-item *ngFor="let variable of dateVariables" (click)="openDynamicDateHelp(property, variable.dateRange)">\n      {{ \'DateVariable.\' + variable.id | translate: {Default: variable.id} }}\n    </button>\n    \n  </ng-template>\n</mat-menu>\n',inputs:["dataSettings"],providers:[{provide:fesm2022_forms.JU,multi:!0,useExisting:(0,core.forwardRef)((()=>SlicersComponent))}],styles:[slicers_componentngResource_default()]})],SlicersComponent)},"./packages/angular/selection/timer/time-filter-editor/time-filter-editor.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{c:()=>NgmTimeFilterEditorComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.js");var _NgmTimeFilterEditorComponent,time_filter_editor_componentngResource=__webpack_require__("./packages/angular/selection/timer/time-filter-editor/time-filter-editor.component.scss?ngResource"),time_filter_editor_componentngResource_default=__webpack_require__.n(time_filter_editor_componentngResource),drag_drop=__webpack_require__("./node_modules/@angular/cdk/fesm2022/drag-drop.mjs"),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),fesm2022_forms=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs"),fesm2022_button=__webpack_require__("./node_modules/@angular/material/fesm2022/button.mjs"),dialog=__webpack_require__("./node_modules/@angular/material/fesm2022/dialog.mjs"),divider=__webpack_require__("./node_modules/@angular/material/fesm2022/divider.mjs"),expansion=__webpack_require__("./node_modules/@angular/material/fesm2022/expansion.mjs"),form_field=__webpack_require__("./node_modules/@angular/material/fesm2022/form-field.mjs"),icon=__webpack_require__("./node_modules/@angular/material/fesm2022/icon.mjs"),input=__webpack_require__("./node_modules/@angular/material/fesm2022/input.mjs"),fesm2022_select=__webpack_require__("./node_modules/@angular/material/fesm2022/select.mjs"),core_service=__webpack_require__("./packages/angular/core/services/core.service.ts"),button_group_directive=__webpack_require__("./packages/angular/core/directives/button-group.directive.ts"),src=__webpack_require__("./packages/core/src/index.ts"),ngx_translate_core=__webpack_require__("./node_modules/@ngx-translate/core/dist/fesm2022/ngx-translate-core.mjs"),BehaviorSubject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js"),combineLatest=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/combineLatest.js"),startWith=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/startWith.js"),map=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),shareReplay=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/shareReplay.js");let NgmTimeFilterEditorComponent=((_NgmTimeFilterEditorComponent=class NgmTimeFilterEditorComponent{get entityType(){return this.entityType$.value}set entityType(value){this.entityType$.next(value)}constructor(coreService,formBuilder){this.coreService=coreService,this.formBuilder=formBuilder,this.isDialogContainer=!0,this.data=(0,core.inject)(dialog.WI,{optional:!0}),this._dialogRef=(0,core.inject)(dialog.so,{optional:!0}),this.entityType$=new BehaviorSubject.X(null),this.formGroup=new fesm2022_forms.cw({dimension:new fesm2022_forms.cw({dimension:new fesm2022_forms.NI(null),hierarchy:new fesm2022_forms.NI(null)}),currentDate:new fesm2022_forms.NI,ranges:new fesm2022_forms.Oe([]),allowModifySelections:new fesm2022_forms.NI(null),selctionType:new fesm2022_forms.NI}),this.property$=(0,combineLatest.a)([this.entityType$,this.formGroup.get("dimension").get("dimension").valueChanges.pipe((0,startWith.O)(this.formGroup.value.dimension?.dimension))]).pipe((0,map.U)((([entityType,dimension])=>(0,src.ZBB)(entityType,dimension))),(0,shareReplay.d)(1)),this.hierarchies$=this.property$.pipe((0,map.U)((property=>property?.hierarchies))),this.forControl=!1,this.property$.subscribe()}ngOnInit(){if(this.data){this.entityType=this.data.entityType;const current=this.coreService.execDateVariables(this.data.slicer.currentDate);this.data.slicer.ranges.forEach((range=>{const currentPeriod=(0,src.elK)(current,range),result=(0,src.bvY)(current,range);this.ranges.push(this.buildRangeForm({...range,currentPeriod,result}))})),this.formGroup.patchValue(this.data.slicer),this.forControl=this.data.forControl}this.formGroup.valueChanges.subscribe((value=>{try{const current=this.coreService.execDateVariables(value.currentDate);value.ranges.forEach(((range,i)=>{const currentPeriod=(0,src.elK)(current,range),result=(0,src.bvY)(current,range);this.ranges.controls[i].patchValue({currentPeriod,result},{emitEvent:!1})}))}catch(err){console.warn(err)}}))}buildRangeForm(range){const form=this.formBuilder.group({type:new fesm2022_forms.NI,granularity:new fesm2022_forms.NI,current:new fesm2022_forms.cw({direction:new fesm2022_forms.NI,granularity:new fesm2022_forms.NI,amount:new fesm2022_forms.NI}),lookBack:new fesm2022_forms.NI,lookAhead:new fesm2022_forms.NI,currentPeriod:new fesm2022_forms.NI({value:null,disabled:!0}),formatter:new fesm2022_forms.NI,result:new fesm2022_forms.NI});return range&&form.patchValue(range),form}get ranges(){return this.formGroup.get("ranges")}addRange(event){this.ranges.push(this.buildRangeForm()),event?.preventDefault()}onApply(){this._dialogRef.close({...this.formGroup.value})}}).ctorParameters=()=>[{type:core_service.z},{type:fesm2022_forms.qu}],_NgmTimeFilterEditorComponent.propDecorators={isDialogContainer:[{type:core.HostBinding,args:["class.ngm-dialog-container"]}],entityType:[{type:core.Input}]},_NgmTimeFilterEditorComponent);NgmTimeFilterEditorComponent=(0,tslib_es6.gn)([(0,core.Component)({standalone:!0,imports:[common.CommonModule,ngx_translate_core.aw,fesm2022_forms.UX,drag_drop._t,dialog.Is,form_field.lN,fesm2022_select.LD,expansion.To,icon.Ps,divider.t,input.c,fesm2022_button.ot,button_group_directive.d],changeDetection:core.ChangeDetectionStrategy.OnPush,selector:"ngm-time-filter-editor",template:'<header mat-dialog-title cdkDrag cdkDragRootElement=".cdk-overlay-pane" cdkDragHandle>\n  <h4 style="pointer-events: none;" *ngIf="property$ | async as property">\n    {{ \'Ngm.TimeFilter.SET_DATE_RANGE\' | translate: {Default: "Set Date Range for {{property.caption}}", property: property.caption} }}\n  </h4>\n</header>\n\n<div mat-dialog-content [formGroup]="formGroup">\n  <div class="ngm-timer-editor__header" >\n    <mat-form-field appearance="fill">\n      <mat-label>{{ \'Ngm.TimeFilter.CURRENT_DATE\' | translate: {Default: "Current Date"} }}</mat-label>\n      <mat-select formControlName="currentDate">\n        <mat-option value="SYSTEMTIME">{{ \'Ngm.TimeFilter.SYSTEM_DATE\' | translate: {Default: "System Date"} }}</mat-option>\n        <mat-option value="TODAY">{{ \'Ngm.TimeFilter.USER_CURRENT_DATE\' | translate: {Default: "User Current Date"} }}</mat-option>\n      </mat-select>\n    </mat-form-field>\n\n    <ng-container *ngIf="hierarchies$ | async as hierarchies">\n      <mat-form-field appearance="fill" formGroupName="dimension">\n        <mat-label>{{ \'Ngm.Common.Hierarchy\' | translate: {Default: "Hierarchy"} }}</mat-label>\n        <mat-select formControlName="hierarchy">\n          <mat-option *ngFor="let hierarchy of hierarchies" [value]="hierarchy.name">{{hierarchy.caption}}</mat-option>\n        </mat-select>\n      </mat-form-field>\n    </ng-container>\n\n  </div>\n\n  <mat-accordion hideToggle formArrayName="ranges">\n    <mat-expansion-panel *ngFor="let range of ranges.controls; let i = index;" [formGroupName]="i">\n      <mat-expansion-panel-header class="pr-0">\n        <mat-panel-title>\n          {{ \'Ngm.TimeFilter.RANGE\' | translate: {Default: "Range"} }} {{i + 1}}: {{range.value.result?.[0]}} - {{range.value.result?.[1]}}\n        </mat-panel-title>\n        <mat-panel-description class="">\n          <button mat-icon-button ngmAppearance="danger" displayDensity="cosy" (click)="ranges.controls.splice(i, 1)">\n            <mat-icon>close</mat-icon>\n          </button>\n        </mat-panel-description>\n      </mat-expansion-panel-header>\n \n        <div class="flex flex-wrap gap-2">\n          <mat-form-field appearance="fill">\n            <mat-label>{{ \'Ngm.TimeFilter.RANGE_TYPE\' | translate: {Default: "Range Type"} }}</mat-label>\n            <mat-select formControlName="type" >\n              <mat-option value="Standard">\n                {{ \'Ngm.TimeFilter.RANGE_TYPE_STANDARD\' | translate: {Default: "Standard"} }}\n              </mat-option>\n              <mat-option value="Offset">\n                {{ \'Ngm.TimeFilter.RANGE_TYPE_OFFSET\' | translate: {Default: "Offset"} }}\n              </mat-option>\n            </mat-select>\n          </mat-form-field>\n\n          <mat-form-field appearance="fill">\n            <mat-label>{{ \'Ngm.TimeFilter.GRANULARITY\' | translate: {Default: "Granularity"} }}</mat-label>\n            <mat-select formControlName="granularity">\n              <mat-option value="Year">\n                {{ \'Ngm.TimeFilter.YEAR\' | translate: {Default: "Year"} }}\n              </mat-option>\n              <mat-option value="Quarter">\n                {{ \'Ngm.TimeFilter.QUARTER\' | translate: {Default: "Quarter"} }}\n              </mat-option>\n              <mat-option value="Month">\n                {{ \'Ngm.TimeFilter.MONTH\' | translate: {Default: "Month"} }}\n              </mat-option>\n              <mat-option value="Week">\n                {{ \'Ngm.TimeFilter.WEEK\' | translate: {Default: "Week"} }}\n              </mat-option>\n              <mat-option value="Day">\n                {{ \'Ngm.TimeFilter.DAY\' | translate: {Default: "Day"} }}\n              </mat-option>\n            </mat-select>\n          </mat-form-field>\n    \n          <mat-form-field appearance="fill">\n            <mat-label>{{ \'Ngm.TimeFilter.LOOK_BACK\' | translate: {Default: "Look Back"} }}</mat-label>\n            <input matInput formControlName="lookBack" type="number">\n          </mat-form-field>\n    \n          <mat-form-field appearance="fill">\n            <mat-label>{{ \'Ngm.TimeFilter.CURRENT_PERIOD\' | translate: {Default: "Current Period"} }}</mat-label>\n            <input matInput formControlName="currentPeriod" >\n          </mat-form-field>\n    \n          <mat-form-field appearance="fill">\n            <mat-label>{{ \'Ngm.TimeFilter.LOOK_AHEAD\' | translate: {Default: "Look Ahead"} }}</mat-label>\n            <input matInput formControlName="lookAhead" type="number">\n          </mat-form-field>\n          <mat-form-field appearance="fill">\n            <mat-label>{{ \'Ngm.TimeFilter.FORMATTER\' | translate: {Default: "Formatter"} }}</mat-label>\n            <input matInput formControlName="formatter" type="string">\n          </mat-form-field>\n        </div>\n\n        <div *ngIf="range.value.type===\'Offset\'" formGroupName="current" fxLayoutGap=".5rem">\n          <mat-form-field appearance="fill">\n            <mat-label>{{ \'Ngm.TimeFilter.OFFSET_DIRECTION\' | translate: {Default: "Offset Direction"} }}</mat-label>\n            <mat-select formControlName="direction">\n              <mat-option value="LookBack">\n                {{ \'Ngm.TimeFilter.LOOK_BACK\' | translate: {Default: "Look Back"} }}\n              </mat-option>\n              <mat-option value="LookAhead">\n                {{ \'Ngm.TimeFilter.LOOK_AHEAD\' | translate: {Default: "Look Ahead"} }}\n              </mat-option>\n            </mat-select>\n          </mat-form-field>\n\n          <mat-form-field appearance="fill" >\n            <mat-label>{{ \'Ngm.TimeFilter.GRANULARITY\' | translate: {Default: "Granularity"} }}</mat-label>\n            <mat-select formControlName="granularity">\n              <mat-option [value]="range.value.granularity">{{range.value.granularity}}</mat-option>\n            </mat-select>\n          </mat-form-field>\n\n          <mat-form-field appearance="fill">\n            <mat-label>{{ \'Ngm.TimeFilter.OFFSET_AMOUNT\' | translate: {Default: "Offset Amount"} }}</mat-label>\n            <input matInput formControlName="amount" type="number">\n          </mat-form-field>\n        </div>\n      \n    </mat-expansion-panel>\n  </mat-accordion>\n\n  <button mat-stroked-button class="ngm-timer-editor__add" color="primary" ngmAppearance="dashed" (click)="addRange($event)">\n    <mat-icon>add</mat-icon>{{ \'Ngm.TimeFilter.ADD_TIME_RANGE\' | translate: {Default: "Add Time Range"} }}\n  </button>\n\n  <div class="flex-1"></div>\n\n  <div *ngIf="forControl" class="flex flex-col">\n    <mat-divider></mat-divider>\n    <div>{{ \'Ngm.TimeFilter.SETTINGS_FOR_USERS\' | translate: {Default: "Settings for Users"} }}</div>\n    <mat-checkbox formControlName="allowModifySelections">\n      {{ \'Ngm.TimeFilter.ALLOW_MODIFY_SELECTIONS\' | translate: {Default: "Allow viewers to modify selections"} }}\n    </mat-checkbox>\n    <mat-form-field appearance="fill">\n      <mat-label>{{ \'Ngm.TimeFilter.SELECTION_TYPE\' | translate: {Default: "Selection Type"} }}</mat-label>\n      <mat-select formControlName="selctionType">\n        <mat-option value="Multiple">\n          {{ \'Ngm.TimeFilter.SELECTION_TYPE_MULTIPLE\' | translate: {Default: "Multiple"} }}\n        </mat-option>\n        <mat-option value="Single">\n          {{ \'Ngm.TimeFilter.SELECTION_TYPE_SINGLE\' | translate: {Default: "Single"} }}\n        </mat-option>\n      </mat-select>\n    </mat-form-field>\n  </div>\n\n</div>\n\n<div mat-dialog-actions align="end">\n  <div ngmButtonGroup>\n    <button mat-button mat-dialog-close>\n      {{ \'Ngm.Common.Cancel\' | translate: {Default: "Cancel"} }}\n    </button>\n    <button mat-raised-button color="accent" (click)="onApply()" cdkFocusInitial>\n      {{ \'Ngm.Common.Apply\' | translate: {Default: "Apply"} }}\n    </button>\n  </div>\n</div>\n',styles:[time_filter_editor_componentngResource_default()]}),(0,tslib_es6.w6)("design:paramtypes",[core_service.z,fesm2022_forms.qu])],NgmTimeFilterEditorComponent)},"./packages/angular/selection/types.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{cw:()=>SlicersCapacity});new(__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs").InjectionToken)("ngm-selection-default-options",{providedIn:"root",factory:function NX_SELECTION_DEFAULT_OPTIONS_FACTORY(){return{maxTagCount:5,paging:!1,tableOptions:{paging:!0}}}});var SlicersCapacity;!function(SlicersCapacity){SlicersCapacity.CombinationSlicer="CombinationSlicer",SlicersCapacity.AdvancedSlicer="AdvancedSlicer"}(SlicersCapacity||(SlicersCapacity={}))}}]);