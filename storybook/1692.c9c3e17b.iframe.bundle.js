"use strict";(self.webpackChunkocap=self.webpackChunkocap||[]).push([[1692],{"./node_modules/echarts/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Axis:()=>core.RD,ChartView:()=>core.TA,ComponentModel:()=>core.tF,ComponentView:()=>core.Ir,List:()=>core.aV,Model:()=>core.Hn,PRIORITY:()=>core.Hr,SeriesModel:()=>core.wJ,color:()=>core.$_,connect:()=>core.$j,dataTool:()=>core.Ok,dependencies:()=>core.HO,disConnect:()=>core.eU,disconnect:()=>core.zP,dispose:()=>core.B9,env:()=>core.OB,extendChartView:()=>core.Zy,extendComponentModel:()=>core.tv,extendComponentView:()=>core.Sp,extendSeriesModel:()=>core.Zr,format:()=>core.WU,getCoordinateSystemDimensions:()=>core.wL,getInstanceByDom:()=>core.JE,getInstanceById:()=>core.rp,getMap:()=>core.FU,graphic:()=>core.Q,helper:()=>core._y,init:()=>core.S1,innerDrawElementOnCanvas:()=>core.z$,matrix:()=>core.pI,number:()=>core.Rx,parseGeoJSON:()=>core.Nu,parseGeoJson:()=>core.pQ,registerAction:()=>core.zl,registerCoordinateSystem:()=>core.RS,registerLayout:()=>core.qR,registerLoading:()=>core.yn,registerLocale:()=>core.I2,registerMap:()=>core.je,registerPostInit:()=>core.sq,registerPostUpdate:()=>core.Br,registerPreprocessor:()=>core.ds,registerProcessor:()=>core.Pu,registerTheme:()=>core.aW,registerTransform:()=>core.rV,registerUpdateLifecycle:()=>core.YK,registerVisual:()=>core.Og,setCanvasCreator:()=>core.jQ,setPlatformAPI:()=>core.g2,throttle:()=>core.P2,time:()=>core.XV,use:()=>core.D$,util:()=>core.D5,vector:()=>core.xr,version:()=>core.i8,zrUtil:()=>core.gf,zrender:()=>core.x_});var extension=__webpack_require__("./node_modules/echarts/lib/extension.js"),core=__webpack_require__("./node_modules/echarts/lib/export/core.js"),installCanvasRenderer=__webpack_require__("./node_modules/echarts/lib/renderer/installCanvasRenderer.js"),helper=__webpack_require__("./node_modules/zrender/lib/svg/helper.js"),Path=__webpack_require__("./node_modules/zrender/lib/graphic/Path.js"),graphic_Image=__webpack_require__("./node_modules/zrender/lib/graphic/Image.js"),contain_text=__webpack_require__("./node_modules/zrender/lib/contain/text.js"),TSpan=__webpack_require__("./node_modules/zrender/lib/graphic/TSpan.js"),mathSin=Math.sin,mathCos=Math.cos,PI=Math.PI,PI2=2*Math.PI,degree=180/PI;const svg_SVGPathRebuilder=function(){function SVGPathRebuilder(){}return SVGPathRebuilder.prototype.reset=function(precision){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,precision||4)},SVGPathRebuilder.prototype.moveTo=function(x,y){this._add("M",x,y)},SVGPathRebuilder.prototype.lineTo=function(x,y){this._add("L",x,y)},SVGPathRebuilder.prototype.bezierCurveTo=function(x,y,x2,y2,x3,y3){this._add("C",x,y,x2,y2,x3,y3)},SVGPathRebuilder.prototype.quadraticCurveTo=function(x,y,x2,y2){this._add("Q",x,y,x2,y2)},SVGPathRebuilder.prototype.arc=function(cx,cy,r,startAngle,endAngle,anticlockwise){this.ellipse(cx,cy,r,r,0,startAngle,endAngle,anticlockwise)},SVGPathRebuilder.prototype.ellipse=function(cx,cy,rx,ry,psi,startAngle,endAngle,anticlockwise){var dTheta=endAngle-startAngle,clockwise=!anticlockwise,dThetaPositive=Math.abs(dTheta),isCircle=(0,helper.zT)(dThetaPositive-PI2)||(clockwise?dTheta>=PI2:-dTheta>=PI2),unifiedTheta=dTheta>0?dTheta%PI2:dTheta%PI2+PI2,large=!1;large=!!isCircle||!(0,helper.zT)(dThetaPositive)&&unifiedTheta>=PI==!!clockwise;var x0=cx+rx*mathCos(startAngle),y0=cy+ry*mathSin(startAngle);this._start&&this._add("M",x0,y0);var xRot=Math.round(psi*degree);if(isCircle){var p=1/this._p,dTheta_1=(clockwise?1:-1)*(PI2-p);this._add("A",rx,ry,xRot,1,+clockwise,cx+rx*mathCos(startAngle+dTheta_1),cy+ry*mathSin(startAngle+dTheta_1)),p>.01&&this._add("A",rx,ry,xRot,0,+clockwise,x0,y0)}else{var x=cx+rx*mathCos(endAngle),y=cy+ry*mathSin(endAngle);this._add("A",rx,ry,xRot,+large,+clockwise,x,y)}},SVGPathRebuilder.prototype.rect=function(x,y,w,h){this._add("M",x,y),this._add("l",w,0),this._add("l",0,h),this._add("l",-w,0),this._add("Z")},SVGPathRebuilder.prototype.closePath=function(){this._d.length>0&&this._add("Z")},SVGPathRebuilder.prototype._add=function(cmd,a,b,c,d,e,f,g,h){for(var vals=[],p=this._p,i=1;i<arguments.length;i++){var val=arguments[i];if(isNaN(val))return void(this._invalid=!0);vals.push(Math.round(val*p)/p)}this._d.push(cmd+vals.join(" ")),this._start="Z"===cmd},SVGPathRebuilder.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},SVGPathRebuilder.prototype.getStr=function(){return this._str},SVGPathRebuilder}();var dashStyle=__webpack_require__("./node_modules/zrender/lib/canvas/dashStyle.js"),util=__webpack_require__("./node_modules/zrender/lib/core/util.js"),NONE="none",mathRound=Math.round;var strokeProps=["lineCap","miterLimit","lineJoin"],svgStrokeProps=(0,util.map)(strokeProps,(function(prop){return"stroke-"+prop.toLowerCase()}));function mapStyleToAttrs(updateAttr,style,el,forceUpdate){var opacity=null==style.opacity?1:style.opacity;if(el instanceof graphic_Image.ZP)updateAttr("opacity",opacity);else{if(function pathHasFill(style){var fill=style.fill;return null!=fill&&fill!==NONE}(style)){var fill=(0,helper.ut)(style.fill);updateAttr("fill",fill.color);var fillOpacity=null!=style.fillOpacity?style.fillOpacity*fill.opacity*opacity:fill.opacity*opacity;(forceUpdate||fillOpacity<1)&&updateAttr("fill-opacity",fillOpacity)}else updateAttr("fill",NONE);if(function pathHasStroke(style){var stroke=style.stroke;return null!=stroke&&stroke!==NONE}(style)){var stroke=(0,helper.ut)(style.stroke);updateAttr("stroke",stroke.color);var strokeScale=style.strokeNoScale?el.getLineScale():1,strokeWidth=strokeScale?(style.lineWidth||0)/strokeScale:0,strokeOpacity=null!=style.strokeOpacity?style.strokeOpacity*stroke.opacity*opacity:stroke.opacity*opacity,strokeFirst=style.strokeFirst;if((forceUpdate||1!==strokeWidth)&&updateAttr("stroke-width",strokeWidth),(forceUpdate||strokeFirst)&&updateAttr("paint-order",strokeFirst?"stroke":"fill"),(forceUpdate||strokeOpacity<1)&&updateAttr("stroke-opacity",strokeOpacity),style.lineDash){var _a=(0,dashStyle.a)(el),lineDash=_a[0],lineDashOffset=_a[1];lineDash&&(lineDashOffset=mathRound(lineDashOffset||0),updateAttr("stroke-dasharray",lineDash.join(",")),(lineDashOffset||forceUpdate)&&updateAttr("stroke-dashoffset",lineDashOffset))}else forceUpdate&&updateAttr("stroke-dasharray",NONE);for(var i=0;i<strokeProps.length;i++){var propName=strokeProps[i];if(forceUpdate||style[propName]!==Path.$t[propName]){var val=style[propName]||Path.$t[propName];val&&updateAttr(svgStrokeProps[i],val)}}}else forceUpdate&&updateAttr("stroke",NONE)}}var dom=__webpack_require__("./node_modules/zrender/lib/core/dom.js"),SVGNS="http://www.w3.org/2000/svg",XLINKNS="http://www.w3.org/1999/xlink",XMLNS="http://www.w3.org/2000/xmlns/",XML_NAMESPACE="http://www.w3.org/XML/1998/namespace",META_DATA_PREFIX="ecmeta_";function createElement(name){return document.createElementNS(SVGNS,name)}function createVNode(tag,key,attrs,children,text){return{tag,attrs:attrs||{},children,text,key}}function vNodeToString(el,opts){var S=(opts=opts||{}).newline?"\n":"";return function convertElToString(el){var children=el.children,tag=el.tag,attrs=el.attrs,text=el.text;return function createElementOpen(name,attrs){var attrsStr=[];if(attrs)for(var key in attrs){var val=attrs[key],part=key;!1!==val&&(!0!==val&&null!=val&&(part+='="'+val+'"'),attrsStr.push(part))}return"<"+name+" "+attrsStr.join(" ")+">"}(tag,attrs)+("style"!==tag?(0,dom.F1)(text):text||"")+(children?""+S+(0,util.map)(children,(function(child){return convertElToString(child)})).join(S)+S:"")+function createElementClose(name){return"</"+name+">"}(tag)}(el)}function createBrushScope(zrId){return{zrId,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function createSVGVNode(width,height,children,useViewBox){return createVNode("svg","root",{width,height,xmlns:SVGNS,"xmlns:xlink":XLINKNS,version:"1.1",baseProfile:"full",viewBox:!!useViewBox&&"0 0 "+width+" "+height},children)}var helper_image=__webpack_require__("./node_modules/zrender/lib/graphic/helper/image.js"),Transformable=__webpack_require__("./node_modules/zrender/lib/core/Transformable.js"),PathProxy=__webpack_require__("./node_modules/zrender/lib/core/PathProxy.js"),CompoundPath=__webpack_require__("./node_modules/zrender/lib/graphic/CompoundPath.js"),cubicEasing=__webpack_require__("./node_modules/zrender/lib/animation/cubicEasing.js"),cssClassIdx=0;function getClassId(){return cssClassIdx++}var EASING_MAP={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},transformOriginKey="transform-origin";function buildPathString(el,kfShape,path){var shape=(0,util.extend)({},el.shape);(0,util.extend)(shape,kfShape),el.buildPath(path,shape);var svgPathBuilder=new svg_SVGPathRebuilder;return svgPathBuilder.reset((0,helper.Gk)(el)),path.rebuildPath(svgPathBuilder,1),svgPathBuilder.generateStr(),svgPathBuilder.getStr()}function setTransformOrigin(target,transform){var originX=transform.originX,originY=transform.originY;(originX||originY)&&(target[transformOriginKey]=originX+"px "+originY+"px")}var ANIMATE_STYLE_MAP={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function addAnimation(cssAnim,scope){var animationName=scope.zrId+"-ani-"+scope.cssAnimIdx++;return scope.cssAnims[animationName]=cssAnim,animationName}function getEasingFunc(easing){return(0,util.isString)(easing)?EASING_MAP[easing]?"cubic-bezier("+EASING_MAP[easing]+")":(0,cubicEasing.H)(easing)?easing:"":""}function createCSSAnimation(el,attrs,scope,onlyShape){var animators=el.animators,len=animators.length,cssAnimations=[];if(el instanceof CompoundPath.Z){var animationCfg=function createCompoundPathCSSAnimation(el,attrs,scope){var cssAnimationCfg,cssAnimationName,paths=el.shape.paths,composedAnim={};if((0,util.each)(paths,(function(path){var subScope=createBrushScope(scope.zrId);subScope.animation=!0,createCSSAnimation(path,{},subScope,!0);var cssAnims=subScope.cssAnims,cssNodes=subScope.cssNodes,animNames=(0,util.keys)(cssAnims),len=animNames.length;if(len){var lastAnim=cssAnims[cssAnimationName=animNames[len-1]];for(var percent in lastAnim){var kf=lastAnim[percent];composedAnim[percent]=composedAnim[percent]||{d:""},composedAnim[percent].d+=kf.d||""}for(var className in cssNodes){var val=cssNodes[className].animation;val.indexOf(cssAnimationName)>=0&&(cssAnimationCfg=val)}}})),cssAnimationCfg){attrs.d=!1;var animationName=addAnimation(composedAnim,scope);return cssAnimationCfg.replace(cssAnimationName,animationName)}}(el,attrs,scope);if(animationCfg)cssAnimations.push(animationCfg);else if(!len)return}else if(!len)return;for(var groupAnimators={},i=0;i<len;i++){var animator=animators[i],cfgArr=[animator.getMaxTime()/1e3+"s"],easing=getEasingFunc(animator.getClip().easing),delay=animator.getDelay();easing?cfgArr.push(easing):cfgArr.push("linear"),delay&&cfgArr.push(delay/1e3+"s"),animator.getLoop()&&cfgArr.push("infinite");var cfg=cfgArr.join(" ");groupAnimators[cfg]=groupAnimators[cfg]||[cfg,[]],groupAnimators[cfg][1].push(animator)}function createSingleCSSAnimation(groupAnimator){var path,animators=groupAnimator[1],len=animators.length,transformKfs={},shapeKfs={},finalKfs={};function saveAnimatorTrackToCssKfs(animator,cssKfs,toCssAttrName){for(var tracks=animator.getTracks(),maxTime=animator.getMaxTime(),k=0;k<tracks.length;k++){var track=tracks[k];if(track.needsAnimate()){var kfs=track.keyframes,attrName=track.propName;if(toCssAttrName&&(attrName=toCssAttrName(attrName)),attrName)for(var i=0;i<kfs.length;i++){var kf=kfs[i],percent=Math.round(kf.time/maxTime*100)+"%",kfEasing=getEasingFunc(kf.easing),rawValue=kf.rawValue;((0,util.isString)(rawValue)||(0,util.isNumber)(rawValue))&&(cssKfs[percent]=cssKfs[percent]||{},cssKfs[percent][attrName]=kf.rawValue,kfEasing&&(cssKfs[percent]["animation-timing-function"]=kfEasing))}}}}for(var i=0;i<len;i++){(targetProp=(animator=animators[i]).targetName)?"shape"===targetProp&&saveAnimatorTrackToCssKfs(animator,shapeKfs):!onlyShape&&saveAnimatorTrackToCssKfs(animator,transformKfs)}for(var percent in transformKfs){var transform={};(0,Transformable.kY)(transform,el),(0,util.extend)(transform,transformKfs[percent]);var str=(0,helper.gA)(transform),timingFunction=transformKfs[percent]["animation-timing-function"];finalKfs[percent]=str?{transform:str}:{},setTransformOrigin(finalKfs[percent],transform),timingFunction&&(finalKfs[percent]["animation-timing-function"]=timingFunction)}var canAnimateShape=!0;for(var percent in shapeKfs){finalKfs[percent]=finalKfs[percent]||{};var isFirst=!path;timingFunction=shapeKfs[percent]["animation-timing-function"];isFirst&&(path=new PathProxy.Z);var len_1=path.len();path.reset(),finalKfs[percent].d=buildPathString(el,shapeKfs[percent],path);var newLen=path.len();if(!isFirst&&len_1!==newLen){canAnimateShape=!1;break}timingFunction&&(finalKfs[percent]["animation-timing-function"]=timingFunction)}if(!canAnimateShape)for(var percent in finalKfs)delete finalKfs[percent].d;if(!onlyShape)for(i=0;i<len;i++){var animator,targetProp;"style"===(targetProp=(animator=animators[i]).targetName)&&saveAnimatorTrackToCssKfs(animator,finalKfs,(function(propName){return ANIMATE_STYLE_MAP[propName]}))}var transformOrigin,percents=(0,util.keys)(finalKfs),allTransformOriginSame=!0;for(i=1;i<percents.length;i++){var p0=percents[i-1],p1=percents[i];if(finalKfs[p0][transformOriginKey]!==finalKfs[p1][transformOriginKey]){allTransformOriginSame=!1;break}transformOrigin=finalKfs[p0][transformOriginKey]}if(allTransformOriginSame&&transformOrigin){for(var percent in finalKfs)finalKfs[percent][transformOriginKey]&&delete finalKfs[percent][transformOriginKey];attrs[transformOriginKey]=transformOrigin}if((0,util.filter)(percents,(function(percent){return(0,util.keys)(finalKfs[percent]).length>0})).length)return addAnimation(finalKfs,scope)+" "+groupAnimator[0]+" both"}for(var key in groupAnimators){(animationCfg=createSingleCSSAnimation(groupAnimators[key]))&&cssAnimations.push(animationCfg)}if(cssAnimations.length){var className=scope.zrId+"-cls-"+getClassId();scope.cssNodes["."+className]={animation:cssAnimations.join(",")},attrs.class=className}}var Text=__webpack_require__("./node_modules/zrender/lib/graphic/Text.js"),platform=__webpack_require__("./node_modules/zrender/lib/core/platform.js"),tool_color=__webpack_require__("./node_modules/zrender/lib/tool/color.js");function setClassAttribute(style,attrs,scope,withHover){var styleKey=JSON.stringify(style),className=scope.cssStyleCache[styleKey];className||(className=scope.zrId+"-cls-"+getClassId(),scope.cssStyleCache[styleKey]=className,scope.cssNodes["."+className+(withHover?":hover":"")]=style),attrs.class=attrs.class?attrs.class+" "+className:className}var zrender=__webpack_require__("./node_modules/zrender/lib/zrender.js"),round=Math.round;function isImageLike(val){return val&&(0,util.isString)(val.src)}function isCanvasLike(val){return val&&(0,util.isFunction)(val.toDataURL)}function setStyleAttrs(attrs,style,el,scope){mapStyleToAttrs((function(key,val){var isFillStroke="fill"===key||"stroke"===key;isFillStroke&&(0,helper.H3)(val)?setGradient(style,attrs,key,scope):isFillStroke&&(0,helper.R)(val)?setPattern(el,attrs,key,scope):attrs[key]=isFillStroke&&"none"===val?"transparent":val}),style,el,!1),function setShadow(el,attrs,scope){var style=el.style;if((0,helper.i2)(style)){var shadowKey=(0,helper.n1)(el),shadowCache=scope.shadowCache,shadowId=shadowCache[shadowKey];if(!shadowId){var globalScale=el.getGlobalScale(),scaleX=globalScale[0],scaleY=globalScale[1];if(!scaleX||!scaleY)return;var offsetX=style.shadowOffsetX||0,offsetY=style.shadowOffsetY||0,blur_1=style.shadowBlur,_a=(0,helper.ut)(style.shadowColor),opacity=_a.opacity,color=_a.color,stdDeviation=blur_1/2/scaleX+" "+blur_1/2/scaleY;shadowId=scope.zrId+"-s"+scope.shadowIdx++,scope.defs[shadowId]=createVNode("filter",shadowId,{id:shadowId,x:"-100%",y:"-100%",width:"300%",height:"300%"},[createVNode("feDropShadow","",{dx:offsetX/scaleX,dy:offsetY/scaleY,stdDeviation,"flood-color":color,"flood-opacity":opacity})]),shadowCache[shadowKey]=shadowId}attrs.filter=(0,helper.m1)(shadowId)}}(el,attrs,scope)}function setMetaData(attrs,el){var metaData=(0,zrender.getElementSSRData)(el);metaData&&(metaData.each((function(val,key){null!=val&&(attrs[(META_DATA_PREFIX+key).toLowerCase()]=val+"")})),el.isSilent()&&(attrs[META_DATA_PREFIX+"silent"]="true"))}function noRotateScale(m){return(0,helper.zT)(m[0]-1)&&(0,helper.zT)(m[1])&&(0,helper.zT)(m[2])&&(0,helper.zT)(m[3]-1)}function setTransform(attrs,m,compress){if(m&&(!function noTranslate(m){return(0,helper.zT)(m[4])&&(0,helper.zT)(m[5])}(m)||!noRotateScale(m))){var mul=compress?10:1e4;attrs.transform=noRotateScale(m)?"translate("+round(m[4]*mul)/mul+" "+round(m[5]*mul)/mul+")":(0,helper.qV)(m)}}function convertPolyShape(shape,attrs,mul){for(var points=shape.points,strArr=[],i=0;i<points.length;i++)strArr.push(round(points[i][0]*mul)/mul),strArr.push(round(points[i][1]*mul)/mul);attrs.points=strArr.join(" ")}function validatePolyShape(shape){return!shape.smooth}var builtinShapesDef={circle:[function createAttrsConvert(desc){var normalizedDesc=(0,util.map)(desc,(function(item){return"string"==typeof item?[item,item]:item}));return function(shape,attrs,mul){for(var i=0;i<normalizedDesc.length;i++){var item=normalizedDesc[i],val=shape[item[0]];null!=val&&(attrs[item[1]]=round(val*mul)/mul)}}}(["cx","cy","r"])],polyline:[convertPolyShape,validatePolyShape],polygon:[convertPolyShape,validatePolyShape]};function brushSVGPath(el,scope){var style=el.style,shape=el.shape,builtinShpDef=builtinShapesDef[el.type],attrs={},needsAnimate=scope.animation,svgElType="path",strokePercent=el.style.strokePercent,precision=scope.compress&&(0,helper.Gk)(el)||4;if(!builtinShpDef||scope.willUpdate||builtinShpDef[1]&&!builtinShpDef[1](shape)||needsAnimate&&function hasShapeAnimation(el){for(var animators=el.animators,i=0;i<animators.length;i++)if("shape"===animators[i].targetName)return!0;return!1}(el)||strokePercent<1){var needBuildPath=!el.path||el.shapeChanged();el.path||el.createPathProxy();var path=el.path;needBuildPath&&(path.beginPath(),el.buildPath(path,el.shape),el.pathUpdated());var pathVersion=path.getVersion(),elExt=el,svgPathBuilder=elExt.__svgPathBuilder;elExt.__svgPathVersion===pathVersion&&svgPathBuilder&&strokePercent===elExt.__svgPathStrokePercent||(svgPathBuilder||(svgPathBuilder=elExt.__svgPathBuilder=new svg_SVGPathRebuilder),svgPathBuilder.reset(precision),path.rebuildPath(svgPathBuilder,strokePercent),svgPathBuilder.generateStr(),elExt.__svgPathVersion=pathVersion,elExt.__svgPathStrokePercent=strokePercent),attrs.d=svgPathBuilder.getStr()}else{svgElType=el.type;var mul=Math.pow(10,precision);builtinShpDef[0](shape,attrs,mul)}return setTransform(attrs,el.transform),setStyleAttrs(attrs,style,el,scope),setMetaData(attrs,el),scope.animation&&createCSSAnimation(el,attrs,scope),scope.emphasis&&function createCSSEmphasis(el,attrs,scope){if(!el.ignore)if(el.isSilent())setClassAttribute(style={"pointer-events":"none"},attrs,scope,!0);else{var emphasisStyle=el.states.emphasis&&el.states.emphasis.style?el.states.emphasis.style:{},fill=emphasisStyle.fill;if(!fill){var normalFill=el.style&&el.style.fill,selectFill=el.states.select&&el.states.select.style&&el.states.select.style.fill,fromFill=el.currentStates.indexOf("select")>=0&&selectFill||normalFill;fromFill&&(fill=(0,tool_color.liftColor)(fromFill))}var lineWidth=emphasisStyle.lineWidth;lineWidth&&(lineWidth/=!emphasisStyle.strokeNoScale&&el.transform?el.transform[0]:1);var style={cursor:"pointer"};fill&&(style.fill=fill),emphasisStyle.stroke&&(style.stroke=emphasisStyle.stroke),lineWidth&&(style["stroke-width"]=lineWidth),setClassAttribute(style,attrs,scope,!0)}}(el,attrs,scope),createVNode(svgElType,el.id+"",attrs)}function brush(el,scope){return el instanceof Path.ZP?brushSVGPath(el,scope):el instanceof graphic_Image.ZP?function brushSVGImage(el,scope){var style=el.style,image=style.image;if(image&&!(0,util.isString)(image)&&(isImageLike(image)?image=image.src:isCanvasLike(image)&&(image=image.toDataURL())),image){var x=style.x||0,y=style.y||0,attrs={href:image,width:style.width,height:style.height};return x&&(attrs.x=x),y&&(attrs.y=y),setTransform(attrs,el.transform),setStyleAttrs(attrs,style,el,scope),setMetaData(attrs,el),scope.animation&&createCSSAnimation(el,attrs,scope),createVNode("image",el.id+"",attrs)}}(el,scope):el instanceof TSpan.Z?function brushSVGTSpan(el,scope){var style=el.style,text=style.text;if(null!=text&&(text+=""),text&&!isNaN(style.x)&&!isNaN(style.y)){var font=style.font||platform.Uo,x=style.x||0,y=(0,helper.mU)(style.y||0,(0,contain_text.Dp)(font),style.textBaseline),attrs={"dominant-baseline":"central","text-anchor":helper.jY[style.textAlign]||style.textAlign};if((0,Text.Y1)(style)){var separatedFontStr="",fontStyle=style.fontStyle,fontSize=(0,Text.VG)(style.fontSize);if(!parseFloat(fontSize))return;var fontFamily=style.fontFamily||platform.rk,fontWeight=style.fontWeight;separatedFontStr+="font-size:"+fontSize+";font-family:"+fontFamily+";",fontStyle&&"normal"!==fontStyle&&(separatedFontStr+="font-style:"+fontStyle+";"),fontWeight&&"normal"!==fontWeight&&(separatedFontStr+="font-weight:"+fontWeight+";"),attrs.style=separatedFontStr}else attrs.style="font: "+font;return text.match(/\s/)&&(attrs["xml:space"]="preserve"),x&&(attrs.x=x),y&&(attrs.y=y),setTransform(attrs,el.transform),setStyleAttrs(attrs,style,el,scope),setMetaData(attrs,el),scope.animation&&createCSSAnimation(el,attrs,scope),createVNode("text",el.id+"",attrs,void 0,text)}}(el,scope):void 0}function setGradient(style,attrs,target,scope){var gradientTag,val=style[target],gradientAttrs={gradientUnits:val.global?"userSpaceOnUse":"objectBoundingBox"};if((0,helper.I1)(val))gradientTag="linearGradient",gradientAttrs.x1=val.x,gradientAttrs.y1=val.y,gradientAttrs.x2=val.x2,gradientAttrs.y2=val.y2;else{if(!(0,helper.gO)(val))return void 0;gradientTag="radialGradient",gradientAttrs.cx=(0,util.retrieve2)(val.x,.5),gradientAttrs.cy=(0,util.retrieve2)(val.y,.5),gradientAttrs.r=(0,util.retrieve2)(val.r,.5)}for(var colors=val.colorStops,colorStops=[],i=0,len=colors.length;i<len;++i){var offset=100*(0,helper.Pn)(colors[i].offset)+"%",stopColor=colors[i].color,_a=(0,helper.ut)(stopColor),color=_a.color,opacity=_a.opacity,stopsAttrs={offset};stopsAttrs["stop-color"]=color,opacity<1&&(stopsAttrs["stop-opacity"]=opacity),colorStops.push(createVNode("stop",i+"",stopsAttrs))}var gradientKey=vNodeToString(createVNode(gradientTag,"",gradientAttrs,colorStops)),gradientCache=scope.gradientCache,gradientId=gradientCache[gradientKey];gradientId||(gradientId=scope.zrId+"-g"+scope.gradientIdx++,gradientCache[gradientKey]=gradientId,gradientAttrs.id=gradientId,scope.defs[gradientId]=createVNode(gradientTag,gradientId,gradientAttrs,colorStops)),attrs[target]=(0,helper.m1)(gradientId)}function setPattern(el,attrs,target,scope){var child,val=el.style[target],boundingRect=el.getBoundingRect(),patternAttrs={},repeat=val.repeat,noRepeat="no-repeat"===repeat,repeatX="repeat-x"===repeat,repeatY="repeat-y"===repeat;if((0,helper.Cv)(val)){var imageWidth_1=val.imageWidth,imageHeight_1=val.imageHeight,imageSrc=void 0,patternImage=val.image;if((0,util.isString)(patternImage)?imageSrc=patternImage:isImageLike(patternImage)?imageSrc=patternImage.src:isCanvasLike(patternImage)&&(imageSrc=patternImage.toDataURL()),"undefined"==typeof Image){var errMsg="Image width/height must been given explictly in svg-ssr renderer.";(0,util.assert)(imageWidth_1,errMsg),(0,util.assert)(imageHeight_1,errMsg)}else if(null==imageWidth_1||null==imageHeight_1){var setSizeToVNode_1=function(vNode,img){if(vNode){var svgEl=vNode.elm,width=imageWidth_1||img.width,height=imageHeight_1||img.height;"pattern"===vNode.tag&&(repeatX?(height=1,width/=boundingRect.width):repeatY&&(width=1,height/=boundingRect.height)),vNode.attrs.width=width,vNode.attrs.height=height,svgEl&&(svgEl.setAttribute("width",width),svgEl.setAttribute("height",height))}},createdImage=(0,helper_image.Gq)(imageSrc,null,el,(function(img){noRepeat||setSizeToVNode_1(patternVNode,img),setSizeToVNode_1(child,img)}));createdImage&&createdImage.width&&createdImage.height&&(imageWidth_1=imageWidth_1||createdImage.width,imageHeight_1=imageHeight_1||createdImage.height)}child=createVNode("image","img",{href:imageSrc,width:imageWidth_1,height:imageHeight_1}),patternAttrs.width=imageWidth_1,patternAttrs.height=imageHeight_1}else val.svgElement&&(child=(0,util.clone)(val.svgElement),patternAttrs.width=val.svgWidth,patternAttrs.height=val.svgHeight);if(child){var patternWidth,patternHeight;noRepeat?patternWidth=patternHeight=1:repeatX?(patternHeight=1,patternWidth=patternAttrs.width/boundingRect.width):repeatY?(patternWidth=1,patternHeight=patternAttrs.height/boundingRect.height):patternAttrs.patternUnits="userSpaceOnUse",null==patternWidth||isNaN(patternWidth)||(patternAttrs.width=patternWidth),null==patternHeight||isNaN(patternHeight)||(patternAttrs.height=patternHeight);var patternTransform=(0,helper.gA)(val);patternTransform&&(patternAttrs.patternTransform=patternTransform);var patternVNode=createVNode("pattern","",patternAttrs,[child]),patternKey=vNodeToString(patternVNode),patternCache=scope.patternCache,patternId=patternCache[patternKey];patternId||(patternId=scope.zrId+"-p"+scope.patternIdx++,patternCache[patternKey]=patternId,patternAttrs.id=patternId,patternVNode=scope.defs[patternId]=createVNode("pattern",patternId,patternAttrs,[child])),attrs[target]=(0,helper.m1)(patternId)}}function setClipPath(clipPath,attrs,scope){var clipPathCache=scope.clipPathCache,defs=scope.defs,clipPathId=clipPathCache[clipPath.id];if(!clipPathId){var clipPathAttrs={id:clipPathId=scope.zrId+"-c"+scope.clipPathIdx++};clipPathCache[clipPath.id]=clipPathId,defs[clipPathId]=createVNode("clipPath",clipPathId,clipPathAttrs,[brushSVGPath(clipPath,scope)])}attrs["clip-path"]=(0,helper.m1)(clipPathId)}function createTextNode(text){return document.createTextNode(text)}function insertBefore(parentNode,newNode,referenceNode){parentNode.insertBefore(newNode,referenceNode)}function removeChild(node,child){node.removeChild(child)}function appendChild(node,child){node.appendChild(child)}function parentNode(node){return node.parentNode}function nextSibling(node){return node.nextSibling}function setTextContent(node,text){node.textContent=text}var colonChar=58,xChar=120,emptyNode=createVNode("","");function isUndef(s){return void 0===s}function isDef(s){return void 0!==s}function createKeyToOldIdx(children,beginIdx,endIdx){for(var map={},i=beginIdx;i<=endIdx;++i){var key=children[i].key;void 0!==key&&(map[key]=i)}return map}function sameVnode(vnode1,vnode2){var isSameKey=vnode1.key===vnode2.key;return vnode1.tag===vnode2.tag&&isSameKey}function createElm(vnode){var i,children=vnode.children,tag=vnode.tag;if(isDef(tag)){var elm=vnode.elm=createElement(tag);if(updateAttrs(emptyNode,vnode),(0,util.isArray)(children))for(i=0;i<children.length;++i){var ch=children[i];null!=ch&&appendChild(elm,createElm(ch))}else isDef(vnode.text)&&!(0,util.isObject)(vnode.text)&&appendChild(elm,createTextNode(vnode.text))}else vnode.elm=createTextNode(vnode.text);return vnode.elm}function addVnodes(parentElm,before,vnodes,startIdx,endIdx){for(;startIdx<=endIdx;++startIdx){var ch=vnodes[startIdx];null!=ch&&insertBefore(parentElm,createElm(ch),before)}}function removeVnodes(parentElm,vnodes,startIdx,endIdx){for(;startIdx<=endIdx;++startIdx){var ch=vnodes[startIdx];if(null!=ch)if(isDef(ch.tag))removeChild(parentNode(ch.elm),ch.elm);else removeChild(parentElm,ch.elm)}}function updateAttrs(oldVnode,vnode){var key,elm=vnode.elm,oldAttrs=oldVnode&&oldVnode.attrs||{},attrs=vnode.attrs||{};if(oldAttrs!==attrs){for(key in attrs){var cur=attrs[key];oldAttrs[key]!==cur&&(!0===cur?elm.setAttribute(key,""):!1===cur?elm.removeAttribute(key):"style"===key?elm.style.cssText=cur:key.charCodeAt(0)!==xChar?elm.setAttribute(key,cur):"xmlns:xlink"===key||"xmlns"===key?elm.setAttributeNS(XMLNS,key,cur):key.charCodeAt(3)===colonChar?elm.setAttributeNS(XML_NAMESPACE,key,cur):key.charCodeAt(5)===colonChar?elm.setAttributeNS(XLINKNS,key,cur):elm.setAttribute(key,cur))}for(key in oldAttrs)key in attrs||elm.removeAttribute(key)}}function patchVnode(oldVnode,vnode){var elm=vnode.elm=oldVnode.elm,oldCh=oldVnode.children,ch=vnode.children;oldVnode!==vnode&&(updateAttrs(oldVnode,vnode),isUndef(vnode.text)?isDef(oldCh)&&isDef(ch)?oldCh!==ch&&function updateChildren(parentElm,oldCh,newCh){for(var oldKeyToIdx,idxInOld,elmToMove,oldStartIdx=0,newStartIdx=0,oldEndIdx=oldCh.length-1,oldStartVnode=oldCh[0],oldEndVnode=oldCh[oldEndIdx],newEndIdx=newCh.length-1,newStartVnode=newCh[0],newEndVnode=newCh[newEndIdx];oldStartIdx<=oldEndIdx&&newStartIdx<=newEndIdx;)null==oldStartVnode?oldStartVnode=oldCh[++oldStartIdx]:null==oldEndVnode?oldEndVnode=oldCh[--oldEndIdx]:null==newStartVnode?newStartVnode=newCh[++newStartIdx]:null==newEndVnode?newEndVnode=newCh[--newEndIdx]:sameVnode(oldStartVnode,newStartVnode)?(patchVnode(oldStartVnode,newStartVnode),oldStartVnode=oldCh[++oldStartIdx],newStartVnode=newCh[++newStartIdx]):sameVnode(oldEndVnode,newEndVnode)?(patchVnode(oldEndVnode,newEndVnode),oldEndVnode=oldCh[--oldEndIdx],newEndVnode=newCh[--newEndIdx]):sameVnode(oldStartVnode,newEndVnode)?(patchVnode(oldStartVnode,newEndVnode),insertBefore(parentElm,oldStartVnode.elm,nextSibling(oldEndVnode.elm)),oldStartVnode=oldCh[++oldStartIdx],newEndVnode=newCh[--newEndIdx]):sameVnode(oldEndVnode,newStartVnode)?(patchVnode(oldEndVnode,newStartVnode),insertBefore(parentElm,oldEndVnode.elm,oldStartVnode.elm),oldEndVnode=oldCh[--oldEndIdx],newStartVnode=newCh[++newStartIdx]):(isUndef(oldKeyToIdx)&&(oldKeyToIdx=createKeyToOldIdx(oldCh,oldStartIdx,oldEndIdx)),isUndef(idxInOld=oldKeyToIdx[newStartVnode.key])||(elmToMove=oldCh[idxInOld]).tag!==newStartVnode.tag?insertBefore(parentElm,createElm(newStartVnode),oldStartVnode.elm):(patchVnode(elmToMove,newStartVnode),oldCh[idxInOld]=void 0,insertBefore(parentElm,elmToMove.elm,oldStartVnode.elm)),newStartVnode=newCh[++newStartIdx]);(oldStartIdx<=oldEndIdx||newStartIdx<=newEndIdx)&&(oldStartIdx>oldEndIdx?addVnodes(parentElm,null==newCh[newEndIdx+1]?null:newCh[newEndIdx+1].elm,newCh,newStartIdx,newEndIdx):removeVnodes(parentElm,oldCh,oldStartIdx,oldEndIdx))}(elm,oldCh,ch):isDef(ch)?(isDef(oldVnode.text)&&setTextContent(elm,""),addVnodes(elm,null,ch,0,ch.length-1)):isDef(oldCh)?removeVnodes(elm,oldCh,0,oldCh.length-1):isDef(oldVnode.text)&&setTextContent(elm,""):oldVnode.text!==vnode.text&&(isDef(oldCh)&&removeVnodes(elm,oldCh,0,oldCh.length-1),setTextContent(elm,vnode.text)))}var canvas_helper=__webpack_require__("./node_modules/zrender/lib/canvas/helper.js"),svgId=0;const Painter=function(){function SVGPainter(root,storage,opts){if(this.type="svg",this.refreshHover=function(){0},this.configLayer=function(){0},this.storage=storage,this._opts=opts=(0,util.extend)({},opts),this.root=root,this._id="zr"+svgId++,this._oldVNode=createSVGVNode(opts.width,opts.height),root&&!opts.ssr){var viewport=this._viewport=document.createElement("div");viewport.style.cssText="position:relative;overflow:hidden";var svgDom=this._svgDom=this._oldVNode.elm=createElement("svg");updateAttrs(null,this._oldVNode),viewport.appendChild(svgDom),root.appendChild(viewport)}this.resize(opts.width,opts.height)}return SVGPainter.prototype.getType=function(){return this.type},SVGPainter.prototype.getViewportRoot=function(){return this._viewport},SVGPainter.prototype.getViewportRootOffset=function(){var viewportRoot=this.getViewportRoot();if(viewportRoot)return{offsetLeft:viewportRoot.offsetLeft||0,offsetTop:viewportRoot.offsetTop||0}},SVGPainter.prototype.getSvgDom=function(){return this._svgDom},SVGPainter.prototype.refresh=function(){if(this.root){var vnode=this.renderToVNode({willUpdate:!0});vnode.attrs.style="position:absolute;left:0;top:0;user-select:none",function patch(oldVnode,vnode){if(sameVnode(oldVnode,vnode))patchVnode(oldVnode,vnode);else{var elm=oldVnode.elm,parent_2=parentNode(elm);createElm(vnode),null!==parent_2&&(insertBefore(parent_2,vnode.elm,nextSibling(elm)),removeVnodes(parent_2,[oldVnode],0,0))}return vnode}(this._oldVNode,vnode),this._oldVNode=vnode}},SVGPainter.prototype.renderOneToVNode=function(el){return brush(el,createBrushScope(this._id))},SVGPainter.prototype.renderToVNode=function(opts){opts=opts||{};var list=this.storage.getDisplayList(!0),width=this._width,height=this._height,scope=createBrushScope(this._id);scope.animation=opts.animation,scope.willUpdate=opts.willUpdate,scope.compress=opts.compress,scope.emphasis=opts.emphasis;var children=[],bgVNode=this._bgVNode=function createBackgroundVNode(width,height,backgroundColor,scope){var bgVNode;if(backgroundColor&&"none"!==backgroundColor)if(bgVNode=createVNode("rect","bg",{width,height,x:"0",y:"0"}),(0,helper.H3)(backgroundColor))setGradient({fill:backgroundColor},bgVNode.attrs,"fill",scope);else if((0,helper.R)(backgroundColor))setPattern({style:{fill:backgroundColor},dirty:util.noop,getBoundingRect:function(){return{width,height}}},bgVNode.attrs,"fill",scope);else{var _a=(0,helper.ut)(backgroundColor),color=_a.color,opacity=_a.opacity;bgVNode.attrs.fill=color,opacity<1&&(bgVNode.attrs["fill-opacity"]=opacity)}return bgVNode}(width,height,this._backgroundColor,scope);bgVNode&&children.push(bgVNode);var mainVNode=opts.compress?null:this._mainVNode=createVNode("g","main",{},[]);this._paintList(list,scope,mainVNode?mainVNode.children:children),mainVNode&&children.push(mainVNode);var defs=(0,util.map)((0,util.keys)(scope.defs),(function(id){return scope.defs[id]}));if(defs.length&&children.push(createVNode("defs","defs",{},defs)),opts.animation){var animationCssStr=function getCssString(selectorNodes,animationNodes,opts){var S=(opts=opts||{}).newline?"\n":"",bracketBegin=" {"+S,bracketEnd=S+"}",selectors=(0,util.map)((0,util.keys)(selectorNodes),(function(className){return className+bracketBegin+(0,util.map)((0,util.keys)(selectorNodes[className]),(function(attrName){return attrName+":"+selectorNodes[className][attrName]+";"})).join(S)+bracketEnd})).join(S),animations=(0,util.map)((0,util.keys)(animationNodes),(function(animationName){return"@keyframes "+animationName+bracketBegin+(0,util.map)((0,util.keys)(animationNodes[animationName]),(function(percent){return percent+bracketBegin+(0,util.map)((0,util.keys)(animationNodes[animationName][percent]),(function(attrName){var val=animationNodes[animationName][percent][attrName];return"d"===attrName&&(val='path("'+val+'")'),attrName+":"+val+";"})).join(S)+bracketEnd})).join(S)+bracketEnd})).join(S);return selectors||animations?["<![CDATA[",selectors,animations,"]]>"].join(S):""}(scope.cssNodes,scope.cssAnims,{newline:!0});if(animationCssStr){var styleNode=createVNode("style","stl",{},[],animationCssStr);children.push(styleNode)}}return createSVGVNode(width,height,children,opts.useViewBox)},SVGPainter.prototype.renderToString=function(opts){return opts=opts||{},vNodeToString(this.renderToVNode({animation:(0,util.retrieve2)(opts.cssAnimation,!0),emphasis:(0,util.retrieve2)(opts.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:(0,util.retrieve2)(opts.useViewBox,!0)}),{newline:!0})},SVGPainter.prototype.setBackgroundColor=function(backgroundColor){this._backgroundColor=backgroundColor},SVGPainter.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},SVGPainter.prototype._paintList=function(list,scope,out){for(var currentClipPathGroup,prevClipPaths,listLen=list.length,clipPathsGroupsStack=[],clipPathsGroupsStackDepth=0,clipGroupNodeIdx=0,i=0;i<listLen;i++){var displayable=list[i];if(!displayable.invisible){var clipPaths=displayable.__clipPaths,len=clipPaths&&clipPaths.length||0,prevLen=prevClipPaths&&prevClipPaths.length||0,lca=void 0;for(lca=Math.max(len-1,prevLen-1);lca>=0&&(!clipPaths||!prevClipPaths||clipPaths[lca]!==prevClipPaths[lca]);lca--);for(var i_1=prevLen-1;i_1>lca;i_1--)currentClipPathGroup=clipPathsGroupsStack[--clipPathsGroupsStackDepth-1];for(var i_2=lca+1;i_2<len;i_2++){var groupAttrs={};setClipPath(clipPaths[i_2],groupAttrs,scope);var g=createVNode("g","clip-g-"+clipGroupNodeIdx++,groupAttrs,[]);(currentClipPathGroup?currentClipPathGroup.children:out).push(g),clipPathsGroupsStack[clipPathsGroupsStackDepth++]=g,currentClipPathGroup=g}prevClipPaths=clipPaths;var ret=brush(displayable,scope);ret&&(currentClipPathGroup?currentClipPathGroup.children:out).push(ret)}}},SVGPainter.prototype.resize=function(width,height){var opts=this._opts,root=this.root,viewport=this._viewport;if(null!=width&&(opts.width=width),null!=height&&(opts.height=height),root&&viewport&&(viewport.style.display="none",width=(0,canvas_helper.ap)(root,0,opts),height=(0,canvas_helper.ap)(root,1,opts),viewport.style.display=""),this._width!==width||this._height!==height){if(this._width=width,this._height=height,viewport){var viewportStyle=viewport.style;viewportStyle.width=width+"px",viewportStyle.height=height+"px"}if((0,helper.R)(this._backgroundColor))this.refresh();else{var svgDom=this._svgDom;svgDom&&(svgDom.setAttribute("width",width),svgDom.setAttribute("height",height));var bgEl=this._bgVNode&&this._bgVNode.elm;bgEl&&(bgEl.setAttribute("width",width),bgEl.setAttribute("height",height))}}},SVGPainter.prototype.getWidth=function(){return this._width},SVGPainter.prototype.getHeight=function(){return this._height},SVGPainter.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},SVGPainter.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},SVGPainter.prototype.toDataURL=function(base64){var str=this.renderToString(),prefix="data:image/svg+xml;";return base64?(str=(0,helper.oF)(str))&&prefix+"base64,"+str:prefix+"charset=UTF-8,"+encodeURIComponent(str)},SVGPainter}();var tslib_es6=__webpack_require__("./node_modules/echarts/node_modules/tslib/tslib.es6.js"),createSeriesData=__webpack_require__("./node_modules/echarts/lib/chart/helper/createSeriesData.js"),Series=__webpack_require__("./node_modules/echarts/lib/model/Series.js"),util_symbol=__webpack_require__("./node_modules/echarts/lib/util/symbol.js"),Group=__webpack_require__("./node_modules/zrender/lib/graphic/Group.js"),LineSeriesModel=function(_super){function LineSeriesModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=LineSeriesModel.type,_this.hasSymbolVisual=!0,_this}return(0,tslib_es6.ZT)(LineSeriesModel,_super),LineSeriesModel.prototype.getInitialData=function(option){return(0,createSeriesData.Z)(null,this,{useEncodeDefaulter:!0})},LineSeriesModel.prototype.getLegendIcon=function(opt){var group=new Group.Z,line=(0,util_symbol.th)("line",0,opt.itemHeight/2,opt.itemWidth,0,opt.lineStyle.stroke,!1);group.add(line),line.setStyle(opt.lineStyle);var visualType=this.getData().getVisual("symbol"),visualRotate=this.getData().getVisual("symbolRotate"),symbolType="none"===visualType?"circle":visualType,size=.8*opt.itemHeight,symbol=(0,util_symbol.th)(symbolType,(opt.itemWidth-size)/2,(opt.itemHeight-size)/2,size,size,opt.itemStyle.fill);group.add(symbol),symbol.setStyle(opt.itemStyle);var symbolRotate="inherit"===opt.iconRotate?visualRotate:opt.iconRotate||0;return symbol.rotation=symbolRotate*Math.PI/180,symbol.setOrigin([opt.itemWidth/2,opt.itemHeight/2]),symbolType.indexOf("empty")>-1&&(symbol.style.stroke=symbol.style.fill,symbol.style.fill="#fff",symbol.style.lineWidth=2),group},LineSeriesModel.type="series.line",LineSeriesModel.dependencies=["grid","polar"],LineSeriesModel.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},LineSeriesModel}(Series.Z);const LineSeries=LineSeriesModel;var basicTransition=__webpack_require__("./node_modules/echarts/lib/animation/basicTransition.js"),graphic=__webpack_require__("./node_modules/echarts/lib/util/graphic.js"),innerStore=__webpack_require__("./node_modules/echarts/lib/util/innerStore.js"),states=__webpack_require__("./node_modules/echarts/lib/util/states.js"),labelHelper=__webpack_require__("./node_modules/echarts/lib/chart/helper/labelHelper.js"),labelStyle=__webpack_require__("./node_modules/echarts/lib/label/labelStyle.js");function driftSymbol(dx,dy){this.parent.drift(dx,dy)}const helper_Symbol=function(_super){function Symbol(data,idx,seriesScope,opts){var _this=_super.call(this)||this;return _this.updateData(data,idx,seriesScope,opts),_this}return(0,tslib_es6.ZT)(Symbol,_super),Symbol.prototype._createSymbol=function(symbolType,data,idx,symbolSize,keepAspect){this.removeAll();var symbolPath=(0,util_symbol.th)(symbolType,-1,-1,2,2,null,keepAspect);symbolPath.attr({z2:100,culling:!0,scaleX:symbolSize[0]/2,scaleY:symbolSize[1]/2}),symbolPath.drift=driftSymbol,this._symbolType=symbolType,this.add(symbolPath)},Symbol.prototype.stopSymbolAnimation=function(toLastFrame){this.childAt(0).stopAnimation(null,toLastFrame)},Symbol.prototype.getSymbolType=function(){return this._symbolType},Symbol.prototype.getSymbolPath=function(){return this.childAt(0)},Symbol.prototype.highlight=function(){(0,states.fD)(this.childAt(0))},Symbol.prototype.downplay=function(){(0,states.Mh)(this.childAt(0))},Symbol.prototype.setZ=function(zlevel,z){var symbolPath=this.childAt(0);symbolPath.zlevel=zlevel,symbolPath.z=z},Symbol.prototype.setDraggable=function(draggable,hasCursorOption){var symbolPath=this.childAt(0);symbolPath.draggable=draggable,symbolPath.cursor=!hasCursorOption&&draggable?"move":symbolPath.cursor},Symbol.prototype.updateData=function(data,idx,seriesScope,opts){this.silent=!1;var symbolType=data.getItemVisual(idx,"symbol")||"circle",seriesModel=data.hostModel,symbolSize=Symbol.getSymbolSize(data,idx),isInit=symbolType!==this._symbolType,disableAnimation=opts&&opts.disableAnimation;if(isInit){var keepAspect=data.getItemVisual(idx,"symbolKeepAspect");this._createSymbol(symbolType,data,idx,symbolSize,keepAspect)}else{(symbolPath=this.childAt(0)).silent=!1;var target={scaleX:symbolSize[0]/2,scaleY:symbolSize[1]/2};disableAnimation?symbolPath.attr(target):basicTransition.D(symbolPath,target,seriesModel,idx),(0,basicTransition.Zi)(symbolPath)}if(this._updateCommon(data,idx,symbolSize,seriesScope,opts),isInit){var symbolPath=this.childAt(0);if(!disableAnimation){target={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:symbolPath.style.opacity}};symbolPath.scaleX=symbolPath.scaleY=0,symbolPath.style.opacity=0,basicTransition.KZ(symbolPath,target,seriesModel,idx)}}disableAnimation&&this.childAt(0).stopAnimation("leave")},Symbol.prototype._updateCommon=function(data,idx,symbolSize,seriesScope,opts){var emphasisItemStyle,blurItemStyle,selectItemStyle,focus,blurScope,emphasisDisabled,labelStatesModels,hoverScale,cursorStyle,symbolPath=this.childAt(0),seriesModel=data.hostModel;if(seriesScope&&(emphasisItemStyle=seriesScope.emphasisItemStyle,blurItemStyle=seriesScope.blurItemStyle,selectItemStyle=seriesScope.selectItemStyle,focus=seriesScope.focus,blurScope=seriesScope.blurScope,labelStatesModels=seriesScope.labelStatesModels,hoverScale=seriesScope.hoverScale,cursorStyle=seriesScope.cursorStyle,emphasisDisabled=seriesScope.emphasisDisabled),!seriesScope||data.hasItemOption){var itemModel=seriesScope&&seriesScope.itemModel?seriesScope.itemModel:data.getItemModel(idx),emphasisModel=itemModel.getModel("emphasis");emphasisItemStyle=emphasisModel.getModel("itemStyle").getItemStyle(),selectItemStyle=itemModel.getModel(["select","itemStyle"]).getItemStyle(),blurItemStyle=itemModel.getModel(["blur","itemStyle"]).getItemStyle(),focus=emphasisModel.get("focus"),blurScope=emphasisModel.get("blurScope"),emphasisDisabled=emphasisModel.get("disabled"),labelStatesModels=(0,labelStyle.k3)(itemModel),hoverScale=emphasisModel.getShallow("scale"),cursorStyle=itemModel.getShallow("cursor")}var symbolRotate=data.getItemVisual(idx,"symbolRotate");symbolPath.attr("rotation",(symbolRotate||0)*Math.PI/180||0);var symbolOffset=(0,util_symbol.Cq)(data.getItemVisual(idx,"symbolOffset"),symbolSize);symbolOffset&&(symbolPath.x=symbolOffset[0],symbolPath.y=symbolOffset[1]),cursorStyle&&symbolPath.attr("cursor",cursorStyle);var symbolStyle=data.getItemVisual(idx,"style"),visualColor=symbolStyle.fill;if(symbolPath instanceof graphic_Image.ZP){var pathStyle=symbolPath.style;symbolPath.useStyle((0,util.extend)({image:pathStyle.image,x:pathStyle.x,y:pathStyle.y,width:pathStyle.width,height:pathStyle.height},symbolStyle))}else symbolPath.__isEmptyBrush?symbolPath.useStyle((0,util.extend)({},symbolStyle)):symbolPath.useStyle(symbolStyle),symbolPath.style.decal=null,symbolPath.setColor(visualColor,opts&&opts.symbolInnerColor),symbolPath.style.strokeNoScale=!0;var liftZ=data.getItemVisual(idx,"liftZ"),z2Origin=this._z2;null!=liftZ?null==z2Origin&&(this._z2=symbolPath.z2,symbolPath.z2+=liftZ):null!=z2Origin&&(symbolPath.z2=z2Origin,this._z2=null);var useNameLabel=opts&&opts.useNameLabel;(0,labelStyle.ni)(symbolPath,labelStatesModels,{labelFetcher:seriesModel,labelDataIndex:idx,defaultText:function getLabelDefaultText(idx){return useNameLabel?data.getName(idx):(0,labelHelper.H)(data,idx)},inheritColor:visualColor,defaultOpacity:symbolStyle.opacity}),this._sizeX=symbolSize[0]/2,this._sizeY=symbolSize[1]/2;var emphasisState=symbolPath.ensureState("emphasis");emphasisState.style=emphasisItemStyle,symbolPath.ensureState("select").style=selectItemStyle,symbolPath.ensureState("blur").style=blurItemStyle;var scaleRatio=null==hoverScale||!0===hoverScale?Math.max(1.1,3/this._sizeY):isFinite(hoverScale)&&hoverScale>0?+hoverScale:1;emphasisState.scaleX=this._sizeX*scaleRatio,emphasisState.scaleY=this._sizeY*scaleRatio,this.setSymbolScale(1),(0,states.k5)(this,focus,blurScope,emphasisDisabled)},Symbol.prototype.setSymbolScale=function(scale){this.scaleX=this.scaleY=scale},Symbol.prototype.fadeOut=function(cb,seriesModel,opt){var symbolPath=this.childAt(0),dataIndex=(0,innerStore.A)(this).dataIndex,animationOpt=opt&&opt.animation;if(this.silent=symbolPath.silent=!0,opt&&opt.fadeLabel){var textContent=symbolPath.getTextContent();textContent&&basicTransition.bX(textContent,{style:{opacity:0}},seriesModel,{dataIndex,removeOpt:animationOpt,cb:function(){symbolPath.removeTextContent()}})}else symbolPath.removeTextContent();basicTransition.bX(symbolPath,{style:{opacity:0},scaleX:0,scaleY:0},seriesModel,{dataIndex,cb,removeOpt:animationOpt})},Symbol.getSymbolSize=function(data,idx){return(0,util_symbol.zp)(data.getItemVisual(idx,"symbolSize"))},Symbol}(Group.Z);function symbolNeedsDraw(data,point,idx,opt){return point&&!isNaN(point[0])&&!isNaN(point[1])&&!(opt.isIgnore&&opt.isIgnore(idx))&&!(opt.clipShape&&!opt.clipShape.contain(point[0],point[1]))&&"none"!==data.getItemVisual(idx,"symbol")}function normalizeUpdateOpt(opt){return null==opt||(0,util.isObject)(opt)||(opt={isIgnore:opt}),opt||{}}function makeSeriesScope(data){var seriesModel=data.hostModel,emphasisModel=seriesModel.getModel("emphasis");return{emphasisItemStyle:emphasisModel.getModel("itemStyle").getItemStyle(),blurItemStyle:seriesModel.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:seriesModel.getModel(["select","itemStyle"]).getItemStyle(),focus:emphasisModel.get("focus"),blurScope:emphasisModel.get("blurScope"),emphasisDisabled:emphasisModel.get("disabled"),hoverScale:emphasisModel.get("scale"),labelStatesModels:(0,labelStyle.k3)(seriesModel),cursorStyle:seriesModel.get("cursor")}}const helper_SymbolDraw=function(){function SymbolDraw(SymbolCtor){this.group=new Group.Z,this._SymbolCtor=SymbolCtor||helper_Symbol}return SymbolDraw.prototype.updateData=function(data,opt){this._progressiveEls=null,opt=normalizeUpdateOpt(opt);var group=this.group,seriesModel=data.hostModel,oldData=this._data,SymbolCtor=this._SymbolCtor,disableAnimation=opt.disableAnimation,seriesScope=makeSeriesScope(data),symbolUpdateOpt={disableAnimation},getSymbolPoint=opt.getSymbolPoint||function(idx){return data.getItemLayout(idx)};oldData||group.removeAll(),data.diff(oldData).add((function(newIdx){var point=getSymbolPoint(newIdx);if(symbolNeedsDraw(data,point,newIdx,opt)){var symbolEl=new SymbolCtor(data,newIdx,seriesScope,symbolUpdateOpt);symbolEl.setPosition(point),data.setItemGraphicEl(newIdx,symbolEl),group.add(symbolEl)}})).update((function(newIdx,oldIdx){var symbolEl=oldData.getItemGraphicEl(oldIdx),point=getSymbolPoint(newIdx);if(symbolNeedsDraw(data,point,newIdx,opt)){var newSymbolType=data.getItemVisual(newIdx,"symbol")||"circle",oldSymbolType=symbolEl&&symbolEl.getSymbolType&&symbolEl.getSymbolType();if(!symbolEl||oldSymbolType&&oldSymbolType!==newSymbolType)group.remove(symbolEl),(symbolEl=new SymbolCtor(data,newIdx,seriesScope,symbolUpdateOpt)).setPosition(point);else{symbolEl.updateData(data,newIdx,seriesScope,symbolUpdateOpt);var target={x:point[0],y:point[1]};disableAnimation?symbolEl.attr(target):basicTransition.D(symbolEl,target,seriesModel)}group.add(symbolEl),data.setItemGraphicEl(newIdx,symbolEl)}else group.remove(symbolEl)})).remove((function(oldIdx){var el=oldData.getItemGraphicEl(oldIdx);el&&el.fadeOut((function(){group.remove(el)}),seriesModel)})).execute(),this._getSymbolPoint=getSymbolPoint,this._data=data},SymbolDraw.prototype.updateLayout=function(){var _this=this,data=this._data;data&&data.eachItemGraphicEl((function(el,idx){var point=_this._getSymbolPoint(idx);el.setPosition(point),el.markRedraw()}))},SymbolDraw.prototype.incrementalPrepareUpdate=function(data){this._seriesScope=makeSeriesScope(data),this._data=null,this.group.removeAll()},SymbolDraw.prototype.incrementalUpdate=function(taskParams,data,opt){function updateIncrementalAndHover(el){el.isGroup||(el.incremental=!0,el.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[],opt=normalizeUpdateOpt(opt);for(var idx=taskParams.start;idx<taskParams.end;idx++){var point=data.getItemLayout(idx);if(symbolNeedsDraw(data,point,idx,opt)){var el=new this._SymbolCtor(data,idx,this._seriesScope);el.traverse(updateIncrementalAndHover),el.setPosition(point),this.group.add(el),data.setItemGraphicEl(idx,el),this._progressiveEls.push(el)}}},SymbolDraw.prototype.eachRendered=function(cb){graphic.traverseElements(this._progressiveEls||this.group,cb)},SymbolDraw.prototype.remove=function(enableAnimation){var group=this.group,data=this._data;data&&enableAnimation?data.eachItemGraphicEl((function(el){el.fadeOut((function(){group.remove(el)}),data.hostModel)})):group.removeAll()},SymbolDraw}();var dataStackHelper=__webpack_require__("./node_modules/echarts/lib/data/helper/dataStackHelper.js");function prepareDataCoordInfo(coordSys,data,valueOrigin){var baseAxis=coordSys.getBaseAxis(),valueAxis=coordSys.getOtherAxis(baseAxis),valueStart=function getValueStart(valueAxis,valueOrigin){var valueStart=0,extent=valueAxis.scale.getExtent();"start"===valueOrigin?valueStart=extent[0]:"end"===valueOrigin?valueStart=extent[1]:(0,util.isNumber)(valueOrigin)&&!isNaN(valueOrigin)?valueStart=valueOrigin:extent[0]>0?valueStart=extent[0]:extent[1]<0&&(valueStart=extent[1]);return valueStart}(valueAxis,valueOrigin),baseAxisDim=baseAxis.dim,valueAxisDim=valueAxis.dim,valueDim=data.mapDimension(valueAxisDim),baseDim=data.mapDimension(baseAxisDim),baseDataOffset="x"===valueAxisDim||"radius"===valueAxisDim?1:0,dims=(0,util.map)(coordSys.dimensions,(function(coordDim){return data.mapDimension(coordDim)})),stacked=!1,stackResultDim=data.getCalculationInfo("stackResultDimension");return(0,dataStackHelper.M)(data,dims[0])&&(stacked=!0,dims[0]=stackResultDim),(0,dataStackHelper.M)(data,dims[1])&&(stacked=!0,dims[1]=stackResultDim),{dataDimsForPoint:dims,valueStart,valueAxisDim,baseAxisDim,stacked:!!stacked,valueDim,baseDim,baseDataOffset,stackedOverDimension:data.getCalculationInfo("stackedOverDimension")}}function getStackedOnPoint(dataCoordInfo,coordSys,data,idx){var value=NaN;dataCoordInfo.stacked&&(value=data.get(data.getCalculationInfo("stackedOverDimension"),idx)),isNaN(value)&&(value=dataCoordInfo.valueStart);var baseDataOffset=dataCoordInfo.baseDataOffset,stackedData=[];return stackedData[baseDataOffset]=data.get(dataCoordInfo.baseDim,idx),stackedData[1-baseDataOffset]=value,coordSys.dataToPoint(stackedData)}var vendor=__webpack_require__("./node_modules/echarts/lib/util/vendor.js");var LinearGradient=__webpack_require__("./node_modules/zrender/lib/graphic/LinearGradient.js"),util_model=__webpack_require__("./node_modules/echarts/lib/util/model.js"),curve=__webpack_require__("./node_modules/zrender/lib/core/curve.js"),mathMin=Math.min,mathMax=Math.max;function isPointNull(x,y){return isNaN(x)||isNaN(y)}function drawSegment(ctx,points,start,segLen,allLen,dir,smooth,smoothMonotone,connectNulls){for(var prevX,prevY,cpx0,cpy0,cpx1,cpy1,idx=start,k=0;k<segLen;k++){var x=points[2*idx],y=points[2*idx+1];if(idx>=allLen||idx<0)break;if(isPointNull(x,y)){if(connectNulls){idx+=dir;continue}break}if(idx===start)ctx[dir>0?"moveTo":"lineTo"](x,y),cpx0=x,cpy0=y;else{var dx=x-prevX,dy=y-prevY;if(dx*dx+dy*dy<.5){idx+=dir;continue}if(smooth>0){for(var nextIdx=idx+dir,nextX=points[2*nextIdx],nextY=points[2*nextIdx+1];nextX===x&&nextY===y&&k<segLen;)k++,idx+=dir,nextX=points[2*(nextIdx+=dir)],nextY=points[2*nextIdx+1],dx=(x=points[2*idx])-prevX,dy=(y=points[2*idx+1])-prevY;var tmpK=k+1;if(connectNulls)for(;isPointNull(nextX,nextY)&&tmpK<segLen;)tmpK++,nextX=points[2*(nextIdx+=dir)],nextY=points[2*nextIdx+1];var ratioNextSeg=.5,vx=0,vy=0,nextCpx0=void 0,nextCpy0=void 0;if(tmpK>=segLen||isPointNull(nextX,nextY))cpx1=x,cpy1=y;else{vx=nextX-prevX,vy=nextY-prevY;var dx0=x-prevX,dx1=nextX-x,dy0=y-prevY,dy1=nextY-y,lenPrevSeg=void 0,lenNextSeg=void 0;if("x"===smoothMonotone){var dir_1=vx>0?1:-1;cpx1=x-dir_1*(lenPrevSeg=Math.abs(dx0))*smooth,cpy1=y,nextCpx0=x+dir_1*(lenNextSeg=Math.abs(dx1))*smooth,nextCpy0=y}else if("y"===smoothMonotone){var dir_2=vy>0?1:-1;cpx1=x,cpy1=y-dir_2*(lenPrevSeg=Math.abs(dy0))*smooth,nextCpx0=x,nextCpy0=y+dir_2*(lenNextSeg=Math.abs(dy1))*smooth}else lenPrevSeg=Math.sqrt(dx0*dx0+dy0*dy0),cpx1=x-vx*smooth*(1-(ratioNextSeg=(lenNextSeg=Math.sqrt(dx1*dx1+dy1*dy1))/(lenNextSeg+lenPrevSeg))),cpy1=y-vy*smooth*(1-ratioNextSeg),nextCpy0=y+vy*smooth*ratioNextSeg,nextCpx0=mathMin(nextCpx0=x+vx*smooth*ratioNextSeg,mathMax(nextX,x)),nextCpy0=mathMin(nextCpy0,mathMax(nextY,y)),nextCpx0=mathMax(nextCpx0,mathMin(nextX,x)),cpy1=y-(vy=(nextCpy0=mathMax(nextCpy0,mathMin(nextY,y)))-y)*lenPrevSeg/lenNextSeg,cpx1=mathMin(cpx1=x-(vx=nextCpx0-x)*lenPrevSeg/lenNextSeg,mathMax(prevX,x)),cpy1=mathMin(cpy1,mathMax(prevY,y)),nextCpx0=x+(vx=x-(cpx1=mathMax(cpx1,mathMin(prevX,x))))*lenNextSeg/lenPrevSeg,nextCpy0=y+(vy=y-(cpy1=mathMax(cpy1,mathMin(prevY,y))))*lenNextSeg/lenPrevSeg}ctx.bezierCurveTo(cpx0,cpy0,cpx1,cpy1,x,y),cpx0=nextCpx0,cpy0=nextCpy0}else ctx.lineTo(x,y)}prevX=x,prevY=y,idx+=dir}return k}var ECPolylineShape=function ECPolylineShape(){this.smooth=0,this.smoothConstraint=!0},ECPolyline=function(_super){function ECPolyline(opts){var _this=_super.call(this,opts)||this;return _this.type="ec-polyline",_this}return(0,tslib_es6.ZT)(ECPolyline,_super),ECPolyline.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},ECPolyline.prototype.getDefaultShape=function(){return new ECPolylineShape},ECPolyline.prototype.buildPath=function(ctx,shape){var points=shape.points,i=0,len=points.length/2;if(shape.connectNulls){for(;len>0&&isPointNull(points[2*len-2],points[2*len-1]);len--);for(;i<len&&isPointNull(points[2*i],points[2*i+1]);i++);}for(;i<len;)i+=drawSegment(ctx,points,i,len,len,1,shape.smooth,shape.smoothMonotone,shape.connectNulls)+1},ECPolyline.prototype.getPointOn=function(xOrY,dim){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var x0,y0,data=this.path.data,CMD=PathProxy.Z.CMD,isDimX="x"===dim,roots=[],i=0;i<data.length;){var x=void 0,y=void 0,x2=void 0,y2=void 0,x3=void 0,y3=void 0,t=void 0;switch(data[i++]){case CMD.M:x0=data[i++],y0=data[i++];break;case CMD.L:if(x=data[i++],y=data[i++],(t=isDimX?(xOrY-x0)/(x-x0):(xOrY-y0)/(y-y0))<=1&&t>=0){var val=isDimX?(y-y0)*t+y0:(x-x0)*t+x0;return isDimX?[xOrY,val]:[val,xOrY]}x0=x,y0=y;break;case CMD.C:x=data[i++],y=data[i++],x2=data[i++],y2=data[i++],x3=data[i++],y3=data[i++];var nRoot=isDimX?(0,curve.kD)(x0,x,x2,x3,xOrY,roots):(0,curve.kD)(y0,y,y2,y3,xOrY,roots);if(nRoot>0)for(var i_1=0;i_1<nRoot;i_1++){var t_1=roots[i_1];if(t_1<=1&&t_1>=0){val=isDimX?(0,curve.af)(y0,y,y2,y3,t_1):(0,curve.af)(x0,x,x2,x3,t_1);return isDimX?[xOrY,val]:[val,xOrY]}}x0=x3,y0=y3}}},ECPolyline}(Path.ZP),ECPolygonShape=function(_super){function ECPolygonShape(){return null!==_super&&_super.apply(this,arguments)||this}return(0,tslib_es6.ZT)(ECPolygonShape,_super),ECPolygonShape}(ECPolylineShape),ECPolygon=function(_super){function ECPolygon(opts){var _this=_super.call(this,opts)||this;return _this.type="ec-polygon",_this}return(0,tslib_es6.ZT)(ECPolygon,_super),ECPolygon.prototype.getDefaultShape=function(){return new ECPolygonShape},ECPolygon.prototype.buildPath=function(ctx,shape){var points=shape.points,stackedOnPoints=shape.stackedOnPoints,i=0,len=points.length/2,smoothMonotone=shape.smoothMonotone;if(shape.connectNulls){for(;len>0&&isPointNull(points[2*len-2],points[2*len-1]);len--);for(;i<len&&isPointNull(points[2*i],points[2*i+1]);i++);}for(;i<len;){var k=drawSegment(ctx,points,i,len,len,1,shape.smooth,smoothMonotone,shape.connectNulls);drawSegment(ctx,stackedOnPoints,i+k-1,k,len,-1,shape.stackedOnSmooth,smoothMonotone,shape.connectNulls),i+=k+1,ctx.closePath()}},ECPolygon}(Path.ZP),Chart=__webpack_require__("./node_modules/echarts/lib/view/Chart.js"),createClipPathFromCoordSys=__webpack_require__("./node_modules/echarts/lib/chart/helper/createClipPathFromCoordSys.js"),CoordinateSystem=__webpack_require__("./node_modules/echarts/lib/coord/CoordinateSystem.js"),format=__webpack_require__("./node_modules/echarts/lib/util/format.js");function isPointsSame(points1,points2){if(points1.length===points2.length){for(var i=0;i<points1.length;i++)if(points1[i]!==points2[i])return;return!0}}function bboxFromPoints(points){for(var minX=1/0,minY=1/0,maxX=-1/0,maxY=-1/0,i=0;i<points.length;){var x=points[i++],y=points[i++];isNaN(x)||(minX=Math.min(x,minX),maxX=Math.max(x,maxX)),isNaN(y)||(minY=Math.min(y,minY),maxY=Math.max(y,maxY))}return[[minX,minY],[maxX,maxY]]}function getBoundingDiff(points1,points2){var _a=bboxFromPoints(points1),min1=_a[0],max1=_a[1],_b=bboxFromPoints(points2),min2=_b[0],max2=_b[1];return Math.max(Math.abs(min1[0]-min2[0]),Math.abs(min1[1]-min2[1]),Math.abs(max1[0]-max2[0]),Math.abs(max1[1]-max2[1]))}function getSmooth(smooth){return util.isNumber(smooth)?smooth:smooth?.5:0}function turnPointsIntoStep(points,coordSys,stepTurnAt,connectNulls){var baseAxis=coordSys.getBaseAxis(),baseIndex="x"===baseAxis.dim||"radius"===baseAxis.dim?0:1,stepPoints=[],i=0,stepPt=[],pt=[],nextPt=[],filteredPoints=[];if(connectNulls){for(i=0;i<points.length;i+=2)isNaN(points[i])||isNaN(points[i+1])||filteredPoints.push(points[i],points[i+1]);points=filteredPoints}for(i=0;i<points.length-2;i+=2)switch(nextPt[0]=points[i+2],nextPt[1]=points[i+3],pt[0]=points[i],pt[1]=points[i+1],stepPoints.push(pt[0],pt[1]),stepTurnAt){case"end":stepPt[baseIndex]=nextPt[baseIndex],stepPt[1-baseIndex]=pt[1-baseIndex],stepPoints.push(stepPt[0],stepPt[1]);break;case"middle":var middle=(pt[baseIndex]+nextPt[baseIndex])/2,stepPt2=[];stepPt[baseIndex]=stepPt2[baseIndex]=middle,stepPt[1-baseIndex]=pt[1-baseIndex],stepPt2[1-baseIndex]=nextPt[1-baseIndex],stepPoints.push(stepPt[0],stepPt[1]),stepPoints.push(stepPt2[0],stepPt2[1]);break;default:stepPt[baseIndex]=pt[baseIndex],stepPt[1-baseIndex]=nextPt[1-baseIndex],stepPoints.push(stepPt[0],stepPt[1])}return stepPoints.push(points[i++],points[i++]),stepPoints}function getVisualGradient(data,coordSys,api){var visualMetaList=data.getVisual("visualMeta");if(visualMetaList&&visualMetaList.length&&data.count()&&"cartesian2d"===coordSys.type){for(var coordDim,visualMeta,i=visualMetaList.length-1;i>=0;i--){var dimInfo=data.getDimensionInfo(visualMetaList[i].dimension);if("x"===(coordDim=dimInfo&&dimInfo.coordDim)||"y"===coordDim){visualMeta=visualMetaList[i];break}}if(visualMeta){var axis=coordSys.getAxis(coordDim),colorStops=util.map(visualMeta.stops,(function(stop){return{coord:axis.toGlobalCoord(axis.dataToCoord(stop.value)),color:stop.color}})),stopLen=colorStops.length,outerColors=visualMeta.outerColors.slice();stopLen&&colorStops[0].coord>colorStops[stopLen-1].coord&&(colorStops.reverse(),outerColors.reverse());var colorStopsInRange=function clipColorStops(colorStops,maxSize){var prevOutOfRangeColorStop,prevInRangeColorStop,newColorStops=[],len=colorStops.length;function lerpStop(stop0,stop1,clippedCoord){var coord0=stop0.coord,p=(clippedCoord-coord0)/(stop1.coord-coord0);return{coord:clippedCoord,color:(0,tool_color.lerp)(p,[stop0.color,stop1.color])}}for(var i=0;i<len;i++){var stop_1=colorStops[i],coord=stop_1.coord;if(coord<0)prevOutOfRangeColorStop=stop_1;else{if(coord>maxSize){prevInRangeColorStop?newColorStops.push(lerpStop(prevInRangeColorStop,stop_1,maxSize)):prevOutOfRangeColorStop&&newColorStops.push(lerpStop(prevOutOfRangeColorStop,stop_1,0),lerpStop(prevOutOfRangeColorStop,stop_1,maxSize));break}prevOutOfRangeColorStop&&(newColorStops.push(lerpStop(prevOutOfRangeColorStop,stop_1,0)),prevOutOfRangeColorStop=null),newColorStops.push(stop_1),prevInRangeColorStop=stop_1}}return newColorStops}(colorStops,"x"===coordDim?api.getWidth():api.getHeight()),inRangeStopLen=colorStopsInRange.length;if(!inRangeStopLen&&stopLen)return colorStops[0].coord<0?outerColors[1]?outerColors[1]:colorStops[stopLen-1].color:outerColors[0]?outerColors[0]:colorStops[0].color;var minCoord=colorStopsInRange[0].coord-10,maxCoord=colorStopsInRange[inRangeStopLen-1].coord+10,coordSpan=maxCoord-minCoord;if(coordSpan<.001)return"transparent";util.each(colorStopsInRange,(function(stop){stop.offset=(stop.coord-minCoord)/coordSpan})),colorStopsInRange.push({offset:inRangeStopLen?colorStopsInRange[inRangeStopLen-1].offset:.5,color:outerColors[1]||"transparent"}),colorStopsInRange.unshift({offset:inRangeStopLen?colorStopsInRange[0].offset:.5,color:outerColors[0]||"transparent"});var gradient=new LinearGradient.Z(0,0,0,0,colorStopsInRange,!0);return gradient[coordDim]=minCoord,gradient[coordDim+"2"]=maxCoord,gradient}}}function getIsIgnoreFunc(seriesModel,data,coordSys){var showAllSymbol=seriesModel.get("showAllSymbol"),isAuto="auto"===showAllSymbol;if(!showAllSymbol||isAuto){var categoryAxis=coordSys.getAxesByScale("ordinal")[0];if(categoryAxis&&(!isAuto||!function canShowAllSymbolForCategory(categoryAxis,data){var axisExtent=categoryAxis.getExtent(),availSize=Math.abs(axisExtent[1]-axisExtent[0])/categoryAxis.scale.count();isNaN(availSize)&&(availSize=0);for(var dataLen=data.count(),step=Math.max(1,Math.round(dataLen/5)),dataIndex=0;dataIndex<dataLen;dataIndex+=step)if(1.5*helper_Symbol.getSymbolSize(data,dataIndex)[categoryAxis.isHorizontal()?1:0]>availSize)return!1;return!0}(categoryAxis,data))){var categoryDataDim=data.mapDimension(categoryAxis.dim),labelMap={};return util.each(categoryAxis.getViewLabels(),(function(labelItem){var ordinalNumber=categoryAxis.scale.getRawOrdinalNumber(labelItem.tickValue);labelMap[ordinalNumber]=1})),function(dataIndex){return!labelMap.hasOwnProperty(data.get(categoryDataDim,dataIndex))}}}}function getPointAtIndex(points,idx){return[points[2*idx],points[2*idx+1]]}function anyStateShowEndLabel(seriesModel){if(seriesModel.get(["endLabel","show"]))return!0;for(var i=0;i<states.L1.length;i++)if(seriesModel.get([states.L1[i],"endLabel","show"]))return!0;return!1}function createLineClipPath(lineView,coordSys,hasAnimation,seriesModel){if((0,CoordinateSystem.H)(coordSys,"cartesian2d")){var endLabelModel_1=seriesModel.getModel("endLabel"),valueAnimation_1=endLabelModel_1.get("valueAnimation"),data_1=seriesModel.getData(),labelAnimationRecord_1={lastFrameIndex:0},during=anyStateShowEndLabel(seriesModel)?function(percent,clipRect){lineView._endLabelOnDuring(percent,clipRect,data_1,labelAnimationRecord_1,valueAnimation_1,endLabelModel_1,coordSys)}:null,isHorizontal=coordSys.getBaseAxis().isHorizontal(),clipPath=(0,createClipPathFromCoordSys.ID)(coordSys,hasAnimation,seriesModel,(function(){var endLabel=lineView._endLabel;endLabel&&hasAnimation&&null!=labelAnimationRecord_1.originalX&&endLabel.attr({x:labelAnimationRecord_1.originalX,y:labelAnimationRecord_1.originalY})}),during);if(!seriesModel.get("clip",!0)){var rectShape=clipPath.shape,expandSize=Math.max(rectShape.width,rectShape.height);isHorizontal?(rectShape.y-=expandSize,rectShape.height+=2*expandSize):(rectShape.x-=expandSize,rectShape.width+=2*expandSize)}return during&&during(1,clipPath),clipPath}return(0,createClipPathFromCoordSys.X0)(coordSys,hasAnimation,seriesModel)}var LineView=function(_super){function LineView(){return null!==_super&&_super.apply(this,arguments)||this}return(0,tslib_es6.ZT)(LineView,_super),LineView.prototype.init=function(){var lineGroup=new Group.Z,symbolDraw=new helper_SymbolDraw;this.group.add(symbolDraw.group),this._symbolDraw=symbolDraw,this._lineGroup=lineGroup},LineView.prototype.render=function(seriesModel,ecModel,api){var _this=this,coordSys=seriesModel.coordinateSystem,group=this.group,data=seriesModel.getData(),lineStyleModel=seriesModel.getModel("lineStyle"),areaStyleModel=seriesModel.getModel("areaStyle"),points=data.getLayout("points")||[],isCoordSysPolar="polar"===coordSys.type,prevCoordSys=this._coordSys,symbolDraw=this._symbolDraw,polyline=this._polyline,polygon=this._polygon,lineGroup=this._lineGroup,hasAnimation=!ecModel.ssr&&seriesModel.get("animation"),isAreaChart=!areaStyleModel.isEmpty(),valueOrigin=areaStyleModel.get("origin"),dataCoordInfo=prepareDataCoordInfo(coordSys,data,valueOrigin),stackedOnPoints=isAreaChart&&function getStackedOnPoints(coordSys,data,dataCoordInfo){if(!dataCoordInfo.valueDim)return[];for(var len=data.count(),points=(0,vendor.o)(2*len),idx=0;idx<len;idx++){var pt=getStackedOnPoint(dataCoordInfo,coordSys,data,idx);points[2*idx]=pt[0],points[2*idx+1]=pt[1]}return points}(coordSys,data,dataCoordInfo),showSymbol=seriesModel.get("showSymbol"),connectNulls=seriesModel.get("connectNulls"),isIgnoreFunc=showSymbol&&!isCoordSysPolar&&getIsIgnoreFunc(seriesModel,data,coordSys),oldData=this._data;oldData&&oldData.eachItemGraphicEl((function(el,idx){el.__temp&&(group.remove(el),oldData.setItemGraphicEl(idx,null))})),showSymbol||symbolDraw.remove(),group.add(lineGroup);var clipShapeForSymbol,step=!isCoordSysPolar&&seriesModel.get("step");coordSys&&coordSys.getArea&&seriesModel.get("clip",!0)&&(null!=(clipShapeForSymbol=coordSys.getArea()).width?(clipShapeForSymbol.x-=.1,clipShapeForSymbol.y-=.1,clipShapeForSymbol.width+=.2,clipShapeForSymbol.height+=.2):clipShapeForSymbol.r0&&(clipShapeForSymbol.r0-=.5,clipShapeForSymbol.r+=.5)),this._clipShapeForSymbol=clipShapeForSymbol;var visualColor=getVisualGradient(data,coordSys,api)||data.getVisual("style")[data.getVisual("drawType")];if(polyline&&prevCoordSys.type===coordSys.type&&step===this._step){isAreaChart&&!polygon?polygon=this._newPolygon(points,stackedOnPoints):polygon&&!isAreaChart&&(lineGroup.remove(polygon),polygon=this._polygon=null),isCoordSysPolar||this._initOrUpdateEndLabel(seriesModel,coordSys,(0,format.Lz)(visualColor));var oldClipPath=lineGroup.getClipPath();if(oldClipPath){var newClipPath=createLineClipPath(this,coordSys,!1,seriesModel);basicTransition.KZ(oldClipPath,{shape:newClipPath.shape},seriesModel)}else lineGroup.setClipPath(createLineClipPath(this,coordSys,!0,seriesModel));showSymbol&&symbolDraw.updateData(data,{isIgnore:isIgnoreFunc,clipShape:clipShapeForSymbol,disableAnimation:!0,getSymbolPoint:function(idx){return[points[2*idx],points[2*idx+1]]}}),isPointsSame(this._stackedOnPoints,stackedOnPoints)&&isPointsSame(this._points,points)||(hasAnimation?this._doUpdateAnimation(data,stackedOnPoints,coordSys,api,step,valueOrigin,connectNulls):(step&&(points=turnPointsIntoStep(points,coordSys,step,connectNulls),stackedOnPoints&&(stackedOnPoints=turnPointsIntoStep(stackedOnPoints,coordSys,step,connectNulls))),polyline.setShape({points}),polygon&&polygon.setShape({points,stackedOnPoints})))}else showSymbol&&symbolDraw.updateData(data,{isIgnore:isIgnoreFunc,clipShape:clipShapeForSymbol,disableAnimation:!0,getSymbolPoint:function(idx){return[points[2*idx],points[2*idx+1]]}}),hasAnimation&&this._initSymbolLabelAnimation(data,coordSys,clipShapeForSymbol),step&&(points=turnPointsIntoStep(points,coordSys,step,connectNulls),stackedOnPoints&&(stackedOnPoints=turnPointsIntoStep(stackedOnPoints,coordSys,step,connectNulls))),polyline=this._newPolyline(points),isAreaChart?polygon=this._newPolygon(points,stackedOnPoints):polygon&&(lineGroup.remove(polygon),polygon=this._polygon=null),isCoordSysPolar||this._initOrUpdateEndLabel(seriesModel,coordSys,(0,format.Lz)(visualColor)),lineGroup.setClipPath(createLineClipPath(this,coordSys,!0,seriesModel));var emphasisModel=seriesModel.getModel("emphasis"),focus=emphasisModel.get("focus"),blurScope=emphasisModel.get("blurScope"),emphasisDisabled=emphasisModel.get("disabled");(polyline.useStyle(util.defaults(lineStyleModel.getLineStyle(),{fill:"none",stroke:visualColor,lineJoin:"bevel"})),(0,states.WO)(polyline,seriesModel,"lineStyle"),polyline.style.lineWidth>0&&"bolder"===seriesModel.get(["emphasis","lineStyle","width"]))&&(polyline.getState("emphasis").style.lineWidth=+polyline.style.lineWidth+1);(0,innerStore.A)(polyline).seriesIndex=seriesModel.seriesIndex,(0,states.k5)(polyline,focus,blurScope,emphasisDisabled);var smooth=getSmooth(seriesModel.get("smooth")),smoothMonotone=seriesModel.get("smoothMonotone");if(polyline.setShape({smooth,smoothMonotone,connectNulls}),polygon){var stackedOnSeries=data.getCalculationInfo("stackedOnSeries"),stackedOnSmooth=0;polygon.useStyle(util.defaults(areaStyleModel.getAreaStyle(),{fill:visualColor,opacity:.7,lineJoin:"bevel",decal:data.getVisual("style").decal})),stackedOnSeries&&(stackedOnSmooth=getSmooth(stackedOnSeries.get("smooth"))),polygon.setShape({smooth,stackedOnSmooth,smoothMonotone,connectNulls}),(0,states.WO)(polygon,seriesModel,"areaStyle"),(0,innerStore.A)(polygon).seriesIndex=seriesModel.seriesIndex,(0,states.k5)(polygon,focus,blurScope,emphasisDisabled)}var changePolyState=function(toState){_this._changePolyState(toState)};data.eachItemGraphicEl((function(el){el&&(el.onHoverStateChange=changePolyState)})),this._polyline.onHoverStateChange=changePolyState,this._data=data,this._coordSys=coordSys,this._stackedOnPoints=stackedOnPoints,this._points=points,this._step=step,this._valueOrigin=valueOrigin,seriesModel.get("triggerLineEvent")&&(this.packEventData(seriesModel,polyline),polygon&&this.packEventData(seriesModel,polygon))},LineView.prototype.packEventData=function(seriesModel,el){(0,innerStore.A)(el).eventData={componentType:"series",componentSubType:"line",componentIndex:seriesModel.componentIndex,seriesIndex:seriesModel.seriesIndex,seriesName:seriesModel.name,seriesType:"line"}},LineView.prototype.highlight=function(seriesModel,ecModel,api,payload){var data=seriesModel.getData(),dataIndex=util_model.gO(data,payload);if(this._changePolyState("emphasis"),!(dataIndex instanceof Array)&&null!=dataIndex&&dataIndex>=0){var points=data.getLayout("points"),symbol=data.getItemGraphicEl(dataIndex);if(!symbol){var x=points[2*dataIndex],y=points[2*dataIndex+1];if(isNaN(x)||isNaN(y))return;if(this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(x,y))return;var zlevel=seriesModel.get("zlevel")||0,z=seriesModel.get("z")||0;(symbol=new helper_Symbol(data,dataIndex)).x=x,symbol.y=y,symbol.setZ(zlevel,z);var symbolLabel=symbol.getSymbolPath().getTextContent();symbolLabel&&(symbolLabel.zlevel=zlevel,symbolLabel.z=z,symbolLabel.z2=this._polyline.z2+1),symbol.__temp=!0,data.setItemGraphicEl(dataIndex,symbol),symbol.stopSymbolAnimation(!0),this.group.add(symbol)}symbol.highlight()}else Chart.Z.prototype.highlight.call(this,seriesModel,ecModel,api,payload)},LineView.prototype.downplay=function(seriesModel,ecModel,api,payload){var data=seriesModel.getData(),dataIndex=util_model.gO(data,payload);if(this._changePolyState("normal"),null!=dataIndex&&dataIndex>=0){var symbol=data.getItemGraphicEl(dataIndex);symbol&&(symbol.__temp?(data.setItemGraphicEl(dataIndex,null),this.group.remove(symbol)):symbol.downplay())}else Chart.Z.prototype.downplay.call(this,seriesModel,ecModel,api,payload)},LineView.prototype._changePolyState=function(toState){var polygon=this._polygon;(0,states.Gl)(this._polyline,toState),polygon&&(0,states.Gl)(polygon,toState)},LineView.prototype._newPolyline=function(points){var polyline=this._polyline;return polyline&&this._lineGroup.remove(polyline),polyline=new ECPolyline({shape:{points},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(polyline),this._polyline=polyline,polyline},LineView.prototype._newPolygon=function(points,stackedOnPoints){var polygon=this._polygon;return polygon&&this._lineGroup.remove(polygon),polygon=new ECPolygon({shape:{points,stackedOnPoints},segmentIgnoreThreshold:2}),this._lineGroup.add(polygon),this._polygon=polygon,polygon},LineView.prototype._initSymbolLabelAnimation=function(data,coordSys,clipShape){var isHorizontalOrRadial,isCoordSysPolar,baseAxis=coordSys.getBaseAxis(),isAxisInverse=baseAxis.inverse;"cartesian2d"===coordSys.type?(isHorizontalOrRadial=baseAxis.isHorizontal(),isCoordSysPolar=!1):"polar"===coordSys.type&&(isHorizontalOrRadial="angle"===baseAxis.dim,isCoordSysPolar=!0);var seriesModel=data.hostModel,seriesDuration=seriesModel.get("animationDuration");util.isFunction(seriesDuration)&&(seriesDuration=seriesDuration(null));var seriesDelay=seriesModel.get("animationDelay")||0,seriesDelayValue=util.isFunction(seriesDelay)?seriesDelay(null):seriesDelay;data.eachItemGraphicEl((function(symbol,idx){var el=symbol;if(el){var point=[symbol.x,symbol.y],start=void 0,end=void 0,current=void 0;if(clipShape)if(isCoordSysPolar){var polarClip=clipShape,coord=coordSys.pointToCoord(point);isHorizontalOrRadial?(start=polarClip.startAngle,end=polarClip.endAngle,current=-coord[1]/180*Math.PI):(start=polarClip.r0,end=polarClip.r,current=coord[0])}else{var gridClip=clipShape;isHorizontalOrRadial?(start=gridClip.x,end=gridClip.x+gridClip.width,current=symbol.x):(start=gridClip.y+gridClip.height,end=gridClip.y,current=symbol.y)}var ratio=end===start?0:(current-start)/(end-start);isAxisInverse&&(ratio=1-ratio);var delay=util.isFunction(seriesDelay)?seriesDelay(idx):seriesDuration*ratio+seriesDelayValue,symbolPath=el.getSymbolPath(),text=symbolPath.getTextContent();el.attr({scaleX:0,scaleY:0}),el.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay}),text&&text.animateFrom({style:{opacity:0}},{duration:300,delay}),symbolPath.disableLabelAnimation=!0}}))},LineView.prototype._initOrUpdateEndLabel=function(seriesModel,coordSys,inheritColor){var endLabelModel=seriesModel.getModel("endLabel");if(anyStateShowEndLabel(seriesModel)){var data_2=seriesModel.getData(),polyline=this._polyline,points=data_2.getLayout("points");if(!points)return polyline.removeTextContent(),void(this._endLabel=null);var endLabel=this._endLabel;endLabel||((endLabel=this._endLabel=new Text.ZP({z2:200})).ignoreClip=!0,polyline.setTextContent(this._endLabel),polyline.disableLabelAnimation=!0);var dataIndex=function getLastIndexNotNull(points){for(var x,y,len=points.length/2;len>0&&(x=points[2*len-2],y=points[2*len-1],isNaN(x)||isNaN(y));len--);return len-1}(points);dataIndex>=0&&((0,labelStyle.ni)(polyline,(0,labelStyle.k3)(seriesModel,"endLabel"),{inheritColor,labelFetcher:seriesModel,labelDataIndex:dataIndex,defaultText:function(dataIndex,opt,interpolatedValue){return null!=interpolatedValue?(0,labelHelper.O)(data_2,interpolatedValue):(0,labelHelper.H)(data_2,dataIndex)},enableTextSetter:!0},function getEndLabelStateSpecified(endLabelModel,coordSys){var baseAxis=coordSys.getBaseAxis(),isHorizontal=baseAxis.isHorizontal(),isBaseInversed=baseAxis.inverse,align=isHorizontal?isBaseInversed?"right":"left":"center",verticalAlign=isHorizontal?"middle":isBaseInversed?"top":"bottom";return{normal:{align:endLabelModel.get("align")||align,verticalAlign:endLabelModel.get("verticalAlign")||verticalAlign}}}(endLabelModel,coordSys)),polyline.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},LineView.prototype._endLabelOnDuring=function(percent,clipRect,data,animationRecord,valueAnimation,endLabelModel,coordSys){var endLabel=this._endLabel,polyline=this._polyline;if(endLabel){percent<1&&null==animationRecord.originalX&&(animationRecord.originalX=endLabel.x,animationRecord.originalY=endLabel.y);var points=data.getLayout("points"),seriesModel=data.hostModel,connectNulls=seriesModel.get("connectNulls"),precision=endLabelModel.get("precision"),distance=endLabelModel.get("distance")||0,baseAxis=coordSys.getBaseAxis(),isHorizontal=baseAxis.isHorizontal(),isBaseInversed=baseAxis.inverse,clipShape=clipRect.shape,xOrY=isBaseInversed?isHorizontal?clipShape.x:clipShape.y+clipShape.height:isHorizontal?clipShape.x+clipShape.width:clipShape.y,distanceX=(isHorizontal?distance:0)*(isBaseInversed?-1:1),distanceY=(isHorizontal?0:-distance)*(isBaseInversed?-1:1),dim=isHorizontal?"x":"y",dataIndexRange=function getIndexRange(points,xOrY,dim){for(var a,b,len=points.length/2,dimIdx="x"===dim?0:1,prevIndex=0,nextIndex=-1,i=0;i<len;i++)if(b=points[2*i+dimIdx],!isNaN(b)&&!isNaN(points[2*i+1-dimIdx]))if(0!==i){if(a<=xOrY&&b>=xOrY||a>=xOrY&&b<=xOrY){nextIndex=i;break}prevIndex=i,a=b}else a=b;return{range:[prevIndex,nextIndex],t:(xOrY-a)/(b-a)}}(points,xOrY,dim),indices=dataIndexRange.range,diff=indices[1]-indices[0],value=void 0;if(diff>=1){if(diff>1&&!connectNulls){var pt=getPointAtIndex(points,indices[0]);endLabel.attr({x:pt[0]+distanceX,y:pt[1]+distanceY}),valueAnimation&&(value=seriesModel.getRawValue(indices[0]))}else{(pt=polyline.getPointOn(xOrY,dim))&&endLabel.attr({x:pt[0]+distanceX,y:pt[1]+distanceY});var startValue=seriesModel.getRawValue(indices[0]),endValue=seriesModel.getRawValue(indices[1]);valueAnimation&&(value=util_model.pk(data,precision,startValue,endValue,dataIndexRange.t))}animationRecord.lastFrameIndex=indices[0]}else{var idx=1===percent||animationRecord.lastFrameIndex>0?indices[0]:0;pt=getPointAtIndex(points,idx);valueAnimation&&(value=seriesModel.getRawValue(idx)),endLabel.attr({x:pt[0]+distanceX,y:pt[1]+distanceY})}if(valueAnimation){var inner=(0,labelStyle.qA)(endLabel);"function"==typeof inner.setLabelText&&inner.setLabelText(value)}}},LineView.prototype._doUpdateAnimation=function(data,stackedOnPoints,coordSys,api,step,valueOrigin,connectNulls){var polyline=this._polyline,polygon=this._polygon,seriesModel=data.hostModel,diff=function lineAnimationDiff(oldData,newData,oldStackedOnPoints,newStackedOnPoints,oldCoordSys,newCoordSys,oldValueOrigin,newValueOrigin){for(var diff=function diffData(oldData,newData){var diffResult=[];return newData.diff(oldData).add((function(idx){diffResult.push({cmd:"+",idx})})).update((function(newIdx,oldIdx){diffResult.push({cmd:"=",idx:oldIdx,idx1:newIdx})})).remove((function(idx){diffResult.push({cmd:"-",idx})})).execute(),diffResult}(oldData,newData),currPoints=[],nextPoints=[],currStackedPoints=[],nextStackedPoints=[],status=[],sortedIndices=[],rawIndices=[],newDataOldCoordInfo=prepareDataCoordInfo(oldCoordSys,newData,oldValueOrigin),oldPoints=oldData.getLayout("points")||[],newPoints=newData.getLayout("points")||[],i=0;i<diff.length;i++){var diffItem=diff[i],pointAdded=!0,oldIdx2=void 0,newIdx2=void 0;switch(diffItem.cmd){case"=":oldIdx2=2*diffItem.idx,newIdx2=2*diffItem.idx1;var currentX=oldPoints[oldIdx2],currentY=oldPoints[oldIdx2+1],nextX=newPoints[newIdx2],nextY=newPoints[newIdx2+1];(isNaN(currentX)||isNaN(currentY))&&(currentX=nextX,currentY=nextY),currPoints.push(currentX,currentY),nextPoints.push(nextX,nextY),currStackedPoints.push(oldStackedOnPoints[oldIdx2],oldStackedOnPoints[oldIdx2+1]),nextStackedPoints.push(newStackedOnPoints[newIdx2],newStackedOnPoints[newIdx2+1]),rawIndices.push(newData.getRawIndex(diffItem.idx1));break;case"+":var newIdx=diffItem.idx,newDataDimsForPoint=newDataOldCoordInfo.dataDimsForPoint,oldPt=oldCoordSys.dataToPoint([newData.get(newDataDimsForPoint[0],newIdx),newData.get(newDataDimsForPoint[1],newIdx)]);newIdx2=2*newIdx,currPoints.push(oldPt[0],oldPt[1]),nextPoints.push(newPoints[newIdx2],newPoints[newIdx2+1]);var stackedOnPoint=getStackedOnPoint(newDataOldCoordInfo,oldCoordSys,newData,newIdx);currStackedPoints.push(stackedOnPoint[0],stackedOnPoint[1]),nextStackedPoints.push(newStackedOnPoints[newIdx2],newStackedOnPoints[newIdx2+1]),rawIndices.push(newData.getRawIndex(newIdx));break;case"-":pointAdded=!1}pointAdded&&(status.push(diffItem),sortedIndices.push(sortedIndices.length))}sortedIndices.sort((function(a,b){return rawIndices[a]-rawIndices[b]}));var len=currPoints.length,sortedCurrPoints=(0,vendor.o)(len),sortedNextPoints=(0,vendor.o)(len),sortedCurrStackedPoints=(0,vendor.o)(len),sortedNextStackedPoints=(0,vendor.o)(len),sortedStatus=[];for(i=0;i<sortedIndices.length;i++){var idx=sortedIndices[i],i2=2*i,idx2=2*idx;sortedCurrPoints[i2]=currPoints[idx2],sortedCurrPoints[i2+1]=currPoints[idx2+1],sortedNextPoints[i2]=nextPoints[idx2],sortedNextPoints[i2+1]=nextPoints[idx2+1],sortedCurrStackedPoints[i2]=currStackedPoints[idx2],sortedCurrStackedPoints[i2+1]=currStackedPoints[idx2+1],sortedNextStackedPoints[i2]=nextStackedPoints[idx2],sortedNextStackedPoints[i2+1]=nextStackedPoints[idx2+1],sortedStatus[i]=status[idx]}return{current:sortedCurrPoints,next:sortedNextPoints,stackedOnCurrent:sortedCurrStackedPoints,stackedOnNext:sortedNextStackedPoints,status:sortedStatus}}(this._data,data,this._stackedOnPoints,stackedOnPoints,this._coordSys,0,this._valueOrigin),current=diff.current,stackedOnCurrent=diff.stackedOnCurrent,next=diff.next,stackedOnNext=diff.stackedOnNext;if(step&&(current=turnPointsIntoStep(diff.current,coordSys,step,connectNulls),stackedOnCurrent=turnPointsIntoStep(diff.stackedOnCurrent,coordSys,step,connectNulls),next=turnPointsIntoStep(diff.next,coordSys,step,connectNulls),stackedOnNext=turnPointsIntoStep(diff.stackedOnNext,coordSys,step,connectNulls)),getBoundingDiff(current,next)>3e3||polygon&&getBoundingDiff(stackedOnCurrent,stackedOnNext)>3e3)return polyline.stopAnimation(),polyline.setShape({points:next}),void(polygon&&(polygon.stopAnimation(),polygon.setShape({points:next,stackedOnPoints:stackedOnNext})));polyline.shape.__points=diff.current,polyline.shape.points=current;var target={shape:{points:next}};diff.current!==current&&(target.shape.__points=diff.next),polyline.stopAnimation(),basicTransition.D(polyline,target,seriesModel),polygon&&(polygon.setShape({points:current,stackedOnPoints:stackedOnCurrent}),polygon.stopAnimation(),basicTransition.D(polygon,{shape:{stackedOnPoints:stackedOnNext}},seriesModel),polyline.shape.points!==polygon.shape.points&&(polygon.shape.points=polyline.shape.points));for(var updatedDataInfo=[],diffStatus=diff.status,i=0;i<diffStatus.length;i++){if("="===diffStatus[i].cmd){var el=data.getItemGraphicEl(diffStatus[i].idx1);el&&updatedDataInfo.push({el,ptIdx:i})}}polyline.animators&&polyline.animators.length&&polyline.animators[0].during((function(){polygon&&polygon.dirtyShape();for(var points=polyline.shape.__points,i=0;i<updatedDataInfo.length;i++){var el=updatedDataInfo[i].el,offset=2*updatedDataInfo[i].ptIdx;el.x=points[offset],el.y=points[offset+1],el.markRedraw()}}))},LineView.prototype.remove=function(ecModel){var group=this.group,oldData=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),oldData&&oldData.eachItemGraphicEl((function(el,idx){el.__temp&&(group.remove(el),oldData.setItemGraphicEl(idx,null))})),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},LineView.type="line",LineView}(Chart.Z);const line_LineView=LineView;var createRenderPlanner=__webpack_require__("./node_modules/echarts/lib/chart/helper/createRenderPlanner.js");function pointsLayout(seriesType,forceStoreInTypedArray){return{seriesType,plan:(0,createRenderPlanner.Z)(),reset:function(seriesModel){var data=seriesModel.getData(),coordSys=seriesModel.coordinateSystem,pipelineContext=seriesModel.pipelineContext,useTypedArray=forceStoreInTypedArray||pipelineContext.large;if(coordSys){var dims=(0,util.map)(coordSys.dimensions,(function(dim){return data.mapDimension(dim)})).slice(0,2),dimLen=dims.length,stackResultDim=data.getCalculationInfo("stackResultDimension");(0,dataStackHelper.M)(data,dims[0])&&(dims[0]=stackResultDim),(0,dataStackHelper.M)(data,dims[1])&&(dims[1]=stackResultDim);var store=data.getStore(),dimIdx0=data.getDimensionIndex(dims[0]),dimIdx1=data.getDimensionIndex(dims[1]);return dimLen&&{progress:function(params,data){for(var segCount=params.end-params.start,points=useTypedArray&&(0,vendor.o)(segCount*dimLen),tmpIn=[],tmpOut=[],i=params.start,offset=0;i<params.end;i++){var point=void 0;if(1===dimLen){var x=store.get(dimIdx0,i);point=coordSys.dataToPoint(x,null,tmpOut)}else tmpIn[0]=store.get(dimIdx0,i),tmpIn[1]=store.get(dimIdx1,i),point=coordSys.dataToPoint(tmpIn,null,tmpOut);useTypedArray?(points[offset++]=point[0],points[offset++]=point[1]):data.setItemLayout(i,point.slice())}useTypedArray&&data.setLayout("points",points)}}}}}}var dataSample=__webpack_require__("./node_modules/echarts/lib/processor/dataSample.js");var bar_install=__webpack_require__("./node_modules/echarts/lib/chart/bar/install.js"),dataSelectAction=__webpack_require__("./node_modules/echarts/lib/legacy/dataSelectAction.js"),number=__webpack_require__("./node_modules/echarts/lib/util/number.js"),layout=__webpack_require__("./node_modules/echarts/lib/util/layout.js"),pieLayout_PI2=2*Math.PI,RADIAN=Math.PI/180;function getViewRect(seriesModel,api){return layout.ME(seriesModel.getBoxLayoutParams(),{width:api.getWidth(),height:api.getHeight()})}function getBasicPieLayout(seriesModel,api){var viewRect=getViewRect(seriesModel,api),center=seriesModel.get("center"),radius=seriesModel.get("radius");util.isArray(radius)||(radius=[0,radius]);var cx,cy,width=(0,number.GM)(viewRect.width,api.getWidth()),height=(0,number.GM)(viewRect.height,api.getHeight()),size=Math.min(width,height),r0=(0,number.GM)(radius[0],size/2),r=(0,number.GM)(radius[1],size/2),coordSys=seriesModel.coordinateSystem;if(coordSys){var point=coordSys.dataToPoint(center);cx=point[0]||0,cy=point[1]||0}else util.isArray(center)||(center=[center,center]),cx=(0,number.GM)(center[0],width)+viewRect.x,cy=(0,number.GM)(center[1],height)+viewRect.y;return{cx,cy,r0,r}}function pieLayout(seriesType,ecModel,api){ecModel.eachSeriesByType(seriesType,(function(seriesModel){var data=seriesModel.getData(),valueDim=data.mapDimension("value"),viewRect=getViewRect(seriesModel,api),_a=getBasicPieLayout(seriesModel,api),cx=_a.cx,cy=_a.cy,r=_a.r,r0=_a.r0,startAngle=-seriesModel.get("startAngle")*RADIAN,endAngle=seriesModel.get("endAngle"),padAngle=seriesModel.get("padAngle")*RADIAN;endAngle="auto"===endAngle?startAngle-pieLayout_PI2:-endAngle*RADIAN;var minAndPadAngle=seriesModel.get("minAngle")*RADIAN+padAngle,validDataCount=0;data.each(valueDim,(function(value){!isNaN(value)&&validDataCount++}));var sum=data.getSum(valueDim),unitRadian=Math.PI/(sum||validDataCount)*2,clockwise=seriesModel.get("clockwise"),roseType=seriesModel.get("roseType"),stillShowZeroSum=seriesModel.get("stillShowZeroSum"),extent=data.getDataExtent(valueDim);extent[0]=0;var dir=clockwise?1:-1,angles=[startAngle,endAngle],halfPadAngle=dir*padAngle/2;(0,PathProxy.L)(angles,!clockwise),startAngle=angles[0],endAngle=angles[1];var angleRange=Math.abs(endAngle-startAngle),restAngle=angleRange,valueSumLargerThanMinAngle=0,currentAngle=startAngle;if(data.setLayout({viewRect,r}),data.each(valueDim,(function(value,idx){var angle;if(isNaN(value))data.setItemLayout(idx,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise,cx,cy,r0,r:roseType?NaN:r});else{(angle="area"!==roseType?0===sum&&stillShowZeroSum?unitRadian:value*unitRadian:angleRange/validDataCount)<minAndPadAngle?(angle=minAndPadAngle,restAngle-=minAndPadAngle):valueSumLargerThanMinAngle+=value;var endAngle=currentAngle+dir*angle,actualStartAngle=0,actualEndAngle=0;padAngle>angle?actualEndAngle=actualStartAngle=currentAngle+dir*angle/2:(actualStartAngle=currentAngle+halfPadAngle,actualEndAngle=endAngle-halfPadAngle),data.setItemLayout(idx,{angle,startAngle:actualStartAngle,endAngle:actualEndAngle,clockwise,cx,cy,r0,r:roseType?(0,number.NU)(value,extent,[r0,r]):r}),currentAngle=endAngle}})),restAngle<pieLayout_PI2&&validDataCount)if(restAngle<=.001){var angle_1=angleRange/validDataCount;data.each(valueDim,(function(value,idx){if(!isNaN(value)){var layout_1=data.getItemLayout(idx);layout_1.angle=angle_1;var actualStartAngle=0,actualEndAngle=0;angle_1<padAngle?actualEndAngle=actualStartAngle=startAngle+dir*(idx+.5)*angle_1:(actualStartAngle=startAngle+dir*idx*angle_1+halfPadAngle,actualEndAngle=startAngle+dir*(idx+1)*angle_1-halfPadAngle),layout_1.startAngle=actualStartAngle,layout_1.endAngle=actualEndAngle}}))}else unitRadian=restAngle/valueSumLargerThanMinAngle,currentAngle=startAngle,data.each(valueDim,(function(value,idx){if(!isNaN(value)){var layout_2=data.getItemLayout(idx),angle=layout_2.angle===minAndPadAngle?minAndPadAngle:value*unitRadian,actualStartAngle=0,actualEndAngle=0;angle<padAngle?actualEndAngle=actualStartAngle=currentAngle+dir*angle/2:(actualStartAngle=currentAngle+halfPadAngle,actualEndAngle=currentAngle+dir*angle-halfPadAngle),layout_2.startAngle=actualStartAngle,layout_2.endAngle=actualEndAngle,currentAngle+=dir*angle}}))}))}function dataFilter(seriesType){return{seriesType,reset:function(seriesModel,ecModel){var legendModels=ecModel.findComponents({mainType:"legend"});if(legendModels&&legendModels.length){var data=seriesModel.getData();data.filterSelf((function(idx){for(var name=data.getName(idx),i=0;i<legendModels.length;i++)if(!legendModels[i].isSelected(name))return!1;return!0}))}}}}var shape_Polyline=__webpack_require__("./node_modules/zrender/lib/graphic/shape/Polyline.js"),Sector=__webpack_require__("./node_modules/zrender/lib/graphic/shape/Sector.js"),Point=__webpack_require__("./node_modules/zrender/lib/core/Point.js"),labelGuideHelper=__webpack_require__("./node_modules/echarts/lib/label/labelGuideHelper.js"),labelLayoutHelper=__webpack_require__("./node_modules/echarts/lib/label/labelLayoutHelper.js"),labelLayout_RADIAN=Math.PI/180;function adjustSingleSide(list,cx,cy,r,dir,viewWidth,viewHeight,viewLeft,viewTop,farthestX){if(!(list.length<2)){for(var len=list.length,i=0;i<len;i++)if("outer"===list[i].position&&"labelLine"===list[i].labelAlignTo){var dx=list[i].label.x-farthestX;list[i].linePoints[1][0]+=dx,list[i].label.x=farthestX}(0,labelLayoutHelper.GI)(list,viewTop,viewTop+viewHeight)&&function recalculateX(items){for(var topSemi={list:[],maxY:0},bottomSemi={list:[],maxY:0},i=0;i<items.length;i++)if("none"===items[i].labelAlignTo){var item=items[i],semi=item.label.y>cy?bottomSemi:topSemi,dy=Math.abs(item.label.y-cy);if(dy>=semi.maxY){var dx=item.label.x-cx-item.len2*dir,rA=r+item.len,rB=Math.abs(dx)<rA?Math.sqrt(dy*dy/(1-dx*dx/rA/rA)):rA;semi.rB=rB,semi.maxY=dy}semi.list.push(item)}recalculateXOnSemiToAlignOnEllipseCurve(topSemi),recalculateXOnSemiToAlignOnEllipseCurve(bottomSemi)}(list)}function recalculateXOnSemiToAlignOnEllipseCurve(semi){for(var rB=semi.rB,rB2=rB*rB,i=0;i<semi.list.length;i++){var item=semi.list[i],dy=Math.abs(item.label.y-cy),rA=r+item.len,rA2=rA*rA,dx=Math.sqrt((1-Math.abs(dy*dy/rB2))*rA2),newX=cx+(dx+item.len2)*dir,deltaX=newX-item.label.x;constrainTextWidth(item,item.targetTextWidth-deltaX*dir,!0),item.label.x=newX}}}function constrainTextWidth(layout,availableWidth,forceRecalculate){if(void 0===forceRecalculate&&(forceRecalculate=!1),null==layout.labelStyleWidth){var label=layout.label,style=label.style,textRect=layout.rect,bgColor=style.backgroundColor,padding=style.padding,paddingH=padding?padding[1]+padding[3]:0,overflow=style.overflow,oldOuterWidth=textRect.width+(bgColor?0:paddingH);if(availableWidth<oldOuterWidth||forceRecalculate){var oldHeight=textRect.height;if(overflow&&overflow.match("break")){label.setStyle("backgroundColor",null),label.setStyle("width",availableWidth-paddingH);var innerRect=label.getBoundingRect();label.setStyle("width",Math.ceil(innerRect.width)),label.setStyle("backgroundColor",bgColor)}else{var availableInnerWidth=availableWidth-paddingH,newWidth=availableWidth<oldOuterWidth?availableInnerWidth:forceRecalculate?availableInnerWidth>layout.unconstrainedWidth?null:availableInnerWidth:null;label.setStyle("width",newWidth)}var newRect=label.getBoundingRect();textRect.width=newRect.width;var margin=(label.style.margin||0)+2.1;textRect.height=newRect.height+margin,textRect.y-=(textRect.height-oldHeight)/2}}}function isPositionCenter(sectorShape){return"center"===sectorShape.position}function pieLabelLayout(seriesModel){var cx,cy,data=seriesModel.getData(),labelLayoutList=[],hasLabelRotate=!1,minShowLabelRadian=(seriesModel.get("minShowLabelAngle")||0)*labelLayout_RADIAN,viewRect=data.getLayout("viewRect"),r=data.getLayout("r"),viewWidth=viewRect.width,viewLeft=viewRect.x,viewTop=viewRect.y,viewHeight=viewRect.height;function setNotShow(el){el.ignore=!0}data.each((function(idx){var sector=data.getItemGraphicEl(idx),sectorShape=sector.shape,label=sector.getTextContent(),labelLine=sector.getTextGuideLine(),itemModel=data.getItemModel(idx),labelModel=itemModel.getModel("label"),labelPosition=labelModel.get("position")||itemModel.get(["emphasis","label","position"]),labelDistance=labelModel.get("distanceToLabelLine"),labelAlignTo=labelModel.get("alignTo"),edgeDistance=(0,number.GM)(labelModel.get("edgeDistance"),viewWidth),bleedMargin=labelModel.get("bleedMargin"),labelLineModel=itemModel.getModel("labelLine"),labelLineLen=labelLineModel.get("length");labelLineLen=(0,number.GM)(labelLineLen,viewWidth);var labelLineLen2=labelLineModel.get("length2");if(labelLineLen2=(0,number.GM)(labelLineLen2,viewWidth),Math.abs(sectorShape.endAngle-sectorShape.startAngle)<minShowLabelRadian)return(0,util.each)(label.states,setNotShow),label.ignore=!0,void(labelLine&&((0,util.each)(labelLine.states,setNotShow),labelLine.ignore=!0));if(function isLabelShown(label){if(!label.ignore)return!0;for(var key in label.states)if(!1===label.states[key].ignore)return!0;return!1}(label)){var textX,textY,linePoints,textAlign,midAngle=(sectorShape.startAngle+sectorShape.endAngle)/2,nx=Math.cos(midAngle),ny=Math.sin(midAngle);cx=sectorShape.cx,cy=sectorShape.cy;var isLabelInside="inside"===labelPosition||"inner"===labelPosition;if("center"===labelPosition)textX=sectorShape.cx,textY=sectorShape.cy,textAlign="center";else{var x1=(isLabelInside?(sectorShape.r+sectorShape.r0)/2*nx:sectorShape.r*nx)+cx,y1=(isLabelInside?(sectorShape.r+sectorShape.r0)/2*ny:sectorShape.r*ny)+cy;if(textX=x1+3*nx,textY=y1+3*ny,!isLabelInside){var x2=x1+nx*(labelLineLen+r-sectorShape.r),y2=y1+ny*(labelLineLen+r-sectorShape.r),x3=x2+(nx<0?-1:1)*labelLineLen2;textX="edge"===labelAlignTo?nx<0?viewLeft+edgeDistance:viewLeft+viewWidth-edgeDistance:x3+(nx<0?-labelDistance:labelDistance),textY=y2,linePoints=[[x1,y1],[x2,y2],[x3,y2]]}textAlign=isLabelInside?"center":"edge"===labelAlignTo?nx>0?"right":"left":nx>0?"left":"right"}var PI=Math.PI,labelRotate=0,rotate=labelModel.get("rotate");if((0,util.isNumber)(rotate))labelRotate=rotate*(PI/180);else if("center"===labelPosition)labelRotate=0;else if("radial"===rotate||!0===rotate){labelRotate=nx<0?-midAngle+PI:-midAngle}else if("tangential"===rotate&&"outside"!==labelPosition&&"outer"!==labelPosition){var rad=Math.atan2(nx,ny);rad<0&&(rad=2*PI+rad),ny>0&&(rad=PI+rad),labelRotate=rad-PI}if(hasLabelRotate=!!labelRotate,label.x=textX,label.y=textY,label.rotation=labelRotate,label.setStyle({verticalAlign:"middle"}),isLabelInside){label.setStyle({align:textAlign});var selectState=label.states.select;selectState&&(selectState.x+=label.x,selectState.y+=label.y)}else{var textRect=label.getBoundingRect().clone();textRect.applyTransform(label.getComputedTransform());var margin=(label.style.margin||0)+2.1;textRect.y-=margin/2,textRect.height+=margin,labelLayoutList.push({label,labelLine,position:labelPosition,len:labelLineLen,len2:labelLineLen2,minTurnAngle:labelLineModel.get("minTurnAngle"),maxSurfaceAngle:labelLineModel.get("maxSurfaceAngle"),surfaceNormal:new Point.Z(nx,ny),linePoints,textAlign,labelDistance,labelAlignTo,edgeDistance,bleedMargin,rect:textRect,unconstrainedWidth:textRect.width,labelStyleWidth:label.style.width})}sector.setTextConfig({inside:isLabelInside})}})),!hasLabelRotate&&seriesModel.get("avoidLabelOverlap")&&function avoidOverlap(labelLayoutList,cx,cy,r,viewWidth,viewHeight,viewLeft,viewTop){for(var leftList=[],rightList=[],leftmostX=Number.MAX_VALUE,rightmostX=-Number.MAX_VALUE,i=0;i<labelLayoutList.length;i++){var label=labelLayoutList[i].label;isPositionCenter(labelLayoutList[i])||(label.x<cx?(leftmostX=Math.min(leftmostX,label.x),leftList.push(labelLayoutList[i])):(rightmostX=Math.max(rightmostX,label.x),rightList.push(labelLayoutList[i])))}for(i=0;i<labelLayoutList.length;i++)if(!isPositionCenter(layout=labelLayoutList[i])&&layout.linePoints){if(null!=layout.labelStyleWidth)continue;label=layout.label;var linePoints=layout.linePoints,targetTextWidth=void 0;targetTextWidth="edge"===layout.labelAlignTo?label.x<cx?linePoints[2][0]-layout.labelDistance-viewLeft-layout.edgeDistance:viewLeft+viewWidth-layout.edgeDistance-linePoints[2][0]-layout.labelDistance:"labelLine"===layout.labelAlignTo?label.x<cx?leftmostX-viewLeft-layout.bleedMargin:viewLeft+viewWidth-rightmostX-layout.bleedMargin:label.x<cx?label.x-viewLeft-layout.bleedMargin:viewLeft+viewWidth-label.x-layout.bleedMargin,layout.targetTextWidth=targetTextWidth,constrainTextWidth(layout,targetTextWidth)}for(adjustSingleSide(rightList,cx,cy,r,1,0,viewHeight,0,viewTop,rightmostX),adjustSingleSide(leftList,cx,cy,r,-1,0,viewHeight,0,viewTop,leftmostX),i=0;i<labelLayoutList.length;i++){var layout;if(!isPositionCenter(layout=labelLayoutList[i])&&layout.linePoints){label=layout.label,linePoints=layout.linePoints;var isAlignToEdge="edge"===layout.labelAlignTo,padding=label.style.padding,paddingH=padding?padding[1]+padding[3]:0,extraPaddingH=label.style.backgroundColor?0:paddingH,realTextWidth=layout.rect.width+extraPaddingH,dist=linePoints[1][0]-linePoints[2][0];isAlignToEdge?label.x<cx?linePoints[2][0]=viewLeft+layout.edgeDistance+realTextWidth+layout.labelDistance:linePoints[2][0]=viewLeft+viewWidth-layout.edgeDistance-realTextWidth-layout.labelDistance:(label.x<cx?linePoints[2][0]=label.x+layout.labelDistance:linePoints[2][0]=label.x-layout.labelDistance,linePoints[1][0]=linePoints[2][0]+dist),linePoints[1][1]=linePoints[2][1]=label.y}}}(labelLayoutList,cx,cy,r,viewWidth,viewHeight,viewLeft,viewTop);for(var i=0;i<labelLayoutList.length;i++){var layout=labelLayoutList[i],label=layout.label,labelLine=layout.labelLine,notShowLabel=isNaN(label.x)||isNaN(label.y);if(label){label.setStyle({align:layout.textAlign}),notShowLabel&&((0,util.each)(label.states,setNotShow),label.ignore=!0);var selectState=label.states.select;selectState&&(selectState.x+=label.x,selectState.y+=label.y)}if(labelLine){var linePoints=layout.linePoints;notShowLabel||!linePoints?((0,util.each)(labelLine.states,setNotShow),labelLine.ignore=!0):((0,labelGuideHelper.qK)(linePoints,layout.minTurnAngle),(0,labelGuideHelper._A)(linePoints,layout.surfaceNormal,layout.maxSurfaceAngle),labelLine.setShape({points:linePoints}),label.__hostTarget.textGuideLineConfig={anchor:new Point.Z(linePoints[0][0],linePoints[0][1])})}}}var sectorHelper=__webpack_require__("./node_modules/echarts/lib/chart/helper/sectorHelper.js"),PiePiece=function(_super){function PiePiece(data,idx,startAngle){var _this=_super.call(this)||this;_this.z2=2;var text=new Text.ZP;return _this.setTextContent(text),_this.updateData(data,idx,startAngle,!0),_this}return(0,tslib_es6.ZT)(PiePiece,_super),PiePiece.prototype.updateData=function(data,idx,startAngle,firstCreate){var seriesModel=data.hostModel,itemModel=data.getItemModel(idx),emphasisModel=itemModel.getModel("emphasis"),layout=data.getItemLayout(idx),sectorShape=(0,util.extend)((0,sectorHelper.T)(itemModel.getModel("itemStyle"),layout,!0),layout);if(isNaN(sectorShape.startAngle))this.setShape(sectorShape);else{if(firstCreate){this.setShape(sectorShape);var animationType=seriesModel.getShallow("animationType");seriesModel.ecModel.ssr?(basicTransition.KZ(this,{scaleX:0,scaleY:0},seriesModel,{dataIndex:idx,isFrom:!0}),this.originX=sectorShape.cx,this.originY=sectorShape.cy):"scale"===animationType?(this.shape.r=layout.r0,basicTransition.KZ(this,{shape:{r:layout.r}},seriesModel,idx)):null!=startAngle?(this.setShape({startAngle,endAngle:startAngle}),basicTransition.KZ(this,{shape:{startAngle:layout.startAngle,endAngle:layout.endAngle}},seriesModel,idx)):(this.shape.endAngle=layout.startAngle,basicTransition.D(this,{shape:{endAngle:layout.endAngle}},seriesModel,idx))}else(0,basicTransition.Zi)(this),basicTransition.D(this,{shape:sectorShape},seriesModel,idx);this.useStyle(data.getItemVisual(idx,"style")),(0,states.WO)(this,itemModel);var midAngle=(layout.startAngle+layout.endAngle)/2,offset=seriesModel.get("selectedOffset"),dx=Math.cos(midAngle)*offset,dy=Math.sin(midAngle)*offset,cursorStyle=itemModel.getShallow("cursor");cursorStyle&&this.attr("cursor",cursorStyle),this._updateLabel(seriesModel,data,idx),this.ensureState("emphasis").shape=(0,util.extend)({r:layout.r+(emphasisModel.get("scale")&&emphasisModel.get("scaleSize")||0)},(0,sectorHelper.T)(emphasisModel.getModel("itemStyle"),layout)),(0,util.extend)(this.ensureState("select"),{x:dx,y:dy,shape:(0,sectorHelper.T)(itemModel.getModel(["select","itemStyle"]),layout)}),(0,util.extend)(this.ensureState("blur"),{shape:(0,sectorHelper.T)(itemModel.getModel(["blur","itemStyle"]),layout)});var labelLine=this.getTextGuideLine(),labelText=this.getTextContent();labelLine&&(0,util.extend)(labelLine.ensureState("select"),{x:dx,y:dy}),(0,util.extend)(labelText.ensureState("select"),{x:dx,y:dy}),(0,states.k5)(this,emphasisModel.get("focus"),emphasisModel.get("blurScope"),emphasisModel.get("disabled"))}},PiePiece.prototype._updateLabel=function(seriesModel,data,idx){var itemModel=data.getItemModel(idx),labelLineModel=itemModel.getModel("labelLine"),style=data.getItemVisual(idx,"style"),visualColor=style&&style.fill,visualOpacity=style&&style.opacity;(0,labelStyle.ni)(this,(0,labelStyle.k3)(itemModel),{labelFetcher:data.hostModel,labelDataIndex:idx,inheritColor:visualColor,defaultOpacity:visualOpacity,defaultText:seriesModel.getFormattedLabel(idx,"normal")||data.getName(idx)});var labelText=this.getTextContent();this.setTextConfig({position:null,rotation:null}),labelText.attr({z2:10});var labelPosition=seriesModel.get(["label","position"]);if("outside"!==labelPosition&&"outer"!==labelPosition)this.removeTextGuideLine();else{var polyline=this.getTextGuideLine();polyline||(polyline=new shape_Polyline.Z,this.setTextGuideLine(polyline)),(0,labelGuideHelper.Iu)(this,(0,labelGuideHelper.$x)(itemModel),{stroke:visualColor,opacity:(0,util.retrieve3)(labelLineModel.get(["lineStyle","opacity"]),visualOpacity,1)})}},PiePiece}(Sector.C);const pie_PieView=function(_super){function PieView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.ignoreLabelLineUpdate=!0,_this}return(0,tslib_es6.ZT)(PieView,_super),PieView.prototype.render=function(seriesModel,ecModel,api,payload){var startAngle,data=seriesModel.getData(),oldData=this._data,group=this.group;if(!oldData&&data.count()>0){for(var shape=data.getItemLayout(0),s=1;isNaN(shape&&shape.startAngle)&&s<data.count();++s)shape=data.getItemLayout(s);shape&&(startAngle=shape.startAngle)}if(this._emptyCircleSector&&group.remove(this._emptyCircleSector),0===data.count()&&seriesModel.get("showEmptyCircle")){var sector=new Sector.C({shape:getBasicPieLayout(seriesModel,api)});sector.useStyle(seriesModel.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=sector,group.add(sector)}data.diff(oldData).add((function(idx){var piePiece=new PiePiece(data,idx,startAngle);data.setItemGraphicEl(idx,piePiece),group.add(piePiece)})).update((function(newIdx,oldIdx){var piePiece=oldData.getItemGraphicEl(oldIdx);piePiece.updateData(data,newIdx,startAngle),piePiece.off("click"),group.add(piePiece),data.setItemGraphicEl(newIdx,piePiece)})).remove((function(idx){var piePiece=oldData.getItemGraphicEl(idx);basicTransition.XD(piePiece,seriesModel,idx)})).execute(),pieLabelLayout(seriesModel),"expansion"!==seriesModel.get("animationTypeUpdate")&&(this._data=data)},PieView.prototype.dispose=function(){},PieView.prototype.containPoint=function(point,seriesModel){var itemLayout=seriesModel.getData().getItemLayout(0);if(itemLayout){var dx=point[0]-itemLayout.cx,dy=point[1]-itemLayout.cy,radius=Math.sqrt(dx*dx+dy*dy);return radius<=itemLayout.r&&radius>=itemLayout.r0}},PieView.type="pie",PieView}(Chart.Z);var createSeriesDataSimply=__webpack_require__("./node_modules/echarts/lib/chart/helper/createSeriesDataSimply.js"),sourceHelper=__webpack_require__("./node_modules/echarts/lib/data/helper/sourceHelper.js");const visual_LegendVisualProvider=function(){function LegendVisualProvider(getDataWithEncodedVisual,getRawData){this._getDataWithEncodedVisual=getDataWithEncodedVisual,this._getRawData=getRawData}return LegendVisualProvider.prototype.getAllNames=function(){var rawData=this._getRawData();return rawData.mapArray(rawData.getName)},LegendVisualProvider.prototype.containName=function(name){return this._getRawData().indexOfName(name)>=0},LegendVisualProvider.prototype.indexOfName=function(name){return this._getDataWithEncodedVisual().indexOfName(name)},LegendVisualProvider.prototype.getItemVisual=function(dataIndex,key){return this._getDataWithEncodedVisual().getItemVisual(dataIndex,key)},LegendVisualProvider}();var innerData=util_model.Yf();const PieSeries=function(_super){function PieSeriesModel(){return null!==_super&&_super.apply(this,arguments)||this}return(0,tslib_es6.ZT)(PieSeriesModel,_super),PieSeriesModel.prototype.init=function(option){_super.prototype.init.apply(this,arguments),this.legendVisualProvider=new visual_LegendVisualProvider(util.bind(this.getData,this),util.bind(this.getRawData,this)),this._defaultLabelLine(option)},PieSeriesModel.prototype.mergeOption=function(){_super.prototype.mergeOption.apply(this,arguments)},PieSeriesModel.prototype.getInitialData=function(){return(0,createSeriesDataSimply.Z)(this,{coordDimensions:["value"],encodeDefaulter:util.curry(sourceHelper.Ss,this)})},PieSeriesModel.prototype.getDataParams=function(dataIndex){var data=this.getData(),dataInner=innerData(data),seats=dataInner.seats;if(!seats){var valueList_1=[];data.each(data.mapDimension("value"),(function(value){valueList_1.push(value)})),seats=dataInner.seats=(0,number.HD)(valueList_1,data.hostModel.get("percentPrecision"))}var params=_super.prototype.getDataParams.call(this,dataIndex);return params.percent=seats[dataIndex]||0,params.$vars.push("percent"),params},PieSeriesModel.prototype._defaultLabelLine=function(option){util_model.Cc(option,"labelLine",["show"]);var labelLineNormalOpt=option.labelLine,labelLineEmphasisOpt=option.emphasis.labelLine;labelLineNormalOpt.show=labelLineNormalOpt.show&&option.label.show,labelLineEmphasisOpt.show=labelLineEmphasisOpt.show&&option.emphasis.label.show},PieSeriesModel.type="series.pie",PieSeriesModel.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},PieSeriesModel}(Series.Z);const ScatterSeries=function(_super){function ScatterSeriesModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=ScatterSeriesModel.type,_this.hasSymbolVisual=!0,_this}return(0,tslib_es6.ZT)(ScatterSeriesModel,_super),ScatterSeriesModel.prototype.getInitialData=function(option,ecModel){return(0,createSeriesData.Z)(null,this,{useEncodeDefaulter:!0})},ScatterSeriesModel.prototype.getProgressive=function(){var progressive=this.option.progressive;return null==progressive?this.option.large?5e3:this.get("progressive"):progressive},ScatterSeriesModel.prototype.getProgressiveThreshold=function(){var progressiveThreshold=this.option.progressiveThreshold;return null==progressiveThreshold?this.option.large?1e4:this.get("progressiveThreshold"):progressiveThreshold},ScatterSeriesModel.prototype.brushSelector=function(dataIndex,data,selectors){return selectors.point(data.getItemLayout(dataIndex))},ScatterSeriesModel.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},ScatterSeriesModel.type="series.scatter",ScatterSeriesModel.dependencies=["grid","polar","geo","singleAxis","calendar"],ScatterSeriesModel.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},ScatterSeriesModel}(Series.Z);var BoundingRect=__webpack_require__("./node_modules/zrender/lib/core/BoundingRect.js"),LargeSymbolPathShape=function LargeSymbolPathShape(){},LargeSymbolPath=function(_super){function LargeSymbolPath(opts){var _this=_super.call(this,opts)||this;return _this._off=0,_this.hoverDataIdx=-1,_this}return(0,tslib_es6.ZT)(LargeSymbolPath,_super),LargeSymbolPath.prototype.getDefaultShape=function(){return new LargeSymbolPathShape},LargeSymbolPath.prototype.reset=function(){this.notClear=!1,this._off=0},LargeSymbolPath.prototype.buildPath=function(path,shape){var i,points=shape.points,size=shape.size,symbolProxy=this.symbolProxy,symbolProxyShape=symbolProxy.shape,ctx=path.getContext?path.getContext():path,canBoost=ctx&&size[0]<4,softClipShape=this.softClipShape;if(canBoost)this._ctx=ctx;else{for(this._ctx=null,i=this._off;i<points.length;){var x=points[i++],y=points[i++];isNaN(x)||isNaN(y)||(softClipShape&&!softClipShape.contain(x,y)||(symbolProxyShape.x=x-size[0]/2,symbolProxyShape.y=y-size[1]/2,symbolProxyShape.width=size[0],symbolProxyShape.height=size[1],symbolProxy.buildPath(path,symbolProxyShape,!0)))}this.incremental&&(this._off=i,this.notClear=!0)}},LargeSymbolPath.prototype.afterBrush=function(){var i,shape=this.shape,points=shape.points,size=shape.size,ctx=this._ctx,softClipShape=this.softClipShape;if(ctx){for(i=this._off;i<points.length;){var x=points[i++],y=points[i++];isNaN(x)||isNaN(y)||(softClipShape&&!softClipShape.contain(x,y)||ctx.fillRect(x-size[0]/2,y-size[1]/2,size[0],size[1]))}this.incremental&&(this._off=i,this.notClear=!0)}},LargeSymbolPath.prototype.findDataIndex=function(x,y){for(var shape=this.shape,points=shape.points,size=shape.size,w=Math.max(size[0],4),h=Math.max(size[1],4),idx=points.length/2-1;idx>=0;idx--){var i=2*idx,x0=points[i]-w/2,y0=points[i+1]-h/2;if(x>=x0&&y>=y0&&x<=x0+w&&y<=y0+h)return idx}return-1},LargeSymbolPath.prototype.contain=function(x,y){var localPos=this.transformCoordToLocal(x,y),rect=this.getBoundingRect();return x=localPos[0],y=localPos[1],rect.contain(x,y)?(this.hoverDataIdx=this.findDataIndex(x,y))>=0:(this.hoverDataIdx=-1,!1)},LargeSymbolPath.prototype.getBoundingRect=function(){var rect=this._rect;if(!rect){for(var shape=this.shape,points=shape.points,size=shape.size,w=size[0],h=size[1],minX=1/0,minY=1/0,maxX=-1/0,maxY=-1/0,i=0;i<points.length;){var x=points[i++],y=points[i++];minX=Math.min(x,minX),maxX=Math.max(x,maxX),minY=Math.min(y,minY),maxY=Math.max(y,maxY)}rect=this._rect=new BoundingRect.Z(minX-w/2,minY-h/2,maxX-minX+w,maxY-minY+h)}return rect},LargeSymbolPath}(Path.ZP);const helper_LargeSymbolDraw=function(){function LargeSymbolDraw(){this.group=new Group.Z}return LargeSymbolDraw.prototype.updateData=function(data,opt){this._clear();var symbolEl=this._create();symbolEl.setShape({points:data.getLayout("points")}),this._setCommon(symbolEl,data,opt)},LargeSymbolDraw.prototype.updateLayout=function(data){var points=data.getLayout("points");this.group.eachChild((function(child){if(null!=child.startIndex){var len=2*(child.endIndex-child.startIndex),byteOffset=4*child.startIndex*2;points=new Float32Array(points.buffer,byteOffset,len)}child.setShape("points",points),child.reset()}))},LargeSymbolDraw.prototype.incrementalPrepareUpdate=function(data){this._clear()},LargeSymbolDraw.prototype.incrementalUpdate=function(taskParams,data,opt){var lastAdded=this._newAdded[0],points=data.getLayout("points"),oldPoints=lastAdded&&lastAdded.shape.points;if(oldPoints&&oldPoints.length<2e4){var oldLen=oldPoints.length,newPoints=new Float32Array(oldLen+points.length);newPoints.set(oldPoints),newPoints.set(points,oldLen),lastAdded.endIndex=taskParams.end,lastAdded.setShape({points:newPoints})}else{this._newAdded=[];var symbolEl=this._create();symbolEl.startIndex=taskParams.start,symbolEl.endIndex=taskParams.end,symbolEl.incremental=!0,symbolEl.setShape({points}),this._setCommon(symbolEl,data,opt)}},LargeSymbolDraw.prototype.eachRendered=function(cb){this._newAdded[0]&&cb(this._newAdded[0])},LargeSymbolDraw.prototype._create=function(){var symbolEl=new LargeSymbolPath({cursor:"default"});return symbolEl.ignoreCoarsePointer=!0,this.group.add(symbolEl),this._newAdded.push(symbolEl),symbolEl},LargeSymbolDraw.prototype._setCommon=function(symbolEl,data,opt){var hostModel=data.hostModel;opt=opt||{};var size=data.getVisual("symbolSize");symbolEl.setShape("size",size instanceof Array?size:[size,size]),symbolEl.softClipShape=opt.clipShape||null,symbolEl.symbolProxy=(0,util_symbol.th)(data.getVisual("symbol"),0,0,0,0),symbolEl.setColor=symbolEl.symbolProxy.setColor;var extrudeShadow=symbolEl.shape.size[0]<4;symbolEl.useStyle(hostModel.getModel("itemStyle").getItemStyle(extrudeShadow?["color","shadowBlur","shadowColor"]:["color"]));var globalStyle=data.getVisual("style"),visualColor=globalStyle&&globalStyle.fill;visualColor&&symbolEl.setColor(visualColor);var ecData=(0,innerStore.A)(symbolEl);ecData.seriesIndex=hostModel.seriesIndex,symbolEl.on("mousemove",(function(e){ecData.dataIndex=null;var dataIndex=symbolEl.hoverDataIdx;dataIndex>=0&&(ecData.dataIndex=dataIndex+(symbolEl.startIndex||0))}))},LargeSymbolDraw.prototype.remove=function(){this._clear()},LargeSymbolDraw.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},LargeSymbolDraw}();const scatter_ScatterView=function(_super){function ScatterView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=ScatterView.type,_this}return(0,tslib_es6.ZT)(ScatterView,_super),ScatterView.prototype.render=function(seriesModel,ecModel,api){var data=seriesModel.getData();this._updateSymbolDraw(data,seriesModel).updateData(data,{clipShape:this._getClipShape(seriesModel)}),this._finished=!0},ScatterView.prototype.incrementalPrepareRender=function(seriesModel,ecModel,api){var data=seriesModel.getData();this._updateSymbolDraw(data,seriesModel).incrementalPrepareUpdate(data),this._finished=!1},ScatterView.prototype.incrementalRender=function(taskParams,seriesModel,ecModel){this._symbolDraw.incrementalUpdate(taskParams,seriesModel.getData(),{clipShape:this._getClipShape(seriesModel)}),this._finished=taskParams.end===seriesModel.getData().count()},ScatterView.prototype.updateTransform=function(seriesModel,ecModel,api){var data=seriesModel.getData();if(this.group.dirty(),!this._finished||data.count()>1e4)return{update:!0};var res=pointsLayout("").reset(seriesModel,ecModel,api);res.progress&&res.progress({start:0,end:data.count(),count:data.count()},data),this._symbolDraw.updateLayout(data)},ScatterView.prototype.eachRendered=function(cb){this._symbolDraw&&this._symbolDraw.eachRendered(cb)},ScatterView.prototype._getClipShape=function(seriesModel){if(seriesModel.get("clip",!0)){var coordSys=seriesModel.coordinateSystem;return coordSys&&coordSys.getArea&&coordSys.getArea(.1)}},ScatterView.prototype._updateSymbolDraw=function(data,seriesModel){var symbolDraw=this._symbolDraw,isLargeDraw=seriesModel.pipelineContext.large;return symbolDraw&&isLargeDraw===this._isLargeDraw||(symbolDraw&&symbolDraw.remove(),symbolDraw=this._symbolDraw=isLargeDraw?new helper_LargeSymbolDraw:new helper_SymbolDraw,this._isLargeDraw=isLargeDraw,this.group.removeAll()),this.group.add(symbolDraw.group),symbolDraw},ScatterView.prototype.remove=function(ecModel,api){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},ScatterView.prototype.dispose=function(){},ScatterView.type="scatter",ScatterView}(Chart.Z);var Component=__webpack_require__("./node_modules/echarts/lib/view/Component.js"),model_Component=__webpack_require__("./node_modules/echarts/lib/model/Component.js");const cartesian_GridModel=function(_super){function GridModel(){return null!==_super&&_super.apply(this,arguments)||this}return(0,tslib_es6.ZT)(GridModel,_super),GridModel.type="grid",GridModel.dependencies=["xAxis","yAxis"],GridModel.layoutMode="box",GridModel.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},GridModel}(model_Component.Z);var Rect=__webpack_require__("./node_modules/zrender/lib/graphic/shape/Rect.js"),axisModelCommonMixin=__webpack_require__("./node_modules/echarts/lib/coord/axisModelCommonMixin.js"),CartesianAxisModel=function(_super){function CartesianAxisModel(){return null!==_super&&_super.apply(this,arguments)||this}return(0,tslib_es6.ZT)(CartesianAxisModel,_super),CartesianAxisModel.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",util_model.C6).models[0]},CartesianAxisModel.type="cartesian2dAxis",CartesianAxisModel}(model_Component.Z);util.mixin(CartesianAxisModel,axisModelCommonMixin.W);var defaultOption={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},categoryAxis=util.merge({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},defaultOption),valueAxis=util.merge({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},defaultOption);const axisDefault={category:categoryAxis,value:valueAxis,time:util.merge({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},valueAxis),log:util.defaults({logBase:10},valueAxis)};var OrdinalMeta=__webpack_require__("./node_modules/echarts/lib/data/OrdinalMeta.js"),AXIS_TYPES={value:1,category:1,time:1,log:1};function axisModelCreator(registers,axisName,BaseAxisModelClass,extraDefaultOption){(0,util.each)(AXIS_TYPES,(function(v,axisType){var defaultOption=(0,util.merge)((0,util.merge)({},axisDefault[axisType],!0),extraDefaultOption,!0),AxisModel=function(_super){function AxisModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=axisName+"Axis."+axisType,_this}return(0,tslib_es6.ZT)(AxisModel,_super),AxisModel.prototype.mergeDefaultAndTheme=function(option,ecModel){var layoutMode=(0,layout.YD)(this),inputPositionParams=layoutMode?(0,layout.tE)(option):{},themeModel=ecModel.getTheme();(0,util.merge)(option,themeModel.get(axisType+"Axis")),(0,util.merge)(option,this.getDefaultOption()),option.type=getAxisType(option),layoutMode&&(0,layout.dt)(option,inputPositionParams,layoutMode)},AxisModel.prototype.optionUpdated=function(){"category"===this.option.type&&(this.__ordinalMeta=OrdinalMeta.Z.createByAxisModel(this))},AxisModel.prototype.getCategories=function(rawData){var option=this.option;if("category"===option.type)return rawData?option.data:this.__ordinalMeta.categories},AxisModel.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},AxisModel.type=axisName+"Axis."+axisType,AxisModel.defaultOption=defaultOption,AxisModel}(BaseAxisModelClass);registers.registerComponentModel(AxisModel)})),registers.registerSubTypeDefaulter(axisName+"Axis",getAxisType)}function getAxisType(option){return option.type||(option.data?"category":"value")}var axisHelper=__webpack_require__("./node_modules/echarts/lib/coord/axisHelper.js"),Cartesian=__webpack_require__("./node_modules/echarts/lib/coord/cartesian/Cartesian.js"),matrix=__webpack_require__("./node_modules/zrender/lib/core/matrix.js"),vector=__webpack_require__("./node_modules/zrender/lib/core/vector.js"),cartesian2DDimensions=["x","y"];function canCalculateAffineTransform(scale){return"interval"===scale.type||"time"===scale.type}const cartesian_Cartesian2D=function(_super){function Cartesian2D(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type="cartesian2d",_this.dimensions=cartesian2DDimensions,_this}return(0,tslib_es6.ZT)(Cartesian2D,_super),Cartesian2D.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var xAxisScale=this.getAxis("x").scale,yAxisScale=this.getAxis("y").scale;if(canCalculateAffineTransform(xAxisScale)&&canCalculateAffineTransform(yAxisScale)){var xScaleExtent=xAxisScale.getExtent(),yScaleExtent=yAxisScale.getExtent(),start=this.dataToPoint([xScaleExtent[0],yScaleExtent[0]]),end=this.dataToPoint([xScaleExtent[1],yScaleExtent[1]]),xScaleSpan=xScaleExtent[1]-xScaleExtent[0],yScaleSpan=yScaleExtent[1]-yScaleExtent[0];if(xScaleSpan&&yScaleSpan){var scaleX=(end[0]-start[0])/xScaleSpan,scaleY=(end[1]-start[1])/yScaleSpan,translateX=start[0]-xScaleExtent[0]*scaleX,translateY=start[1]-yScaleExtent[0]*scaleY,m=this._transform=[scaleX,0,0,scaleY,translateX,translateY];this._invTransform=(0,matrix.invert)([],m)}}},Cartesian2D.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},Cartesian2D.prototype.containPoint=function(point){var axisX=this.getAxis("x"),axisY=this.getAxis("y");return axisX.contain(axisX.toLocalCoord(point[0]))&&axisY.contain(axisY.toLocalCoord(point[1]))},Cartesian2D.prototype.containData=function(data){return this.getAxis("x").containData(data[0])&&this.getAxis("y").containData(data[1])},Cartesian2D.prototype.containZone=function(data1,data2){var zoneDiag1=this.dataToPoint(data1),zoneDiag2=this.dataToPoint(data2),area=this.getArea(),zone=new BoundingRect.Z(zoneDiag1[0],zoneDiag1[1],zoneDiag2[0]-zoneDiag1[0],zoneDiag2[1]-zoneDiag1[1]);return area.intersect(zone)},Cartesian2D.prototype.dataToPoint=function(data,clamp,out){out=out||[];var xVal=data[0],yVal=data[1];if(this._transform&&null!=xVal&&isFinite(xVal)&&null!=yVal&&isFinite(yVal))return(0,vector.applyTransform)(out,data,this._transform);var xAxis=this.getAxis("x"),yAxis=this.getAxis("y");return out[0]=xAxis.toGlobalCoord(xAxis.dataToCoord(xVal,clamp)),out[1]=yAxis.toGlobalCoord(yAxis.dataToCoord(yVal,clamp)),out},Cartesian2D.prototype.clampData=function(data,out){var xScale=this.getAxis("x").scale,yScale=this.getAxis("y").scale,xAxisExtent=xScale.getExtent(),yAxisExtent=yScale.getExtent(),x=xScale.parse(data[0]),y=yScale.parse(data[1]);return(out=out||[])[0]=Math.min(Math.max(Math.min(xAxisExtent[0],xAxisExtent[1]),x),Math.max(xAxisExtent[0],xAxisExtent[1])),out[1]=Math.min(Math.max(Math.min(yAxisExtent[0],yAxisExtent[1]),y),Math.max(yAxisExtent[0],yAxisExtent[1])),out},Cartesian2D.prototype.pointToData=function(point,clamp){var out=[];if(this._invTransform)return(0,vector.applyTransform)(out,point,this._invTransform);var xAxis=this.getAxis("x"),yAxis=this.getAxis("y");return out[0]=xAxis.coordToData(xAxis.toLocalCoord(point[0]),clamp),out[1]=yAxis.coordToData(yAxis.toLocalCoord(point[1]),clamp),out},Cartesian2D.prototype.getOtherAxis=function(axis){return this.getAxis("x"===axis.dim?"y":"x")},Cartesian2D.prototype.getArea=function(tolerance){tolerance=tolerance||0;var xExtent=this.getAxis("x").getGlobalExtent(),yExtent=this.getAxis("y").getGlobalExtent(),x=Math.min(xExtent[0],xExtent[1])-tolerance,y=Math.min(yExtent[0],yExtent[1])-tolerance,width=Math.max(xExtent[0],xExtent[1])-x+tolerance,height=Math.max(yExtent[0],yExtent[1])-y+tolerance;return new BoundingRect.Z(x,y,width,height)},Cartesian2D}(Cartesian.Z);var Axis=__webpack_require__("./node_modules/echarts/lib/coord/Axis.js"),Axis2D=function(_super){function Axis2D(dim,scale,coordExtent,axisType,position){var _this=_super.call(this,dim,scale,coordExtent)||this;return _this.index=0,_this.type=axisType||"value",_this.position=position||"bottom",_this}return(0,tslib_es6.ZT)(Axis2D,_super),Axis2D.prototype.isHorizontal=function(){var position=this.position;return"top"===position||"bottom"===position},Axis2D.prototype.getGlobalExtent=function(asc){var ret=this.getExtent();return ret[0]=this.toGlobalCoord(ret[0]),ret[1]=this.toGlobalCoord(ret[1]),asc&&ret[0]>ret[1]&&ret.reverse(),ret},Axis2D.prototype.pointToData=function(point,clamp){return this.coordToData(this.toLocalCoord(point["x"===this.dim?0:1]),clamp)},Axis2D.prototype.setCategorySortInfo=function(info){if("category"!==this.type)return!1;this.model.option.categorySortInfo=info,this.scale.setSortInfo(info)},Axis2D}(Axis.Z);const cartesian_Axis2D=Axis2D;function cartesianAxisHelper_layout(gridModel,axisModel,opt){opt=opt||{};var grid=gridModel.coordinateSystem,axis=axisModel.axis,layout={},otherAxisOnZeroOf=axis.getAxesOnZeroOf()[0],rawAxisPosition=axis.position,axisPosition=otherAxisOnZeroOf?"onZero":rawAxisPosition,axisDim=axis.dim,rect=grid.getRect(),rectBound=[rect.x,rect.x+rect.width,rect.y,rect.y+rect.height],idx={left:0,right:1,top:0,bottom:1,onZero:2},axisOffset=axisModel.get("offset")||0,posBound="x"===axisDim?[rectBound[2]-axisOffset,rectBound[3]+axisOffset]:[rectBound[0]-axisOffset,rectBound[1]+axisOffset];if(otherAxisOnZeroOf){var onZeroCoord=otherAxisOnZeroOf.toGlobalCoord(otherAxisOnZeroOf.dataToCoord(0));posBound[idx.onZero]=Math.max(Math.min(onZeroCoord,posBound[1]),posBound[0])}layout.position=["y"===axisDim?posBound[idx[axisPosition]]:rectBound[0],"x"===axisDim?posBound[idx[axisPosition]]:rectBound[3]],layout.rotation=Math.PI/2*("x"===axisDim?0:1);layout.labelDirection=layout.tickDirection=layout.nameDirection={top:-1,bottom:1,left:-1,right:1}[rawAxisPosition],layout.labelOffset=otherAxisOnZeroOf?posBound[idx[rawAxisPosition]]-posBound[idx.onZero]:0,axisModel.get(["axisTick","inside"])&&(layout.tickDirection=-layout.tickDirection),util.retrieve(opt.labelInside,axisModel.get(["axisLabel","inside"]))&&(layout.labelDirection=-layout.labelDirection);var labelRotate=axisModel.get(["axisLabel","rotate"]);return layout.labelRotate="top"===axisPosition?-labelRotate:labelRotate,layout.z2=1,layout}function isCartesian2DSeries(seriesModel){return"cartesian2d"===seriesModel.get("coordinateSystem")}function findAxisModels(seriesModel){var axisModelMap={xAxisModel:null,yAxisModel:null};return util.each(axisModelMap,(function(v,key){var axisType=key.replace(/Model$/,""),axisModel=seriesModel.getReferringComponents(axisType,util_model.C6).models[0];axisModelMap[key]=axisModel})),axisModelMap}var scale_helper=__webpack_require__("./node_modules/echarts/lib/scale/helper.js"),Interval=__webpack_require__("./node_modules/echarts/lib/scale/Interval.js"),mathLog=Math.log;function alignScaleTicks(scale,axisModel,alignToScale){var intervalScaleProto=Interval.Z.prototype,alignToTicks=intervalScaleProto.getTicks.call(alignToScale),alignToNicedTicks=intervalScaleProto.getTicks.call(alignToScale,!0),alignToSplitNumber=alignToTicks.length-1,alignToInterval=intervalScaleProto.getInterval.call(alignToScale),scaleExtent=(0,axisHelper.Xv)(scale,axisModel),rawExtent=scaleExtent.extent,isMinFixed=scaleExtent.fixMin,isMaxFixed=scaleExtent.fixMax;if("log"===scale.type){var logBase=mathLog(scale.base);rawExtent=[mathLog(rawExtent[0])/logBase,mathLog(rawExtent[1])/logBase]}scale.setExtent(rawExtent[0],rawExtent[1]),scale.calcNiceExtent({splitNumber:alignToSplitNumber,fixMin:isMinFixed,fixMax:isMaxFixed});var extent=intervalScaleProto.getExtent.call(scale);isMinFixed&&(rawExtent[0]=extent[0]),isMaxFixed&&(rawExtent[1]=extent[1]);var interval=intervalScaleProto.getInterval.call(scale),min=rawExtent[0],max=rawExtent[1];if(isMinFixed&&isMaxFixed)interval=(max-min)/alignToSplitNumber;else if(isMinFixed)for(max=rawExtent[0]+interval*alignToSplitNumber;max<rawExtent[1]&&isFinite(max)&&isFinite(rawExtent[1]);)interval=(0,scale_helper.r1)(interval),max=rawExtent[0]+interval*alignToSplitNumber;else if(isMaxFixed)for(min=rawExtent[1]-interval*alignToSplitNumber;min>rawExtent[0]&&isFinite(min)&&isFinite(rawExtent[0]);)interval=(0,scale_helper.r1)(interval),min=rawExtent[1]-interval*alignToSplitNumber;else{scale.getTicks().length-1>alignToSplitNumber&&(interval=(0,scale_helper.r1)(interval));var range=interval*alignToSplitNumber;max=Math.ceil(rawExtent[1]/interval)*interval,(min=(0,number.NM)(max-range))<0&&rawExtent[0]>=0?(min=0,max=(0,number.NM)(range)):max>0&&rawExtent[1]<=0&&(max=0,min=-(0,number.NM)(range))}var t0=(alignToTicks[0].value-alignToNicedTicks[0].value)/alignToInterval,t1=(alignToTicks[alignToSplitNumber].value-alignToNicedTicks[alignToSplitNumber].value)/alignToInterval;intervalScaleProto.setExtent.call(scale,min+interval*t0,max+interval*t1),intervalScaleProto.setInterval.call(scale,interval),(t0||t1)&&intervalScaleProto.setNiceExtent.call(scale,min+interval,max-interval)}function isAxisUsedInTheGrid(axisModel,gridModel){return axisModel.getCoordSysModel()===gridModel}function fixAxisOnZero(axesMap,otherAxisDim,axis,onZeroRecords){axis.getAxesOnZeroOf=function(){return otherAxisOnZeroOf?[otherAxisOnZeroOf]:[]};var otherAxisOnZeroOf,otherAxes=axesMap[otherAxisDim],axisModel=axis.model,onZero=axisModel.get(["axisLine","onZero"]),onZeroAxisIndex=axisModel.get(["axisLine","onZeroAxisIndex"]);if(onZero){if(null!=onZeroAxisIndex)canOnZeroToAxis(otherAxes[onZeroAxisIndex])&&(otherAxisOnZeroOf=otherAxes[onZeroAxisIndex]);else for(var idx in otherAxes)if(otherAxes.hasOwnProperty(idx)&&canOnZeroToAxis(otherAxes[idx])&&!onZeroRecords[getOnZeroRecordKey(otherAxes[idx])]){otherAxisOnZeroOf=otherAxes[idx];break}otherAxisOnZeroOf&&(onZeroRecords[getOnZeroRecordKey(otherAxisOnZeroOf)]=!0)}function getOnZeroRecordKey(axis){return axis.dim+"_"+axis.index}}function canOnZeroToAxis(axis){return axis&&"category"!==axis.type&&"time"!==axis.type&&(0,axisHelper.Yb)(axis)}const cartesian_Grid=function(){function Grid(gridModel,ecModel,api){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=cartesian2DDimensions,this._initCartesian(gridModel,ecModel,api),this.model=gridModel}return Grid.prototype.getRect=function(){return this._rect},Grid.prototype.update=function(ecModel,api){var axesMap=this._axesMap;function updateAxisTicks(axes){var alignTo,axesIndices=(0,util.keys)(axes),len=axesIndices.length;if(len){for(var axisNeedsAlign=[],i=len-1;i>=0;i--){var axis=axes[+axesIndices[i]],model=axis.model,scale=axis.scale;(0,scale_helper.lM)(scale)&&model.get("alignTicks")&&null==model.get("interval")?axisNeedsAlign.push(axis):((0,axisHelper.Jk)(scale,model),(0,scale_helper.lM)(scale)&&(alignTo=axis))}axisNeedsAlign.length&&(alignTo||(alignTo=axisNeedsAlign.pop(),(0,axisHelper.Jk)(alignTo.scale,alignTo.model)),(0,util.each)(axisNeedsAlign,(function(axis){alignScaleTicks(axis.scale,axis.model,alignTo.scale)})))}}this._updateScale(ecModel,this.model),updateAxisTicks(axesMap.x),updateAxisTicks(axesMap.y);var onZeroRecords={};(0,util.each)(axesMap.x,(function(xAxis){fixAxisOnZero(axesMap,"y",xAxis,onZeroRecords)})),(0,util.each)(axesMap.y,(function(yAxis){fixAxisOnZero(axesMap,"x",yAxis,onZeroRecords)})),this.resize(this.model,api)},Grid.prototype.resize=function(gridModel,api,ignoreContainLabel){var boxLayoutParams=gridModel.getBoxLayoutParams(),isContainLabel=!ignoreContainLabel&&gridModel.get("containLabel"),gridRect=(0,layout.ME)(boxLayoutParams,{width:api.getWidth(),height:api.getHeight()});this._rect=gridRect;var axesList=this._axesList;function adjustAxes(){(0,util.each)(axesList,(function(axis){var isHorizontal=axis.isHorizontal(),extent=isHorizontal?[0,gridRect.width]:[0,gridRect.height],idx=axis.inverse?1:0;axis.setExtent(extent[idx],extent[1-idx]),function updateAxisTransform(axis,coordBase){var axisExtent=axis.getExtent(),axisExtentSum=axisExtent[0]+axisExtent[1];axis.toGlobalCoord="x"===axis.dim?function(coord){return coord+coordBase}:function(coord){return axisExtentSum-coord+coordBase},axis.toLocalCoord="x"===axis.dim?function(coord){return coord-coordBase}:function(coord){return axisExtentSum-coord+coordBase}}(axis,isHorizontal?gridRect.x:gridRect.y)}))}adjustAxes(),isContainLabel&&((0,util.each)(axesList,(function(axis){if(!axis.model.get(["axisLabel","inside"])){var labelUnionRect=(0,axisHelper.Do)(axis);if(labelUnionRect){var dim=axis.isHorizontal()?"height":"width",margin=axis.model.get(["axisLabel","margin"]);gridRect[dim]-=labelUnionRect[dim]+margin,"top"===axis.position?gridRect.y+=labelUnionRect.height+margin:"left"===axis.position&&(gridRect.x+=labelUnionRect.width+margin)}}})),adjustAxes()),(0,util.each)(this._coordsList,(function(coord){coord.calcAffineTransform()}))},Grid.prototype.getAxis=function(dim,axisIndex){var axesMapOnDim=this._axesMap[dim];if(null!=axesMapOnDim)return axesMapOnDim[axisIndex||0]},Grid.prototype.getAxes=function(){return this._axesList.slice()},Grid.prototype.getCartesian=function(xAxisIndex,yAxisIndex){if(null!=xAxisIndex&&null!=yAxisIndex){var key="x"+xAxisIndex+"y"+yAxisIndex;return this._coordsMap[key]}(0,util.isObject)(xAxisIndex)&&(yAxisIndex=xAxisIndex.yAxisIndex,xAxisIndex=xAxisIndex.xAxisIndex);for(var i=0,coordList=this._coordsList;i<coordList.length;i++)if(coordList[i].getAxis("x").index===xAxisIndex||coordList[i].getAxis("y").index===yAxisIndex)return coordList[i]},Grid.prototype.getCartesians=function(){return this._coordsList.slice()},Grid.prototype.convertToPixel=function(ecModel,finder,value){var target=this._findConvertTarget(finder);return target.cartesian?target.cartesian.dataToPoint(value):target.axis?target.axis.toGlobalCoord(target.axis.dataToCoord(value)):null},Grid.prototype.convertFromPixel=function(ecModel,finder,value){var target=this._findConvertTarget(finder);return target.cartesian?target.cartesian.pointToData(value):target.axis?target.axis.coordToData(target.axis.toLocalCoord(value)):null},Grid.prototype._findConvertTarget=function(finder){var cartesian,axis,seriesModel=finder.seriesModel,xAxisModel=finder.xAxisModel||seriesModel&&seriesModel.getReferringComponents("xAxis",util_model.C6).models[0],yAxisModel=finder.yAxisModel||seriesModel&&seriesModel.getReferringComponents("yAxis",util_model.C6).models[0],gridModel=finder.gridModel,coordsList=this._coordsList;if(seriesModel)cartesian=seriesModel.coordinateSystem,(0,util.indexOf)(coordsList,cartesian)<0&&(cartesian=null);else if(xAxisModel&&yAxisModel)cartesian=this.getCartesian(xAxisModel.componentIndex,yAxisModel.componentIndex);else if(xAxisModel)axis=this.getAxis("x",xAxisModel.componentIndex);else if(yAxisModel)axis=this.getAxis("y",yAxisModel.componentIndex);else if(gridModel){gridModel.coordinateSystem===this&&(cartesian=this._coordsList[0])}return{cartesian,axis}},Grid.prototype.containPoint=function(point){var coord=this._coordsList[0];if(coord)return coord.containPoint(point)},Grid.prototype._initCartesian=function(gridModel,ecModel,api){var _this=this,grid=this,axisPositionUsed={left:!1,right:!1,top:!1,bottom:!1},axesMap={x:{},y:{}},axesCount={x:0,y:0};if(ecModel.eachComponent("xAxis",createAxisCreator("x"),this),ecModel.eachComponent("yAxis",createAxisCreator("y"),this),!axesCount.x||!axesCount.y)return this._axesMap={},void(this._axesList=[]);function createAxisCreator(dimName){return function(axisModel,idx){if(isAxisUsedInTheGrid(axisModel,gridModel)){var axisPosition=axisModel.get("position");"x"===dimName?"top"!==axisPosition&&"bottom"!==axisPosition&&(axisPosition=axisPositionUsed.bottom?"top":"bottom"):"left"!==axisPosition&&"right"!==axisPosition&&(axisPosition=axisPositionUsed.left?"right":"left"),axisPositionUsed[axisPosition]=!0;var axis=new cartesian_Axis2D(dimName,(0,axisHelper.aG)(axisModel),[0,0],axisModel.get("type"),axisPosition),isCategory="category"===axis.type;axis.onBand=isCategory&&axisModel.get("boundaryGap"),axis.inverse=axisModel.get("inverse"),axisModel.axis=axis,axis.model=axisModel,axis.grid=grid,axis.index=idx,grid._axesList.push(axis),axesMap[dimName][idx]=axis,axesCount[dimName]++}}}this._axesMap=axesMap,(0,util.each)(axesMap.x,(function(xAxis,xAxisIndex){(0,util.each)(axesMap.y,(function(yAxis,yAxisIndex){var key="x"+xAxisIndex+"y"+yAxisIndex,cartesian=new cartesian_Cartesian2D(key);cartesian.master=_this,cartesian.model=gridModel,_this._coordsMap[key]=cartesian,_this._coordsList.push(cartesian),cartesian.addAxis(xAxis),cartesian.addAxis(yAxis)}))}))},Grid.prototype._updateScale=function(ecModel,gridModel){function unionExtent(data,axis){(0,util.each)((0,axisHelper.PY)(data,axis.dim),(function(dim){axis.scale.unionExtentFromData(data,dim)}))}(0,util.each)(this._axesList,(function(axis){if(axis.scale.setExtent(1/0,-1/0),"category"===axis.type){var categorySortInfo=axis.model.get("categorySortInfo");axis.scale.setSortInfo(categorySortInfo)}})),ecModel.eachSeries((function(seriesModel){if(isCartesian2DSeries(seriesModel)){var axesModelMap=findAxisModels(seriesModel),xAxisModel=axesModelMap.xAxisModel,yAxisModel=axesModelMap.yAxisModel;if(!isAxisUsedInTheGrid(xAxisModel,gridModel)||!isAxisUsedInTheGrid(yAxisModel,gridModel))return;var cartesian=this.getCartesian(xAxisModel.componentIndex,yAxisModel.componentIndex),data=seriesModel.getData(),xAxis=cartesian.getAxis("x"),yAxis=cartesian.getAxis("y");unionExtent(data,xAxis),unionExtent(data,yAxis)}}),this)},Grid.prototype.getTooltipAxes=function(dim){var baseAxes=[],otherAxes=[];return(0,util.each)(this.getCartesians(),(function(cartesian){var baseAxis=null!=dim&&"auto"!==dim?cartesian.getAxis(dim):cartesian.getBaseAxis(),otherAxis=cartesian.getOtherAxis(baseAxis);(0,util.indexOf)(baseAxes,baseAxis)<0&&baseAxes.push(baseAxis),(0,util.indexOf)(otherAxes,otherAxis)<0&&otherAxes.push(otherAxis)})),{baseAxes,otherAxes}},Grid.create=function(ecModel,api){var grids=[];return ecModel.eachComponent("grid",(function(gridModel,idx){var grid=new Grid(gridModel,ecModel,api);grid.name="grid_"+idx,grid.resize(gridModel,api,!0),gridModel.coordinateSystem=grid,grids.push(grid)})),ecModel.eachSeries((function(seriesModel){if(isCartesian2DSeries(seriesModel)){var axesModelMap=findAxisModels(seriesModel),xAxisModel=axesModelMap.xAxisModel,yAxisModel=axesModelMap.yAxisModel;0;var grid=xAxisModel.getCoordSysModel().coordinateSystem;seriesModel.coordinateSystem=grid.getCartesian(xAxisModel.componentIndex,yAxisModel.componentIndex)}})),grids},Grid.dimensions=cartesian2DDimensions,Grid}();var Line=__webpack_require__("./node_modules/zrender/lib/graphic/shape/Line.js"),Model=__webpack_require__("./node_modules/echarts/lib/model/Model.js"),AxisBuilder_PI=Math.PI,AxisBuilder=function(){function AxisBuilder(axisModel,opt){this.group=new Group.Z,this.opt=opt,this.axisModel=axisModel,(0,util.defaults)(opt,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var transformGroup=new Group.Z({x:opt.position[0],y:opt.position[1],rotation:opt.rotation});transformGroup.updateTransform(),this._transformGroup=transformGroup}return AxisBuilder.prototype.hasBuilder=function(name){return!!builders[name]},AxisBuilder.prototype.add=function(name){builders[name](this.opt,this.axisModel,this.group,this._transformGroup)},AxisBuilder.prototype.getGroup=function(){return this.group},AxisBuilder.innerTextLayout=function(axisRotation,textRotation,direction){var textAlign,textVerticalAlign,rotationDiff=(0,number.wW)(textRotation-axisRotation);return(0,number.mW)(rotationDiff)?(textVerticalAlign=direction>0?"top":"bottom",textAlign="center"):(0,number.mW)(rotationDiff-AxisBuilder_PI)?(textVerticalAlign=direction>0?"bottom":"top",textAlign="center"):(textVerticalAlign="middle",textAlign=rotationDiff>0&&rotationDiff<AxisBuilder_PI?direction>0?"right":"left":direction>0?"left":"right"),{rotation:rotationDiff,textAlign,textVerticalAlign}},AxisBuilder.makeAxisEventDataBase=function(axisModel){var eventData={componentType:axisModel.mainType,componentIndex:axisModel.componentIndex};return eventData[axisModel.mainType+"Index"]=axisModel.componentIndex,eventData},AxisBuilder.isLabelSilent=function(axisModel){var tooltipOpt=axisModel.get("tooltip");return axisModel.get("silent")||!(axisModel.get("triggerEvent")||tooltipOpt&&tooltipOpt.show)},AxisBuilder}(),builders={axisLine:function(opt,axisModel,group,transformGroup){var shown=axisModel.get(["axisLine","show"]);if("auto"===shown&&opt.handleAutoShown&&(shown=opt.handleAutoShown("axisLine")),shown){var extent=axisModel.axis.getExtent(),matrix=transformGroup.transform,pt1=[extent[0],0],pt2=[extent[1],0],inverse=pt1[0]>pt2[0];matrix&&((0,vector.applyTransform)(pt1,pt1,matrix),(0,vector.applyTransform)(pt2,pt2,matrix));var lineStyle=(0,util.extend)({lineCap:"round"},axisModel.getModel(["axisLine","lineStyle"]).getLineStyle()),line=new Line.Z({shape:{x1:pt1[0],y1:pt1[1],x2:pt2[0],y2:pt2[1]},style:lineStyle,strokeContainThreshold:opt.strokeContainThreshold||5,silent:!0,z2:1});graphic.subPixelOptimizeLine(line.shape,line.style.lineWidth),line.anid="line",group.add(line);var arrows=axisModel.get(["axisLine","symbol"]);if(null!=arrows){var arrowSize=axisModel.get(["axisLine","symbolSize"]);(0,util.isString)(arrows)&&(arrows=[arrows,arrows]),((0,util.isString)(arrowSize)||(0,util.isNumber)(arrowSize))&&(arrowSize=[arrowSize,arrowSize]);var arrowOffset=(0,util_symbol.Cq)(axisModel.get(["axisLine","symbolOffset"])||0,arrowSize),symbolWidth_1=arrowSize[0],symbolHeight_1=arrowSize[1];(0,util.each)([{rotate:opt.rotation+Math.PI/2,offset:arrowOffset[0],r:0},{rotate:opt.rotation-Math.PI/2,offset:arrowOffset[1],r:Math.sqrt((pt1[0]-pt2[0])*(pt1[0]-pt2[0])+(pt1[1]-pt2[1])*(pt1[1]-pt2[1]))}],(function(point,index){if("none"!==arrows[index]&&null!=arrows[index]){var symbol=(0,util_symbol.th)(arrows[index],-symbolWidth_1/2,-symbolHeight_1/2,symbolWidth_1,symbolHeight_1,lineStyle.stroke,!0),r=point.r+point.offset,pt=inverse?pt2:pt1;symbol.attr({rotation:point.rotate,x:pt[0]+r*Math.cos(opt.rotation),y:pt[1]-r*Math.sin(opt.rotation),silent:!0,z2:11}),group.add(symbol)}}))}}},axisTickLabel:function(opt,axisModel,group,transformGroup){var ticksEls=function buildAxisMajorTicks(group,transformGroup,axisModel,opt){var axis=axisModel.axis,tickModel=axisModel.getModel("axisTick"),shown=tickModel.get("show");"auto"===shown&&opt.handleAutoShown&&(shown=opt.handleAutoShown("axisTick"));if(!shown||axis.scale.isBlank())return;for(var lineStyleModel=tickModel.getModel("lineStyle"),tickEndCoord=opt.tickDirection*tickModel.get("length"),ticksEls=createTicks(axis.getTicksCoords(),transformGroup.transform,tickEndCoord,(0,util.defaults)(lineStyleModel.getLineStyle(),{stroke:axisModel.get(["axisLine","lineStyle","color"])}),"ticks"),i=0;i<ticksEls.length;i++)group.add(ticksEls[i]);return ticksEls}(group,transformGroup,axisModel,opt),labelEls=function buildAxisLabel(group,transformGroup,axisModel,opt){var axis=axisModel.axis,show=(0,util.retrieve)(opt.axisLabelShow,axisModel.get(["axisLabel","show"]));if(!show||axis.scale.isBlank())return;var labelModel=axisModel.getModel("axisLabel"),labelMargin=labelModel.get("margin"),labels=axis.getViewLabels(),labelRotation=((0,util.retrieve)(opt.labelRotate,labelModel.get("rotate"))||0)*AxisBuilder_PI/180,labelLayout=AxisBuilder.innerTextLayout(opt.rotation,labelRotation,opt.labelDirection),rawCategoryData=axisModel.getCategories&&axisModel.getCategories(!0),labelEls=[],silent=AxisBuilder.isLabelSilent(axisModel),triggerEvent=axisModel.get("triggerEvent");return(0,util.each)(labels,(function(labelItem,index){var tickValue="ordinal"===axis.scale.type?axis.scale.getRawOrdinalNumber(labelItem.tickValue):labelItem.tickValue,formattedLabel=labelItem.formattedLabel,rawLabel=labelItem.rawLabel,itemLabelModel=labelModel;if(rawCategoryData&&rawCategoryData[tickValue]){var rawCategoryItem=rawCategoryData[tickValue];(0,util.isObject)(rawCategoryItem)&&rawCategoryItem.textStyle&&(itemLabelModel=new Model.Z(rawCategoryItem.textStyle,labelModel,axisModel.ecModel))}var textColor=itemLabelModel.getTextColor()||axisModel.get(["axisLine","lineStyle","color"]),tickCoord=axis.dataToCoord(tickValue),align=itemLabelModel.getShallow("align",!0)||labelLayout.textAlign,alignMin=(0,util.retrieve2)(itemLabelModel.getShallow("alignMinLabel",!0),align),alignMax=(0,util.retrieve2)(itemLabelModel.getShallow("alignMaxLabel",!0),align),verticalAlign=itemLabelModel.getShallow("verticalAlign",!0)||itemLabelModel.getShallow("baseline",!0)||labelLayout.textVerticalAlign,verticalAlignMin=(0,util.retrieve2)(itemLabelModel.getShallow("verticalAlignMinLabel",!0),verticalAlign),verticalAlignMax=(0,util.retrieve2)(itemLabelModel.getShallow("verticalAlignMaxLabel",!0),verticalAlign),textEl=new Text.ZP({x:tickCoord,y:opt.labelOffset+opt.labelDirection*labelMargin,rotation:labelLayout.rotation,silent,z2:10+(labelItem.level||0),style:(0,labelStyle.Lr)(itemLabelModel,{text:formattedLabel,align:0===index?alignMin:index===labels.length-1?alignMax:align,verticalAlign:0===index?verticalAlignMin:index===labels.length-1?verticalAlignMax:verticalAlign,fill:(0,util.isFunction)(textColor)?textColor("category"===axis.type?rawLabel:"value"===axis.type?tickValue+"":tickValue,index):textColor})});if(textEl.anid="label_"+tickValue,triggerEvent){var eventData=AxisBuilder.makeAxisEventDataBase(axisModel);eventData.targetType="axisLabel",eventData.value=rawLabel,eventData.tickIndex=index,"category"===axis.type&&(eventData.dataIndex=tickValue),(0,innerStore.A)(textEl).eventData=eventData}transformGroup.add(textEl),textEl.updateTransform(),labelEls.push(textEl),group.add(textEl),textEl.decomposeTransform()})),labelEls}(group,transformGroup,axisModel,opt);if(function fixMinMaxLabelShow(axisModel,labelEls,tickEls){if((0,axisHelper.WY)(axisModel.axis))return;var showMinLabel=axisModel.get(["axisLabel","showMinLabel"]),showMaxLabel=axisModel.get(["axisLabel","showMaxLabel"]);labelEls=labelEls||[],tickEls=tickEls||[];var firstLabel=labelEls[0],nextLabel=labelEls[1],lastLabel=labelEls[labelEls.length-1],prevLabel=labelEls[labelEls.length-2],firstTick=tickEls[0],nextTick=tickEls[1],lastTick=tickEls[tickEls.length-1],prevTick=tickEls[tickEls.length-2];!1===showMinLabel?(ignoreEl(firstLabel),ignoreEl(firstTick)):isTwoLabelOverlapped(firstLabel,nextLabel)&&(showMinLabel?(ignoreEl(nextLabel),ignoreEl(nextTick)):(ignoreEl(firstLabel),ignoreEl(firstTick)));!1===showMaxLabel?(ignoreEl(lastLabel),ignoreEl(lastTick)):isTwoLabelOverlapped(prevLabel,lastLabel)&&(showMaxLabel?(ignoreEl(prevLabel),ignoreEl(prevTick)):(ignoreEl(lastLabel),ignoreEl(lastTick)))}(axisModel,labelEls,ticksEls),function buildAxisMinorTicks(group,transformGroup,axisModel,tickDirection){var axis=axisModel.axis,minorTickModel=axisModel.getModel("minorTick");if(!minorTickModel.get("show")||axis.scale.isBlank())return;var minorTicksCoords=axis.getMinorTicksCoords();if(!minorTicksCoords.length)return;for(var lineStyleModel=minorTickModel.getModel("lineStyle"),tickEndCoord=tickDirection*minorTickModel.get("length"),minorTickLineStyle=(0,util.defaults)(lineStyleModel.getLineStyle(),(0,util.defaults)(axisModel.getModel("axisTick").getLineStyle(),{stroke:axisModel.get(["axisLine","lineStyle","color"])})),i=0;i<minorTicksCoords.length;i++)for(var minorTicksEls=createTicks(minorTicksCoords[i],transformGroup.transform,tickEndCoord,minorTickLineStyle,"minorticks_"+i),k=0;k<minorTicksEls.length;k++)group.add(minorTicksEls[k])}(group,transformGroup,axisModel,opt.tickDirection),axisModel.get(["axisLabel","hideOverlap"])){var labelList=(0,labelLayoutHelper.VT)((0,util.map)(labelEls,(function(label){return{label,priority:label.z2,defaultAttr:{ignore:label.ignore}}})));(0,labelLayoutHelper.yl)(labelList)}},axisName:function(opt,axisModel,group,transformGroup){var name=(0,util.retrieve)(opt.axisName,axisModel.get("name"));if(name){var labelLayout,axisNameAvailableWidth,nameLocation=axisModel.get("nameLocation"),nameDirection=opt.nameDirection,textStyleModel=axisModel.getModel("nameTextStyle"),gap=axisModel.get("nameGap")||0,extent=axisModel.axis.getExtent(),gapSignal=extent[0]>extent[1]?-1:1,pos=["start"===nameLocation?extent[0]-gapSignal*gap:"end"===nameLocation?extent[1]+gapSignal*gap:(extent[0]+extent[1])/2,isNameLocationCenter(nameLocation)?opt.labelOffset+nameDirection*gap:0],nameRotation=axisModel.get("nameRotate");null!=nameRotation&&(nameRotation=nameRotation*AxisBuilder_PI/180),isNameLocationCenter(nameLocation)?labelLayout=AxisBuilder.innerTextLayout(opt.rotation,null!=nameRotation?nameRotation:opt.rotation,nameDirection):(labelLayout=function endTextLayout(rotation,textPosition,textRotate,extent){var textAlign,textVerticalAlign,rotationDiff=(0,number.wW)(textRotate-rotation),inverse=extent[0]>extent[1],onLeft="start"===textPosition&&!inverse||"start"!==textPosition&&inverse;(0,number.mW)(rotationDiff-AxisBuilder_PI/2)?(textVerticalAlign=onLeft?"bottom":"top",textAlign="center"):(0,number.mW)(rotationDiff-1.5*AxisBuilder_PI)?(textVerticalAlign=onLeft?"top":"bottom",textAlign="center"):(textVerticalAlign="middle",textAlign=rotationDiff<1.5*AxisBuilder_PI&&rotationDiff>AxisBuilder_PI/2?onLeft?"left":"right":onLeft?"right":"left");return{rotation:rotationDiff,textAlign,textVerticalAlign}}(opt.rotation,nameLocation,nameRotation||0,extent),null!=(axisNameAvailableWidth=opt.axisNameAvailableWidth)&&(axisNameAvailableWidth=Math.abs(axisNameAvailableWidth/Math.sin(labelLayout.rotation)),!isFinite(axisNameAvailableWidth)&&(axisNameAvailableWidth=null)));var textFont=textStyleModel.getFont(),truncateOpt=axisModel.get("nameTruncate",!0)||{},ellipsis=truncateOpt.ellipsis,maxWidth=(0,util.retrieve)(opt.nameTruncateMaxWidth,truncateOpt.maxWidth,axisNameAvailableWidth),textEl=new Text.ZP({x:pos[0],y:pos[1],rotation:labelLayout.rotation,silent:AxisBuilder.isLabelSilent(axisModel),style:(0,labelStyle.Lr)(textStyleModel,{text:name,font:textFont,overflow:"truncate",width:maxWidth,ellipsis,fill:textStyleModel.getTextColor()||axisModel.get(["axisLine","lineStyle","color"]),align:textStyleModel.get("align")||labelLayout.textAlign,verticalAlign:textStyleModel.get("verticalAlign")||labelLayout.textVerticalAlign}),z2:1});if(graphic.setTooltipConfig({el:textEl,componentModel:axisModel,itemName:name}),textEl.__fullText=name,textEl.anid="name",axisModel.get("triggerEvent")){var eventData=AxisBuilder.makeAxisEventDataBase(axisModel);eventData.targetType="axisName",eventData.name=name,(0,innerStore.A)(textEl).eventData=eventData}transformGroup.add(textEl),textEl.updateTransform(),group.add(textEl),textEl.decomposeTransform()}}};function ignoreEl(el){el&&(el.ignore=!0)}function isTwoLabelOverlapped(current,next){var firstRect=current&&current.getBoundingRect().clone(),nextRect=next&&next.getBoundingRect().clone();if(firstRect&&nextRect){var mRotationBack=matrix.identity([]);return matrix.rotate(mRotationBack,mRotationBack,-current.rotation),firstRect.applyTransform(matrix.mul([],mRotationBack,current.getLocalTransform())),nextRect.applyTransform(matrix.mul([],mRotationBack,next.getLocalTransform())),firstRect.intersect(nextRect)}}function isNameLocationCenter(nameLocation){return"middle"===nameLocation||"center"===nameLocation}function createTicks(ticksCoords,tickTransform,tickEndCoord,tickLineStyle,anidPrefix){for(var tickEls=[],pt1=[],pt2=[],i=0;i<ticksCoords.length;i++){var tickCoord=ticksCoords[i].coord;pt1[0]=tickCoord,pt1[1]=0,pt2[0]=tickCoord,pt2[1]=tickEndCoord,tickTransform&&((0,vector.applyTransform)(pt1,pt1,tickTransform),(0,vector.applyTransform)(pt2,pt2,tickTransform));var tickEl=new Line.Z({shape:{x1:pt1[0],y1:pt1[1],x2:pt2[0],y2:pt2[1]},style:tickLineStyle,z2:2,autoBatch:!0,silent:!0});graphic.subPixelOptimizeLine(tickEl.shape,tickEl.style.lineWidth),tickEl.anid=anidPrefix+"_"+ticksCoords[i].tickValue,tickEls.push(tickEl)}return tickEls}const axis_AxisBuilder=AxisBuilder;function collect(ecModel,api){var result={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return function collectAxesInfo(result,ecModel,api){var globalTooltipModel=ecModel.getComponent("tooltip"),globalAxisPointerModel=ecModel.getComponent("axisPointer"),linksOption=globalAxisPointerModel.get("link",!0)||[],linkGroups=[];(0,util.each)(api.getCoordinateSystems(),(function(coordSys){if(coordSys.axisPointerEnabled){var coordSysKey=makeKey(coordSys.model),axesInfoInCoordSys=result.coordSysAxesInfo[coordSysKey]={};result.coordSysMap[coordSysKey]=coordSys;var baseTooltipModel=coordSys.model.getModel("tooltip",globalTooltipModel);if((0,util.each)(coordSys.getAxes(),(0,util.curry)(saveTooltipAxisInfo,!1,null)),coordSys.getTooltipAxes&&globalTooltipModel&&baseTooltipModel.get("show")){var triggerAxis="axis"===baseTooltipModel.get("trigger"),cross="cross"===baseTooltipModel.get(["axisPointer","type"]),tooltipAxes=coordSys.getTooltipAxes(baseTooltipModel.get(["axisPointer","axis"]));(triggerAxis||cross)&&(0,util.each)(tooltipAxes.baseAxes,(0,util.curry)(saveTooltipAxisInfo,!cross||"cross",triggerAxis)),cross&&(0,util.each)(tooltipAxes.otherAxes,(0,util.curry)(saveTooltipAxisInfo,"cross",!1))}}function saveTooltipAxisInfo(fromTooltip,triggerTooltip,axis){var axisPointerModel=axis.model.getModel("axisPointer",globalAxisPointerModel),axisPointerShow=axisPointerModel.get("show");if(axisPointerShow&&("auto"!==axisPointerShow||fromTooltip||isHandleTrigger(axisPointerModel))){null==triggerTooltip&&(triggerTooltip=axisPointerModel.get("triggerTooltip")),axisPointerModel=fromTooltip?function makeAxisPointerModel(axis,baseTooltipModel,globalAxisPointerModel,ecModel,fromTooltip,triggerTooltip){var tooltipAxisPointerModel=baseTooltipModel.getModel("axisPointer"),fields=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],volatileOption={};(0,util.each)(fields,(function(field){volatileOption[field]=(0,util.clone)(tooltipAxisPointerModel.get(field))})),volatileOption.snap="category"!==axis.type&&!!triggerTooltip,"cross"===tooltipAxisPointerModel.get("type")&&(volatileOption.type="line");var labelOption=volatileOption.label||(volatileOption.label={});if(null==labelOption.show&&(labelOption.show=!1),"cross"===fromTooltip){var tooltipAxisPointerLabelShow=tooltipAxisPointerModel.get(["label","show"]);if(labelOption.show=null==tooltipAxisPointerLabelShow||tooltipAxisPointerLabelShow,!triggerTooltip){var crossStyle=volatileOption.lineStyle=tooltipAxisPointerModel.get("crossStyle");crossStyle&&(0,util.defaults)(labelOption,crossStyle.textStyle)}}return axis.model.getModel("axisPointer",new Model.Z(volatileOption,globalAxisPointerModel,ecModel))}(axis,baseTooltipModel,globalAxisPointerModel,ecModel,fromTooltip,triggerTooltip):axisPointerModel;var snap=axisPointerModel.get("snap"),triggerEmphasis=axisPointerModel.get("triggerEmphasis"),axisKey=makeKey(axis.model),involveSeries=triggerTooltip||snap||"category"===axis.type,axisInfo=result.axesInfo[axisKey]={key:axisKey,axis,coordSys,axisPointerModel,triggerTooltip,triggerEmphasis,involveSeries,snap,useHandle:isHandleTrigger(axisPointerModel),seriesModels:[],linkGroup:null};axesInfoInCoordSys[axisKey]=axisInfo,result.seriesInvolved=result.seriesInvolved||involveSeries;var groupIndex=function getLinkGroupIndex(linksOption,axis){for(var axisModel=axis.model,dim=axis.dim,i=0;i<linksOption.length;i++){var linkOption=linksOption[i]||{};if(checkPropInLink(linkOption[dim+"AxisId"],axisModel.id)||checkPropInLink(linkOption[dim+"AxisIndex"],axisModel.componentIndex)||checkPropInLink(linkOption[dim+"AxisName"],axisModel.name))return i}}(linksOption,axis);if(null!=groupIndex){var linkGroup=linkGroups[groupIndex]||(linkGroups[groupIndex]={axesInfo:{}});linkGroup.axesInfo[axisKey]=axisInfo,linkGroup.mapper=linksOption[groupIndex].mapper,axisInfo.linkGroup=linkGroup}}}}))}(result,ecModel,api),result.seriesInvolved&&function collectSeriesInfo(result,ecModel){ecModel.eachSeries((function(seriesModel){var coordSys=seriesModel.coordinateSystem,seriesTooltipTrigger=seriesModel.get(["tooltip","trigger"],!0),seriesTooltipShow=seriesModel.get(["tooltip","show"],!0);coordSys&&"none"!==seriesTooltipTrigger&&!1!==seriesTooltipTrigger&&"item"!==seriesTooltipTrigger&&!1!==seriesTooltipShow&&!1!==seriesModel.get(["axisPointer","show"],!0)&&(0,util.each)(result.coordSysAxesInfo[makeKey(coordSys.model)],(function(axisInfo){var axis=axisInfo.axis;coordSys.getAxis(axis.dim)===axis&&(axisInfo.seriesModels.push(seriesModel),null==axisInfo.seriesDataCount&&(axisInfo.seriesDataCount=0),axisInfo.seriesDataCount+=seriesModel.getData().count())}))}))}(result,ecModel),result}function checkPropInLink(linkPropValue,axisPropValue){return"all"===linkPropValue||(0,util.isArray)(linkPropValue)&&(0,util.indexOf)(linkPropValue,axisPropValue)>=0||linkPropValue===axisPropValue}function getAxisInfo(axisModel){var coordSysAxesInfo=(axisModel.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return coordSysAxesInfo&&coordSysAxesInfo.axesInfo[makeKey(axisModel)]}function isHandleTrigger(axisPointerModel){return!!axisPointerModel.get(["handle","show"])}function makeKey(model){return model.type+"||"+model.id}var axisPointerClazz={};const axis_AxisView=function(_super){function AxisView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=AxisView.type,_this}return(0,tslib_es6.ZT)(AxisView,_super),AxisView.prototype.render=function(axisModel,ecModel,api,payload){this.axisPointerClass&&function fixValue(axisModel){var axisInfo=getAxisInfo(axisModel);if(axisInfo){var axisPointerModel=axisInfo.axisPointerModel,scale=axisInfo.axis.scale,option=axisPointerModel.option,status=axisPointerModel.get("status"),value=axisPointerModel.get("value");null!=value&&(value=scale.parse(value));var useHandle=isHandleTrigger(axisPointerModel);null==status&&(option.status=useHandle?"show":"hide");var extent=scale.getExtent().slice();extent[0]>extent[1]&&extent.reverse(),(null==value||value>extent[1])&&(value=extent[1]),value<extent[0]&&(value=extent[0]),option.value=value,useHandle&&(option.status=axisInfo.axis.scale.isBlank()?"hide":"show")}}(axisModel),_super.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(axisModel,api,!0)},AxisView.prototype.updateAxisPointer=function(axisModel,ecModel,api,payload){this._doUpdateAxisPointerClass(axisModel,api,!1)},AxisView.prototype.remove=function(ecModel,api){var axisPointer=this._axisPointer;axisPointer&&axisPointer.remove(api)},AxisView.prototype.dispose=function(ecModel,api){this._disposeAxisPointer(api),_super.prototype.dispose.apply(this,arguments)},AxisView.prototype._doUpdateAxisPointerClass=function(axisModel,api,forceRender){var Clazz=AxisView.getAxisPointerClass(this.axisPointerClass);if(Clazz){var axisPointerModel=function getAxisPointerModel(axisModel){var axisInfo=getAxisInfo(axisModel);return axisInfo&&axisInfo.axisPointerModel}(axisModel);axisPointerModel?(this._axisPointer||(this._axisPointer=new Clazz)).render(axisModel,axisPointerModel,api,forceRender):this._disposeAxisPointer(api)}},AxisView.prototype._disposeAxisPointer=function(api){this._axisPointer&&this._axisPointer.dispose(api),this._axisPointer=null},AxisView.registerAxisPointerClass=function(type,clazz){axisPointerClazz[type]=clazz},AxisView.getAxisPointerClass=function(type){return type&&axisPointerClazz[type]},AxisView.type="axis",AxisView}(Component.Z);var inner=(0,util_model.Yf)();function rectCoordAxisBuildSplitArea(axisView,axisGroup,axisModel,gridModel){var axis=axisModel.axis;if(!axis.scale.isBlank()){var splitAreaModel=axisModel.getModel("splitArea"),areaStyleModel=splitAreaModel.getModel("areaStyle"),areaColors=areaStyleModel.get("color"),gridRect=gridModel.coordinateSystem.getRect(),ticksCoords=axis.getTicksCoords({tickModel:splitAreaModel,clamp:!0});if(ticksCoords.length){var areaColorsLen=areaColors.length,lastSplitAreaColors=inner(axisView).splitAreaColors,newSplitAreaColors=util.createHashMap(),colorIndex=0;if(lastSplitAreaColors)for(var i=0;i<ticksCoords.length;i++){var cIndex=lastSplitAreaColors.get(ticksCoords[i].tickValue);if(null!=cIndex){colorIndex=(cIndex+(areaColorsLen-1)*i)%areaColorsLen;break}}var prev=axis.toGlobalCoord(ticksCoords[0].coord),areaStyle=areaStyleModel.getAreaStyle();areaColors=util.isArray(areaColors)?areaColors:[areaColors];for(i=1;i<ticksCoords.length;i++){var tickCoord=axis.toGlobalCoord(ticksCoords[i].coord),x=void 0,y=void 0,width=void 0,height=void 0;axis.isHorizontal()?(x=prev,y=gridRect.y,width=tickCoord-x,height=gridRect.height,prev=x+width):(x=gridRect.x,y=prev,width=gridRect.width,prev=y+(height=tickCoord-y));var tickValue=ticksCoords[i-1].tickValue;null!=tickValue&&newSplitAreaColors.set(tickValue,colorIndex),axisGroup.add(new Rect.Z({anid:null!=tickValue?"area_"+tickValue:null,shape:{x,y,width,height},style:util.defaults({fill:areaColors[colorIndex]},areaStyle),autoBatch:!0,silent:!0})),colorIndex=(colorIndex+1)%areaColorsLen}inner(axisView).splitAreaColors=newSplitAreaColors}}}function rectCoordAxisHandleRemove(axisView){inner(axisView).splitAreaColors=null}var axisBuilderAttrs=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs=["splitArea","splitLine","minorSplitLine"],CartesianAxisView=function(_super){function CartesianAxisView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=CartesianAxisView.type,_this.axisPointerClass="CartesianAxisPointer",_this}return(0,tslib_es6.ZT)(CartesianAxisView,_super),CartesianAxisView.prototype.render=function(axisModel,ecModel,api,payload){this.group.removeAll();var oldAxisGroup=this._axisGroup;if(this._axisGroup=new Group.Z,this.group.add(this._axisGroup),axisModel.get("show")){var gridModel=axisModel.getCoordSysModel(),layout=cartesianAxisHelper_layout(gridModel,axisModel),axisBuilder=new axis_AxisBuilder(axisModel,util.extend({handleAutoShown:function(elementType){for(var cartesians=gridModel.coordinateSystem.getCartesians(),i=0;i<cartesians.length;i++)if((0,scale_helper.lM)(cartesians[i].getOtherAxis(axisModel.axis).scale))return!0;return!1}},layout));util.each(axisBuilderAttrs,axisBuilder.add,axisBuilder),this._axisGroup.add(axisBuilder.getGroup()),util.each(selfBuilderAttrs,(function(name){axisModel.get([name,"show"])&&axisElementBuilders[name](this,this._axisGroup,axisModel,gridModel)}),this),payload&&"changeAxisOrder"===payload.type&&payload.isInitSort||graphic.groupTransition(oldAxisGroup,this._axisGroup,axisModel),_super.prototype.render.call(this,axisModel,ecModel,api,payload)}},CartesianAxisView.prototype.remove=function(){rectCoordAxisHandleRemove(this)},CartesianAxisView.type="cartesianAxis",CartesianAxisView}(axis_AxisView),axisElementBuilders={splitLine:function(axisView,axisGroup,axisModel,gridModel){var axis=axisModel.axis;if(!axis.scale.isBlank()){var splitLineModel=axisModel.getModel("splitLine"),lineStyleModel=splitLineModel.getModel("lineStyle"),lineColors=lineStyleModel.get("color");lineColors=util.isArray(lineColors)?lineColors:[lineColors];for(var gridRect=gridModel.coordinateSystem.getRect(),isHorizontal=axis.isHorizontal(),lineCount=0,ticksCoords=axis.getTicksCoords({tickModel:splitLineModel}),p1=[],p2=[],lineStyle=lineStyleModel.getLineStyle(),i=0;i<ticksCoords.length;i++){var tickCoord=axis.toGlobalCoord(ticksCoords[i].coord);isHorizontal?(p1[0]=tickCoord,p1[1]=gridRect.y,p2[0]=tickCoord,p2[1]=gridRect.y+gridRect.height):(p1[0]=gridRect.x,p1[1]=tickCoord,p2[0]=gridRect.x+gridRect.width,p2[1]=tickCoord);var colorIndex=lineCount++%lineColors.length,tickValue=ticksCoords[i].tickValue,line=new Line.Z({anid:null!=tickValue?"line_"+ticksCoords[i].tickValue:null,autoBatch:!0,shape:{x1:p1[0],y1:p1[1],x2:p2[0],y2:p2[1]},style:util.defaults({stroke:lineColors[colorIndex]},lineStyle),silent:!0});graphic.subPixelOptimizeLine(line.shape,lineStyle.lineWidth),axisGroup.add(line)}}},minorSplitLine:function(axisView,axisGroup,axisModel,gridModel){var axis=axisModel.axis,lineStyleModel=axisModel.getModel("minorSplitLine").getModel("lineStyle"),gridRect=gridModel.coordinateSystem.getRect(),isHorizontal=axis.isHorizontal(),minorTicksCoords=axis.getMinorTicksCoords();if(minorTicksCoords.length)for(var p1=[],p2=[],lineStyle=lineStyleModel.getLineStyle(),i=0;i<minorTicksCoords.length;i++)for(var k=0;k<minorTicksCoords[i].length;k++){var tickCoord=axis.toGlobalCoord(minorTicksCoords[i][k].coord);isHorizontal?(p1[0]=tickCoord,p1[1]=gridRect.y,p2[0]=tickCoord,p2[1]=gridRect.y+gridRect.height):(p1[0]=gridRect.x,p1[1]=tickCoord,p2[0]=gridRect.x+gridRect.width,p2[1]=tickCoord);var line=new Line.Z({anid:"minor_line_"+minorTicksCoords[i][k].tickValue,autoBatch:!0,shape:{x1:p1[0],y1:p1[1],x2:p2[0],y2:p2[1]},style:lineStyle,silent:!0});graphic.subPixelOptimizeLine(line.shape,lineStyle.lineWidth),axisGroup.add(line)}},splitArea:function(axisView,axisGroup,axisModel,gridModel){rectCoordAxisBuildSplitArea(axisView,axisGroup,axisModel,gridModel)}},CartesianXAxisView=function(_super){function CartesianXAxisView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=CartesianXAxisView.type,_this}return(0,tslib_es6.ZT)(CartesianXAxisView,_super),CartesianXAxisView.type="xAxis",CartesianXAxisView}(CartesianAxisView),CartesianYAxisView=function(_super){function CartesianYAxisView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=CartesianXAxisView.type,_this}return(0,tslib_es6.ZT)(CartesianYAxisView,_super),CartesianYAxisView.type="yAxis",CartesianYAxisView}(CartesianAxisView);var GridView=function(_super){function GridView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type="grid",_this}return(0,tslib_es6.ZT)(GridView,_super),GridView.prototype.render=function(gridModel,ecModel){this.group.removeAll(),gridModel.get("show")&&this.group.add(new Rect.Z({shape:gridModel.coordinateSystem.getRect(),style:(0,util.defaults)({fill:gridModel.get("backgroundColor")},gridModel.getItemStyle()),silent:!0,z2:-1}))},GridView.type="grid",GridView}(Component.Z),extraOption={offset:0};function installSimple_install(registers){registers.registerComponentView(GridView),registers.registerComponentModel(cartesian_GridModel),registers.registerCoordinateSystem("cartesian2d",cartesian_Grid),axisModelCreator(registers,"x",CartesianAxisModel,extraOption),axisModelCreator(registers,"y",CartesianAxisModel,extraOption),registers.registerComponentView(CartesianXAxisView),registers.registerComponentView(CartesianYAxisView),registers.registerPreprocessor((function(option){option.xAxis&&option.yAxis&&!option.grid&&(option.grid={})}))}function radarLayout(ecModel){ecModel.eachSeriesByType("radar",(function(seriesModel){var data=seriesModel.getData(),points=[],coordSys=seriesModel.coordinateSystem;if(coordSys){var axes=coordSys.getIndicatorAxes();util.each(axes,(function(axis,axisIndex){data.each(data.mapDimension(axes[axisIndex].dim),(function(val,dataIndex){points[dataIndex]=points[dataIndex]||[];var point=coordSys.dataToPoint(val,axisIndex);points[dataIndex][axisIndex]=isValidPoint(point)?point:getValueMissingPoint(coordSys)}))})),data.each((function(idx){var firstPoint=util.find(points[idx],(function(point){return isValidPoint(point)}))||getValueMissingPoint(coordSys);points[idx].push(firstPoint.slice()),data.setItemLayout(idx,points[idx])}))}}))}function isValidPoint(point){return!isNaN(point[0])&&!isNaN(point[1])}function getValueMissingPoint(coordSys){return[coordSys.cx,coordSys.cy]}function radarBackwardCompat(option){var polarOptArr=option.polar;if(polarOptArr){util.isArray(polarOptArr)||(polarOptArr=[polarOptArr]);var polarNotRadar_1=[];util.each(polarOptArr,(function(polarOpt,idx){polarOpt.indicator?(polarOpt.type&&!polarOpt.shape&&(polarOpt.shape=polarOpt.type),option.radar=option.radar||[],util.isArray(option.radar)||(option.radar=[option.radar]),option.radar.push(polarOpt)):polarNotRadar_1.push(polarOpt)})),option.polar=polarNotRadar_1}util.each(option.series,(function(seriesOpt){seriesOpt&&"radar"===seriesOpt.type&&seriesOpt.polarIndex&&(seriesOpt.radarIndex=seriesOpt.polarIndex)}))}var Polygon=__webpack_require__("./node_modules/zrender/lib/graphic/shape/Polygon.js"),RadarView=function(_super){function RadarView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=RadarView.type,_this}return(0,tslib_es6.ZT)(RadarView,_super),RadarView.prototype.render=function(seriesModel,ecModel,api){var polar=seriesModel.coordinateSystem,group=this.group,data=seriesModel.getData(),oldData=this._data;function createSymbol(data,idx){var symbolType=data.getItemVisual(idx,"symbol")||"circle";if("none"!==symbolType){var symbolSize=util_symbol.zp(data.getItemVisual(idx,"symbolSize")),symbolPath=util_symbol.th(symbolType,-1,-1,2,2),symbolRotate=data.getItemVisual(idx,"symbolRotate")||0;return symbolPath.attr({style:{strokeNoScale:!0},z2:100,scaleX:symbolSize[0]/2,scaleY:symbolSize[1]/2,rotation:symbolRotate*Math.PI/180||0}),symbolPath}}function updateSymbols(oldPoints,newPoints,symbolGroup,data,idx,isInit){symbolGroup.removeAll();for(var i=0;i<newPoints.length-1;i++){var symbolPath=createSymbol(data,idx);symbolPath&&(symbolPath.__dimIdx=i,oldPoints[i]?(symbolPath.setPosition(oldPoints[i]),graphic[isInit?"initProps":"updateProps"](symbolPath,{x:newPoints[i][0],y:newPoints[i][1]},seriesModel,idx)):symbolPath.setPosition(newPoints[i]),symbolGroup.add(symbolPath))}}function getInitialPoints(points){return util.map(points,(function(pt){return[polar.cx,polar.cy]}))}data.diff(oldData).add((function(idx){var points=data.getItemLayout(idx);if(points){var polygon=new Polygon.Z,polyline=new shape_Polyline.Z,target={shape:{points}};polygon.shape.points=getInitialPoints(points),polyline.shape.points=getInitialPoints(points),basicTransition.KZ(polygon,target,seriesModel,idx),basicTransition.KZ(polyline,target,seriesModel,idx);var itemGroup=new Group.Z,symbolGroup=new Group.Z;itemGroup.add(polyline),itemGroup.add(polygon),itemGroup.add(symbolGroup),updateSymbols(polyline.shape.points,points,symbolGroup,data,idx,!0),data.setItemGraphicEl(idx,itemGroup)}})).update((function(newIdx,oldIdx){var itemGroup=oldData.getItemGraphicEl(oldIdx),polyline=itemGroup.childAt(0),polygon=itemGroup.childAt(1),symbolGroup=itemGroup.childAt(2),target={shape:{points:data.getItemLayout(newIdx)}};target.shape.points&&(updateSymbols(polyline.shape.points,target.shape.points,symbolGroup,data,newIdx,!1),(0,basicTransition.Zi)(polygon),(0,basicTransition.Zi)(polyline),basicTransition.D(polyline,target,seriesModel),basicTransition.D(polygon,target,seriesModel),data.setItemGraphicEl(newIdx,itemGroup))})).remove((function(idx){group.remove(oldData.getItemGraphicEl(idx))})).execute(),data.eachItemGraphicEl((function(itemGroup,idx){var itemModel=data.getItemModel(idx),polyline=itemGroup.childAt(0),polygon=itemGroup.childAt(1),symbolGroup=itemGroup.childAt(2),itemStyle=data.getItemVisual(idx,"style"),color=itemStyle.fill;group.add(itemGroup),polyline.useStyle(util.defaults(itemModel.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:color})),(0,states.WO)(polyline,itemModel,"lineStyle"),(0,states.WO)(polygon,itemModel,"areaStyle");var areaStyleModel=itemModel.getModel("areaStyle"),polygonIgnore=areaStyleModel.isEmpty()&&areaStyleModel.parentModel.isEmpty();polygon.ignore=polygonIgnore,util.each(["emphasis","select","blur"],(function(stateName){var stateModel=itemModel.getModel([stateName,"areaStyle"]),stateIgnore=stateModel.isEmpty()&&stateModel.parentModel.isEmpty();polygon.ensureState(stateName).ignore=stateIgnore&&polygonIgnore})),polygon.useStyle(util.defaults(areaStyleModel.getAreaStyle(),{fill:color,opacity:.7,decal:itemStyle.decal}));var emphasisModel=itemModel.getModel("emphasis"),itemHoverStyle=emphasisModel.getModel("itemStyle").getItemStyle();symbolGroup.eachChild((function(symbolPath){if(symbolPath instanceof graphic_Image.ZP){var pathStyle=symbolPath.style;symbolPath.useStyle(util.extend({image:pathStyle.image,x:pathStyle.x,y:pathStyle.y,width:pathStyle.width,height:pathStyle.height},itemStyle))}else symbolPath.useStyle(itemStyle),symbolPath.setColor(color),symbolPath.style.strokeNoScale=!0;symbolPath.ensureState("emphasis").style=util.clone(itemHoverStyle);var defaultText=data.getStore().get(data.getDimensionIndex(symbolPath.__dimIdx),idx);(null==defaultText||isNaN(defaultText))&&(defaultText=""),(0,labelStyle.ni)(symbolPath,(0,labelStyle.k3)(itemModel),{labelFetcher:data.hostModel,labelDataIndex:idx,labelDimIndex:symbolPath.__dimIdx,defaultText,inheritColor:color,defaultOpacity:itemStyle.opacity})})),(0,states.k5)(itemGroup,emphasisModel.get("focus"),emphasisModel.get("blurScope"),emphasisModel.get("disabled"))})),this._data=data},RadarView.prototype.remove=function(){this.group.removeAll(),this._data=null},RadarView.type="radar",RadarView}(Chart.Z);const radar_RadarView=RadarView;var tooltipMarkup=__webpack_require__("./node_modules/echarts/lib/component/tooltip/tooltipMarkup.js");const RadarSeries=function(_super){function RadarSeriesModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=RadarSeriesModel.type,_this.hasSymbolVisual=!0,_this}return(0,tslib_es6.ZT)(RadarSeriesModel,_super),RadarSeriesModel.prototype.init=function(option){_super.prototype.init.apply(this,arguments),this.legendVisualProvider=new visual_LegendVisualProvider(util.bind(this.getData,this),util.bind(this.getRawData,this))},RadarSeriesModel.prototype.getInitialData=function(option,ecModel){return(0,createSeriesDataSimply.Z)(this,{generateCoord:"indicator_",generateCoordCount:1/0})},RadarSeriesModel.prototype.formatTooltip=function(dataIndex,multipleSeries,dataType){var data=this.getData(),indicatorAxes=this.coordinateSystem.getIndicatorAxes(),name=this.getData().getName(dataIndex),nameToDisplay=""===name?this.name:name,markerColor=(0,tooltipMarkup.jT)(this,dataIndex);return(0,tooltipMarkup.TX)("section",{header:nameToDisplay,sortBlocks:!0,blocks:util.map(indicatorAxes,(function(axis){var val=data.get(data.mapDimension(axis.dim),dataIndex);return(0,tooltipMarkup.TX)("nameValue",{markerType:"subItem",markerColor,name:axis.name,value:val,sortParam:val})}))})},RadarSeriesModel.prototype.getTooltipPosition=function(dataIndex){if(null!=dataIndex)for(var data_1=this.getData(),coordSys=this.coordinateSystem,values=data_1.getValues(util.map(coordSys.dimensions,(function(dim){return data_1.mapDimension(dim)})),dataIndex),i=0,len=values.length;i<len;i++)if(!isNaN(values[i])){var indicatorAxes=coordSys.getIndicatorAxes();return coordSys.coordToPoint(indicatorAxes[i].dataToCoord(values[i]),i)}},RadarSeriesModel.type="series.radar",RadarSeriesModel.dependencies=["radar"],RadarSeriesModel.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},RadarSeriesModel}(Series.Z);var valueAxisDefault=axisDefault.value;function defaultsShow(opt,show){return util.defaults({show},opt)}const radar_RadarModel=function(_super){function RadarModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=RadarModel.type,_this}return(0,tslib_es6.ZT)(RadarModel,_super),RadarModel.prototype.optionUpdated=function(){var boundaryGap=this.get("boundaryGap"),splitNumber=this.get("splitNumber"),scale=this.get("scale"),axisLine=this.get("axisLine"),axisTick=this.get("axisTick"),axisLabel=this.get("axisLabel"),nameTextStyle=this.get("axisName"),showName=this.get(["axisName","show"]),nameFormatter=this.get(["axisName","formatter"]),nameGap=this.get("axisNameGap"),triggerEvent=this.get("triggerEvent"),indicatorModels=util.map(this.get("indicator")||[],(function(indicatorOpt){null!=indicatorOpt.max&&indicatorOpt.max>0&&!indicatorOpt.min?indicatorOpt.min=0:null!=indicatorOpt.min&&indicatorOpt.min<0&&!indicatorOpt.max&&(indicatorOpt.max=0);var iNameTextStyle=nameTextStyle;null!=indicatorOpt.color&&(iNameTextStyle=util.defaults({color:indicatorOpt.color},nameTextStyle));var innerIndicatorOpt=util.merge(util.clone(indicatorOpt),{boundaryGap,splitNumber,scale,axisLine,axisTick,axisLabel,name:indicatorOpt.text,showName,nameLocation:"end",nameGap,nameTextStyle:iNameTextStyle,triggerEvent},!1);if(util.isString(nameFormatter)){var indName=innerIndicatorOpt.name;innerIndicatorOpt.name=nameFormatter.replace("{value}",null!=indName?indName:"")}else util.isFunction(nameFormatter)&&(innerIndicatorOpt.name=nameFormatter(innerIndicatorOpt.name,innerIndicatorOpt));var model=new Model.Z(innerIndicatorOpt,null,this.ecModel);return util.mixin(model,axisModelCommonMixin.W.prototype),model.mainType="radar",model.componentIndex=this.componentIndex,model}),this);this._indicatorModels=indicatorModels},RadarModel.prototype.getIndicatorModels=function(){return this._indicatorModels},RadarModel.type="radar",RadarModel.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:util.merge({lineStyle:{color:"#bbb"}},valueAxisDefault.axisLine),axisLabel:defaultsShow(valueAxisDefault.axisLabel,!1),axisTick:defaultsShow(valueAxisDefault.axisTick,!1),splitLine:defaultsShow(valueAxisDefault.splitLine,!0),splitArea:defaultsShow(valueAxisDefault.splitArea,!0),indicator:[]},RadarModel}(model_Component.Z);var Circle=__webpack_require__("./node_modules/zrender/lib/graphic/shape/Circle.js"),Ring=__webpack_require__("./node_modules/zrender/lib/graphic/shape/Ring.js"),RadarView_axisBuilderAttrs=["axisLine","axisTickLabel","axisName"],RadarView_RadarView=function(_super){function RadarView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=RadarView.type,_this}return(0,tslib_es6.ZT)(RadarView,_super),RadarView.prototype.render=function(radarModel,ecModel,api){this.group.removeAll(),this._buildAxes(radarModel),this._buildSplitLineAndArea(radarModel)},RadarView.prototype._buildAxes=function(radarModel){var radar=radarModel.coordinateSystem,indicatorAxes=radar.getIndicatorAxes(),axisBuilders=util.map(indicatorAxes,(function(indicatorAxis){var axisName=indicatorAxis.model.get("showName")?indicatorAxis.name:"";return new axis_AxisBuilder(indicatorAxis.model,{axisName,position:[radar.cx,radar.cy],rotation:indicatorAxis.angle,labelDirection:-1,tickDirection:-1,nameDirection:1})}));util.each(axisBuilders,(function(axisBuilder){util.each(RadarView_axisBuilderAttrs,axisBuilder.add,axisBuilder),this.group.add(axisBuilder.getGroup())}),this)},RadarView.prototype._buildSplitLineAndArea=function(radarModel){var radar=radarModel.coordinateSystem,indicatorAxes=radar.getIndicatorAxes();if(indicatorAxes.length){var shape=radarModel.get("shape"),splitLineModel=radarModel.getModel("splitLine"),splitAreaModel=radarModel.getModel("splitArea"),lineStyleModel=splitLineModel.getModel("lineStyle"),areaStyleModel=splitAreaModel.getModel("areaStyle"),showSplitLine=splitLineModel.get("show"),showSplitArea=splitAreaModel.get("show"),splitLineColors=lineStyleModel.get("color"),splitAreaColors=areaStyleModel.get("color"),splitLineColorsArr=util.isArray(splitLineColors)?splitLineColors:[splitLineColors],splitAreaColorsArr=util.isArray(splitAreaColors)?splitAreaColors:[splitAreaColors],splitLines=[],splitAreas=[];if("circle"===shape)for(var ticksRadius=indicatorAxes[0].getTicksCoords(),cx=radar.cx,cy=radar.cy,i=0;i<ticksRadius.length;i++){if(showSplitLine)splitLines[getColorIndex(splitLines,splitLineColorsArr,i)].push(new Circle.Z({shape:{cx,cy,r:ticksRadius[i].coord}}));if(showSplitArea&&i<ticksRadius.length-1)splitAreas[getColorIndex(splitAreas,splitAreaColorsArr,i)].push(new Ring.Z({shape:{cx,cy,r0:ticksRadius[i].coord,r:ticksRadius[i+1].coord}}))}else{var realSplitNumber_1,axesTicksPoints=util.map(indicatorAxes,(function(indicatorAxis,idx){var ticksCoords=indicatorAxis.getTicksCoords();return realSplitNumber_1=null==realSplitNumber_1?ticksCoords.length-1:Math.min(ticksCoords.length-1,realSplitNumber_1),util.map(ticksCoords,(function(tickCoord){return radar.coordToPoint(tickCoord.coord,idx)}))})),prevPoints=[];for(i=0;i<=realSplitNumber_1;i++){for(var points=[],j=0;j<indicatorAxes.length;j++)points.push(axesTicksPoints[j][i]);if(points[0]&&points.push(points[0].slice()),showSplitLine)splitLines[getColorIndex(splitLines,splitLineColorsArr,i)].push(new shape_Polyline.Z({shape:{points}}));if(showSplitArea&&prevPoints)splitAreas[getColorIndex(splitAreas,splitAreaColorsArr,i-1)].push(new Polygon.Z({shape:{points:points.concat(prevPoints)}}));prevPoints=points.slice().reverse()}}var lineStyle=lineStyleModel.getLineStyle(),areaStyle=areaStyleModel.getAreaStyle();util.each(splitAreas,(function(splitAreas,idx){this.group.add(graphic.mergePath(splitAreas,{style:util.defaults({stroke:"none",fill:splitAreaColorsArr[idx%splitAreaColorsArr.length]},areaStyle),silent:!0}))}),this),util.each(splitLines,(function(splitLines,idx){this.group.add(graphic.mergePath(splitLines,{style:util.defaults({fill:"none",stroke:splitLineColorsArr[idx%splitLineColorsArr.length]},lineStyle),silent:!0}))}),this)}function getColorIndex(areaOrLine,areaOrLineColorList,idx){var colorIndex=idx%areaOrLineColorList.length;return areaOrLine[colorIndex]=areaOrLine[colorIndex]||[],colorIndex}},RadarView.type="radar",RadarView}(Component.Z);const component_radar_RadarView=RadarView_RadarView;const radar_IndicatorAxis=function(_super){function IndicatorAxis(dim,scale,radiusExtent){var _this=_super.call(this,dim,scale,radiusExtent)||this;return _this.type="value",_this.angle=0,_this.name="",_this}return(0,tslib_es6.ZT)(IndicatorAxis,_super),IndicatorAxis}(Axis.Z);var Radar=function(){function Radar(radarModel,ecModel,api){this.dimensions=[],this._model=radarModel,this._indicatorAxes=(0,util.map)(radarModel.getIndicatorModels(),(function(indicatorModel,idx){var dim="indicator_"+idx,indicatorAxis=new radar_IndicatorAxis(dim,new Interval.Z);return indicatorAxis.name=indicatorModel.get("name"),indicatorAxis.model=indicatorModel,indicatorModel.axis=indicatorAxis,this.dimensions.push(dim),indicatorAxis}),this),this.resize(radarModel,api)}return Radar.prototype.getIndicatorAxes=function(){return this._indicatorAxes},Radar.prototype.dataToPoint=function(value,indicatorIndex){var indicatorAxis=this._indicatorAxes[indicatorIndex];return this.coordToPoint(indicatorAxis.dataToCoord(value),indicatorIndex)},Radar.prototype.coordToPoint=function(coord,indicatorIndex){var angle=this._indicatorAxes[indicatorIndex].angle;return[this.cx+coord*Math.cos(angle),this.cy-coord*Math.sin(angle)]},Radar.prototype.pointToData=function(pt){var dx=pt[0]-this.cx,dy=pt[1]-this.cy,radius=Math.sqrt(dx*dx+dy*dy);dx/=radius,dy/=radius;for(var closestAxis,radian=Math.atan2(-dy,dx),minRadianDiff=1/0,closestAxisIdx=-1,i=0;i<this._indicatorAxes.length;i++){var indicatorAxis=this._indicatorAxes[i],diff=Math.abs(radian-indicatorAxis.angle);diff<minRadianDiff&&(closestAxis=indicatorAxis,closestAxisIdx=i,minRadianDiff=diff)}return[closestAxisIdx,+(closestAxis&&closestAxis.coordToData(radius))]},Radar.prototype.resize=function(radarModel,api){var center=radarModel.get("center"),viewWidth=api.getWidth(),viewHeight=api.getHeight(),viewSize=Math.min(viewWidth,viewHeight)/2;this.cx=number.GM(center[0],viewWidth),this.cy=number.GM(center[1],viewHeight),this.startAngle=radarModel.get("startAngle")*Math.PI/180;var radius=radarModel.get("radius");((0,util.isString)(radius)||(0,util.isNumber)(radius))&&(radius=[0,radius]),this.r0=number.GM(radius[0],viewSize),this.r=number.GM(radius[1],viewSize),(0,util.each)(this._indicatorAxes,(function(indicatorAxis,idx){indicatorAxis.setExtent(this.r0,this.r);var angle=this.startAngle+idx*Math.PI*2/this._indicatorAxes.length;angle=Math.atan2(Math.sin(angle),Math.cos(angle)),indicatorAxis.angle=angle}),this)},Radar.prototype.update=function(ecModel,api){var indicatorAxes=this._indicatorAxes,radarModel=this._model;(0,util.each)(indicatorAxes,(function(indicatorAxis){indicatorAxis.scale.setExtent(1/0,-1/0)})),ecModel.eachSeriesByType("radar",(function(radarSeries,idx){if("radar"===radarSeries.get("coordinateSystem")&&ecModel.getComponent("radar",radarSeries.get("radarIndex"))===radarModel){var data=radarSeries.getData();(0,util.each)(indicatorAxes,(function(indicatorAxis){indicatorAxis.scale.unionExtentFromData(data,data.mapDimension(indicatorAxis.dim))}))}}),this);var splitNumber=radarModel.get("splitNumber"),dummyScale=new Interval.Z;dummyScale.setExtent(0,splitNumber),dummyScale.setInterval(1),(0,util.each)(indicatorAxes,(function(indicatorAxis,idx){alignScaleTicks(indicatorAxis.scale,indicatorAxis.model,dummyScale)}))},Radar.prototype.convertToPixel=function(ecModel,finder,value){return console.warn("Not implemented."),null},Radar.prototype.convertFromPixel=function(ecModel,finder,pixel){return console.warn("Not implemented."),null},Radar.prototype.containPoint=function(point){return console.warn("Not implemented."),!1},Radar.create=function(ecModel,api){var radarList=[];return ecModel.eachComponent("radar",(function(radarModel){var radar=new Radar(radarModel,ecModel,api);radarList.push(radar),radarModel.coordinateSystem=radar})),ecModel.eachSeriesByType("radar",(function(radarSeries){"radar"===radarSeries.get("coordinateSystem")&&(radarSeries.coordinateSystem=radarList[radarSeries.get("radarIndex")||0])})),radarList},Radar.dimensions=[],Radar}();const radar_Radar=Radar;function radar_install_install(registers){registers.registerCoordinateSystem("radar",radar_Radar),registers.registerComponentModel(radar_RadarModel),registers.registerComponentView(component_radar_RadarView),registers.registerVisual({seriesType:"radar",reset:function(seriesModel){var data=seriesModel.getData();data.each((function(idx){data.setItemVisual(idx,"legendIcon","roundRect")})),data.setVisual("legendIcon","roundRect")}})}var map_install=__webpack_require__("./node_modules/echarts/lib/chart/map/install.js"),BezierCurve=__webpack_require__("./node_modules/zrender/lib/graphic/shape/BezierCurve.js");function firstWalk(node,separation){var children=node.isExpand?node.children:[],siblings=node.parentNode.children,subtreeW=node.hierNode.i?siblings[node.hierNode.i-1]:null;if(children.length){!function executeShifts(node){var children=node.children,n=children.length,shift=0,change=0;for(;--n>=0;){var child=children[n];child.hierNode.prelim+=shift,child.hierNode.modifier+=shift,change+=child.hierNode.change,shift+=child.hierNode.shift+change}}(node);var midPoint=(children[0].hierNode.prelim+children[children.length-1].hierNode.prelim)/2;subtreeW?(node.hierNode.prelim=subtreeW.hierNode.prelim+separation(node,subtreeW),node.hierNode.modifier=node.hierNode.prelim-midPoint):node.hierNode.prelim=midPoint}else subtreeW&&(node.hierNode.prelim=subtreeW.hierNode.prelim+separation(node,subtreeW));node.parentNode.hierNode.defaultAncestor=function apportion(subtreeV,subtreeW,ancestor,separation){if(subtreeW){for(var nodeOutRight=subtreeV,nodeInRight=subtreeV,nodeOutLeft=nodeInRight.parentNode.children[0],nodeInLeft=subtreeW,sumOutRight=nodeOutRight.hierNode.modifier,sumInRight=nodeInRight.hierNode.modifier,sumOutLeft=nodeOutLeft.hierNode.modifier,sumInLeft=nodeInLeft.hierNode.modifier;nodeInLeft=nextRight(nodeInLeft),nodeInRight=nextLeft(nodeInRight),nodeInLeft&&nodeInRight;){nodeOutRight=nextRight(nodeOutRight),nodeOutLeft=nextLeft(nodeOutLeft),nodeOutRight.hierNode.ancestor=subtreeV;var shift=nodeInLeft.hierNode.prelim+sumInLeft-nodeInRight.hierNode.prelim-sumInRight+separation(nodeInLeft,nodeInRight);shift>0&&(moveSubtree(nextAncestor(nodeInLeft,subtreeV,ancestor),subtreeV,shift),sumInRight+=shift,sumOutRight+=shift),sumInLeft+=nodeInLeft.hierNode.modifier,sumInRight+=nodeInRight.hierNode.modifier,sumOutRight+=nodeOutRight.hierNode.modifier,sumOutLeft+=nodeOutLeft.hierNode.modifier}nodeInLeft&&!nextRight(nodeOutRight)&&(nodeOutRight.hierNode.thread=nodeInLeft,nodeOutRight.hierNode.modifier+=sumInLeft-sumOutRight),nodeInRight&&!nextLeft(nodeOutLeft)&&(nodeOutLeft.hierNode.thread=nodeInRight,nodeOutLeft.hierNode.modifier+=sumInRight-sumOutLeft,ancestor=subtreeV)}return ancestor}(node,subtreeW,node.parentNode.hierNode.defaultAncestor||siblings[0],separation)}function secondWalk(node){var nodeX=node.hierNode.prelim+node.parentNode.hierNode.modifier;node.setLayout({x:nodeX},!0),node.hierNode.modifier+=node.parentNode.hierNode.modifier}function layoutHelper_separation(cb){return arguments.length?cb:defaultSeparation}function radialCoordinate(rad,r){return rad-=Math.PI/2,{x:r*Math.cos(rad),y:r*Math.sin(rad)}}function layoutHelper_getViewRect(seriesModel,api){return layout.ME(seriesModel.getBoxLayoutParams(),{width:api.getWidth(),height:api.getHeight()})}function nextRight(node){var children=node.children;return children.length&&node.isExpand?children[children.length-1]:node.hierNode.thread}function nextLeft(node){var children=node.children;return children.length&&node.isExpand?children[0]:node.hierNode.thread}function nextAncestor(nodeInLeft,node,ancestor){return nodeInLeft.hierNode.ancestor.parentNode===node.parentNode?nodeInLeft.hierNode.ancestor:ancestor}function moveSubtree(wl,wr,shift){var change=shift/(wr.hierNode.i-wl.hierNode.i);wr.hierNode.change-=change,wr.hierNode.shift+=shift,wr.hierNode.modifier+=shift,wr.hierNode.prelim+=shift,wl.hierNode.change+=change}function defaultSeparation(node1,node2){return node1.parentNode===node2.parentNode?1:2}var bbox=__webpack_require__("./node_modules/zrender/lib/core/bbox.js"),View=__webpack_require__("./node_modules/echarts/lib/coord/View.js"),roamHelper=__webpack_require__("./node_modules/echarts/lib/component/helper/roamHelper.js"),RoamController=__webpack_require__("./node_modules/echarts/lib/component/helper/RoamController.js"),cursorHelper=__webpack_require__("./node_modules/echarts/lib/component/helper/cursorHelper.js"),TreeEdgeShape=function TreeEdgeShape(){this.parentPoint=[],this.childPoints=[]},TreePath=function(_super){function TreePath(opts){return _super.call(this,opts)||this}return(0,tslib_es6.ZT)(TreePath,_super),TreePath.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},TreePath.prototype.getDefaultShape=function(){return new TreeEdgeShape},TreePath.prototype.buildPath=function(ctx,shape){var childPoints=shape.childPoints,childLen=childPoints.length,parentPoint=shape.parentPoint,firstChildPos=childPoints[0],lastChildPos=childPoints[childLen-1];if(1===childLen)return ctx.moveTo(parentPoint[0],parentPoint[1]),void ctx.lineTo(firstChildPos[0],firstChildPos[1]);var orient=shape.orient,forkDim="TB"===orient||"BT"===orient?0:1,otherDim=1-forkDim,forkPosition=(0,number.GM)(shape.forkPosition,1),tmpPoint=[];tmpPoint[forkDim]=parentPoint[forkDim],tmpPoint[otherDim]=parentPoint[otherDim]+(lastChildPos[otherDim]-parentPoint[otherDim])*forkPosition,ctx.moveTo(parentPoint[0],parentPoint[1]),ctx.lineTo(tmpPoint[0],tmpPoint[1]),ctx.moveTo(firstChildPos[0],firstChildPos[1]),tmpPoint[forkDim]=firstChildPos[forkDim],ctx.lineTo(tmpPoint[0],tmpPoint[1]),tmpPoint[forkDim]=lastChildPos[forkDim],ctx.lineTo(tmpPoint[0],tmpPoint[1]),ctx.lineTo(lastChildPos[0],lastChildPos[1]);for(var i=1;i<childLen-1;i++){var point=childPoints[i];ctx.moveTo(point[0],point[1]),tmpPoint[forkDim]=point[forkDim],ctx.lineTo(tmpPoint[0],tmpPoint[1])}},TreePath}(Path.ZP),TreeView=function(_super){function TreeView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=TreeView.type,_this._mainGroup=new Group.Z,_this}return(0,tslib_es6.ZT)(TreeView,_super),TreeView.prototype.init=function(ecModel,api){this._controller=new RoamController.Z(api.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},TreeView.prototype.render=function(seriesModel,ecModel,api){var data=seriesModel.getData(),layoutInfo=seriesModel.layoutInfo,group=this._mainGroup;"radial"===seriesModel.get("layout")?(group.x=layoutInfo.x+layoutInfo.width/2,group.y=layoutInfo.y+layoutInfo.height/2):(group.x=layoutInfo.x,group.y=layoutInfo.y),this._updateViewCoordSys(seriesModel,api),this._updateController(seriesModel,ecModel,api);var oldData=this._data;data.diff(oldData).add((function(newIdx){TreeView_symbolNeedsDraw(data,newIdx)&&updateNode(data,newIdx,null,group,seriesModel)})).update((function(newIdx,oldIdx){var symbolEl=oldData.getItemGraphicEl(oldIdx);TreeView_symbolNeedsDraw(data,newIdx)?updateNode(data,newIdx,symbolEl,group,seriesModel):symbolEl&&removeNode(oldData,oldIdx,symbolEl,group,seriesModel)})).remove((function(oldIdx){var symbolEl=oldData.getItemGraphicEl(oldIdx);symbolEl&&removeNode(oldData,oldIdx,symbolEl,group,seriesModel)})).execute(),this._nodeScaleRatio=seriesModel.get("nodeScaleRatio"),this._updateNodeAndLinkScale(seriesModel),!0===seriesModel.get("expandAndCollapse")&&data.eachItemGraphicEl((function(el,dataIndex){el.off("click").on("click",(function(){api.dispatchAction({type:"treeExpandAndCollapse",seriesId:seriesModel.id,dataIndex})}))})),this._data=data},TreeView.prototype._updateViewCoordSys=function(seriesModel,api){var data=seriesModel.getData(),points=[];data.each((function(idx){var layout=data.getItemLayout(idx);!layout||isNaN(layout.x)||isNaN(layout.y)||points.push([+layout.x,+layout.y])}));var min=[],max=[];bbox.zk(points,min,max);var oldMin=this._min,oldMax=this._max;max[0]-min[0]==0&&(min[0]=oldMin?oldMin[0]:min[0]-1,max[0]=oldMax?oldMax[0]:max[0]+1),max[1]-min[1]==0&&(min[1]=oldMin?oldMin[1]:min[1]-1,max[1]=oldMax?oldMax[1]:max[1]+1);var viewCoordSys=seriesModel.coordinateSystem=new View.Z;viewCoordSys.zoomLimit=seriesModel.get("scaleLimit"),viewCoordSys.setBoundingRect(min[0],min[1],max[0]-min[0],max[1]-min[1]),viewCoordSys.setCenter(seriesModel.get("center"),api),viewCoordSys.setZoom(seriesModel.get("zoom")),this.group.attr({x:viewCoordSys.x,y:viewCoordSys.y,scaleX:viewCoordSys.scaleX,scaleY:viewCoordSys.scaleY}),this._min=min,this._max=max},TreeView.prototype._updateController=function(seriesModel,ecModel,api){var _this=this,controller=this._controller,controllerHost=this._controllerHost,group=this.group;controller.setPointerChecker((function(e,x,y){var rect=group.getBoundingRect();return rect.applyTransform(group.transform),rect.contain(x,y)&&!(0,cursorHelper.l)(e,api,seriesModel)})),controller.enable(seriesModel.get("roam")),controllerHost.zoomLimit=seriesModel.get("scaleLimit"),controllerHost.zoom=seriesModel.coordinateSystem.getZoom(),controller.off("pan").off("zoom").on("pan",(function(e){roamHelper.e(controllerHost,e.dx,e.dy),api.dispatchAction({seriesId:seriesModel.id,type:"treeRoam",dx:e.dx,dy:e.dy})})).on("zoom",(function(e){roamHelper.H(controllerHost,e.scale,e.originX,e.originY),api.dispatchAction({seriesId:seriesModel.id,type:"treeRoam",zoom:e.scale,originX:e.originX,originY:e.originY}),_this._updateNodeAndLinkScale(seriesModel),api.updateLabelLayout()}))},TreeView.prototype._updateNodeAndLinkScale=function(seriesModel){var data=seriesModel.getData(),nodeScale=this._getNodeGlobalScale(seriesModel);data.eachItemGraphicEl((function(el,idx){el.setSymbolScale(nodeScale)}))},TreeView.prototype._getNodeGlobalScale=function(seriesModel){var coordSys=seriesModel.coordinateSystem;if("view"!==coordSys.type)return 1;var nodeScaleRatio=this._nodeScaleRatio,groupZoom=coordSys.scaleX||1;return((coordSys.getZoom()-1)*nodeScaleRatio+1)/groupZoom},TreeView.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},TreeView.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},TreeView.type="tree",TreeView}(Chart.Z);function TreeView_symbolNeedsDraw(data,dataIndex){var layout=data.getItemLayout(dataIndex);return layout&&!isNaN(layout.x)&&!isNaN(layout.y)}function updateNode(data,dataIndex,symbolEl,group,seriesModel){var isInit=!symbolEl,node=data.tree.getNodeByDataIndex(dataIndex),itemModel=node.getModel(),visualColor=node.getVisual("style").fill,symbolInnerColor=!1===node.isExpand&&0!==node.children.length?visualColor:"#fff",virtualRoot=data.tree.root,source=node.parentNode===virtualRoot?node:node.parentNode||node,sourceSymbolEl=data.getItemGraphicEl(source.dataIndex),sourceLayout=source.getLayout(),sourceOldLayout=sourceSymbolEl?{x:sourceSymbolEl.__oldX,y:sourceSymbolEl.__oldY,rawX:sourceSymbolEl.__radialOldRawX,rawY:sourceSymbolEl.__radialOldRawY}:sourceLayout,targetLayout=node.getLayout();isInit?((symbolEl=new helper_Symbol(data,dataIndex,null,{symbolInnerColor,useNameLabel:!0})).x=sourceOldLayout.x,symbolEl.y=sourceOldLayout.y):symbolEl.updateData(data,dataIndex,null,{symbolInnerColor,useNameLabel:!0}),symbolEl.__radialOldRawX=symbolEl.__radialRawX,symbolEl.__radialOldRawY=symbolEl.__radialRawY,symbolEl.__radialRawX=targetLayout.rawX,symbolEl.__radialRawY=targetLayout.rawY,group.add(symbolEl),data.setItemGraphicEl(dataIndex,symbolEl),symbolEl.__oldX=symbolEl.x,symbolEl.__oldY=symbolEl.y,basicTransition.D(symbolEl,{x:targetLayout.x,y:targetLayout.y},seriesModel);var symbolPath=symbolEl.getSymbolPath();if("radial"===seriesModel.get("layout")){var realRoot=virtualRoot.children[0],rootLayout=realRoot.getLayout(),length_1=realRoot.children.length,rad=void 0,isLeft=void 0;if(targetLayout.x===rootLayout.x&&!0===node.isExpand&&realRoot.children.length){var center={x:(realRoot.children[0].getLayout().x+realRoot.children[length_1-1].getLayout().x)/2,y:(realRoot.children[0].getLayout().y+realRoot.children[length_1-1].getLayout().y)/2};(rad=Math.atan2(center.y-rootLayout.y,center.x-rootLayout.x))<0&&(rad=2*Math.PI+rad),(isLeft=center.x<rootLayout.x)&&(rad-=Math.PI)}else(rad=Math.atan2(targetLayout.y-rootLayout.y,targetLayout.x-rootLayout.x))<0&&(rad=2*Math.PI+rad),0===node.children.length||0!==node.children.length&&!1===node.isExpand?(isLeft=targetLayout.x<rootLayout.x)&&(rad-=Math.PI):(isLeft=targetLayout.x>rootLayout.x)||(rad-=Math.PI);var textPosition=isLeft?"left":"right",normalLabelModel=itemModel.getModel("label"),rotate=normalLabelModel.get("rotate"),labelRotateRadian=rotate*(Math.PI/180),textContent=symbolPath.getTextContent();textContent&&(symbolPath.setTextConfig({position:normalLabelModel.get("position")||textPosition,rotation:null==rotate?-rad:labelRotateRadian,origin:"center"}),textContent.setStyle("verticalAlign","middle"))}var focus=itemModel.get(["emphasis","focus"]),focusDataIndices="relative"===focus?util.concatArray(node.getAncestorsIndices(),node.getDescendantIndices()):"ancestor"===focus?node.getAncestorsIndices():"descendant"===focus?node.getDescendantIndices():null;focusDataIndices&&((0,innerStore.A)(symbolEl).focus=focusDataIndices),function drawEdge(seriesModel,node,virtualRoot,symbolEl,sourceOldLayout,sourceLayout,targetLayout,group){var itemModel=node.getModel(),edgeShape=seriesModel.get("edgeShape"),layout=seriesModel.get("layout"),orient=seriesModel.getOrient(),curvature=seriesModel.get(["lineStyle","curveness"]),edgeForkPosition=seriesModel.get("edgeForkPosition"),lineStyle=itemModel.getModel("lineStyle").getLineStyle(),edge=symbolEl.__edge;if("curve"===edgeShape)node.parentNode&&node.parentNode!==virtualRoot&&(edge||(edge=symbolEl.__edge=new BezierCurve.Z({shape:getEdgeShape(layout,orient,curvature,sourceOldLayout,sourceOldLayout)})),basicTransition.D(edge,{shape:getEdgeShape(layout,orient,curvature,sourceLayout,targetLayout)},seriesModel));else if("polyline"===edgeShape)if("orthogonal"===layout){if(node!==virtualRoot&&node.children&&0!==node.children.length&&!0===node.isExpand){for(var children=node.children,childPoints=[],i=0;i<children.length;i++){var childLayout=children[i].getLayout();childPoints.push([childLayout.x,childLayout.y])}edge||(edge=symbolEl.__edge=new TreePath({shape:{parentPoint:[targetLayout.x,targetLayout.y],childPoints:[[targetLayout.x,targetLayout.y]],orient,forkPosition:edgeForkPosition}})),basicTransition.D(edge,{shape:{parentPoint:[targetLayout.x,targetLayout.y],childPoints}},seriesModel)}}else 0;edge&&("polyline"!==edgeShape||node.isExpand)&&(edge.useStyle(util.defaults({strokeNoScale:!0,fill:null},lineStyle)),(0,states.WO)(edge,itemModel,"lineStyle"),(0,states.MA)(edge),group.add(edge))}(seriesModel,node,virtualRoot,symbolEl,sourceOldLayout,sourceLayout,targetLayout,group),symbolEl.__edge&&(symbolEl.onHoverStateChange=function(toState){if("blur"!==toState){var parentEl=node.parentNode&&data.getItemGraphicEl(node.parentNode.dataIndex);parentEl&&parentEl.hoverState===states.CX||(0,states.Gl)(symbolEl.__edge,toState)}})}function removeNodeEdge(node,data,group,seriesModel,removeAnimationOpt){var _a=getSourceNode(data.tree.root,node),source=_a.source,sourceLayout=_a.sourceLayout,symbolEl=data.getItemGraphicEl(node.dataIndex);if(symbolEl){var sourceEdge=data.getItemGraphicEl(source.dataIndex).__edge,edge=symbolEl.__edge||(!1===source.isExpand||1===source.children.length?sourceEdge:void 0),edgeShape=seriesModel.get("edgeShape"),layoutOpt=seriesModel.get("layout"),orient=seriesModel.get("orient"),curvature=seriesModel.get(["lineStyle","curveness"]);edge&&("curve"===edgeShape?basicTransition.bX(edge,{shape:getEdgeShape(layoutOpt,orient,curvature,sourceLayout,sourceLayout),style:{opacity:0}},seriesModel,{cb:function(){group.remove(edge)},removeOpt:removeAnimationOpt}):"polyline"===edgeShape&&"orthogonal"===seriesModel.get("layout")&&basicTransition.bX(edge,{shape:{parentPoint:[sourceLayout.x,sourceLayout.y],childPoints:[[sourceLayout.x,sourceLayout.y]]},style:{opacity:0}},seriesModel,{cb:function(){group.remove(edge)},removeOpt:removeAnimationOpt}))}}function getSourceNode(virtualRoot,node){for(var sourceLayout,source=node.parentNode===virtualRoot?node:node.parentNode||node;null==(sourceLayout=source.getLayout());)source=source.parentNode===virtualRoot?source:source.parentNode||source;return{source,sourceLayout}}function removeNode(data,dataIndex,symbolEl,group,seriesModel){var node=data.tree.getNodeByDataIndex(dataIndex),sourceLayout=getSourceNode(data.tree.root,node).sourceLayout,removeAnimationOpt={duration:seriesModel.get("animationDurationUpdate"),easing:seriesModel.get("animationEasingUpdate")};basicTransition.bX(symbolEl,{x:sourceLayout.x+1,y:sourceLayout.y+1},seriesModel,{cb:function(){group.remove(symbolEl),data.setItemGraphicEl(dataIndex,null)},removeOpt:removeAnimationOpt}),symbolEl.fadeOut(null,data.hostModel,{fadeLabel:!0,animation:removeAnimationOpt}),node.children.forEach((function(childNode){removeNodeEdge(childNode,data,group,seriesModel,removeAnimationOpt)})),removeNodeEdge(node,data,group,seriesModel,removeAnimationOpt)}function getEdgeShape(layoutOpt,orient,curvature,sourceLayout,targetLayout){var cpx1,cpy1,cpx2,cpy2,x1,x2,y1,y2;if("radial"===layoutOpt){x1=sourceLayout.rawX,y1=sourceLayout.rawY,x2=targetLayout.rawX,y2=targetLayout.rawY;var radialCoor1=radialCoordinate(x1,y1),radialCoor2=radialCoordinate(x1,y1+(y2-y1)*curvature),radialCoor3=radialCoordinate(x2,y2+(y1-y2)*curvature),radialCoor4=radialCoordinate(x2,y2);return{x1:radialCoor1.x||0,y1:radialCoor1.y||0,x2:radialCoor4.x||0,y2:radialCoor4.y||0,cpx1:radialCoor2.x||0,cpy1:radialCoor2.y||0,cpx2:radialCoor3.x||0,cpy2:radialCoor3.y||0}}return x1=sourceLayout.x,y1=sourceLayout.y,x2=targetLayout.x,y2=targetLayout.y,"LR"!==orient&&"RL"!==orient||(cpx1=x1+(x2-x1)*curvature,cpy1=y1,cpx2=x2+(x1-x2)*curvature,cpy2=y2),"TB"!==orient&&"BT"!==orient||(cpx1=x1,cpy1=y1+(y2-y1)*curvature,cpx2=x2,cpy2=y2+(y1-y2)*curvature),{x1,y1,x2,y2,cpx1,cpy1,cpx2,cpy2}}const tree_TreeView=TreeView;var Tree=__webpack_require__("./node_modules/echarts/lib/data/Tree.js"),treeHelper=__webpack_require__("./node_modules/echarts/lib/chart/helper/treeHelper.js"),TreeSeriesModel=function(_super){function TreeSeriesModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.hasSymbolVisual=!0,_this.ignoreStyleOnData=!0,_this}return(0,tslib_es6.ZT)(TreeSeriesModel,_super),TreeSeriesModel.prototype.getInitialData=function(option){var root={name:option.name,children:option.data},leaves=option.leaves||{},leavesModel=new Model.Z(leaves,this,this.ecModel),tree=Tree.Z.createTree(root,this,(function beforeLink(nodeData){nodeData.wrapMethod("getItemModel",(function(model,idx){var node=tree.getNodeByDataIndex(idx);return node&&node.children.length&&node.isExpand||(model.parentModel=leavesModel),model}))}));var treeDepth=0;tree.eachNode("preorder",(function(node){node.depth>treeDepth&&(treeDepth=node.depth)}));var expandTreeDepth=option.expandAndCollapse&&option.initialTreeDepth>=0?option.initialTreeDepth:treeDepth;return tree.root.eachNode("preorder",(function(node){var item=node.hostTree.data.getRawDataItem(node.dataIndex);node.isExpand=item&&null!=item.collapsed?!item.collapsed:node.depth<=expandTreeDepth})),tree.data},TreeSeriesModel.prototype.getOrient=function(){var orient=this.get("orient");return"horizontal"===orient?orient="LR":"vertical"===orient&&(orient="TB"),orient},TreeSeriesModel.prototype.setZoom=function(zoom){this.option.zoom=zoom},TreeSeriesModel.prototype.setCenter=function(center){this.option.center=center},TreeSeriesModel.prototype.formatTooltip=function(dataIndex,multipleSeries,dataType){for(var tree=this.getData().tree,realRoot=tree.root.children[0],node=tree.getNodeByDataIndex(dataIndex),value=node.getValue(),name=node.name;node&&node!==realRoot;)name=node.parentNode.name+"."+name,node=node.parentNode;return(0,tooltipMarkup.TX)("nameValue",{name,value,noValue:isNaN(value)||null==value})},TreeSeriesModel.prototype.getDataParams=function(dataIndex){var params=_super.prototype.getDataParams.apply(this,arguments),node=this.getData().tree.getNodeByDataIndex(dataIndex);return params.treeAncestors=(0,treeHelper.n3)(node,this),params.collapsed=!node.isExpand,params},TreeSeriesModel.type="series.tree",TreeSeriesModel.layoutMode="box",TreeSeriesModel.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},TreeSeriesModel}(Series.Z);const TreeSeries=TreeSeriesModel;function eachBefore(root,callback){for(var node,nodes=[root];node=nodes.pop();)if(callback(node),node.isExpand){var children=node.children;if(children.length)for(var i=children.length-1;i>=0;i--)nodes.push(children[i])}}function treeLayout(ecModel,api){ecModel.eachSeriesByType("tree",(function(seriesModel){!function commonLayout(seriesModel,api){var layoutInfo=layoutHelper_getViewRect(seriesModel,api);seriesModel.layoutInfo=layoutInfo;var layout=seriesModel.get("layout"),width=0,height=0,separation=null;"radial"===layout?(width=2*Math.PI,height=Math.min(layoutInfo.height,layoutInfo.width)/2,separation=layoutHelper_separation((function(node1,node2){return(node1.parentNode===node2.parentNode?1:2)/node1.depth}))):(width=layoutInfo.width,height=layoutInfo.height,separation=layoutHelper_separation());var virtualRoot=seriesModel.getData().tree.root,realRoot=virtualRoot.children[0];if(realRoot){!function init(inRoot){var root=inRoot;root.hierNode={defaultAncestor:null,ancestor:root,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var node,children,nodes=[root];node=nodes.pop();)if(children=node.children,node.isExpand&&children.length)for(var i=children.length-1;i>=0;i--){var child=children[i];child.hierNode={defaultAncestor:null,ancestor:child,prelim:0,modifier:0,change:0,shift:0,i,thread:null},nodes.push(child)}}(virtualRoot),function eachAfter(root,callback,separation){for(var node,nodes=[root],next=[];node=nodes.pop();)if(next.push(node),node.isExpand){var children=node.children;if(children.length)for(var i=0;i<children.length;i++)nodes.push(children[i])}for(;node=next.pop();)callback(node,separation)}(realRoot,firstWalk,separation),virtualRoot.hierNode.modifier=-realRoot.hierNode.prelim,eachBefore(realRoot,secondWalk);var left_1=realRoot,right_1=realRoot,bottom_1=realRoot;eachBefore(realRoot,(function(node){var x=node.getLayout().x;x<left_1.getLayout().x&&(left_1=node),x>right_1.getLayout().x&&(right_1=node),node.depth>bottom_1.depth&&(bottom_1=node)}));var delta=left_1===right_1?1:separation(left_1,right_1)/2,tx_1=delta-left_1.getLayout().x,kx_1=0,ky_1=0,coorX_1=0,coorY_1=0;if("radial"===layout)kx_1=width/(right_1.getLayout().x+delta+tx_1),ky_1=height/(bottom_1.depth-1||1),eachBefore(realRoot,(function(node){coorX_1=(node.getLayout().x+tx_1)*kx_1,coorY_1=(node.depth-1)*ky_1;var finalCoor=radialCoordinate(coorX_1,coorY_1);node.setLayout({x:finalCoor.x,y:finalCoor.y,rawX:coorX_1,rawY:coorY_1},!0)}));else{var orient_1=seriesModel.getOrient();"RL"===orient_1||"LR"===orient_1?(ky_1=height/(right_1.getLayout().x+delta+tx_1),kx_1=width/(bottom_1.depth-1||1),eachBefore(realRoot,(function(node){coorY_1=(node.getLayout().x+tx_1)*ky_1,coorX_1="LR"===orient_1?(node.depth-1)*kx_1:width-(node.depth-1)*kx_1,node.setLayout({x:coorX_1,y:coorY_1},!0)}))):"TB"!==orient_1&&"BT"!==orient_1||(kx_1=width/(right_1.getLayout().x+delta+tx_1),ky_1=height/(bottom_1.depth-1||1),eachBefore(realRoot,(function(node){coorX_1=(node.getLayout().x+tx_1)*kx_1,coorY_1="TB"===orient_1?(node.depth-1)*ky_1:height-(node.depth-1)*ky_1,node.setLayout({x:coorX_1,y:coorY_1},!0)})))}}}(seriesModel,api)}))}function treeVisual(ecModel){ecModel.eachSeriesByType("tree",(function(seriesModel){var data=seriesModel.getData();data.tree.eachNode((function(node){var style=node.getModel().getModel("itemStyle").getItemStyle(),existsStyle=data.ensureUniqueItemVisual(node.dataIndex,"style");(0,util.extend)(existsStyle,style)}))}))}var action_roamHelper=__webpack_require__("./node_modules/echarts/lib/action/roamHelper.js");var treemap_install=__webpack_require__("./node_modules/echarts/lib/chart/treemap/install.js");function categoryFilter(ecModel){var legendModels=ecModel.findComponents({mainType:"legend"});legendModels&&legendModels.length&&ecModel.eachSeriesByType("graph",(function(graphSeries){var categoriesData=graphSeries.getCategoriesData(),data=graphSeries.getGraph().data,categoryNames=categoriesData.mapArray(categoriesData.getName);data.filterSelf((function(idx){var category=data.getItemModel(idx).getShallow("category");if(null!=category){(0,util.isNumber)(category)&&(category=categoryNames[category]);for(var i=0;i<legendModels.length;i++)if(!legendModels[i].isSelected(category))return!1}return!0}))}))}function categoryVisual(ecModel){var paletteScope={};ecModel.eachSeriesByType("graph",(function(seriesModel){var categoriesData=seriesModel.getCategoriesData(),data=seriesModel.getData(),categoryNameIdxMap={};categoriesData.each((function(idx){var name=categoriesData.getName(idx);categoryNameIdxMap["ec-"+name]=idx;var itemModel=categoriesData.getItemModel(idx),style=itemModel.getModel("itemStyle").getItemStyle();style.fill||(style.fill=seriesModel.getColorFromPalette(name,paletteScope)),categoriesData.setItemVisual(idx,"style",style);for(var symbolVisualList=["symbol","symbolSize","symbolKeepAspect"],i=0;i<symbolVisualList.length;i++){var symbolVisual=itemModel.getShallow(symbolVisualList[i],!0);null!=symbolVisual&&categoriesData.setItemVisual(idx,symbolVisualList[i],symbolVisual)}})),categoriesData.count()&&data.each((function(idx){var categoryIdx=data.getItemModel(idx).getShallow("category");if(null!=categoryIdx){(0,util.isString)(categoryIdx)&&(categoryIdx=categoryNameIdxMap["ec-"+categoryIdx]);var categoryStyle=categoriesData.getItemVisual(categoryIdx,"style"),style=data.ensureUniqueItemVisual(idx,"style");(0,util.extend)(style,categoryStyle);for(var visualList=["symbol","symbolSize","symbolKeepAspect"],i=0;i<visualList.length;i++)data.setItemVisual(idx,visualList[i],categoriesData.getItemVisual(categoryIdx,visualList[i]))}}))}))}function normalize(a){return a instanceof Array||(a=[a,a]),a}function graphEdgeVisual(ecModel){ecModel.eachSeriesByType("graph",(function(seriesModel){var graph=seriesModel.getGraph(),edgeData=seriesModel.getEdgeData(),symbolType=normalize(seriesModel.get("edgeSymbol")),symbolSize=normalize(seriesModel.get("edgeSymbolSize"));edgeData.setVisual("fromSymbol",symbolType&&symbolType[0]),edgeData.setVisual("toSymbol",symbolType&&symbolType[1]),edgeData.setVisual("fromSymbolSize",symbolSize&&symbolSize[0]),edgeData.setVisual("toSymbolSize",symbolSize&&symbolSize[1]),edgeData.setVisual("style",seriesModel.getModel("lineStyle").getLineStyle()),edgeData.each((function(idx){var itemModel=edgeData.getItemModel(idx),edge=graph.getEdgeByIndex(idx),symbolType=normalize(itemModel.getShallow("symbol",!0)),symbolSize=normalize(itemModel.getShallow("symbolSize",!0)),style=itemModel.getModel("lineStyle").getLineStyle(),existsStyle=edgeData.ensureUniqueItemVisual(idx,"style");switch((0,util.extend)(existsStyle,style),existsStyle.stroke){case"source":var nodeStyle=edge.node1.getVisual("style");existsStyle.stroke=nodeStyle&&nodeStyle.fill;break;case"target":nodeStyle=edge.node2.getVisual("style");existsStyle.stroke=nodeStyle&&nodeStyle.fill}symbolType[0]&&edge.setVisual("fromSymbol",symbolType[0]),symbolType[1]&&edge.setVisual("toSymbol",symbolType[1]),symbolSize[0]&&edge.setVisual("fromSymbolSize",symbolSize[0]),symbolSize[1]&&edge.setVisual("toSymbolSize",symbolSize[1])}))}))}var getAutoCurvenessParams=function(seriesModel){return seriesModel.get("autoCurveness")||null},createCurveness=function(seriesModel,appendLength){var autoCurvenessParmas=getAutoCurvenessParams(seriesModel),length=20,curvenessList=[];if(util.isNumber(autoCurvenessParmas))length=autoCurvenessParmas;else if(util.isArray(autoCurvenessParmas))return void(seriesModel.__curvenessList=autoCurvenessParmas);appendLength>length&&(length=appendLength);var len=length%2?length+2:length+3;curvenessList=[];for(var i=0;i<len;i++)curvenessList.push((i%2?i+1:i)/10*(i%2?-1:1));seriesModel.__curvenessList=curvenessList},getKeyOfEdges=function(n1,n2,seriesModel){var source=[n1.id,n1.dataIndex].join("."),target=[n2.id,n2.dataIndex].join(".");return[seriesModel.uid,source,target].join("--\x3e")},getOppositeKey=function(key){var keys=key.split("--\x3e");return[keys[0],keys[2],keys[1]].join("--\x3e")},getEdgeFromMap=function(edge,seriesModel){var key=getKeyOfEdges(edge.node1,edge.node2,seriesModel);return seriesModel.__edgeMap[key]},getTotalLengthBetweenNodes=function(edge,seriesModel){return getEdgeMapLengthWithKey(getKeyOfEdges(edge.node1,edge.node2,seriesModel),seriesModel)+getEdgeMapLengthWithKey(getKeyOfEdges(edge.node2,edge.node1,seriesModel),seriesModel)},getEdgeMapLengthWithKey=function(key,seriesModel){var edgeMap=seriesModel.__edgeMap;return edgeMap[key]?edgeMap[key].length:0};function getCurvenessForEdge(edge,seriesModel,index,needReverse){var autoCurvenessParams=getAutoCurvenessParams(seriesModel),isArrayParam=util.isArray(autoCurvenessParams);if(!autoCurvenessParams)return null;var edgeArray=getEdgeFromMap(edge,seriesModel);if(!edgeArray)return null;for(var edgeIndex=-1,i=0;i<edgeArray.length;i++)if(edgeArray[i]===index){edgeIndex=i;break}var totalLen=getTotalLengthBetweenNodes(edge,seriesModel);createCurveness(seriesModel,totalLen),edge.lineStyle=edge.lineStyle||{};var curKey=getKeyOfEdges(edge.node1,edge.node2,seriesModel),curvenessList=seriesModel.__curvenessList,parityCorrection=isArrayParam||totalLen%2?0:1;if(edgeArray.isForward)return curvenessList[parityCorrection+edgeIndex];var oppositeKey=getOppositeKey(curKey),len=getEdgeMapLengthWithKey(oppositeKey,seriesModel),resValue=curvenessList[edgeIndex+len+parityCorrection];return needReverse?isArrayParam?autoCurvenessParams&&0===autoCurvenessParams[0]?(len+parityCorrection)%2?resValue:-resValue:((len%2?0:1)+parityCorrection)%2?resValue:-resValue:(len+parityCorrection)%2?resValue:-resValue:curvenessList[edgeIndex+len+parityCorrection]}function simpleLayout(seriesModel){var coordSys=seriesModel.coordinateSystem;if(!coordSys||"view"===coordSys.type){var graph=seriesModel.getGraph();graph.eachNode((function(node){var model=node.getModel();node.setLayout([+model.get("x"),+model.get("y")])})),simpleLayoutEdge(graph,seriesModel)}}function simpleLayoutEdge(graph,seriesModel){graph.eachEdge((function(edge,index){var curveness=util.retrieve3(edge.getModel().get(["lineStyle","curveness"]),-getCurvenessForEdge(edge,seriesModel,index,!0),0),p1=vector.clone(edge.node1.getLayout()),p2=vector.clone(edge.node2.getLayout()),points=[p1,p2];+curveness&&points.push([(p1[0]+p2[0])/2-(p1[1]-p2[1])*curveness,(p1[1]+p2[1])/2-(p2[0]-p1[0])*curveness]),edge.setLayout(points)}))}function graphSimpleLayout(ecModel,api){ecModel.eachSeriesByType("graph",(function(seriesModel){var layout=seriesModel.get("layout"),coordSys=seriesModel.coordinateSystem;if(coordSys&&"view"!==coordSys.type){var data_1=seriesModel.getData(),dimensions_1=[];(0,util.each)(coordSys.dimensions,(function(coordDim){dimensions_1=dimensions_1.concat(data_1.mapDimensionsAll(coordDim))}));for(var dataIndex=0;dataIndex<data_1.count();dataIndex++){for(var value=[],hasValue=!1,i=0;i<dimensions_1.length;i++){var val=data_1.get(dimensions_1[i],dataIndex);isNaN(val)||(hasValue=!0),value.push(val)}hasValue?data_1.setItemLayout(dataIndex,coordSys.dataToPoint(value)):data_1.setItemLayout(dataIndex,[NaN,NaN])}simpleLayoutEdge(data_1.graph,seriesModel)}else layout&&"none"!==layout||simpleLayout(seriesModel)}))}function getNodeGlobalScale(seriesModel){var coordSys=seriesModel.coordinateSystem;if("view"!==coordSys.type)return 1;var nodeScaleRatio=seriesModel.option.nodeScaleRatio,groupZoom=coordSys.scaleX;return((coordSys.getZoom()-1)*nodeScaleRatio+1)/groupZoom}function getSymbolSize(node){var symbolSize=node.getVisual("symbolSize");return symbolSize instanceof Array&&(symbolSize=(symbolSize[0]+symbolSize[1])/2),+symbolSize}var circularLayoutHelper_PI=Math.PI,_symbolRadiansHalf=[];function circularLayout(seriesModel,basedOn,draggingNode,pointer){var coordSys=seriesModel.coordinateSystem;if(!coordSys||"view"===coordSys.type){var rect=coordSys.getBoundingRect(),nodeData=seriesModel.getData(),graph=nodeData.graph,cx=rect.width/2+rect.x,cy=rect.height/2+rect.y,r=Math.min(rect.width,rect.height)/2,count=nodeData.count();if(nodeData.setLayout({cx,cy}),count){if(draggingNode){var _a=coordSys.pointToData(pointer),tempX=_a[0],tempY=_a[1],v=[tempX-cx,tempY-cy];vector.normalize(v,v),vector.scale(v,v,r),draggingNode.setLayout([cx+v[0],cy+v[1]],!0),rotateNodeLabel(draggingNode,seriesModel.get(["circular","rotateLabel"]),cx,cy)}_layoutNodesBasedOn[basedOn](seriesModel,graph,nodeData,r,cx,cy,count),graph.eachEdge((function(edge,index){var cp1,curveness=util.retrieve3(edge.getModel().get(["lineStyle","curveness"]),getCurvenessForEdge(edge,seriesModel,index),0),p1=vector.clone(edge.node1.getLayout()),p2=vector.clone(edge.node2.getLayout()),x12=(p1[0]+p2[0])/2,y12=(p1[1]+p2[1])/2;+curveness&&(cp1=[cx*(curveness*=3)+x12*(1-curveness),cy*curveness+y12*(1-curveness)]),edge.setLayout([p1,p2,cp1])}))}}}var _layoutNodesBasedOn={value:function(seriesModel,graph,nodeData,r,cx,cy,count){var angle=0,sum=nodeData.getSum("value"),unitAngle=2*Math.PI/(sum||count);graph.eachNode((function(node){var value=node.getValue("value"),radianHalf=unitAngle*(sum?value:1)/2;angle+=radianHalf,node.setLayout([r*Math.cos(angle)+cx,r*Math.sin(angle)+cy]),angle+=radianHalf}))},symbolSize:function(seriesModel,graph,nodeData,r,cx,cy,count){var sumRadian=0;_symbolRadiansHalf.length=count;var nodeScale=getNodeGlobalScale(seriesModel);graph.eachNode((function(node){var symbolSize=getSymbolSize(node);isNaN(symbolSize)&&(symbolSize=2),symbolSize<0&&(symbolSize=0),symbolSize*=nodeScale;var symbolRadianHalf=Math.asin(symbolSize/2/r);isNaN(symbolRadianHalf)&&(symbolRadianHalf=circularLayoutHelper_PI/2),_symbolRadiansHalf[node.dataIndex]=symbolRadianHalf,sumRadian+=2*symbolRadianHalf}));var halfRemainRadian=(2*circularLayoutHelper_PI-sumRadian)/count/2,angle=0;graph.eachNode((function(node){var radianHalf=halfRemainRadian+_symbolRadiansHalf[node.dataIndex];angle+=radianHalf,(!node.getLayout()||!node.getLayout().fixed)&&node.setLayout([r*Math.cos(angle)+cx,r*Math.sin(angle)+cy]),angle+=radianHalf}))}};function rotateNodeLabel(node,circularRotateLabel,cx,cy){var el=node.getGraphicEl();if(el){var labelRotate=node.getModel().get(["label","rotate"])||0,symbolPath=el.getSymbolPath();if(circularRotateLabel){var pos=node.getLayout(),rad=Math.atan2(pos[1]-cy,pos[0]-cx);rad<0&&(rad=2*Math.PI+rad);var isLeft=pos[0]<cx;isLeft&&(rad-=Math.PI);var textPosition=isLeft?"left":"right";symbolPath.setTextConfig({rotation:-rad,position:textPosition,origin:"center"});var emphasisState=symbolPath.ensureState("emphasis");util.extend(emphasisState.textConfig||(emphasisState.textConfig={}),{position:textPosition})}else symbolPath.setTextConfig({rotation:labelRotate*=Math.PI/180})}}function graphCircularLayout(ecModel){ecModel.eachSeriesByType("graph",(function(seriesModel){"circular"===seriesModel.get("layout")&&circularLayout(seriesModel,"symbolSize")}))}var scaleAndAdd=vector.scaleAndAdd;function graphForceLayout(ecModel){ecModel.eachSeriesByType("graph",(function(graphSeries){var coordSys=graphSeries.coordinateSystem;if(!coordSys||"view"===coordSys.type)if("force"===graphSeries.get("layout")){var preservedPoints_1=graphSeries.preservedPoints||{},graph_1=graphSeries.getGraph(),nodeData_1=graph_1.data,edgeData=graph_1.edgeData,forceModel=graphSeries.getModel("force"),initLayout=forceModel.get("initLayout");graphSeries.preservedPoints?nodeData_1.each((function(idx){var id=nodeData_1.getId(idx);nodeData_1.setItemLayout(idx,preservedPoints_1[id]||[NaN,NaN])})):initLayout&&"none"!==initLayout?"circular"===initLayout&&circularLayout(graphSeries,"value"):simpleLayout(graphSeries);var nodeDataExtent_1=nodeData_1.getDataExtent("value"),edgeDataExtent_1=edgeData.getDataExtent("value"),repulsion=forceModel.get("repulsion"),edgeLength=forceModel.get("edgeLength"),repulsionArr_1=util.isArray(repulsion)?repulsion:[repulsion,repulsion],edgeLengthArr_1=util.isArray(edgeLength)?edgeLength:[edgeLength,edgeLength];edgeLengthArr_1=[edgeLengthArr_1[1],edgeLengthArr_1[0]];var nodes_1=nodeData_1.mapArray("value",(function(value,idx){var point=nodeData_1.getItemLayout(idx),rep=(0,number.NU)(value,nodeDataExtent_1,repulsionArr_1);return isNaN(rep)&&(rep=(repulsionArr_1[0]+repulsionArr_1[1])/2),{w:rep,rep,fixed:nodeData_1.getItemModel(idx).get("fixed"),p:!point||isNaN(point[0])||isNaN(point[1])?null:point}})),edges=edgeData.mapArray("value",(function(value,idx){var edge=graph_1.getEdgeByIndex(idx),d=(0,number.NU)(value,edgeDataExtent_1,edgeLengthArr_1);isNaN(d)&&(d=(edgeLengthArr_1[0]+edgeLengthArr_1[1])/2);var edgeModel=edge.getModel(),curveness=util.retrieve3(edge.getModel().get(["lineStyle","curveness"]),-getCurvenessForEdge(edge,graphSeries,idx,!0),0);return{n1:nodes_1[edge.node1.dataIndex],n2:nodes_1[edge.node2.dataIndex],d,curveness,ignoreForceLayout:edgeModel.get("ignoreForceLayout")}})),rect=coordSys.getBoundingRect(),forceInstance=function forceLayout(inNodes,inEdges,opts){for(var nodes=inNodes,edges=inEdges,rect=opts.rect,width=rect.width,height=rect.height,center=[rect.x+width/2,rect.y+height/2],gravity=null==opts.gravity?.1:opts.gravity,i=0;i<nodes.length;i++){var n=nodes[i];n.p||(n.p=vector.create(width*(Math.random()-.5)+center[0],height*(Math.random()-.5)+center[1])),n.pp=vector.clone(n.p),n.edges=null}var beforeStepCallback,afterStepCallback,initialFriction=null==opts.friction?.6:opts.friction,friction=initialFriction;return{warmUp:function(){friction=.8*initialFriction},setFixed:function(idx){nodes[idx].fixed=!0},setUnfixed:function(idx){nodes[idx].fixed=!1},beforeStep:function(cb){beforeStepCallback=cb},afterStep:function(cb){afterStepCallback=cb},step:function(cb){beforeStepCallback&&beforeStepCallback(nodes,edges);for(var v12=[],nLen=nodes.length,i=0;i<edges.length;i++){var e=edges[i];if(!e.ignoreForceLayout){var n1=e.n1,n2=e.n2;vector.sub(v12,n2.p,n1.p);var d=vector.len(v12)-e.d,w=n2.w/(n1.w+n2.w);isNaN(w)&&(w=0),vector.normalize(v12,v12),!n1.fixed&&scaleAndAdd(n1.p,n1.p,v12,w*d*friction),!n2.fixed&&scaleAndAdd(n2.p,n2.p,v12,-(1-w)*d*friction)}}for(i=0;i<nLen;i++)(n=nodes[i]).fixed||(vector.sub(v12,center,n.p),scaleAndAdd(n.p,n.p,v12,gravity*friction));for(i=0;i<nLen;i++){n1=nodes[i];for(var j=i+1;j<nLen;j++){n2=nodes[j],vector.sub(v12,n2.p,n1.p),0===(d=vector.len(v12))&&(vector.set(v12,Math.random()-.5,Math.random()-.5),d=1);var repFact=(n1.rep+n2.rep)/d/d;!n1.fixed&&scaleAndAdd(n1.pp,n1.pp,v12,repFact),!n2.fixed&&scaleAndAdd(n2.pp,n2.pp,v12,-repFact)}}var v=[];for(i=0;i<nLen;i++){var n;(n=nodes[i]).fixed||(vector.sub(v,n.p,n.pp),scaleAndAdd(n.p,n.p,v,friction),vector.copy(n.pp,n.p))}var finished=(friction*=.992)<.01;afterStepCallback&&afterStepCallback(nodes,edges,finished),cb&&cb(finished)}}}(nodes_1,edges,{rect,gravity:forceModel.get("gravity"),friction:forceModel.get("friction")});forceInstance.beforeStep((function(nodes,edges){for(var i=0,l=nodes.length;i<l;i++)nodes[i].fixed&&vector.copy(nodes[i].p,graph_1.getNodeByIndex(i).getLayout())})),forceInstance.afterStep((function(nodes,edges,stopped){for(var i=0,l=nodes.length;i<l;i++)nodes[i].fixed||graph_1.getNodeByIndex(i).setLayout(nodes[i].p),preservedPoints_1[nodeData_1.getId(i)]=nodes[i].p;for(i=0,l=edges.length;i<l;i++){var e=edges[i],edge=graph_1.getEdgeByIndex(i),p1=e.n1.p,p2=e.n2.p,points=edge.getLayout();(points=points?points.slice():[])[0]=points[0]||[],points[1]=points[1]||[],vector.copy(points[0],p1),vector.copy(points[1],p2),+e.curveness&&(points[2]=[(p1[0]+p2[0])/2-(p1[1]-p2[1])*e.curveness,(p1[1]+p2[1])/2-(p2[0]-p1[0])*e.curveness]),edge.setLayout(points)}})),graphSeries.forceLayout=forceInstance,graphSeries.preservedPoints=preservedPoints_1,forceInstance.step()}else graphSeries.forceLayout=null}))}function createViewCoordSys(ecModel,api){var viewList=[];return ecModel.eachSeriesByType("graph",(function(seriesModel){var coordSysType=seriesModel.get("coordinateSystem");if(!coordSysType||"view"===coordSysType){var data_1=seriesModel.getData(),positions=data_1.mapArray((function(idx){var itemModel=data_1.getItemModel(idx);return[+itemModel.get("x"),+itemModel.get("y")]})),min=[],max=[];bbox.zk(positions,min,max),max[0]-min[0]==0&&(max[0]+=1,min[0]-=1),max[1]-min[1]==0&&(max[1]+=1,min[1]-=1);var aspect=(max[0]-min[0])/(max[1]-min[1]),viewRect=function createView_getViewRect(seriesModel,api,aspect){var option=(0,util.extend)(seriesModel.getBoxLayoutParams(),{aspect});return(0,layout.ME)(option,{width:api.getWidth(),height:api.getHeight()})}(seriesModel,api,aspect);isNaN(aspect)&&(min=[viewRect.x,viewRect.y],max=[viewRect.x+viewRect.width,viewRect.y+viewRect.height]);var bbWidth=max[0]-min[0],bbHeight=max[1]-min[1],viewWidth=viewRect.width,viewHeight=viewRect.height,viewCoordSys=seriesModel.coordinateSystem=new View.Z;viewCoordSys.zoomLimit=seriesModel.get("scaleLimit"),viewCoordSys.setBoundingRect(min[0],min[1],bbWidth,bbHeight),viewCoordSys.setViewRect(viewRect.x,viewRect.y,viewWidth,viewHeight),viewCoordSys.setCenter(seriesModel.get("center"),api),viewCoordSys.setZoom(seriesModel.get("zoom")),viewList.push(viewCoordSys)}})),viewList}var straightLineProto=Line.Z.prototype,bezierCurveProto=BezierCurve.Z.prototype,StraightLineShape=function StraightLineShape(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1};!function(_super){function CurveShape(){return null!==_super&&_super.apply(this,arguments)||this}(0,tslib_es6.ZT)(CurveShape,_super)}(StraightLineShape);function isStraightLine(shape){return isNaN(+shape.cpx1)||isNaN(+shape.cpy1)}const LinePath=function(_super){function ECLinePath(opts){var _this=_super.call(this,opts)||this;return _this.type="ec-line",_this}return(0,tslib_es6.ZT)(ECLinePath,_super),ECLinePath.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},ECLinePath.prototype.getDefaultShape=function(){return new StraightLineShape},ECLinePath.prototype.buildPath=function(ctx,shape){isStraightLine(shape)?straightLineProto.buildPath.call(this,ctx,shape):bezierCurveProto.buildPath.call(this,ctx,shape)},ECLinePath.prototype.pointAt=function(t){return isStraightLine(this.shape)?straightLineProto.pointAt.call(this,t):bezierCurveProto.pointAt.call(this,t)},ECLinePath.prototype.tangentAt=function(t){var shape=this.shape,p=isStraightLine(shape)?[shape.x2-shape.x1,shape.y2-shape.y1]:bezierCurveProto.tangentAt.call(this,t);return vector.normalize(p,p)},ECLinePath}(Path.ZP);var SYMBOL_CATEGORIES=["fromSymbol","toSymbol"];function makeSymbolTypeKey(symbolCategory){return"_"+symbolCategory+"Type"}function makeSymbolTypeValue(name,lineData,idx){var symbolType=lineData.getItemVisual(idx,name);if(!symbolType||"none"===symbolType)return symbolType;var symbolSize=lineData.getItemVisual(idx,name+"Size"),symbolRotate=lineData.getItemVisual(idx,name+"Rotate"),symbolOffset=lineData.getItemVisual(idx,name+"Offset"),symbolKeepAspect=lineData.getItemVisual(idx,name+"KeepAspect"),symbolSizeArr=util_symbol.zp(symbolSize);return symbolType+symbolSizeArr+util_symbol.Cq(symbolOffset||0,symbolSizeArr)+(symbolRotate||"")+(symbolKeepAspect||"")}function createSymbol(name,lineData,idx){var symbolType=lineData.getItemVisual(idx,name);if(symbolType&&"none"!==symbolType){var symbolSize=lineData.getItemVisual(idx,name+"Size"),symbolRotate=lineData.getItemVisual(idx,name+"Rotate"),symbolOffset=lineData.getItemVisual(idx,name+"Offset"),symbolKeepAspect=lineData.getItemVisual(idx,name+"KeepAspect"),symbolSizeArr=util_symbol.zp(symbolSize),symbolOffsetArr=util_symbol.Cq(symbolOffset||0,symbolSizeArr),symbolPath=util_symbol.th(symbolType,-symbolSizeArr[0]/2+symbolOffsetArr[0],-symbolSizeArr[1]/2+symbolOffsetArr[1],symbolSizeArr[0],symbolSizeArr[1],null,symbolKeepAspect);return symbolPath.__specifiedRotation=null==symbolRotate||isNaN(symbolRotate)?void 0:+symbolRotate*Math.PI/180||0,symbolPath.name=name,symbolPath}}function setLinePoints(targetShape,points){targetShape.x1=points[0][0],targetShape.y1=points[0][1],targetShape.x2=points[1][0],targetShape.y2=points[1][1],targetShape.percent=1;var cp1=points[2];cp1?(targetShape.cpx1=cp1[0],targetShape.cpy1=cp1[1]):(targetShape.cpx1=NaN,targetShape.cpy1=NaN)}var Line_Line=function(_super){function Line(lineData,idx,seriesScope){var _this=_super.call(this)||this;return _this._createLine(lineData,idx,seriesScope),_this}return(0,tslib_es6.ZT)(Line,_super),Line.prototype._createLine=function(lineData,idx,seriesScope){var seriesModel=lineData.hostModel,line=function createLine(points){var line=new LinePath({name:"line",subPixelOptimize:!0});return setLinePoints(line.shape,points),line}(lineData.getItemLayout(idx));line.shape.percent=0,basicTransition.KZ(line,{shape:{percent:1}},seriesModel,idx),this.add(line),(0,util.each)(SYMBOL_CATEGORIES,(function(symbolCategory){var symbol=createSymbol(symbolCategory,lineData,idx);this.add(symbol),this[makeSymbolTypeKey(symbolCategory)]=makeSymbolTypeValue(symbolCategory,lineData,idx)}),this),this._updateCommonStl(lineData,idx,seriesScope)},Line.prototype.updateData=function(lineData,idx,seriesScope){var seriesModel=lineData.hostModel,line=this.childOfName("line"),linePoints=lineData.getItemLayout(idx),target={shape:{}};setLinePoints(target.shape,linePoints),basicTransition.D(line,target,seriesModel,idx),(0,util.each)(SYMBOL_CATEGORIES,(function(symbolCategory){var symbolType=makeSymbolTypeValue(symbolCategory,lineData,idx),key=makeSymbolTypeKey(symbolCategory);if(this[key]!==symbolType){this.remove(this.childOfName(symbolCategory));var symbol=createSymbol(symbolCategory,lineData,idx);this.add(symbol)}this[key]=symbolType}),this),this._updateCommonStl(lineData,idx,seriesScope)},Line.prototype.getLinePath=function(){return this.childAt(0)},Line.prototype._updateCommonStl=function(lineData,idx,seriesScope){var seriesModel=lineData.hostModel,line=this.childOfName("line"),emphasisLineStyle=seriesScope&&seriesScope.emphasisLineStyle,blurLineStyle=seriesScope&&seriesScope.blurLineStyle,selectLineStyle=seriesScope&&seriesScope.selectLineStyle,labelStatesModels=seriesScope&&seriesScope.labelStatesModels,emphasisDisabled=seriesScope&&seriesScope.emphasisDisabled,focus=seriesScope&&seriesScope.focus,blurScope=seriesScope&&seriesScope.blurScope;if(!seriesScope||lineData.hasItemOption){var itemModel=lineData.getItemModel(idx),emphasisModel=itemModel.getModel("emphasis");emphasisLineStyle=emphasisModel.getModel("lineStyle").getLineStyle(),blurLineStyle=itemModel.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle=itemModel.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled=emphasisModel.get("disabled"),focus=emphasisModel.get("focus"),blurScope=emphasisModel.get("blurScope"),labelStatesModels=(0,labelStyle.k3)(itemModel)}var lineStyle=lineData.getItemVisual(idx,"style"),visualColor=lineStyle.stroke;line.useStyle(lineStyle),line.style.fill=null,line.style.strokeNoScale=!0,line.ensureState("emphasis").style=emphasisLineStyle,line.ensureState("blur").style=blurLineStyle,line.ensureState("select").style=selectLineStyle,(0,util.each)(SYMBOL_CATEGORIES,(function(symbolCategory){var symbol=this.childOfName(symbolCategory);if(symbol){symbol.setColor(visualColor),symbol.style.opacity=lineStyle.opacity;for(var i=0;i<states.L1.length;i++){var stateName=states.L1[i],lineState=line.getState(stateName);if(lineState){var lineStateStyle=lineState.style||{},state=symbol.ensureState(stateName),stateStyle=state.style||(state.style={});null!=lineStateStyle.stroke&&(stateStyle[symbol.__isEmptyBrush?"stroke":"fill"]=lineStateStyle.stroke),null!=lineStateStyle.opacity&&(stateStyle.opacity=lineStateStyle.opacity)}}symbol.markRedraw()}}),this);var rawVal=seriesModel.getRawValue(idx);(0,labelStyle.ni)(this,labelStatesModels,{labelDataIndex:idx,labelFetcher:{getFormattedLabel:function(dataIndex,stateName){return seriesModel.getFormattedLabel(dataIndex,stateName,lineData.dataType)}},inheritColor:visualColor||"#000",defaultOpacity:lineStyle.opacity,defaultText:(null==rawVal?lineData.getName(idx):isFinite(rawVal)?(0,number.NM)(rawVal):rawVal)+""});var label=this.getTextContent();if(label){var labelNormalModel=labelStatesModels.normal;label.__align=label.style.align,label.__verticalAlign=label.style.verticalAlign,label.__position=labelNormalModel.get("position")||"middle";var distance=labelNormalModel.get("distance");(0,util.isArray)(distance)||(distance=[distance,distance]),label.__labelDistance=distance}this.setTextConfig({position:null,local:!0,inside:!1}),(0,states.k5)(this,focus,blurScope,emphasisDisabled)},Line.prototype.highlight=function(){(0,states.fD)(this)},Line.prototype.downplay=function(){(0,states.Mh)(this)},Line.prototype.updateLayout=function(lineData,idx){this.setLinePoints(lineData.getItemLayout(idx))},Line.prototype.setLinePoints=function(points){var linePath=this.childOfName("line");setLinePoints(linePath.shape,points),linePath.dirty()},Line.prototype.beforeUpdate=function(){var symbolFrom=this.childOfName("fromSymbol"),symbolTo=this.childOfName("toSymbol"),label=this.getTextContent();if(symbolFrom||symbolTo||label&&!label.ignore){for(var invScale=1,parentNode=this.parent;parentNode;)parentNode.scaleX&&(invScale/=parentNode.scaleX),parentNode=parentNode.parent;var line=this.childOfName("line");if(this.__dirty||line.__dirty){var percent=line.shape.percent,fromPos=line.pointAt(0),toPos=line.pointAt(percent),d=vector.sub([],toPos,fromPos);if(vector.normalize(d,d),symbolFrom&&(symbolFrom.setPosition(fromPos),setSymbolRotation(symbolFrom,0),symbolFrom.scaleX=symbolFrom.scaleY=invScale*percent,symbolFrom.markRedraw()),symbolTo&&(symbolTo.setPosition(toPos),setSymbolRotation(symbolTo,1),symbolTo.scaleX=symbolTo.scaleY=invScale*percent,symbolTo.markRedraw()),label&&!label.ignore){label.x=label.y=0,label.originX=label.originY=0;var textAlign=void 0,textVerticalAlign=void 0,distance=label.__labelDistance,distanceX=distance[0]*invScale,distanceY=distance[1]*invScale,halfPercent=percent/2,tangent=line.tangentAt(halfPercent),n=[tangent[1],-tangent[0]],cp=line.pointAt(halfPercent);n[1]>0&&(n[0]=-n[0],n[1]=-n[1]);var dir=tangent[0]<0?-1:1;if("start"!==label.__position&&"end"!==label.__position){var rotation=-Math.atan2(tangent[1],tangent[0]);toPos[0]<fromPos[0]&&(rotation=Math.PI+rotation),label.rotation=rotation}var dy=void 0;switch(label.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":dy=-distanceY,textVerticalAlign="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":dy=distanceY,textVerticalAlign="top";break;default:dy=0,textVerticalAlign="middle"}switch(label.__position){case"end":label.x=d[0]*distanceX+toPos[0],label.y=d[1]*distanceY+toPos[1],textAlign=d[0]>.8?"left":d[0]<-.8?"right":"center",textVerticalAlign=d[1]>.8?"top":d[1]<-.8?"bottom":"middle";break;case"start":label.x=-d[0]*distanceX+fromPos[0],label.y=-d[1]*distanceY+fromPos[1],textAlign=d[0]>.8?"right":d[0]<-.8?"left":"center",textVerticalAlign=d[1]>.8?"bottom":d[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":label.x=distanceX*dir+fromPos[0],label.y=fromPos[1]+dy,textAlign=tangent[0]<0?"right":"left",label.originX=-distanceX*dir,label.originY=-dy;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":label.x=cp[0],label.y=cp[1]+dy,textAlign="center",label.originY=-dy;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":label.x=-distanceX*dir+toPos[0],label.y=toPos[1]+dy,textAlign=tangent[0]>=0?"right":"left",label.originX=distanceX*dir,label.originY=-dy}label.scaleX=label.scaleY=invScale,label.setStyle({verticalAlign:label.__verticalAlign||textVerticalAlign,align:label.__align||textAlign})}}}function setSymbolRotation(symbol,percent){var specifiedRotation=symbol.__specifiedRotation;if(null==specifiedRotation){var tangent=line.tangentAt(percent);symbol.attr("rotation",(1===percent?-1:1)*Math.PI/2-Math.atan2(tangent[1],tangent[0]))}else symbol.attr("rotation",specifiedRotation)}},Line}(Group.Z);const helper_Line=Line_Line;function LineDraw_makeSeriesScope(lineData){var hostModel=lineData.hostModel,emphasisModel=hostModel.getModel("emphasis");return{lineStyle:hostModel.getModel("lineStyle").getLineStyle(),emphasisLineStyle:emphasisModel.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:hostModel.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:hostModel.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:emphasisModel.get("disabled"),blurScope:emphasisModel.get("blurScope"),focus:emphasisModel.get("focus"),labelStatesModels:(0,labelStyle.k3)(hostModel)}}function isPointNaN(pt){return isNaN(pt[0])||isNaN(pt[1])}function lineNeedsDraw(pts){return pts&&!isPointNaN(pts[0])&&!isPointNaN(pts[1])}const helper_LineDraw=function(){function LineDraw(LineCtor){this.group=new Group.Z,this._LineCtor=LineCtor||helper_Line}return LineDraw.prototype.updateData=function(lineData){var _this=this;this._progressiveEls=null;var group=this.group,oldLineData=this._lineData;this._lineData=lineData,oldLineData||group.removeAll();var seriesScope=LineDraw_makeSeriesScope(lineData);lineData.diff(oldLineData).add((function(idx){_this._doAdd(lineData,idx,seriesScope)})).update((function(newIdx,oldIdx){_this._doUpdate(oldLineData,lineData,oldIdx,newIdx,seriesScope)})).remove((function(idx){group.remove(oldLineData.getItemGraphicEl(idx))})).execute()},LineDraw.prototype.updateLayout=function(){var lineData=this._lineData;lineData&&lineData.eachItemGraphicEl((function(el,idx){el.updateLayout(lineData,idx)}),this)},LineDraw.prototype.incrementalPrepareUpdate=function(lineData){this._seriesScope=LineDraw_makeSeriesScope(lineData),this._lineData=null,this.group.removeAll()},LineDraw.prototype.incrementalUpdate=function(taskParams,lineData){function updateIncrementalAndHover(el){el.isGroup||function isEffectObject(el){return el.animators&&el.animators.length>0}(el)||(el.incremental=!0,el.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[];for(var idx=taskParams.start;idx<taskParams.end;idx++){if(lineNeedsDraw(lineData.getItemLayout(idx))){var el=new this._LineCtor(lineData,idx,this._seriesScope);el.traverse(updateIncrementalAndHover),this.group.add(el),lineData.setItemGraphicEl(idx,el),this._progressiveEls.push(el)}}},LineDraw.prototype.remove=function(){this.group.removeAll()},LineDraw.prototype.eachRendered=function(cb){graphic.traverseElements(this._progressiveEls||this.group,cb)},LineDraw.prototype._doAdd=function(lineData,idx,seriesScope){if(lineNeedsDraw(lineData.getItemLayout(idx))){var el=new this._LineCtor(lineData,idx,seriesScope);lineData.setItemGraphicEl(idx,el),this.group.add(el)}},LineDraw.prototype._doUpdate=function(oldLineData,newLineData,oldIdx,newIdx,seriesScope){var itemEl=oldLineData.getItemGraphicEl(oldIdx);lineNeedsDraw(newLineData.getItemLayout(newIdx))?(itemEl?itemEl.updateData(newLineData,newIdx,seriesScope):itemEl=new this._LineCtor(newLineData,newIdx,seriesScope),newLineData.setItemGraphicEl(newIdx,itemEl),this.group.add(itemEl)):this.group.remove(itemEl)},LineDraw}();var v1=[],v2=[],v3=[],quadraticAt=curve.Zm,v2DistSquare=vector.distSquare,mathAbs=Math.abs;function intersectCurveCircle(curvePoints,center,radius){for(var t,p0=curvePoints[0],p1=curvePoints[1],p2=curvePoints[2],d=1/0,radiusSquare=radius*radius,interval=.1,_t=.1;_t<=.9;_t+=.1){v1[0]=quadraticAt(p0[0],p1[0],p2[0],_t),v1[1]=quadraticAt(p0[1],p1[1],p2[1],_t),(diff=mathAbs(v2DistSquare(v1,center)-radiusSquare))<d&&(d=diff,t=_t)}for(var i=0;i<32;i++){var next=t+interval;v2[0]=quadraticAt(p0[0],p1[0],p2[0],t),v2[1]=quadraticAt(p0[1],p1[1],p2[1],t),v3[0]=quadraticAt(p0[0],p1[0],p2[0],next),v3[1]=quadraticAt(p0[1],p1[1],p2[1],next);var diff=v2DistSquare(v2,center)-radiusSquare;if(mathAbs(diff)<.01)break;var nextDiff=v2DistSquare(v3,center)-radiusSquare;interval/=2,diff<0?nextDiff>=0?t+=interval:t-=interval:nextDiff>=0?t-=interval:t+=interval}return t}function adjustEdge(graph,scale){var tmp0=[],quadraticSubdivide=curve.Lx,pts=[[],[],[]],pts2=[[],[]],v=[];scale/=2,graph.eachEdge((function(edge,idx){var linePoints=edge.getLayout(),fromSymbol=edge.getVisual("fromSymbol"),toSymbol=edge.getVisual("toSymbol");linePoints.__original||(linePoints.__original=[vector.clone(linePoints[0]),vector.clone(linePoints[1])],linePoints[2]&&linePoints.__original.push(vector.clone(linePoints[2])));var originalPoints=linePoints.__original;if(null!=linePoints[2]){if(vector.copy(pts[0],originalPoints[0]),vector.copy(pts[1],originalPoints[2]),vector.copy(pts[2],originalPoints[1]),fromSymbol&&"none"!==fromSymbol){var symbolSize=getSymbolSize(edge.node1),t=intersectCurveCircle(pts,originalPoints[0],symbolSize*scale);quadraticSubdivide(pts[0][0],pts[1][0],pts[2][0],t,tmp0),pts[0][0]=tmp0[3],pts[1][0]=tmp0[4],quadraticSubdivide(pts[0][1],pts[1][1],pts[2][1],t,tmp0),pts[0][1]=tmp0[3],pts[1][1]=tmp0[4]}if(toSymbol&&"none"!==toSymbol){symbolSize=getSymbolSize(edge.node2),t=intersectCurveCircle(pts,originalPoints[1],symbolSize*scale);quadraticSubdivide(pts[0][0],pts[1][0],pts[2][0],t,tmp0),pts[1][0]=tmp0[1],pts[2][0]=tmp0[2],quadraticSubdivide(pts[0][1],pts[1][1],pts[2][1],t,tmp0),pts[1][1]=tmp0[1],pts[2][1]=tmp0[2]}vector.copy(linePoints[0],pts[0]),vector.copy(linePoints[1],pts[2]),vector.copy(linePoints[2],pts[1])}else{if(vector.copy(pts2[0],originalPoints[0]),vector.copy(pts2[1],originalPoints[1]),vector.sub(v,pts2[1],pts2[0]),vector.normalize(v,v),fromSymbol&&"none"!==fromSymbol){symbolSize=getSymbolSize(edge.node1);vector.scaleAndAdd(pts2[0],pts2[0],v,symbolSize*scale)}if(toSymbol&&"none"!==toSymbol){symbolSize=getSymbolSize(edge.node2);vector.scaleAndAdd(pts2[1],pts2[1],v,-symbolSize*scale)}vector.copy(linePoints[0],pts2[0]),vector.copy(linePoints[1],pts2[1])}}))}function isViewCoordSys(coordSys){return"view"===coordSys.type}var GraphView=function(_super){function GraphView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=GraphView.type,_this}return(0,tslib_es6.ZT)(GraphView,_super),GraphView.prototype.init=function(ecModel,api){var symbolDraw=new helper_SymbolDraw,lineDraw=new helper_LineDraw,group=this.group;this._controller=new RoamController.Z(api.getZr()),this._controllerHost={target:group},group.add(symbolDraw.group),group.add(lineDraw.group),this._symbolDraw=symbolDraw,this._lineDraw=lineDraw,this._firstRender=!0},GraphView.prototype.render=function(seriesModel,ecModel,api){var _this=this,coordSys=seriesModel.coordinateSystem;this._model=seriesModel;var symbolDraw=this._symbolDraw,lineDraw=this._lineDraw,group=this.group;if(isViewCoordSys(coordSys)){var groupNewProp={x:coordSys.x,y:coordSys.y,scaleX:coordSys.scaleX,scaleY:coordSys.scaleY};this._firstRender?group.attr(groupNewProp):basicTransition.D(group,groupNewProp,seriesModel)}adjustEdge(seriesModel.getGraph(),getNodeGlobalScale(seriesModel));var data=seriesModel.getData();symbolDraw.updateData(data);var edgeData=seriesModel.getEdgeData();lineDraw.updateData(edgeData),this._updateNodeAndLinkScale(),this._updateController(seriesModel,ecModel,api),clearTimeout(this._layoutTimeout);var forceLayout=seriesModel.forceLayout,layoutAnimation=seriesModel.get(["force","layoutAnimation"]);forceLayout&&this._startForceLayoutIteration(forceLayout,layoutAnimation);var layout=seriesModel.get("layout");data.graph.eachNode((function(node){var idx=node.dataIndex,el=node.getGraphicEl(),itemModel=node.getModel();if(el){el.off("drag").off("dragend");var draggable=itemModel.get("draggable");draggable&&el.on("drag",(function(e){switch(layout){case"force":forceLayout.warmUp(),!_this._layouting&&_this._startForceLayoutIteration(forceLayout,layoutAnimation),forceLayout.setFixed(idx),data.setItemLayout(idx,[el.x,el.y]);break;case"circular":data.setItemLayout(idx,[el.x,el.y]),node.setLayout({fixed:!0},!0),circularLayout(seriesModel,"symbolSize",node,[e.offsetX,e.offsetY]),_this.updateLayout(seriesModel);break;default:data.setItemLayout(idx,[el.x,el.y]),simpleLayoutEdge(seriesModel.getGraph(),seriesModel),_this.updateLayout(seriesModel)}})).on("dragend",(function(){forceLayout&&forceLayout.setUnfixed(idx)})),el.setDraggable(draggable,!!itemModel.get("cursor")),"adjacency"===itemModel.get(["emphasis","focus"])&&((0,innerStore.A)(el).focus=node.getAdjacentDataIndices())}})),data.graph.eachEdge((function(edge){var el=edge.getGraphicEl(),focus=edge.getModel().get(["emphasis","focus"]);el&&"adjacency"===focus&&((0,innerStore.A)(el).focus={edge:[edge.dataIndex],node:[edge.node1.dataIndex,edge.node2.dataIndex]})}));var circularRotateLabel="circular"===seriesModel.get("layout")&&seriesModel.get(["circular","rotateLabel"]),cx=data.getLayout("cx"),cy=data.getLayout("cy");data.graph.eachNode((function(node){rotateNodeLabel(node,circularRotateLabel,cx,cy)})),this._firstRender=!1},GraphView.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},GraphView.prototype._startForceLayoutIteration=function(forceLayout,layoutAnimation){var self=this;!function step(){forceLayout.step((function(stopped){self.updateLayout(self._model),(self._layouting=!stopped)&&(layoutAnimation?self._layoutTimeout=setTimeout(step,16):step())}))}()},GraphView.prototype._updateController=function(seriesModel,ecModel,api){var _this=this,controller=this._controller,controllerHost=this._controllerHost,group=this.group;controller.setPointerChecker((function(e,x,y){var rect=group.getBoundingRect();return rect.applyTransform(group.transform),rect.contain(x,y)&&!(0,cursorHelper.l)(e,api,seriesModel)})),isViewCoordSys(seriesModel.coordinateSystem)?(controller.enable(seriesModel.get("roam")),controllerHost.zoomLimit=seriesModel.get("scaleLimit"),controllerHost.zoom=seriesModel.coordinateSystem.getZoom(),controller.off("pan").off("zoom").on("pan",(function(e){roamHelper.e(controllerHost,e.dx,e.dy),api.dispatchAction({seriesId:seriesModel.id,type:"graphRoam",dx:e.dx,dy:e.dy})})).on("zoom",(function(e){roamHelper.H(controllerHost,e.scale,e.originX,e.originY),api.dispatchAction({seriesId:seriesModel.id,type:"graphRoam",zoom:e.scale,originX:e.originX,originY:e.originY}),_this._updateNodeAndLinkScale(),adjustEdge(seriesModel.getGraph(),getNodeGlobalScale(seriesModel)),_this._lineDraw.updateLayout(),api.updateLabelLayout()}))):controller.disable()},GraphView.prototype._updateNodeAndLinkScale=function(){var seriesModel=this._model,data=seriesModel.getData(),nodeScale=getNodeGlobalScale(seriesModel);data.eachItemGraphicEl((function(el,idx){el&&el.setSymbolScale(nodeScale)}))},GraphView.prototype.updateLayout=function(seriesModel){adjustEdge(seriesModel.getGraph(),getNodeGlobalScale(seriesModel)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},GraphView.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},GraphView.type="graph",GraphView}(Chart.Z);const graph_GraphView=GraphView;var SeriesData=__webpack_require__("./node_modules/echarts/lib/data/SeriesData.js"),Graph=__webpack_require__("./node_modules/echarts/lib/data/Graph.js"),linkSeriesData=__webpack_require__("./node_modules/echarts/lib/data/helper/linkSeriesData.js"),createDimensions=__webpack_require__("./node_modules/echarts/lib/data/helper/createDimensions.js"),core_CoordinateSystem=__webpack_require__("./node_modules/echarts/lib/core/CoordinateSystem.js");function createGraphFromNodeEdge(nodes,edges,seriesModel,directed,beforeLink){for(var graph=new Graph.ZP(directed),i=0;i<nodes.length;i++)graph.addNode(util.retrieve(nodes[i].id,nodes[i].name,i),i);var linkNameList=[],validEdges=[],linkCount=0;for(i=0;i<edges.length;i++){var link=edges[i],source=link.source,target=link.target;graph.addEdge(source,target,linkCount)&&(validEdges.push(link),linkNameList.push(util.retrieve((0,util_model.U5)(link.id,null),source+" > "+target)),linkCount++)}var nodeData,coordSys=seriesModel.get("coordinateSystem");if("cartesian2d"===coordSys||"polar"===coordSys)nodeData=(0,createSeriesData.Z)(nodes,seriesModel);else{var coordSysCtor=core_CoordinateSystem.Z.get(coordSys),coordDimensions=coordSysCtor&&coordSysCtor.dimensions||[];util.indexOf(coordDimensions,"value")<0&&coordDimensions.concat(["value"]);var dimensions=(0,createDimensions.Z)(nodes,{coordDimensions,encodeDefine:seriesModel.getEncode()}).dimensions;(nodeData=new SeriesData.Z(dimensions,seriesModel)).initData(nodes)}var edgeData=new SeriesData.Z(["value"],seriesModel);return edgeData.initData(validEdges,linkNameList),beforeLink&&beforeLink(nodeData,edgeData),(0,linkSeriesData.Z)({mainData:nodeData,struct:graph,structAttr:"graph",datas:{node:nodeData,edge:edgeData},datasAttr:{node:"data",edge:"edgeData"}}),graph.update(),graph}var seriesFormatTooltip=__webpack_require__("./node_modules/echarts/lib/component/tooltip/seriesFormatTooltip.js"),GraphSeriesModel=function(_super){function GraphSeriesModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=GraphSeriesModel.type,_this.hasSymbolVisual=!0,_this}return(0,tslib_es6.ZT)(GraphSeriesModel,_super),GraphSeriesModel.prototype.init=function(option){_super.prototype.init.apply(this,arguments);var self=this;function getCategoriesData(){return self._categoriesData}this.legendVisualProvider=new visual_LegendVisualProvider(getCategoriesData,getCategoriesData),this.fillDataTextStyle(option.edges||option.links),this._updateCategoriesData()},GraphSeriesModel.prototype.mergeOption=function(option){_super.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(option.edges||option.links),this._updateCategoriesData()},GraphSeriesModel.prototype.mergeDefaultAndTheme=function(option){_super.prototype.mergeDefaultAndTheme.apply(this,arguments),(0,util_model.Cc)(option,"edgeLabel",["show"])},GraphSeriesModel.prototype.getInitialData=function(option,ecModel){var edges=option.edges||option.links||[],nodes=option.data||option.nodes||[],self=this;if(nodes&&edges){!function initCurvenessList(seriesModel){getAutoCurvenessParams(seriesModel)&&(seriesModel.__curvenessList=[],seriesModel.__edgeMap={},createCurveness(seriesModel))}(this);var graph=createGraphFromNodeEdge(nodes,edges,this,!0,(function beforeLink(nodeData,edgeData){nodeData.wrapMethod("getItemModel",(function(model){var categoryModel=self._categoriesModels[model.getShallow("category")];return categoryModel&&(categoryModel.parentModel=model.parentModel,model.parentModel=categoryModel),model}));var oldGetModel=Model.Z.prototype.getModel;function newGetModel(path,parentModel){var model=oldGetModel.call(this,path,parentModel);return model.resolveParentPath=resolveParentPath,model}function resolveParentPath(pathArr){if(pathArr&&("label"===pathArr[0]||"label"===pathArr[1])){var newPathArr=pathArr.slice();return"label"===pathArr[0]?newPathArr[0]="edgeLabel":"label"===pathArr[1]&&(newPathArr[1]="edgeLabel"),newPathArr}return pathArr}edgeData.wrapMethod("getItemModel",(function(model){return model.resolveParentPath=resolveParentPath,model.getModel=newGetModel,model}))}));return util.each(graph.edges,(function(edge){!function createEdgeMapForCurveness(n1,n2,seriesModel,index){if(getAutoCurvenessParams(seriesModel)){var key=getKeyOfEdges(n1,n2,seriesModel),edgeMap=seriesModel.__edgeMap,oppositeEdges=edgeMap[getOppositeKey(key)];edgeMap[key]&&!oppositeEdges?edgeMap[key].isForward=!0:oppositeEdges&&edgeMap[key]&&(oppositeEdges.isForward=!0,edgeMap[key].isForward=!1),edgeMap[key]=edgeMap[key]||[],edgeMap[key].push(index)}}(edge.node1,edge.node2,this,edge.dataIndex)}),this),graph.data}},GraphSeriesModel.prototype.getGraph=function(){return this.getData().graph},GraphSeriesModel.prototype.getEdgeData=function(){return this.getGraph().edgeData},GraphSeriesModel.prototype.getCategoriesData=function(){return this._categoriesData},GraphSeriesModel.prototype.formatTooltip=function(dataIndex,multipleSeries,dataType){if("edge"===dataType){var nodeData=this.getData(),params=this.getDataParams(dataIndex,dataType),edge=nodeData.graph.getEdgeByIndex(dataIndex),sourceName=nodeData.getName(edge.node1.dataIndex),targetName=nodeData.getName(edge.node2.dataIndex),nameArr=[];return null!=sourceName&&nameArr.push(sourceName),null!=targetName&&nameArr.push(targetName),(0,tooltipMarkup.TX)("nameValue",{name:nameArr.join(" > "),value:params.value,noValue:null==params.value})}return(0,seriesFormatTooltip.w)({series:this,dataIndex,multipleSeries})},GraphSeriesModel.prototype._updateCategoriesData=function(){var categories=util.map(this.option.categories||[],(function(category){return null!=category.value?category:util.extend({value:0},category)})),categoriesData=new SeriesData.Z(["value"],this);categoriesData.initData(categories),this._categoriesData=categoriesData,this._categoriesModels=categoriesData.mapArray((function(idx){return categoriesData.getItemModel(idx)}))},GraphSeriesModel.prototype.setZoom=function(zoom){this.option.zoom=zoom},GraphSeriesModel.prototype.setCenter=function(center){this.option.center=center},GraphSeriesModel.prototype.isAnimationEnabled=function(){return _super.prototype.isAnimationEnabled.call(this)&&!("force"===this.get("layout")&&this.get(["force","layoutAnimation"]))},GraphSeriesModel.type="series.graph",GraphSeriesModel.dependencies=["grid","polar","geo","singleAxis","calendar"],GraphSeriesModel.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},GraphSeriesModel}(Series.Z);const GraphSeries=GraphSeriesModel;var actionInfo={type:"graphRoam",event:"graphRoam",update:"none"};var PointerShape=function PointerShape(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0},PointerPath=function(_super){function PointerPath(opts){var _this=_super.call(this,opts)||this;return _this.type="pointer",_this}return(0,tslib_es6.ZT)(PointerPath,_super),PointerPath.prototype.getDefaultShape=function(){return new PointerShape},PointerPath.prototype.buildPath=function(ctx,shape){var mathCos=Math.cos,mathSin=Math.sin,r=shape.r,width=shape.width,angle=shape.angle,x=shape.x-mathCos(angle)*width*(width>=r/3?1:2),y=shape.y-mathSin(angle)*width*(width>=r/3?1:2);angle=shape.angle-Math.PI/2,ctx.moveTo(x,y),ctx.lineTo(shape.x+mathCos(angle)*width,shape.y+mathSin(angle)*width),ctx.lineTo(shape.x+mathCos(shape.angle)*r,shape.y+mathSin(shape.angle)*r),ctx.lineTo(shape.x-mathCos(angle)*width,shape.y-mathSin(angle)*width),ctx.lineTo(x,y)},PointerPath}(Path.ZP);const gauge_PointerPath=PointerPath;var sausage=__webpack_require__("./node_modules/echarts/lib/util/shape/sausage.js");function formatLabel(value,labelFormatter){var label=null==value?"":value+"";return labelFormatter&&((0,util.isString)(labelFormatter)?label=labelFormatter.replace("{value}",label):(0,util.isFunction)(labelFormatter)&&(label=labelFormatter(value))),label}var GaugeView=function(_super){function GaugeView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=GaugeView.type,_this}return(0,tslib_es6.ZT)(GaugeView,_super),GaugeView.prototype.render=function(seriesModel,ecModel,api){this.group.removeAll();var colorList=seriesModel.get(["axisLine","lineStyle","color"]),posInfo=function parsePosition(seriesModel,api){var center=seriesModel.get("center"),width=api.getWidth(),height=api.getHeight(),size=Math.min(width,height);return{cx:(0,number.GM)(center[0],api.getWidth()),cy:(0,number.GM)(center[1],api.getHeight()),r:(0,number.GM)(seriesModel.get("radius"),size/2)}}(seriesModel,api);this._renderMain(seriesModel,ecModel,api,colorList,posInfo),this._data=seriesModel.getData()},GaugeView.prototype.dispose=function(){},GaugeView.prototype._renderMain=function(seriesModel,ecModel,api,colorList,posInfo){var group=this.group,clockwise=seriesModel.get("clockwise"),startAngle=-seriesModel.get("startAngle")/180*Math.PI,endAngle=-seriesModel.get("endAngle")/180*Math.PI,axisLineModel=seriesModel.getModel("axisLine"),MainPath=axisLineModel.get("roundCap")?sausage.Z:Sector.C,showAxis=axisLineModel.get("show"),lineStyleModel=axisLineModel.getModel("lineStyle"),axisLineWidth=lineStyleModel.get("width"),angles=[startAngle,endAngle];(0,PathProxy.L)(angles,!clockwise);for(var angleRangeSpan=(endAngle=angles[1])-(startAngle=angles[0]),prevEndAngle=startAngle,sectors=[],i=0;showAxis&&i<colorList.length;i++){var sector=new MainPath({shape:{startAngle:prevEndAngle,endAngle:endAngle=startAngle+angleRangeSpan*Math.min(Math.max(colorList[i][0],0),1),cx:posInfo.cx,cy:posInfo.cy,clockwise,r0:posInfo.r-axisLineWidth,r:posInfo.r},silent:!0});sector.setStyle({fill:colorList[i][1]}),sector.setStyle(lineStyleModel.getLineStyle(["color","width"])),sectors.push(sector),prevEndAngle=endAngle}sectors.reverse(),(0,util.each)(sectors,(function(sector){return group.add(sector)}));var getColor=function(percent){if(percent<=0)return colorList[0][1];var i;for(i=0;i<colorList.length;i++)if(colorList[i][0]>=percent&&(0===i?0:colorList[i-1][0])<percent)return colorList[i][1];return colorList[i-1][1]};this._renderTicks(seriesModel,ecModel,api,getColor,posInfo,startAngle,endAngle,clockwise,axisLineWidth),this._renderTitleAndDetail(seriesModel,ecModel,api,getColor,posInfo),this._renderAnchor(seriesModel,posInfo),this._renderPointer(seriesModel,ecModel,api,getColor,posInfo,startAngle,endAngle,clockwise,axisLineWidth)},GaugeView.prototype._renderTicks=function(seriesModel,ecModel,api,getColor,posInfo,startAngle,endAngle,clockwise,axisLineWidth){for(var unitX,unitY,group=this.group,cx=posInfo.cx,cy=posInfo.cy,r=posInfo.r,minVal=+seriesModel.get("min"),maxVal=+seriesModel.get("max"),splitLineModel=seriesModel.getModel("splitLine"),tickModel=seriesModel.getModel("axisTick"),labelModel=seriesModel.getModel("axisLabel"),splitNumber=seriesModel.get("splitNumber"),subSplitNumber=tickModel.get("splitNumber"),splitLineLen=(0,number.GM)(splitLineModel.get("length"),r),tickLen=(0,number.GM)(tickModel.get("length"),r),angle=startAngle,step=(endAngle-startAngle)/splitNumber,subStep=step/subSplitNumber,splitLineStyle=splitLineModel.getModel("lineStyle").getLineStyle(),tickLineStyle=tickModel.getModel("lineStyle").getLineStyle(),splitLineDistance=splitLineModel.get("distance"),i=0;i<=splitNumber;i++){if(unitX=Math.cos(angle),unitY=Math.sin(angle),splitLineModel.get("show")){var distance=splitLineDistance?splitLineDistance+axisLineWidth:axisLineWidth,splitLine=new Line.Z({shape:{x1:unitX*(r-distance)+cx,y1:unitY*(r-distance)+cy,x2:unitX*(r-splitLineLen-distance)+cx,y2:unitY*(r-splitLineLen-distance)+cy},style:splitLineStyle,silent:!0});"auto"===splitLineStyle.stroke&&splitLine.setStyle({stroke:getColor(i/splitNumber)}),group.add(splitLine)}if(labelModel.get("show")){distance=labelModel.get("distance")+splitLineDistance;var label=formatLabel((0,number.NM)(i/splitNumber*(maxVal-minVal)+minVal),labelModel.get("formatter")),autoColor=getColor(i/splitNumber),textStyleX=unitX*(r-splitLineLen-distance)+cx,textStyleY=unitY*(r-splitLineLen-distance)+cy,rotateType=labelModel.get("rotate"),rotate=0;"radial"===rotateType?(rotate=-angle+2*Math.PI)>Math.PI/2&&(rotate+=Math.PI):"tangential"===rotateType?rotate=-angle-Math.PI/2:(0,util.isNumber)(rotateType)&&(rotate=rotateType*Math.PI/180),0===rotate?group.add(new Text.ZP({style:(0,labelStyle.Lr)(labelModel,{text:label,x:textStyleX,y:textStyleY,verticalAlign:unitY<-.8?"top":unitY>.8?"bottom":"middle",align:unitX<-.4?"left":unitX>.4?"right":"center"},{inheritColor:autoColor}),silent:!0})):group.add(new Text.ZP({style:(0,labelStyle.Lr)(labelModel,{text:label,x:textStyleX,y:textStyleY,verticalAlign:"middle",align:"center"},{inheritColor:autoColor}),silent:!0,originX:textStyleX,originY:textStyleY,rotation:rotate}))}if(tickModel.get("show")&&i!==splitNumber){distance=(distance=tickModel.get("distance"))?distance+axisLineWidth:axisLineWidth;for(var j=0;j<=subSplitNumber;j++){unitX=Math.cos(angle),unitY=Math.sin(angle);var tickLine=new Line.Z({shape:{x1:unitX*(r-distance)+cx,y1:unitY*(r-distance)+cy,x2:unitX*(r-tickLen-distance)+cx,y2:unitY*(r-tickLen-distance)+cy},silent:!0,style:tickLineStyle});"auto"===tickLineStyle.stroke&&tickLine.setStyle({stroke:getColor((i+j/subSplitNumber)/splitNumber)}),group.add(tickLine),angle+=subStep}angle-=subStep}else angle+=step}},GaugeView.prototype._renderPointer=function(seriesModel,ecModel,api,getColor,posInfo,startAngle,endAngle,clockwise,axisLineWidth){var group=this.group,oldData=this._data,oldProgressData=this._progressEls,progressList=[],showPointer=seriesModel.get(["pointer","show"]),progressModel=seriesModel.getModel("progress"),showProgress=progressModel.get("show"),data=seriesModel.getData(),valueDim=data.mapDimension("value"),minVal=+seriesModel.get("min"),maxVal=+seriesModel.get("max"),valueExtent=[minVal,maxVal],angleExtent=[startAngle,endAngle];function createPointer(idx,angle){var pointer,pointerModel=data.getItemModel(idx).getModel("pointer"),pointerWidth=(0,number.GM)(pointerModel.get("width"),posInfo.r),pointerLength=(0,number.GM)(pointerModel.get("length"),posInfo.r),pointerStr=seriesModel.get(["pointer","icon"]),pointerOffset=pointerModel.get("offsetCenter"),pointerOffsetX=(0,number.GM)(pointerOffset[0],posInfo.r),pointerOffsetY=(0,number.GM)(pointerOffset[1],posInfo.r),pointerKeepAspect=pointerModel.get("keepAspect");return(pointer=pointerStr?(0,util_symbol.th)(pointerStr,pointerOffsetX-pointerWidth/2,pointerOffsetY-pointerLength,pointerWidth,pointerLength,null,pointerKeepAspect):new gauge_PointerPath({shape:{angle:-Math.PI/2,width:pointerWidth,r:pointerLength,x:pointerOffsetX,y:pointerOffsetY}})).rotation=-(angle+Math.PI/2),pointer.x=posInfo.cx,pointer.y=posInfo.cy,pointer}function createProgress(idx,endAngle){var ProgressPath=progressModel.get("roundCap")?sausage.Z:Sector.C,isOverlap=progressModel.get("overlap"),progressWidth=isOverlap?progressModel.get("width"):axisLineWidth/data.count(),r0=isOverlap?posInfo.r-progressWidth:posInfo.r-(idx+1)*progressWidth,r=isOverlap?posInfo.r:posInfo.r-idx*progressWidth,progress=new ProgressPath({shape:{startAngle,endAngle,cx:posInfo.cx,cy:posInfo.cy,clockwise,r0,r}});return isOverlap&&(progress.z2=maxVal-data.get(valueDim,idx)%maxVal),progress}(showProgress||showPointer)&&(data.diff(oldData).add((function(idx){var val=data.get(valueDim,idx);if(showPointer){var pointer=createPointer(idx,startAngle);basicTransition.KZ(pointer,{rotation:-((isNaN(+val)?angleExtent[0]:(0,number.NU)(val,valueExtent,angleExtent,!0))+Math.PI/2)},seriesModel),group.add(pointer),data.setItemGraphicEl(idx,pointer)}if(showProgress){var progress=createProgress(idx,startAngle),isClip=progressModel.get("clip");basicTransition.KZ(progress,{shape:{endAngle:(0,number.NU)(val,valueExtent,angleExtent,isClip)}},seriesModel),group.add(progress),(0,innerStore.Q)(seriesModel.seriesIndex,data.dataType,idx,progress),progressList[idx]=progress}})).update((function(newIdx,oldIdx){var val=data.get(valueDim,newIdx);if(showPointer){var previousPointer=oldData.getItemGraphicEl(oldIdx),previousRotate=previousPointer?previousPointer.rotation:startAngle,pointer=createPointer(newIdx,previousRotate);pointer.rotation=previousRotate,basicTransition.D(pointer,{rotation:-((isNaN(+val)?angleExtent[0]:(0,number.NU)(val,valueExtent,angleExtent,!0))+Math.PI/2)},seriesModel),group.add(pointer),data.setItemGraphicEl(newIdx,pointer)}if(showProgress){var previousProgress=oldProgressData[oldIdx],progress=createProgress(newIdx,previousProgress?previousProgress.shape.endAngle:startAngle),isClip=progressModel.get("clip");basicTransition.D(progress,{shape:{endAngle:(0,number.NU)(val,valueExtent,angleExtent,isClip)}},seriesModel),group.add(progress),(0,innerStore.Q)(seriesModel.seriesIndex,data.dataType,newIdx,progress),progressList[newIdx]=progress}})).execute(),data.each((function(idx){var itemModel=data.getItemModel(idx),emphasisModel=itemModel.getModel("emphasis"),focus=emphasisModel.get("focus"),blurScope=emphasisModel.get("blurScope"),emphasisDisabled=emphasisModel.get("disabled");if(showPointer){var pointer=data.getItemGraphicEl(idx),symbolStyle=data.getItemVisual(idx,"style"),visualColor=symbolStyle.fill;if(pointer instanceof graphic_Image.ZP){var pathStyle=pointer.style;pointer.useStyle((0,util.extend)({image:pathStyle.image,x:pathStyle.x,y:pathStyle.y,width:pathStyle.width,height:pathStyle.height},symbolStyle))}else pointer.useStyle(symbolStyle),"pointer"!==pointer.type&&pointer.setColor(visualColor);pointer.setStyle(itemModel.getModel(["pointer","itemStyle"]).getItemStyle()),"auto"===pointer.style.fill&&pointer.setStyle("fill",getColor((0,number.NU)(data.get(valueDim,idx),valueExtent,[0,1],!0))),pointer.z2EmphasisLift=0,(0,states.WO)(pointer,itemModel),(0,states.k5)(pointer,focus,blurScope,emphasisDisabled)}if(showProgress){var progress=progressList[idx];progress.useStyle(data.getItemVisual(idx,"style")),progress.setStyle(itemModel.getModel(["progress","itemStyle"]).getItemStyle()),progress.z2EmphasisLift=0,(0,states.WO)(progress,itemModel),(0,states.k5)(progress,focus,blurScope,emphasisDisabled)}})),this._progressEls=progressList)},GaugeView.prototype._renderAnchor=function(seriesModel,posInfo){var anchorModel=seriesModel.getModel("anchor");if(anchorModel.get("show")){var anchorSize=anchorModel.get("size"),anchorType=anchorModel.get("icon"),offsetCenter=anchorModel.get("offsetCenter"),anchorKeepAspect=anchorModel.get("keepAspect"),anchor=(0,util_symbol.th)(anchorType,posInfo.cx-anchorSize/2+(0,number.GM)(offsetCenter[0],posInfo.r),posInfo.cy-anchorSize/2+(0,number.GM)(offsetCenter[1],posInfo.r),anchorSize,anchorSize,null,anchorKeepAspect);anchor.z2=anchorModel.get("showAbove")?1:0,anchor.setStyle(anchorModel.getModel("itemStyle").getItemStyle()),this.group.add(anchor)}},GaugeView.prototype._renderTitleAndDetail=function(seriesModel,ecModel,api,getColor,posInfo){var _this=this,data=seriesModel.getData(),valueDim=data.mapDimension("value"),minVal=+seriesModel.get("min"),maxVal=+seriesModel.get("max"),contentGroup=new Group.Z,newTitleEls=[],newDetailEls=[],hasAnimation=seriesModel.isAnimationEnabled(),showPointerAbove=seriesModel.get(["pointer","showAbove"]);data.diff(this._data).add((function(idx){newTitleEls[idx]=new Text.ZP({silent:!0}),newDetailEls[idx]=new Text.ZP({silent:!0})})).update((function(idx,oldIdx){newTitleEls[idx]=_this._titleEls[oldIdx],newDetailEls[idx]=_this._detailEls[oldIdx]})).execute(),data.each((function(idx){var itemModel=data.getItemModel(idx),value=data.get(valueDim,idx),itemGroup=new Group.Z,autoColor=getColor((0,number.NU)(value,[minVal,maxVal],[0,1],!0)),itemTitleModel=itemModel.getModel("title");if(itemTitleModel.get("show")){var titleOffsetCenter=itemTitleModel.get("offsetCenter"),titleX=posInfo.cx+(0,number.GM)(titleOffsetCenter[0],posInfo.r),titleY=posInfo.cy+(0,number.GM)(titleOffsetCenter[1],posInfo.r);(labelEl=newTitleEls[idx]).attr({z2:showPointerAbove?0:2,style:(0,labelStyle.Lr)(itemTitleModel,{x:titleX,y:titleY,text:data.getName(idx),align:"center",verticalAlign:"middle"},{inheritColor:autoColor})}),itemGroup.add(labelEl)}var itemDetailModel=itemModel.getModel("detail");if(itemDetailModel.get("show")){var detailOffsetCenter=itemDetailModel.get("offsetCenter"),detailX=posInfo.cx+(0,number.GM)(detailOffsetCenter[0],posInfo.r),detailY=posInfo.cy+(0,number.GM)(detailOffsetCenter[1],posInfo.r),width=(0,number.GM)(itemDetailModel.get("width"),posInfo.r),height=(0,number.GM)(itemDetailModel.get("height"),posInfo.r),detailColor=seriesModel.get(["progress","show"])?data.getItemVisual(idx,"style").fill:autoColor,labelEl=newDetailEls[idx],formatter_1=itemDetailModel.get("formatter");labelEl.attr({z2:showPointerAbove?0:2,style:(0,labelStyle.Lr)(itemDetailModel,{x:detailX,y:detailY,text:formatLabel(value,formatter_1),width:isNaN(width)?null:width,height:isNaN(height)?null:height,align:"center",verticalAlign:"middle"},{inheritColor:detailColor})}),(0,labelStyle.pe)(labelEl,{normal:itemDetailModel},value,(function(value){return formatLabel(value,formatter_1)})),hasAnimation&&(0,labelStyle.tD)(labelEl,idx,data,seriesModel,{getFormattedLabel:function(labelDataIndex,status,dataType,labelDimIndex,fmt,extendParams){return formatLabel(extendParams?extendParams.interpolatedValue:value,formatter_1)}}),itemGroup.add(labelEl)}contentGroup.add(itemGroup)})),this.group.add(contentGroup),this._titleEls=newTitleEls,this._detailEls=newDetailEls},GaugeView.type="gauge",GaugeView}(Chart.Z);const gauge_GaugeView=GaugeView;const GaugeSeries=function(_super){function GaugeSeriesModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=GaugeSeriesModel.type,_this.visualStyleAccessPath="itemStyle",_this}return(0,tslib_es6.ZT)(GaugeSeriesModel,_super),GaugeSeriesModel.prototype.getInitialData=function(option,ecModel){return(0,createSeriesDataSimply.Z)(this,["value"])},GaugeSeriesModel.type="series.gauge",GaugeSeriesModel.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},GaugeSeriesModel}(Series.Z);var opacityAccessPath=["itemStyle","opacity"],FunnelPiece=function(_super){function FunnelPiece(data,idx){var _this=_super.call(this)||this,polygon=_this,labelLine=new shape_Polyline.Z,text=new Text.ZP;return polygon.setTextContent(text),_this.setTextGuideLine(labelLine),_this.updateData(data,idx,!0),_this}return(0,tslib_es6.ZT)(FunnelPiece,_super),FunnelPiece.prototype.updateData=function(data,idx,firstCreate){var seriesModel=data.hostModel,itemModel=data.getItemModel(idx),layout=data.getItemLayout(idx),emphasisModel=itemModel.getModel("emphasis"),opacity=itemModel.get(opacityAccessPath);opacity=null==opacity?1:opacity,firstCreate||(0,basicTransition.Zi)(this),this.useStyle(data.getItemVisual(idx,"style")),this.style.lineJoin="round",firstCreate?(this.setShape({points:layout.points}),this.style.opacity=0,basicTransition.KZ(this,{style:{opacity}},seriesModel,idx)):basicTransition.D(this,{style:{opacity},shape:{points:layout.points}},seriesModel,idx),(0,states.WO)(this,itemModel),this._updateLabel(data,idx),(0,states.k5)(this,emphasisModel.get("focus"),emphasisModel.get("blurScope"),emphasisModel.get("disabled"))},FunnelPiece.prototype._updateLabel=function(data,idx){var labelLine=this.getTextGuideLine(),labelText=this.getTextContent(),seriesModel=data.hostModel,itemModel=data.getItemModel(idx),labelLayout=data.getItemLayout(idx).label,style=data.getItemVisual(idx,"style"),visualColor=style.fill;(0,labelStyle.ni)(labelText,(0,labelStyle.k3)(itemModel),{labelFetcher:data.hostModel,labelDataIndex:idx,defaultOpacity:style.opacity,defaultText:data.getName(idx)},{normal:{align:labelLayout.textAlign,verticalAlign:labelLayout.verticalAlign}}),this.setTextConfig({local:!0,inside:!!labelLayout.inside,insideStroke:visualColor,outsideFill:visualColor});var linePoints=labelLayout.linePoints;labelLine.setShape({points:linePoints}),this.textGuideLineConfig={anchor:linePoints?new Point.Z(linePoints[0][0],linePoints[0][1]):null},basicTransition.D(labelText,{style:{x:labelLayout.x,y:labelLayout.y}},seriesModel,idx),labelText.attr({rotation:labelLayout.rotation,originX:labelLayout.x,originY:labelLayout.y,z2:10}),(0,labelGuideHelper.Iu)(this,(0,labelGuideHelper.$x)(itemModel),{stroke:visualColor})},FunnelPiece}(Polygon.Z);const funnel_FunnelView=function(_super){function FunnelView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=FunnelView.type,_this.ignoreLabelLineUpdate=!0,_this}return(0,tslib_es6.ZT)(FunnelView,_super),FunnelView.prototype.render=function(seriesModel,ecModel,api){var data=seriesModel.getData(),oldData=this._data,group=this.group;data.diff(oldData).add((function(idx){var funnelPiece=new FunnelPiece(data,idx);data.setItemGraphicEl(idx,funnelPiece),group.add(funnelPiece)})).update((function(newIdx,oldIdx){var piece=oldData.getItemGraphicEl(oldIdx);piece.updateData(data,newIdx),group.add(piece),data.setItemGraphicEl(newIdx,piece)})).remove((function(idx){var piece=oldData.getItemGraphicEl(idx);basicTransition.XD(piece,seriesModel,idx)})).execute(),this._data=data},FunnelView.prototype.remove=function(){this.group.removeAll(),this._data=null},FunnelView.prototype.dispose=function(){},FunnelView.type="funnel",FunnelView}(Chart.Z);var FunnelSeriesModel=function(_super){function FunnelSeriesModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=FunnelSeriesModel.type,_this}return(0,tslib_es6.ZT)(FunnelSeriesModel,_super),FunnelSeriesModel.prototype.init=function(option){_super.prototype.init.apply(this,arguments),this.legendVisualProvider=new visual_LegendVisualProvider(util.bind(this.getData,this),util.bind(this.getRawData,this)),this._defaultLabelLine(option)},FunnelSeriesModel.prototype.getInitialData=function(option,ecModel){return(0,createSeriesDataSimply.Z)(this,{coordDimensions:["value"],encodeDefaulter:util.curry(sourceHelper.Ss,this)})},FunnelSeriesModel.prototype._defaultLabelLine=function(option){(0,util_model.Cc)(option,"labelLine",["show"]);var labelLineNormalOpt=option.labelLine,labelLineEmphasisOpt=option.emphasis.labelLine;labelLineNormalOpt.show=labelLineNormalOpt.show&&option.label.show,labelLineEmphasisOpt.show=labelLineEmphasisOpt.show&&option.emphasis.label.show},FunnelSeriesModel.prototype.getDataParams=function(dataIndex){var data=this.getData(),params=_super.prototype.getDataParams.call(this,dataIndex),valueDim=data.mapDimension("value"),sum=data.getSum(valueDim);return params.percent=sum?+(data.get(valueDim,dataIndex)/sum*100).toFixed(2):0,params.$vars.push("percent"),params},FunnelSeriesModel.type="series.funnel",FunnelSeriesModel.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},FunnelSeriesModel}(Series.Z);const FunnelSeries=FunnelSeriesModel;function funnelLayout(ecModel,api){ecModel.eachSeriesByType("funnel",(function(seriesModel){var data=seriesModel.getData(),valueDim=data.mapDimension("value"),sort=seriesModel.get("sort"),viewRect=function funnelLayout_getViewRect(seriesModel,api){return layout.ME(seriesModel.getBoxLayoutParams(),{width:api.getWidth(),height:api.getHeight()})}(seriesModel,api),orient=seriesModel.get("orient"),viewWidth=viewRect.width,viewHeight=viewRect.height,indices=function getSortedIndices(data,sort){for(var valueDim=data.mapDimension("value"),valueArr=data.mapArray(valueDim,(function(val){return val})),indices=[],isAscending="ascending"===sort,i=0,len=data.count();i<len;i++)indices[i]=i;return(0,util.isFunction)(sort)?indices.sort(sort):"none"!==sort&&indices.sort((function(a,b){return isAscending?valueArr[a]-valueArr[b]:valueArr[b]-valueArr[a]})),indices}(data,sort),x=viewRect.x,y=viewRect.y,sizeExtent="horizontal"===orient?[(0,number.GM)(seriesModel.get("minSize"),viewHeight),(0,number.GM)(seriesModel.get("maxSize"),viewHeight)]:[(0,number.GM)(seriesModel.get("minSize"),viewWidth),(0,number.GM)(seriesModel.get("maxSize"),viewWidth)],dataExtent=data.getDataExtent(valueDim),min=seriesModel.get("min"),max=seriesModel.get("max");null==min&&(min=Math.min(dataExtent[0],0)),null==max&&(max=dataExtent[1]);var funnelAlign=seriesModel.get("funnelAlign"),gap=seriesModel.get("gap"),itemSize=(("horizontal"===orient?viewWidth:viewHeight)-gap*(data.count()-1))/data.count(),getLinePoints=function(idx,offset){if("horizontal"===orient){var val_1=data.get(valueDim,idx)||0,itemHeight=(0,number.NU)(val_1,[min,max],sizeExtent,!0),y0=void 0;switch(funnelAlign){case"top":y0=y;break;case"center":y0=y+(viewHeight-itemHeight)/2;break;case"bottom":y0=y+(viewHeight-itemHeight)}return[[offset,y0],[offset,y0+itemHeight]]}var x0,val=data.get(valueDim,idx)||0,itemWidth=(0,number.NU)(val,[min,max],sizeExtent,!0);switch(funnelAlign){case"left":x0=x;break;case"center":x0=x+(viewWidth-itemWidth)/2;break;case"right":x0=x+viewWidth-itemWidth}return[[x0,offset],[x0+itemWidth,offset]]};"ascending"===sort&&(itemSize=-itemSize,gap=-gap,"horizontal"===orient?x+=viewWidth:y+=viewHeight,indices=indices.reverse());for(var i=0;i<indices.length;i++){var idx=indices[i],nextIdx=indices[i+1],itemModel=data.getItemModel(idx);if("horizontal"===orient){var width=itemModel.get(["itemStyle","width"]);null==width?width=itemSize:(width=(0,number.GM)(width,viewWidth),"ascending"===sort&&(width=-width));var start=getLinePoints(idx,x),end=getLinePoints(nextIdx,x+width);x+=width+gap,data.setItemLayout(idx,{points:start.concat(end.slice().reverse())})}else{var height=itemModel.get(["itemStyle","height"]);null==height?height=itemSize:(height=(0,number.GM)(height,viewHeight),"ascending"===sort&&(height=-height));start=getLinePoints(idx,y),end=getLinePoints(nextIdx,y+height);y+=height+gap,data.setItemLayout(idx,{points:start.concat(end.slice().reverse())})}}!function labelLayout(data){var orient=data.hostModel.get("orient");data.each((function(idx){var textAlign,textX,textY,linePoints,itemModel=data.getItemModel(idx),labelPosition=itemModel.getModel("label").get("position"),labelLineModel=itemModel.getModel("labelLine"),layout=data.getItemLayout(idx),points=layout.points,isLabelInside="inner"===labelPosition||"inside"===labelPosition||"center"===labelPosition||"insideLeft"===labelPosition||"insideRight"===labelPosition;if(isLabelInside)"insideLeft"===labelPosition?(textX=(points[0][0]+points[3][0])/2+5,textY=(points[0][1]+points[3][1])/2,textAlign="left"):"insideRight"===labelPosition?(textX=(points[1][0]+points[2][0])/2-5,textY=(points[1][1]+points[2][1])/2,textAlign="right"):(textX=(points[0][0]+points[1][0]+points[2][0]+points[3][0])/4,textY=(points[0][1]+points[1][1]+points[2][1]+points[3][1])/4,textAlign="center"),linePoints=[[textX,textY],[textX,textY]];else{var x1=void 0,y1=void 0,x2=void 0,y2=void 0,labelLineLen=labelLineModel.get("length");"left"===labelPosition?(x1=(points[3][0]+points[0][0])/2,y1=(points[3][1]+points[0][1])/2,textX=(x2=x1-labelLineLen)-5,textAlign="right"):"right"===labelPosition?(x1=(points[1][0]+points[2][0])/2,y1=(points[1][1]+points[2][1])/2,textX=(x2=x1+labelLineLen)+5,textAlign="left"):"top"===labelPosition?(x1=(points[3][0]+points[0][0])/2,textY=(y2=(y1=(points[3][1]+points[0][1])/2)-labelLineLen)-5,textAlign="center"):"bottom"===labelPosition?(x1=(points[1][0]+points[2][0])/2,textY=(y2=(y1=(points[1][1]+points[2][1])/2)+labelLineLen)+5,textAlign="center"):"rightTop"===labelPosition?(x1="horizontal"===orient?points[3][0]:points[1][0],y1="horizontal"===orient?points[3][1]:points[1][1],"horizontal"===orient?(textY=(y2=y1-labelLineLen)-5,textAlign="center"):(textX=(x2=x1+labelLineLen)+5,textAlign="top")):"rightBottom"===labelPosition?(x1=points[2][0],y1=points[2][1],"horizontal"===orient?(textY=(y2=y1+labelLineLen)+5,textAlign="center"):(textX=(x2=x1+labelLineLen)+5,textAlign="bottom")):"leftTop"===labelPosition?(x1=points[0][0],y1="horizontal"===orient?points[0][1]:points[1][1],"horizontal"===orient?(textY=(y2=y1-labelLineLen)-5,textAlign="center"):(textX=(x2=x1-labelLineLen)-5,textAlign="right")):"leftBottom"===labelPosition?(x1="horizontal"===orient?points[1][0]:points[3][0],y1="horizontal"===orient?points[1][1]:points[2][1],"horizontal"===orient?(textY=(y2=y1+labelLineLen)+5,textAlign="center"):(textX=(x2=x1-labelLineLen)-5,textAlign="right")):(x1=(points[1][0]+points[2][0])/2,y1=(points[1][1]+points[2][1])/2,"horizontal"===orient?(textY=(y2=y1+labelLineLen)+5,textAlign="center"):(textX=(x2=x1+labelLineLen)+5,textAlign="left")),"horizontal"===orient?textX=x2=x1:textY=y2=y1,linePoints=[[x1,y1],[x2,y2]]}layout.label={linePoints,x:textX,y:textY,verticalAlign:"middle",textAlign,inside:isLabelInside}}))}(data)}))}var ParallelView=function(_super){function ParallelView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=ParallelView.type,_this._dataGroup=new Group.Z,_this._initialized=!1,_this}return(0,tslib_es6.ZT)(ParallelView,_super),ParallelView.prototype.init=function(){this.group.add(this._dataGroup)},ParallelView.prototype.render=function(seriesModel,ecModel,api,payload){this._progressiveEls=null;var dataGroup=this._dataGroup,data=seriesModel.getData(),oldData=this._data,coordSys=seriesModel.coordinateSystem,dimensions=coordSys.dimensions,seriesScope=ParallelView_makeSeriesScope(seriesModel);if(data.diff(oldData).add((function add(newDataIndex){var line=addEl(data,dataGroup,newDataIndex,dimensions,coordSys);updateElCommon(line,data,newDataIndex,seriesScope)})).update((function update(newDataIndex,oldDataIndex){var line=oldData.getItemGraphicEl(oldDataIndex),points=createLinePoints(data,newDataIndex,dimensions,coordSys);data.setItemGraphicEl(newDataIndex,line),basicTransition.D(line,{shape:{points}},seriesModel,newDataIndex),(0,basicTransition.Zi)(line),updateElCommon(line,data,newDataIndex,seriesScope)})).remove((function remove(oldDataIndex){var line=oldData.getItemGraphicEl(oldDataIndex);dataGroup.remove(line)})).execute(),!this._initialized){this._initialized=!0;var clipPath=function createGridClipShape(coordSys,seriesModel,cb){var parallelModel=coordSys.model,rect=coordSys.getRect(),rectEl=new Rect.Z({shape:{x:rect.x,y:rect.y,width:rect.width,height:rect.height}}),dim="horizontal"===parallelModel.get("layout")?"width":"height";return rectEl.setShape(dim,0),basicTransition.KZ(rectEl,{shape:{width:rect.width,height:rect.height}},seriesModel,cb),rectEl}(coordSys,seriesModel,(function(){setTimeout((function(){dataGroup.removeClipPath()}))}));dataGroup.setClipPath(clipPath)}this._data=data},ParallelView.prototype.incrementalPrepareRender=function(seriesModel,ecModel,api){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},ParallelView.prototype.incrementalRender=function(taskParams,seriesModel,ecModel){for(var data=seriesModel.getData(),coordSys=seriesModel.coordinateSystem,dimensions=coordSys.dimensions,seriesScope=ParallelView_makeSeriesScope(seriesModel),progressiveEls=this._progressiveEls=[],dataIndex=taskParams.start;dataIndex<taskParams.end;dataIndex++){var line=addEl(data,this._dataGroup,dataIndex,dimensions,coordSys);line.incremental=!0,updateElCommon(line,data,dataIndex,seriesScope),progressiveEls.push(line)}},ParallelView.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},ParallelView.type="parallel",ParallelView}(Chart.Z);function createLinePoints(data,dataIndex,dimensions,coordSys){for(var val,points=[],i=0;i<dimensions.length;i++){var dimName=dimensions[i],value=data.get(data.mapDimension(dimName),dataIndex);val=value,("category"===coordSys.getAxis(dimName).type?null==val:null==val||isNaN(val))||points.push(coordSys.dataToPoint(value,dimName))}return points}function addEl(data,dataGroup,dataIndex,dimensions,coordSys){var points=createLinePoints(data,dataIndex,dimensions,coordSys),line=new shape_Polyline.Z({shape:{points},z2:10});return dataGroup.add(line),data.setItemGraphicEl(dataIndex,line),line}function ParallelView_makeSeriesScope(seriesModel){var smooth=seriesModel.get("smooth",!0);return!0===smooth&&(smooth=.3),smooth=(0,number.FK)(smooth),(0,util.eqNaN)(smooth)&&(smooth=0),{smooth}}function updateElCommon(el,data,dataIndex,seriesScope){el.useStyle(data.getItemVisual(dataIndex,"style")),el.style.fill=null,el.setShape("smooth",seriesScope.smooth);var itemModel=data.getItemModel(dataIndex),emphasisModel=itemModel.getModel("emphasis");(0,states.WO)(el,itemModel,"lineStyle"),(0,states.k5)(el,emphasisModel.get("focus"),emphasisModel.get("blurScope"),emphasisModel.get("disabled"))}const parallel_ParallelView=ParallelView;function makeDefaultEncode(seriesModel){var parallelModel=seriesModel.ecModel.getComponent("parallel",seriesModel.get("parallelIndex"));if(parallelModel){var encodeDefine={};return(0,util.each)(parallelModel.dimensions,(function(axisDim){var dataDimIndex=function convertDimNameToNumber(dimName){return+dimName.replace("dim","")}(axisDim);encodeDefine[axisDim]=dataDimIndex})),encodeDefine}}const ParallelSeries=function(_super){function ParallelSeriesModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=ParallelSeriesModel.type,_this.visualStyleAccessPath="lineStyle",_this.visualDrawType="stroke",_this}return(0,tslib_es6.ZT)(ParallelSeriesModel,_super),ParallelSeriesModel.prototype.getInitialData=function(option,ecModel){return(0,createSeriesData.Z)(null,this,{useEncodeDefaulter:(0,util.bind)(makeDefaultEncode,null,this)})},ParallelSeriesModel.prototype.getRawIndicesByActiveState=function(activeState){var coordSys=this.coordinateSystem,data=this.getData(),indices=[];return coordSys.eachActiveState(data,(function(theActiveState,dataIndex){activeState===theActiveState&&indices.push(data.getRawIndex(dataIndex))})),indices},ParallelSeriesModel.type="series.parallel",ParallelSeriesModel.dependencies=["parallel"],ParallelSeriesModel.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},ParallelSeriesModel}(Series.Z);var parallelVisual_opacityAccessPath=["lineStyle","opacity"];const parallel_parallelVisual={seriesType:"parallel",reset:function(seriesModel,ecModel){var coordSys=seriesModel.coordinateSystem,opacityMap={normal:seriesModel.get(["lineStyle","opacity"]),active:seriesModel.get("activeOpacity"),inactive:seriesModel.get("inactiveOpacity")};return{progress:function(params,data){coordSys.eachActiveState(data,(function(activeState,dataIndex){var opacity=opacityMap[activeState];if("normal"===activeState&&data.hasItemOption){var itemOpacity=data.getItemModel(dataIndex).get(parallelVisual_opacityAccessPath,!0);null!=itemOpacity&&(opacity=itemOpacity)}data.ensureUniqueItemVisual(dataIndex,"style").opacity=opacity}),params.start,params.end)}}}};function parallelPreprocessor(option){!function createParallelIfNeeded(option){if(option.parallel)return;var hasParallelSeries=!1;util.each(option.series,(function(seriesOpt){seriesOpt&&"parallel"===seriesOpt.type&&(hasParallelSeries=!0)})),hasParallelSeries&&(option.parallel=[{}])}(option),function mergeAxisOptionFromParallel(option){var axes=util_model.kF(option.parallelAxis);util.each(axes,(function(axisOption){if(util.isObject(axisOption)){var parallelIndex=axisOption.parallelIndex||0,parallelOption=util_model.kF(option.parallel)[parallelIndex];parallelOption&&parallelOption.parallelAxisDefault&&util.merge(axisOption,parallelOption.parallelAxisDefault,!1)}}))}(option)}var throttle=__webpack_require__("./node_modules/echarts/lib/util/throttle.js"),ParallelView_ParallelView=function(_super){function ParallelView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=ParallelView.type,_this}return(0,tslib_es6.ZT)(ParallelView,_super),ParallelView.prototype.render=function(parallelModel,ecModel,api){this._model=parallelModel,this._api=api,this._handlers||(this._handlers={},(0,util.each)(handlers,(function(handler,eventName){api.getZr().on(eventName,this._handlers[eventName]=(0,util.bind)(handler,this))}),this)),(0,throttle.T9)(this,"_throttledDispatchExpand",parallelModel.get("axisExpandRate"),"fixRate")},ParallelView.prototype.dispose=function(ecModel,api){(0,throttle.ZH)(this,"_throttledDispatchExpand"),(0,util.each)(this._handlers,(function(handler,eventName){api.getZr().off(eventName,handler)})),this._handlers=null},ParallelView.prototype._throttledDispatchExpand=function(opt){this._dispatchExpand(opt)},ParallelView.prototype._dispatchExpand=function(opt){opt&&this._api.dispatchAction((0,util.extend)({type:"parallelAxisExpand"},opt))},ParallelView.type="parallel",ParallelView}(Component.Z),handlers={mousedown:function(e){checkTrigger(this,"click")&&(this._mouseDownPoint=[e.offsetX,e.offsetY])},mouseup:function(e){var mouseDownPoint=this._mouseDownPoint;if(checkTrigger(this,"click")&&mouseDownPoint){var point=[e.offsetX,e.offsetY];if(Math.pow(mouseDownPoint[0]-point[0],2)+Math.pow(mouseDownPoint[1]-point[1],2)>5)return;var result=this._model.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX,e.offsetY]);"none"!==result.behavior&&this._dispatchExpand({axisExpandWindow:result.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(e){if(!this._mouseDownPoint&&checkTrigger(this,"mousemove")){var model=this._model,result=model.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX,e.offsetY]),behavior=result.behavior;"jump"===behavior&&this._throttledDispatchExpand.debounceNextCall(model.get("axisExpandDebounce")),this._throttledDispatchExpand("none"===behavior?null:{axisExpandWindow:result.axisExpandWindow,animation:"jump"===behavior?null:{duration:0}})}}};function checkTrigger(view,triggerOn){var model=view._model;return model.get("axisExpandable")&&model.get("axisExpandTriggerOn")===triggerOn}const component_parallel_ParallelView=ParallelView_ParallelView;const parallel_ParallelModel=function(_super){function ParallelModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=ParallelModel.type,_this}return(0,tslib_es6.ZT)(ParallelModel,_super),ParallelModel.prototype.init=function(){_super.prototype.init.apply(this,arguments),this.mergeOption({})},ParallelModel.prototype.mergeOption=function(newOption){var thisOption=this.option;newOption&&util.merge(thisOption,newOption,!0),this._initDimensions()},ParallelModel.prototype.contains=function(model,ecModel){var parallelIndex=model.get("parallelIndex");return null!=parallelIndex&&ecModel.getComponent("parallel",parallelIndex)===this},ParallelModel.prototype.setAxisExpand=function(opt){util.each(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],(function(name){opt.hasOwnProperty(name)&&(this.option[name]=opt[name])}),this)},ParallelModel.prototype._initDimensions=function(){var dimensions=this.dimensions=[],parallelAxisIndex=this.parallelAxisIndex=[],axisModels=util.filter(this.ecModel.queryComponents({mainType:"parallelAxis"}),(function(axisModel){return(axisModel.get("parallelIndex")||0)===this.componentIndex}),this);util.each(axisModels,(function(axisModel){dimensions.push("dim"+axisModel.get("dim")),parallelAxisIndex.push(axisModel.componentIndex)}))},ParallelModel.type="parallel",ParallelModel.dependencies=["parallelAxis"],ParallelModel.layoutMode="box",ParallelModel.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},ParallelModel}(model_Component.Z);const parallel_ParallelAxis=function(_super){function ParallelAxis(dim,scale,coordExtent,axisType,axisIndex){var _this=_super.call(this,dim,scale,coordExtent)||this;return _this.type=axisType||"value",_this.axisIndex=axisIndex,_this}return(0,tslib_es6.ZT)(ParallelAxis,_super),ParallelAxis.prototype.isHorizontal=function(){return"horizontal"!==this.coordinateSystem.getModel().get("layout")},ParallelAxis}(Axis.Z);function sliderMove(delta,handleEnds,extent,handleIndex,minSpan,maxSpan){delta=delta||0;var extentSpan=extent[1]-extent[0];if(null!=minSpan&&(minSpan=restrict(minSpan,[0,extentSpan])),null!=maxSpan&&(maxSpan=Math.max(maxSpan,null!=minSpan?minSpan:0)),"all"===handleIndex){var handleSpan=Math.abs(handleEnds[1]-handleEnds[0]);handleSpan=restrict(handleSpan,[0,extentSpan]),minSpan=maxSpan=restrict(handleSpan,[minSpan,maxSpan]),handleIndex=0}handleEnds[0]=restrict(handleEnds[0],extent),handleEnds[1]=restrict(handleEnds[1],extent);var originalDistSign=getSpanSign(handleEnds,handleIndex);handleEnds[handleIndex]+=delta;var currDistSign,extentMinSpan=minSpan||0,realExtent=extent.slice();return originalDistSign.sign<0?realExtent[0]+=extentMinSpan:realExtent[1]-=extentMinSpan,handleEnds[handleIndex]=restrict(handleEnds[handleIndex],realExtent),currDistSign=getSpanSign(handleEnds,handleIndex),null!=minSpan&&(currDistSign.sign!==originalDistSign.sign||currDistSign.span<minSpan)&&(handleEnds[1-handleIndex]=handleEnds[handleIndex]+originalDistSign.sign*minSpan),currDistSign=getSpanSign(handleEnds,handleIndex),null!=maxSpan&&currDistSign.span>maxSpan&&(handleEnds[1-handleIndex]=handleEnds[handleIndex]+currDistSign.sign*maxSpan),handleEnds}function getSpanSign(handleEnds,handleIndex){var dist=handleEnds[handleIndex]-handleEnds[1-handleIndex];return{span:Math.abs(dist),sign:dist>0?-1:dist<0?1:handleIndex?-1:1}}function restrict(value,extend){return Math.min(null!=extend[1]?extend[1]:1/0,Math.max(null!=extend[0]?extend[0]:-1/0,value))}var each=util.each,Parallel_mathMin=Math.min,Parallel_mathMax=Math.max,mathFloor=Math.floor,mathCeil=Math.ceil,Parallel_round=number.NM,Parallel_PI=Math.PI;function Parallel_restrict(len,extent){return Parallel_mathMin(Parallel_mathMax(len,extent[0]),extent[1])}function layoutAxisWithoutExpand(axisIndex,layoutInfo){var step=layoutInfo.layoutLength/(layoutInfo.axisCount-1);return{position:step*axisIndex,axisNameAvailableWidth:step,axisLabelShow:!0}}function layoutAxisWithExpand(axisIndex,layoutInfo){var position,nameTruncateMaxWidth,layoutLength=layoutInfo.layoutLength,axisExpandWidth=layoutInfo.axisExpandWidth,axisCount=layoutInfo.axisCount,axisCollapseWidth=layoutInfo.axisCollapseWidth,winInnerIndices=layoutInfo.winInnerIndices,axisNameAvailableWidth=axisCollapseWidth,axisLabelShow=!1;return axisIndex<winInnerIndices[0]?(position=axisIndex*axisCollapseWidth,nameTruncateMaxWidth=axisCollapseWidth):axisIndex<=winInnerIndices[1]?(position=layoutInfo.axisExpandWindow0Pos+axisIndex*axisExpandWidth-layoutInfo.axisExpandWindow[0],axisNameAvailableWidth=axisExpandWidth,axisLabelShow=!0):(position=layoutLength-(axisCount-1-axisIndex)*axisCollapseWidth,nameTruncateMaxWidth=axisCollapseWidth),{position,axisNameAvailableWidth,axisLabelShow,nameTruncateMaxWidth}}const parallel_Parallel=function(){function Parallel(parallelModel,ecModel,api){this.type="parallel",this._axesMap=util.createHashMap(),this._axesLayout={},this.dimensions=parallelModel.dimensions,this._model=parallelModel,this._init(parallelModel,ecModel,api)}return Parallel.prototype._init=function(parallelModel,ecModel,api){var dimensions=parallelModel.dimensions,parallelAxisIndex=parallelModel.parallelAxisIndex;each(dimensions,(function(dim,idx){var axisIndex=parallelAxisIndex[idx],axisModel=ecModel.getComponent("parallelAxis",axisIndex),axis=this._axesMap.set(dim,new parallel_ParallelAxis(dim,axisHelper.aG(axisModel),[0,0],axisModel.get("type"),axisIndex)),isCategory="category"===axis.type;axis.onBand=isCategory&&axisModel.get("boundaryGap"),axis.inverse=axisModel.get("inverse"),axisModel.axis=axis,axis.model=axisModel,axis.coordinateSystem=axisModel.coordinateSystem=this}),this)},Parallel.prototype.update=function(ecModel,api){this._updateAxesFromSeries(this._model,ecModel)},Parallel.prototype.containPoint=function(point){var layoutInfo=this._makeLayoutInfo(),axisBase=layoutInfo.axisBase,layoutBase=layoutInfo.layoutBase,pixelDimIndex=layoutInfo.pixelDimIndex,pAxis=point[1-pixelDimIndex],pLayout=point[pixelDimIndex];return pAxis>=axisBase&&pAxis<=axisBase+layoutInfo.axisLength&&pLayout>=layoutBase&&pLayout<=layoutBase+layoutInfo.layoutLength},Parallel.prototype.getModel=function(){return this._model},Parallel.prototype._updateAxesFromSeries=function(parallelModel,ecModel){ecModel.eachSeries((function(seriesModel){if(parallelModel.contains(seriesModel,ecModel)){var data=seriesModel.getData();each(this.dimensions,(function(dim){var axis=this._axesMap.get(dim);axis.scale.unionExtentFromData(data,data.mapDimension(dim)),axisHelper.Jk(axis.scale,axis.model)}),this)}}),this)},Parallel.prototype.resize=function(parallelModel,api){this._rect=layout.ME(parallelModel.getBoxLayoutParams(),{width:api.getWidth(),height:api.getHeight()}),this._layoutAxes()},Parallel.prototype.getRect=function(){return this._rect},Parallel.prototype._makeLayoutInfo=function(){var winSize,parallelModel=this._model,rect=this._rect,xy=["x","y"],wh=["width","height"],layout=parallelModel.get("layout"),pixelDimIndex="horizontal"===layout?0:1,layoutLength=rect[wh[pixelDimIndex]],layoutExtent=[0,layoutLength],axisCount=this.dimensions.length,axisExpandWidth=Parallel_restrict(parallelModel.get("axisExpandWidth"),layoutExtent),axisExpandCount=Parallel_restrict(parallelModel.get("axisExpandCount")||0,[0,axisCount]),axisExpandable=parallelModel.get("axisExpandable")&&axisCount>3&&axisCount>axisExpandCount&&axisExpandCount>1&&axisExpandWidth>0&&layoutLength>0,axisExpandWindow=parallelModel.get("axisExpandWindow");axisExpandWindow?(winSize=Parallel_restrict(axisExpandWindow[1]-axisExpandWindow[0],layoutExtent),axisExpandWindow[1]=axisExpandWindow[0]+winSize):(winSize=Parallel_restrict(axisExpandWidth*(axisExpandCount-1),layoutExtent),(axisExpandWindow=[axisExpandWidth*(parallelModel.get("axisExpandCenter")||mathFloor(axisCount/2))-winSize/2])[1]=axisExpandWindow[0]+winSize);var axisCollapseWidth=(layoutLength-winSize)/(axisCount-axisExpandCount);axisCollapseWidth<3&&(axisCollapseWidth=0);var winInnerIndices=[mathFloor(Parallel_round(axisExpandWindow[0]/axisExpandWidth,1))+1,mathCeil(Parallel_round(axisExpandWindow[1]/axisExpandWidth,1))-1],axisExpandWindow0Pos=axisCollapseWidth/axisExpandWidth*axisExpandWindow[0];return{layout,pixelDimIndex,layoutBase:rect[xy[pixelDimIndex]],layoutLength,axisBase:rect[xy[1-pixelDimIndex]],axisLength:rect[wh[1-pixelDimIndex]],axisExpandable,axisExpandWidth,axisCollapseWidth,axisExpandWindow,axisCount,winInnerIndices,axisExpandWindow0Pos}},Parallel.prototype._layoutAxes=function(){var rect=this._rect,axes=this._axesMap,dimensions=this.dimensions,layoutInfo=this._makeLayoutInfo(),layout=layoutInfo.layout;axes.each((function(axis){var axisExtent=[0,layoutInfo.axisLength],idx=axis.inverse?1:0;axis.setExtent(axisExtent[idx],axisExtent[1-idx])})),each(dimensions,(function(dim,idx){var posInfo=(layoutInfo.axisExpandable?layoutAxisWithExpand:layoutAxisWithoutExpand)(idx,layoutInfo),positionTable={horizontal:{x:posInfo.position,y:layoutInfo.axisLength},vertical:{x:0,y:posInfo.position}},rotationTable={horizontal:Parallel_PI/2,vertical:0},position=[positionTable[layout].x+rect.x,positionTable[layout].y+rect.y],rotation=rotationTable[layout],transform=matrix.create();matrix.rotate(transform,transform,rotation),matrix.translate(transform,transform,position),this._axesLayout[dim]={position,rotation,transform,axisNameAvailableWidth:posInfo.axisNameAvailableWidth,axisLabelShow:posInfo.axisLabelShow,nameTruncateMaxWidth:posInfo.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}}),this)},Parallel.prototype.getAxis=function(dim){return this._axesMap.get(dim)},Parallel.prototype.dataToPoint=function(value,dim){return this.axisCoordToPoint(this._axesMap.get(dim).dataToCoord(value),dim)},Parallel.prototype.eachActiveState=function(data,callback,start,end){null==start&&(start=0),null==end&&(end=data.count());var axesMap=this._axesMap,dimensions=this.dimensions,dataDimensions=[],axisModels=[];util.each(dimensions,(function(axisDim){dataDimensions.push(data.mapDimension(axisDim)),axisModels.push(axesMap.get(axisDim).model)}));for(var hasActiveSet=this.hasAxisBrushed(),dataIndex=start;dataIndex<end;dataIndex++){var activeState=void 0;if(hasActiveSet){activeState="active";for(var values=data.getValues(dataDimensions,dataIndex),j=0,lenj=dimensions.length;j<lenj;j++){if("inactive"===axisModels[j].getActiveState(values[j])){activeState="inactive";break}}}else activeState="normal";callback(activeState,dataIndex)}},Parallel.prototype.hasAxisBrushed=function(){for(var dimensions=this.dimensions,axesMap=this._axesMap,hasActiveSet=!1,j=0,lenj=dimensions.length;j<lenj;j++)"normal"!==axesMap.get(dimensions[j]).model.getActiveState()&&(hasActiveSet=!0);return hasActiveSet},Parallel.prototype.axisCoordToPoint=function(coord,dim){var axisLayout=this._axesLayout[dim];return graphic.applyTransform([coord,0],axisLayout.transform)},Parallel.prototype.getAxisLayout=function(dim){return util.clone(this._axesLayout[dim])},Parallel.prototype.getSlidedAxisExpandWindow=function(point){var layoutInfo=this._makeLayoutInfo(),pixelDimIndex=layoutInfo.pixelDimIndex,axisExpandWindow=layoutInfo.axisExpandWindow.slice(),winSize=axisExpandWindow[1]-axisExpandWindow[0],extent=[0,layoutInfo.axisExpandWidth*(layoutInfo.axisCount-1)];if(!this.containPoint(point))return{behavior:"none",axisExpandWindow};var delta,pointCoord=point[pixelDimIndex]-layoutInfo.layoutBase-layoutInfo.axisExpandWindow0Pos,behavior="slide",axisCollapseWidth=layoutInfo.axisCollapseWidth,triggerArea=this._model.get("axisExpandSlideTriggerArea"),useJump=null!=triggerArea[0];if(axisCollapseWidth)useJump&&axisCollapseWidth&&pointCoord<winSize*triggerArea[0]?(behavior="jump",delta=pointCoord-winSize*triggerArea[2]):useJump&&axisCollapseWidth&&pointCoord>winSize*(1-triggerArea[0])?(behavior="jump",delta=pointCoord-winSize*(1-triggerArea[2])):(delta=pointCoord-winSize*triggerArea[1])>=0&&(delta=pointCoord-winSize*(1-triggerArea[1]))<=0&&(delta=0),(delta*=layoutInfo.axisExpandWidth/axisCollapseWidth)?sliderMove(delta,axisExpandWindow,extent,"all"):behavior="none";else{var winSize2=axisExpandWindow[1]-axisExpandWindow[0];(axisExpandWindow=[Parallel_mathMax(0,extent[1]*pointCoord/winSize2-winSize2/2)])[1]=Parallel_mathMin(extent[1],axisExpandWindow[0]+winSize2),axisExpandWindow[0]=axisExpandWindow[1]-winSize2}return{axisExpandWindow,behavior}},Parallel}();const parallelCreator={create:function createParallelCoordSys(ecModel,api){var coordSysList=[];return ecModel.eachComponent("parallel",(function(parallelModel,idx){var coordSys=new parallel_Parallel(parallelModel,ecModel,api);coordSys.name="parallel_"+idx,coordSys.resize(parallelModel,api),parallelModel.coordinateSystem=coordSys,coordSys.model=parallelModel,coordSysList.push(coordSys)})),ecModel.eachSeries((function(seriesModel){if("parallel"===seriesModel.get("coordinateSystem")){var parallelModel=seriesModel.getReferringComponents("parallel",util_model.C6).models[0];seriesModel.coordinateSystem=parallelModel.coordinateSystem}})),coordSysList}};var makeStyleMapper=__webpack_require__("./node_modules/echarts/lib/model/mixin/makeStyleMapper.js"),ParallelAxisModel=function(_super){function ParallelAxisModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=ParallelAxisModel.type,_this.activeIntervals=[],_this}return(0,tslib_es6.ZT)(ParallelAxisModel,_super),ParallelAxisModel.prototype.getAreaSelectStyle=function(){return(0,makeStyleMapper.Z)([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},ParallelAxisModel.prototype.setActiveIntervals=function(intervals){var activeIntervals=this.activeIntervals=util.clone(intervals);if(activeIntervals)for(var i=activeIntervals.length-1;i>=0;i--)number.dt(activeIntervals[i])},ParallelAxisModel.prototype.getActiveState=function(value){var activeIntervals=this.activeIntervals;if(!activeIntervals.length)return"normal";if(null==value||isNaN(+value))return"inactive";if(1===activeIntervals.length){var interval=activeIntervals[0];if(interval[0]<=value&&value<=interval[1])return"active"}else for(var i=0,len=activeIntervals.length;i<len;i++)if(activeIntervals[i][0]<=value&&value<=activeIntervals[i][1])return"active";return"inactive"},ParallelAxisModel}(model_Component.Z);util.mixin(ParallelAxisModel,axisModelCommonMixin.W);const parallel_AxisModel=ParallelAxisModel;var Eventful=__webpack_require__("./node_modules/zrender/lib/core/Eventful.js"),interactionMutex=__webpack_require__("./node_modules/echarts/lib/component/helper/interactionMutex.js"),DataDiffer=__webpack_require__("./node_modules/echarts/lib/data/DataDiffer.js"),BRUSH_PANEL_GLOBAL=!0,BrushController_mathMin=Math.min,BrushController_mathMax=Math.max,mathPow=Math.pow,COVER_Z=1e4,UNSELECT_THRESHOLD=6,MIN_RESIZE_LINE_WIDTH=6,DIRECTION_MAP={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},CURSOR_MAP={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},DEFAULT_BRUSH_OPT={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},baseUID=0,BrushController=function(_super){function BrushController(zr){var _this=_super.call(this)||this;return _this._track=[],_this._covers=[],_this._handlers={},_this._zr=zr,_this.group=new Group.Z,_this._uid="brushController_"+baseUID++,(0,util.each)(pointerHandlers,(function(handler,eventName){this._handlers[eventName]=(0,util.bind)(handler,this)}),_this),_this}return(0,tslib_es6.ZT)(BrushController,_super),BrushController.prototype.enableBrush=function(brushOption){return this._brushType&&this._doDisableBrush(),brushOption.brushType&&this._doEnableBrush(brushOption),this},BrushController.prototype._doEnableBrush=function(brushOption){var zr=this._zr;this._enableGlobalPan||interactionMutex.qn(zr,"globalPan",this._uid),(0,util.each)(this._handlers,(function(handler,eventName){zr.on(eventName,handler)})),this._brushType=brushOption.brushType,this._brushOption=(0,util.merge)((0,util.clone)(DEFAULT_BRUSH_OPT),brushOption,!0)},BrushController.prototype._doDisableBrush=function(){var zr=this._zr;interactionMutex.Ar(zr,"globalPan",this._uid),(0,util.each)(this._handlers,(function(handler,eventName){zr.off(eventName,handler)})),this._brushType=this._brushOption=null},BrushController.prototype.setPanels=function(panelOpts){if(panelOpts&&panelOpts.length){var panels_1=this._panels={};(0,util.each)(panelOpts,(function(panelOpts){panels_1[panelOpts.panelId]=(0,util.clone)(panelOpts)}))}else this._panels=null;return this},BrushController.prototype.mount=function(opt){opt=opt||{},this._enableGlobalPan=opt.enableGlobalPan;var thisGroup=this.group;return this._zr.add(thisGroup),thisGroup.attr({x:opt.x||0,y:opt.y||0,rotation:opt.rotation||0,scaleX:opt.scaleX||1,scaleY:opt.scaleY||1}),this._transform=thisGroup.getLocalTransform(),this},BrushController.prototype.updateCovers=function(coverConfigList){coverConfigList=(0,util.map)(coverConfigList,(function(coverConfig){return(0,util.merge)((0,util.clone)(DEFAULT_BRUSH_OPT),coverConfig,!0)}));var tmpIdPrefix="\0-brush-index-",oldCovers=this._covers,newCovers=this._covers=[],controller=this,creatingCover=this._creatingCover;return new DataDiffer.Z(oldCovers,coverConfigList,(function oldGetKey(cover,index){return getKey(cover.__brushOption,index)}),getKey).add(addOrUpdate).update(addOrUpdate).remove((function remove(oldIndex){oldCovers[oldIndex]!==creatingCover&&controller.group.remove(oldCovers[oldIndex])})).execute(),this;function getKey(brushOption,index){return(null!=brushOption.id?brushOption.id:tmpIdPrefix+index)+"-"+brushOption.brushType}function addOrUpdate(newIndex,oldIndex){var newBrushInternal=coverConfigList[newIndex];if(null!=oldIndex&&oldCovers[oldIndex]===creatingCover)newCovers[newIndex]=oldCovers[oldIndex];else{var cover=newCovers[newIndex]=null!=oldIndex?(oldCovers[oldIndex].__brushOption=newBrushInternal,oldCovers[oldIndex]):endCreating(controller,createCover(controller,newBrushInternal));updateCoverAfterCreation(controller,cover)}}},BrushController.prototype.unmount=function(){return this.enableBrush(!1),clearCovers(this),this._zr.remove(this.group),this},BrushController.prototype.dispose=function(){this.unmount(),this.off()},BrushController}(Eventful.Z);function createCover(controller,brushOption){var cover=coverRenderers[brushOption.brushType].createCover(controller,brushOption);return cover.__brushOption=brushOption,updateZ(cover,brushOption),controller.group.add(cover),cover}function endCreating(controller,creatingCover){var coverRenderer=getCoverRenderer(creatingCover);return coverRenderer.endCreating&&(coverRenderer.endCreating(controller,creatingCover),updateZ(creatingCover,creatingCover.__brushOption)),creatingCover}function updateCoverShape(controller,cover){var brushOption=cover.__brushOption;getCoverRenderer(cover).updateCoverShape(controller,cover,brushOption.range,brushOption)}function updateZ(cover,brushOption){var z=brushOption.z;null==z&&(z=COVER_Z),cover.traverse((function(el){el.z=z,el.z2=z}))}function updateCoverAfterCreation(controller,cover){getCoverRenderer(cover).updateCommon(controller,cover),updateCoverShape(controller,cover)}function getCoverRenderer(cover){return coverRenderers[cover.__brushOption.brushType]}function getPanelByPoint(controller,e,localCursorPoint){var panel,panels=controller._panels;if(!panels)return BRUSH_PANEL_GLOBAL;var transform=controller._transform;return(0,util.each)(panels,(function(pn){pn.isTargetByCursor(e,localCursorPoint,transform)&&(panel=pn)})),panel}function getPanelByCover(controller,cover){var panels=controller._panels;if(!panels)return BRUSH_PANEL_GLOBAL;var panelId=cover.__brushOption.panelId;return null!=panelId?panels[panelId]:BRUSH_PANEL_GLOBAL}function clearCovers(controller){var covers=controller._covers,originalLength=covers.length;return(0,util.each)(covers,(function(cover){controller.group.remove(cover)}),controller),covers.length=0,!!originalLength}function trigger(controller,opt){var areas=(0,util.map)(controller._covers,(function(cover){var brushOption=cover.__brushOption,range=(0,util.clone)(brushOption.range);return{brushType:brushOption.brushType,panelId:brushOption.panelId,range}}));controller.trigger("brush",{areas,isEnd:!!opt.isEnd,removeOnClick:!!opt.removeOnClick})}function getTrackEnds(track){var tail=track.length-1;return tail<0&&(tail=0),[track[0],track[tail]]}function createBaseRectCover(rectRangeConverter,controller,brushOption,edgeNameSequences){var cover=new Group.Z;return cover.add(new Rect.Z({name:"main",style:makeStyle(brushOption),silent:!0,draggable:!0,cursor:"move",drift:(0,util.curry)(driftRect,rectRangeConverter,controller,cover,["n","s","w","e"]),ondragend:(0,util.curry)(trigger,controller,{isEnd:!0})})),(0,util.each)(edgeNameSequences,(function(nameSequence){cover.add(new Rect.Z({name:nameSequence.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:(0,util.curry)(driftRect,rectRangeConverter,controller,cover,nameSequence),ondragend:(0,util.curry)(trigger,controller,{isEnd:!0})}))})),cover}function updateBaseRect(controller,cover,localRange,brushOption){var lineWidth=brushOption.brushStyle.lineWidth||0,handleSize=BrushController_mathMax(lineWidth,MIN_RESIZE_LINE_WIDTH),x=localRange[0][0],y=localRange[1][0],xa=x-lineWidth/2,ya=y-lineWidth/2,x2=localRange[0][1],y2=localRange[1][1],x2a=x2-handleSize+lineWidth/2,y2a=y2-handleSize+lineWidth/2,width=x2-x,height=y2-y,widtha=width+lineWidth,heighta=height+lineWidth;updateRectShape(controller,cover,"main",x,y,width,height),brushOption.transformable&&(updateRectShape(controller,cover,"w",xa,ya,handleSize,heighta),updateRectShape(controller,cover,"e",x2a,ya,handleSize,heighta),updateRectShape(controller,cover,"n",xa,ya,widtha,handleSize),updateRectShape(controller,cover,"s",xa,y2a,widtha,handleSize),updateRectShape(controller,cover,"nw",xa,ya,handleSize,handleSize),updateRectShape(controller,cover,"ne",x2a,ya,handleSize,handleSize),updateRectShape(controller,cover,"sw",xa,y2a,handleSize,handleSize),updateRectShape(controller,cover,"se",x2a,y2a,handleSize,handleSize))}function updateCommon(controller,cover){var brushOption=cover.__brushOption,transformable=brushOption.transformable,mainEl=cover.childAt(0);mainEl.useStyle(makeStyle(brushOption)),mainEl.attr({silent:!transformable,cursor:transformable?"move":"default"}),(0,util.each)([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],(function(nameSequence){var el=cover.childOfName(nameSequence.join("")),globalDir=1===nameSequence.length?getGlobalDirection1(controller,nameSequence[0]):function getGlobalDirection2(controller,localDirNameSeq){var globalDir=[getGlobalDirection1(controller,localDirNameSeq[0]),getGlobalDirection1(controller,localDirNameSeq[1])];return("e"===globalDir[0]||"w"===globalDir[0])&&globalDir.reverse(),globalDir.join("")}(controller,nameSequence);el&&el.attr({silent:!transformable,invisible:!transformable,cursor:transformable?CURSOR_MAP[globalDir]+"-resize":null})}))}function updateRectShape(controller,cover,name,x,y,w,h){var el=cover.childOfName(name);el&&el.setShape(function pointsToRect(points){var xmin=BrushController_mathMin(points[0][0],points[1][0]),ymin=BrushController_mathMin(points[0][1],points[1][1]),xmax=BrushController_mathMax(points[0][0],points[1][0]),ymax=BrushController_mathMax(points[0][1],points[1][1]);return{x:xmin,y:ymin,width:xmax-xmin,height:ymax-ymin}}(clipByPanel(controller,cover,[[x,y],[x+w,y+h]])))}function makeStyle(brushOption){return(0,util.defaults)({strokeNoScale:!0},brushOption.brushStyle)}function formatRectRange(x,y,x2,y2){var min=[BrushController_mathMin(x,x2),BrushController_mathMin(y,y2)],max=[BrushController_mathMax(x,x2),BrushController_mathMax(y,y2)];return[[min[0],max[0]],[min[1],max[1]]]}function getGlobalDirection1(controller,localDirName){var dir=graphic.transformDirection({w:"left",e:"right",n:"top",s:"bottom"}[localDirName],function getTransform(controller){return graphic.getTransform(controller.group)}(controller));return{left:"w",right:"e",top:"n",bottom:"s"}[dir]}function driftRect(rectRangeConverter,controller,cover,dirNameSequence,dx,dy){var brushOption=cover.__brushOption,rectRange=rectRangeConverter.toRectRange(brushOption.range),localDelta=toLocalDelta(controller,dx,dy);(0,util.each)(dirNameSequence,(function(dirName){var ind=DIRECTION_MAP[dirName];rectRange[ind[0]][ind[1]]+=localDelta[ind[0]]})),brushOption.range=rectRangeConverter.fromRectRange(formatRectRange(rectRange[0][0],rectRange[1][0],rectRange[0][1],rectRange[1][1])),updateCoverAfterCreation(controller,cover),trigger(controller,{isEnd:!1})}function driftPolygon(controller,cover,dx,dy){var range=cover.__brushOption.range,localDelta=toLocalDelta(controller,dx,dy);(0,util.each)(range,(function(point){point[0]+=localDelta[0],point[1]+=localDelta[1]})),updateCoverAfterCreation(controller,cover),trigger(controller,{isEnd:!1})}function toLocalDelta(controller,dx,dy){var thisGroup=controller.group,localD=thisGroup.transformCoordToLocal(dx,dy),localZero=thisGroup.transformCoordToLocal(0,0);return[localD[0]-localZero[0],localD[1]-localZero[1]]}function clipByPanel(controller,cover,data){var panel=getPanelByCover(controller,cover);return panel&&panel!==BRUSH_PANEL_GLOBAL?panel.clipPath(data,controller._transform):(0,util.clone)(data)}function preventDefault(e){var rawE=e.event;rawE.preventDefault&&rawE.preventDefault()}function mainShapeContain(cover,x,y){return cover.childOfName("main").contain(x,y)}function updateCoverByMouse(controller,e,localCursorPoint,isEnd){var eventParams,creatingCover=controller._creatingCover,panel=controller._creatingPanel,thisBrushOption=controller._brushOption;if(controller._track.push(localCursorPoint.slice()),function shouldShowCover(controller){var track=controller._track;if(!track.length)return!1;var p2=track[track.length-1],p1=track[0],dx=p2[0]-p1[0],dy=p2[1]-p1[1];return mathPow(dx*dx+dy*dy,.5)>UNSELECT_THRESHOLD}(controller)||creatingCover){if(panel&&!creatingCover){"single"===thisBrushOption.brushMode&&clearCovers(controller);var brushOption=(0,util.clone)(thisBrushOption);brushOption.brushType=determineBrushType(brushOption.brushType,panel),brushOption.panelId=panel===BRUSH_PANEL_GLOBAL?null:panel.panelId,creatingCover=controller._creatingCover=createCover(controller,brushOption),controller._covers.push(creatingCover)}if(creatingCover){var coverRenderer=coverRenderers[determineBrushType(controller._brushType,panel)];creatingCover.__brushOption.range=coverRenderer.getCreatingRange(clipByPanel(controller,creatingCover,controller._track)),isEnd&&(endCreating(controller,creatingCover),coverRenderer.updateCommon(controller,creatingCover)),updateCoverShape(controller,creatingCover),eventParams={isEnd}}}else isEnd&&"single"===thisBrushOption.brushMode&&thisBrushOption.removeOnClick&&getPanelByPoint(controller,e,localCursorPoint)&&clearCovers(controller)&&(eventParams={isEnd,removeOnClick:!0});return eventParams}function determineBrushType(brushType,panel){return"auto"===brushType?panel.defaultBrushType:brushType}var pointerHandlers={mousedown:function(e){if(this._dragging)handleDragEnd(this,e);else if(!e.target||!e.target.draggable){preventDefault(e);var localCursorPoint=this.group.transformCoordToLocal(e.offsetX,e.offsetY);this._creatingCover=null,(this._creatingPanel=getPanelByPoint(this,e,localCursorPoint))&&(this._dragging=!0,this._track=[localCursorPoint.slice()])}},mousemove:function(e){var x=e.offsetX,y=e.offsetY,localCursorPoint=this.group.transformCoordToLocal(x,y);if(function resetCursor(controller,e,localCursorPoint){if(controller._brushType&&!function isOutsideZrArea(controller,x,y){var zr=controller._zr;return x<0||x>zr.getWidth()||y<0||y>zr.getHeight()}(controller,e.offsetX,e.offsetY)){var zr=controller._zr,covers=controller._covers,currPanel=getPanelByPoint(controller,e,localCursorPoint);if(!controller._dragging)for(var i=0;i<covers.length;i++){var brushOption=covers[i].__brushOption;if(currPanel&&(currPanel===BRUSH_PANEL_GLOBAL||brushOption.panelId===currPanel.panelId)&&coverRenderers[brushOption.brushType].contain(covers[i],localCursorPoint[0],localCursorPoint[1]))return}currPanel&&zr.setCursorStyle("crosshair")}}(this,e,localCursorPoint),this._dragging){preventDefault(e);var eventParams=updateCoverByMouse(this,e,localCursorPoint,!1);eventParams&&trigger(this,eventParams)}},mouseup:function(e){handleDragEnd(this,e)}};function handleDragEnd(controller,e){if(controller._dragging){preventDefault(e);var x=e.offsetX,y=e.offsetY,localCursorPoint=controller.group.transformCoordToLocal(x,y),eventParams=updateCoverByMouse(controller,e,localCursorPoint,!0);controller._dragging=!1,controller._track=[],controller._creatingCover=null,eventParams&&trigger(controller,eventParams)}}var coverRenderers={lineX:getLineRenderer(0),lineY:getLineRenderer(1),rect:{createCover:function(controller,brushOption){function returnInput(range){return range}return createBaseRectCover({toRectRange:returnInput,fromRectRange:returnInput},controller,brushOption,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(localTrack){var ends=getTrackEnds(localTrack);return formatRectRange(ends[1][0],ends[1][1],ends[0][0],ends[0][1])},updateCoverShape:function(controller,cover,localRange,brushOption){updateBaseRect(controller,cover,localRange,brushOption)},updateCommon,contain:mainShapeContain},polygon:{createCover:function(controller,brushOption){var cover=new Group.Z;return cover.add(new shape_Polyline.Z({name:"main",style:makeStyle(brushOption),silent:!0})),cover},getCreatingRange:function(localTrack){return localTrack},endCreating:function(controller,cover){cover.remove(cover.childAt(0)),cover.add(new Polygon.Z({name:"main",draggable:!0,drift:(0,util.curry)(driftPolygon,controller,cover),ondragend:(0,util.curry)(trigger,controller,{isEnd:!0})}))},updateCoverShape:function(controller,cover,localRange,brushOption){cover.childAt(0).setShape({points:clipByPanel(controller,cover,localRange)})},updateCommon,contain:mainShapeContain}};function getLineRenderer(xyIndex){return{createCover:function(controller,brushOption){return createBaseRectCover({toRectRange:function(range){var rectRange=[range,[0,100]];return xyIndex&&rectRange.reverse(),rectRange},fromRectRange:function(rectRange){return rectRange[xyIndex]}},controller,brushOption,[[["w"],["e"]],[["n"],["s"]]][xyIndex])},getCreatingRange:function(localTrack){var ends=getTrackEnds(localTrack);return[BrushController_mathMin(ends[0][xyIndex],ends[1][xyIndex]),BrushController_mathMax(ends[0][xyIndex],ends[1][xyIndex])]},updateCoverShape:function(controller,cover,localRange,brushOption){var otherExtent,panel=getPanelByCover(controller,cover);if(panel!==BRUSH_PANEL_GLOBAL&&panel.getLinearBrushOtherExtent)otherExtent=panel.getLinearBrushOtherExtent(xyIndex);else{var zr=controller._zr;otherExtent=[0,[zr.getWidth(),zr.getHeight()][1-xyIndex]]}var rectRange=[localRange,otherExtent];xyIndex&&rectRange.reverse(),updateBaseRect(controller,cover,rectRange,brushOption)},updateCommon,contain:mainShapeContain}}const helper_BrushController=BrushController;function makeRectPanelClipPath(rect){return rect=normalizeRect(rect),function(localPoints){return graphic.clipPointsByRect(localPoints,rect)}}function makeLinearBrushOtherExtent(rect,specifiedXYIndex){return rect=normalizeRect(rect),function(xyIndex){var idx=null!=specifiedXYIndex?specifiedXYIndex:xyIndex,brushWidth=idx?rect.width:rect.height,base=idx?rect.x:rect.y;return[base,base+(brushWidth||0)]}}function makeRectIsTargetByCursor(rect,api,targetModel){var boundingRect=normalizeRect(rect);return function(e,localCursorPoint){return boundingRect.contain(localCursorPoint[0],localCursorPoint[1])&&!(0,cursorHelper.l)(e,api,targetModel)}}function normalizeRect(rect){return BoundingRect.Z.create(rect)}var elementList=["axisLine","axisTickLabel","axisName"];const axis_ParallelAxisView=function(_super){function ParallelAxisView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=ParallelAxisView.type,_this}return(0,tslib_es6.ZT)(ParallelAxisView,_super),ParallelAxisView.prototype.init=function(ecModel,api){_super.prototype.init.apply(this,arguments),(this._brushController=new helper_BrushController(api.getZr())).on("brush",util.bind(this._onBrush,this))},ParallelAxisView.prototype.render=function(axisModel,ecModel,api,payload){if(!function fromAxisAreaSelect(axisModel,ecModel,payload){return payload&&"axisAreaSelect"===payload.type&&ecModel.findComponents({mainType:"parallelAxis",query:payload})[0]===axisModel}(axisModel,ecModel,payload)){this.axisModel=axisModel,this.api=api,this.group.removeAll();var oldAxisGroup=this._axisGroup;if(this._axisGroup=new Group.Z,this.group.add(this._axisGroup),axisModel.get("show")){var coordSysModel=function getCoordSysModel(axisModel,ecModel){return ecModel.getComponent("parallel",axisModel.get("parallelIndex"))}(axisModel,ecModel),coordSys=coordSysModel.coordinateSystem,areaSelectStyle=axisModel.getAreaSelectStyle(),areaWidth=areaSelectStyle.width,dim=axisModel.axis.dim,axisLayout=coordSys.getAxisLayout(dim),builderOpt=util.extend({strokeContainThreshold:areaWidth},axisLayout),axisBuilder=new axis_AxisBuilder(axisModel,builderOpt);util.each(elementList,axisBuilder.add,axisBuilder),this._axisGroup.add(axisBuilder.getGroup()),this._refreshBrushController(builderOpt,areaSelectStyle,axisModel,coordSysModel,areaWidth,api),graphic.groupTransition(oldAxisGroup,this._axisGroup,axisModel)}}},ParallelAxisView.prototype._refreshBrushController=function(builderOpt,areaSelectStyle,axisModel,coordSysModel,areaWidth,api){var extent=axisModel.axis.getExtent(),extentLen=extent[1]-extent[0],extra=Math.min(30,.1*Math.abs(extentLen)),rect=BoundingRect.Z.create({x:extent[0],y:-areaWidth/2,width:extentLen,height:areaWidth});rect.x-=extra,rect.width+=2*extra,this._brushController.mount({enableGlobalPan:!0,rotation:builderOpt.rotation,x:builderOpt.position[0],y:builderOpt.position[1]}).setPanels([{panelId:"pl",clipPath:makeRectPanelClipPath(rect),isTargetByCursor:makeRectIsTargetByCursor(rect,api,coordSysModel),getLinearBrushOtherExtent:makeLinearBrushOtherExtent(rect,0)}]).enableBrush({brushType:"lineX",brushStyle:areaSelectStyle,removeOnClick:!0}).updateCovers(function getCoverInfoList(axisModel){var axis=axisModel.axis;return util.map(axisModel.activeIntervals,(function(interval){return{brushType:"lineX",panelId:"pl",range:[axis.dataToCoord(interval[0],!0),axis.dataToCoord(interval[1],!0)]}}))}(axisModel))},ParallelAxisView.prototype._onBrush=function(eventParam){var coverInfoList=eventParam.areas,axisModel=this.axisModel,axis=axisModel.axis,intervals=util.map(coverInfoList,(function(coverInfo){return[axis.coordToData(coverInfo.range[0],!0),axis.coordToData(coverInfo.range[1],!0)]}));(!axisModel.option.realtime===eventParam.isEnd||eventParam.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:axisModel.id,intervals})},ParallelAxisView.prototype.dispose=function(){this._brushController.dispose()},ParallelAxisView.type="parallelAxis",ParallelAxisView}(Component.Z);var parallelAxisAction_actionInfo={type:"axisAreaSelect",event:"axisAreaSelected"};var defaultAxisOption={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function parallel_install_install(registers){registers.registerComponentView(component_parallel_ParallelView),registers.registerComponentModel(parallel_ParallelModel),registers.registerCoordinateSystem("parallel",parallelCreator),registers.registerPreprocessor(parallelPreprocessor),registers.registerComponentModel(parallel_AxisModel),registers.registerComponentView(axis_ParallelAxisView),axisModelCreator(registers,"parallel",parallel_AxisModel,defaultAxisOption),function installParallelActions(registers){registers.registerAction(parallelAxisAction_actionInfo,(function(payload,ecModel){ecModel.eachComponent({mainType:"parallelAxis",query:payload},(function(parallelAxisModel){parallelAxisModel.axis.model.setActiveIntervals(payload.intervals)}))})),registers.registerAction("parallelAxisExpand",(function(payload,ecModel){ecModel.eachComponent({mainType:"parallel",query:payload},(function(parallelModel){parallelModel.setAxisExpand(payload)}))}))}(registers)}var SankeyPathShape=function SankeyPathShape(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0},SankeyPath=function(_super){function SankeyPath(opts){return _super.call(this,opts)||this}return(0,tslib_es6.ZT)(SankeyPath,_super),SankeyPath.prototype.getDefaultShape=function(){return new SankeyPathShape},SankeyPath.prototype.buildPath=function(ctx,shape){var extent=shape.extent;ctx.moveTo(shape.x1,shape.y1),ctx.bezierCurveTo(shape.cpx1,shape.cpy1,shape.cpx2,shape.cpy2,shape.x2,shape.y2),"vertical"===shape.orient?(ctx.lineTo(shape.x2+extent,shape.y2),ctx.bezierCurveTo(shape.cpx2+extent,shape.cpy2,shape.cpx1+extent,shape.cpy1,shape.x1+extent,shape.y1)):(ctx.lineTo(shape.x2,shape.y2+extent),ctx.bezierCurveTo(shape.cpx2,shape.cpy2+extent,shape.cpx1,shape.cpy1+extent,shape.x1,shape.y1+extent)),ctx.closePath()},SankeyPath.prototype.highlight=function(){(0,states.fD)(this)},SankeyPath.prototype.downplay=function(){(0,states.Mh)(this)},SankeyPath}(Path.ZP),SankeyView=function(_super){function SankeyView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=SankeyView.type,_this._focusAdjacencyDisabled=!1,_this}return(0,tslib_es6.ZT)(SankeyView,_super),SankeyView.prototype.render=function(seriesModel,ecModel,api){var sankeyView=this,graph=seriesModel.getGraph(),group=this.group,layoutInfo=seriesModel.layoutInfo,width=layoutInfo.width,height=layoutInfo.height,nodeData=seriesModel.getData(),edgeData=seriesModel.getData("edge"),orient=seriesModel.get("orient");this._model=seriesModel,group.removeAll(),group.x=layoutInfo.x,group.y=layoutInfo.y,graph.eachEdge((function(edge){var curve=new SankeyPath,ecData=(0,innerStore.A)(curve);ecData.dataIndex=edge.dataIndex,ecData.seriesIndex=seriesModel.seriesIndex,ecData.dataType="edge";var x1,y1,x2,y2,cpx1,cpy1,cpx2,cpy2,edgeModel=edge.getModel(),lineStyleModel=edgeModel.getModel("lineStyle"),curvature=lineStyleModel.get("curveness"),n1Layout=edge.node1.getLayout(),node1Model=edge.node1.getModel(),dragX1=node1Model.get("localX"),dragY1=node1Model.get("localY"),n2Layout=edge.node2.getLayout(),node2Model=edge.node2.getModel(),dragX2=node2Model.get("localX"),dragY2=node2Model.get("localY"),edgeLayout=edge.getLayout();curve.shape.extent=Math.max(1,edgeLayout.dy),curve.shape.orient=orient,"vertical"===orient?(x1=(null!=dragX1?dragX1*width:n1Layout.x)+edgeLayout.sy,y1=(null!=dragY1?dragY1*height:n1Layout.y)+n1Layout.dy,x2=(null!=dragX2?dragX2*width:n2Layout.x)+edgeLayout.ty,cpx1=x1,cpy1=y1*(1-curvature)+(y2=null!=dragY2?dragY2*height:n2Layout.y)*curvature,cpx2=x2,cpy2=y1*curvature+y2*(1-curvature)):(x1=(null!=dragX1?dragX1*width:n1Layout.x)+n1Layout.dx,y1=(null!=dragY1?dragY1*height:n1Layout.y)+edgeLayout.sy,cpx1=x1*(1-curvature)+(x2=null!=dragX2?dragX2*width:n2Layout.x)*curvature,cpy1=y1,cpx2=x1*curvature+x2*(1-curvature),cpy2=y2=(null!=dragY2?dragY2*height:n2Layout.y)+edgeLayout.ty),curve.setShape({x1,y1,x2,y2,cpx1,cpy1,cpx2,cpy2}),curve.useStyle(lineStyleModel.getItemStyle()),applyCurveStyle(curve.style,orient,edge);var defaultEdgeLabelText=""+edgeModel.get("value"),edgeLabelStateModels=(0,labelStyle.k3)(edgeModel,"edgeLabel");(0,labelStyle.ni)(curve,edgeLabelStateModels,{labelFetcher:{getFormattedLabel:function(dataIndex,stateName,dataType,labelDimIndex,formatter,extendParams){return seriesModel.getFormattedLabel(dataIndex,stateName,"edge",labelDimIndex,(0,util.retrieve3)(formatter,edgeLabelStateModels.normal&&edgeLabelStateModels.normal.get("formatter"),defaultEdgeLabelText),extendParams)}},labelDataIndex:edge.dataIndex,defaultText:defaultEdgeLabelText}),curve.setTextConfig({position:"inside"});var emphasisModel=edgeModel.getModel("emphasis");(0,states.WO)(curve,edgeModel,"lineStyle",(function(model){var style=model.getItemStyle();return applyCurveStyle(style,orient,edge),style})),group.add(curve),edgeData.setItemGraphicEl(edge.dataIndex,curve);var focus=emphasisModel.get("focus");(0,states.k5)(curve,"adjacency"===focus?edge.getAdjacentDataIndices():"trajectory"===focus?edge.getTrajectoryDataIndices():focus,emphasisModel.get("blurScope"),emphasisModel.get("disabled"))})),graph.eachNode((function(node){var layout=node.getLayout(),itemModel=node.getModel(),dragX=itemModel.get("localX"),dragY=itemModel.get("localY"),emphasisModel=itemModel.getModel("emphasis"),rect=new Rect.Z({shape:{x:null!=dragX?dragX*width:layout.x,y:null!=dragY?dragY*height:layout.y,width:layout.dx,height:layout.dy},style:itemModel.getModel("itemStyle").getItemStyle(),z2:10});(0,labelStyle.ni)(rect,(0,labelStyle.k3)(itemModel),{labelFetcher:{getFormattedLabel:function(dataIndex,stateName){return seriesModel.getFormattedLabel(dataIndex,stateName,"node")}},labelDataIndex:node.dataIndex,defaultText:node.id}),rect.disableLabelAnimation=!0,rect.setStyle("fill",node.getVisual("color")),rect.setStyle("decal",node.getVisual("style").decal),(0,states.WO)(rect,itemModel),group.add(rect),nodeData.setItemGraphicEl(node.dataIndex,rect),(0,innerStore.A)(rect).dataType="node";var focus=emphasisModel.get("focus");(0,states.k5)(rect,"adjacency"===focus?node.getAdjacentDataIndices():"trajectory"===focus?node.getTrajectoryDataIndices():focus,emphasisModel.get("blurScope"),emphasisModel.get("disabled"))})),nodeData.eachItemGraphicEl((function(el,dataIndex){nodeData.getItemModel(dataIndex).get("draggable")&&(el.drift=function(dx,dy){sankeyView._focusAdjacencyDisabled=!0,this.shape.x+=dx,this.shape.y+=dy,this.dirty(),api.dispatchAction({type:"dragNode",seriesId:seriesModel.id,dataIndex:nodeData.getRawIndex(dataIndex),localX:this.shape.x/width,localY:this.shape.y/height})},el.ondragend=function(){sankeyView._focusAdjacencyDisabled=!1},el.draggable=!0,el.cursor="move")})),!this._data&&seriesModel.isAnimationEnabled()&&group.setClipPath(function SankeyView_createGridClipShape(rect,seriesModel,cb){var rectEl=new Rect.Z({shape:{x:rect.x-10,y:rect.y-10,width:0,height:rect.height+20}});return basicTransition.KZ(rectEl,{shape:{width:rect.width+20}},seriesModel,cb),rectEl}(group.getBoundingRect(),seriesModel,(function(){group.removeClipPath()}))),this._data=seriesModel.getData()},SankeyView.prototype.dispose=function(){},SankeyView.type="sankey",SankeyView}(Chart.Z);function applyCurveStyle(curveProps,orient,edge){switch(curveProps.fill){case"source":curveProps.fill=edge.node1.getVisual("color"),curveProps.decal=edge.node1.getVisual("style").decal;break;case"target":curveProps.fill=edge.node2.getVisual("color"),curveProps.decal=edge.node2.getVisual("style").decal;break;case"gradient":var sourceColor=edge.node1.getVisual("color"),targetColor=edge.node2.getVisual("color");(0,util.isString)(sourceColor)&&(0,util.isString)(targetColor)&&(curveProps.fill=new LinearGradient.Z(0,0,+("horizontal"===orient),+("vertical"===orient),[{color:sourceColor,offset:0},{color:targetColor,offset:1}]))}}const sankey_SankeyView=SankeyView;var SankeySeriesModel=function(_super){function SankeySeriesModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=SankeySeriesModel.type,_this}return(0,tslib_es6.ZT)(SankeySeriesModel,_super),SankeySeriesModel.prototype.getInitialData=function(option,ecModel){var links=option.edges||option.links,nodes=option.data||option.nodes,levels=option.levels;this.levelModels=[];for(var levelModels=this.levelModels,i=0;i<levels.length;i++)null!=levels[i].depth&&levels[i].depth>=0&&(levelModels[levels[i].depth]=new Model.Z(levels[i],this,ecModel));if(nodes&&links){var graph=createGraphFromNodeEdge(nodes,links,this,!0,(function beforeLink(nodeData,edgeData){nodeData.wrapMethod("getItemModel",(function(model,idx){var seriesModel=model.parentModel,layout=seriesModel.getData().getItemLayout(idx);if(layout){var nodeDepth=layout.depth,levelModel=seriesModel.levelModels[nodeDepth];levelModel&&(model.parentModel=levelModel)}return model})),edgeData.wrapMethod("getItemModel",(function(model,idx){var seriesModel=model.parentModel,layout=seriesModel.getGraph().getEdgeByIndex(idx).node1.getLayout();if(layout){var depth=layout.depth,levelModel=seriesModel.levelModels[depth];levelModel&&(model.parentModel=levelModel)}return model}))}));return graph.data}},SankeySeriesModel.prototype.setNodePosition=function(dataIndex,localPosition){var dataItem=(this.option.data||this.option.nodes)[dataIndex];dataItem.localX=localPosition[0],dataItem.localY=localPosition[1]},SankeySeriesModel.prototype.getGraph=function(){return this.getData().graph},SankeySeriesModel.prototype.getEdgeData=function(){return this.getGraph().edgeData},SankeySeriesModel.prototype.formatTooltip=function(dataIndex,multipleSeries,dataType){function noValue(val){return isNaN(val)||null==val}if("edge"===dataType){var params=this.getDataParams(dataIndex,dataType),rawDataOpt=params.data,edgeValue=params.value,edgeName=rawDataOpt.source+" -- "+rawDataOpt.target;return(0,tooltipMarkup.TX)("nameValue",{name:edgeName,value:edgeValue,noValue:noValue(edgeValue)})}var value=this.getGraph().getNodeByIndex(dataIndex).getLayout().value,name_1=this.getDataParams(dataIndex,dataType).data.name;return(0,tooltipMarkup.TX)("nameValue",{name:null!=name_1?name_1+"":null,value,noValue:noValue(value)})},SankeySeriesModel.prototype.optionUpdated=function(){},SankeySeriesModel.prototype.getDataParams=function(dataIndex,dataType){var params=_super.prototype.getDataParams.call(this,dataIndex,dataType);if(null==params.value&&"node"===dataType){var nodeValue=this.getGraph().getNodeByIndex(dataIndex).getLayout().value;params.value=nodeValue}return params},SankeySeriesModel.type="series.sankey",SankeySeriesModel.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},SankeySeriesModel}(Series.Z);const SankeySeries=SankeySeriesModel;function sankeyLayout(ecModel,api){ecModel.eachSeriesByType("sankey",(function(seriesModel){var nodeWidth=seriesModel.get("nodeWidth"),nodeGap=seriesModel.get("nodeGap"),layoutInfo=function sankeyLayout_getViewRect(seriesModel,api){return layout.ME(seriesModel.getBoxLayoutParams(),{width:api.getWidth(),height:api.getHeight()})}(seriesModel,api);seriesModel.layoutInfo=layoutInfo;var width=layoutInfo.width,height=layoutInfo.height,graph=seriesModel.getGraph(),nodes=graph.nodes,edges=graph.edges;!function computeNodeValues(nodes){util.each(nodes,(function(node){var value1=sum(node.outEdges,getEdgeValue),value2=sum(node.inEdges,getEdgeValue),nodeRawValue=node.getValue()||0,value=Math.max(value1,value2,nodeRawValue);node.setLayout({value},!0)}))}(nodes),function layoutSankey(nodes,edges,nodeWidth,nodeGap,width,height,iterations,orient,nodeAlign){(function computeNodeBreadths(nodes,edges,nodeWidth,width,height,orient,nodeAlign){for(var remainEdges=[],indegreeArr=[],zeroIndegrees=[],nextTargetNode=[],x=0,i=0;i<edges.length;i++)remainEdges[i]=1;for(i=0;i<nodes.length;i++)indegreeArr[i]=nodes[i].inEdges.length,0===indegreeArr[i]&&zeroIndegrees.push(nodes[i]);var maxNodeDepth=-1;for(;zeroIndegrees.length;){for(var idx=0;idx<zeroIndegrees.length;idx++){var node=zeroIndegrees[idx],item=node.hostGraph.data.getRawDataItem(node.dataIndex),isItemDepth=null!=item.depth&&item.depth>=0;isItemDepth&&item.depth>maxNodeDepth&&(maxNodeDepth=item.depth),node.setLayout({depth:isItemDepth?item.depth:x},!0),"vertical"===orient?node.setLayout({dy:nodeWidth},!0):node.setLayout({dx:nodeWidth},!0);for(var edgeIdx=0;edgeIdx<node.outEdges.length;edgeIdx++){var edge=node.outEdges[edgeIdx];remainEdges[edges.indexOf(edge)]=0;var targetNode=edge.node2;0==--indegreeArr[nodes.indexOf(targetNode)]&&nextTargetNode.indexOf(targetNode)<0&&nextTargetNode.push(targetNode)}}++x,zeroIndegrees=nextTargetNode,nextTargetNode=[]}for(i=0;i<remainEdges.length;i++)if(1===remainEdges[i])throw new Error("Sankey is a DAG, the original data has cycle!");var maxDepth=maxNodeDepth>x-1?maxNodeDepth:x-1;nodeAlign&&"left"!==nodeAlign&&function adjustNodeWithNodeAlign(nodes,nodeAlign,orient,maxDepth){if("right"===nodeAlign){for(var nextSourceNode=[],remainNodes=nodes,nodeHeight=0;remainNodes.length;){for(var i=0;i<remainNodes.length;i++){var node=remainNodes[i];node.setLayout({skNodeHeight:nodeHeight},!0);for(var j=0;j<node.inEdges.length;j++){var edge=node.inEdges[j];nextSourceNode.indexOf(edge.node1)<0&&nextSourceNode.push(edge.node1)}}remainNodes=nextSourceNode,nextSourceNode=[],++nodeHeight}util.each(nodes,(function(node){isNodeDepth(node)||node.setLayout({depth:Math.max(0,maxDepth-node.getLayout().skNodeHeight)},!0)}))}else"justify"===nodeAlign&&function moveSinksRight(nodes,maxDepth){util.each(nodes,(function(node){isNodeDepth(node)||node.outEdges.length||node.setLayout({depth:maxDepth},!0)}))}(nodes,maxDepth)}(nodes,nodeAlign,0,maxDepth);var kx="vertical"===orient?(height-nodeWidth)/maxDepth:(width-nodeWidth)/maxDepth;!function scaleNodeBreadths(nodes,kx,orient){util.each(nodes,(function(node){var nodeDepth=node.getLayout().depth*kx;"vertical"===orient?node.setLayout({y:nodeDepth},!0):node.setLayout({x:nodeDepth},!0)}))}(nodes,kx,orient)})(nodes,edges,nodeWidth,width,height,orient,nodeAlign),function computeNodeDepths(nodes,edges,height,width,nodeGap,iterations,orient){var nodesByBreadth=function prepareNodesByBreadth(nodes,orient){var nodesByBreadth=[],keyAttr="vertical"===orient?"y":"x",groupResult=(0,util_model.pv)(nodes,(function(node){return node.getLayout()[keyAttr]}));return groupResult.keys.sort((function(a,b){return a-b})),util.each(groupResult.keys,(function(key){nodesByBreadth.push(groupResult.buckets.get(key))})),nodesByBreadth}(nodes,orient);(function initializeNodeDepth(nodesByBreadth,edges,height,width,nodeGap,orient){var minKy=1/0;util.each(nodesByBreadth,(function(nodes){var n=nodes.length,sum=0;util.each(nodes,(function(node){sum+=node.getLayout().value}));var ky="vertical"===orient?(width-(n-1)*nodeGap)/sum:(height-(n-1)*nodeGap)/sum;ky<minKy&&(minKy=ky)})),util.each(nodesByBreadth,(function(nodes){util.each(nodes,(function(node,i){var nodeDy=node.getLayout().value*minKy;"vertical"===orient?(node.setLayout({x:i},!0),node.setLayout({dx:nodeDy},!0)):(node.setLayout({y:i},!0),node.setLayout({dy:nodeDy},!0))}))})),util.each(edges,(function(edge){var edgeDy=+edge.getValue()*minKy;edge.setLayout({dy:edgeDy},!0)}))})(nodesByBreadth,edges,height,width,nodeGap,orient),resolveCollisions(nodesByBreadth,nodeGap,height,width,orient);for(var alpha=1;iterations>0;iterations--)relaxRightToLeft(nodesByBreadth,alpha*=.99,orient),resolveCollisions(nodesByBreadth,nodeGap,height,width,orient),relaxLeftToRight(nodesByBreadth,alpha,orient),resolveCollisions(nodesByBreadth,nodeGap,height,width,orient)}(nodes,edges,height,width,nodeGap,iterations,orient),function computeEdgeDepths(nodes,orient){var keyAttr="vertical"===orient?"x":"y";util.each(nodes,(function(node){node.outEdges.sort((function(a,b){return a.node2.getLayout()[keyAttr]-b.node2.getLayout()[keyAttr]})),node.inEdges.sort((function(a,b){return a.node1.getLayout()[keyAttr]-b.node1.getLayout()[keyAttr]}))})),util.each(nodes,(function(node){var sy=0,ty=0;util.each(node.outEdges,(function(edge){edge.setLayout({sy},!0),sy+=edge.getLayout().dy})),util.each(node.inEdges,(function(edge){edge.setLayout({ty},!0),ty+=edge.getLayout().dy}))}))}(nodes,orient)}(nodes,edges,nodeWidth,nodeGap,width,height,0!==util.filter(nodes,(function(node){return 0===node.getLayout().value})).length?0:seriesModel.get("layoutIterations"),seriesModel.get("orient"),seriesModel.get("nodeAlign"))}))}function isNodeDepth(node){var item=node.hostGraph.data.getRawDataItem(node.dataIndex);return null!=item.depth&&item.depth>=0}function resolveCollisions(nodesByBreadth,nodeGap,height,width,orient){var keyAttr="vertical"===orient?"x":"y";util.each(nodesByBreadth,(function(nodes){var nodeX,node,dy;nodes.sort((function(a,b){return a.getLayout()[keyAttr]-b.getLayout()[keyAttr]}));for(var y0=0,n=nodes.length,nodeDyAttr="vertical"===orient?"dx":"dy",i=0;i<n;i++)(dy=y0-(node=nodes[i]).getLayout()[keyAttr])>0&&(nodeX=node.getLayout()[keyAttr]+dy,"vertical"===orient?node.setLayout({x:nodeX},!0):node.setLayout({y:nodeX},!0)),y0=node.getLayout()[keyAttr]+node.getLayout()[nodeDyAttr]+nodeGap;if((dy=y0-nodeGap-("vertical"===orient?width:height))>0){nodeX=node.getLayout()[keyAttr]-dy,"vertical"===orient?node.setLayout({x:nodeX},!0):node.setLayout({y:nodeX},!0),y0=nodeX;for(i=n-2;i>=0;--i)(dy=(node=nodes[i]).getLayout()[keyAttr]+node.getLayout()[nodeDyAttr]+nodeGap-y0)>0&&(nodeX=node.getLayout()[keyAttr]-dy,"vertical"===orient?node.setLayout({x:nodeX},!0):node.setLayout({y:nodeX},!0)),y0=node.getLayout()[keyAttr]}}))}function relaxRightToLeft(nodesByBreadth,alpha,orient){util.each(nodesByBreadth.slice().reverse(),(function(nodes){util.each(nodes,(function(node){if(node.outEdges.length){var y=sum(node.outEdges,weightedTarget,orient)/sum(node.outEdges,getEdgeValue);if(isNaN(y)){var len=node.outEdges.length;y=len?sum(node.outEdges,centerTarget,orient)/len:0}if("vertical"===orient){var nodeX=node.getLayout().x+(y-center(node,orient))*alpha;node.setLayout({x:nodeX},!0)}else{var nodeY=node.getLayout().y+(y-center(node,orient))*alpha;node.setLayout({y:nodeY},!0)}}}))}))}function weightedTarget(edge,orient){return center(edge.node2,orient)*edge.getValue()}function centerTarget(edge,orient){return center(edge.node2,orient)}function weightedSource(edge,orient){return center(edge.node1,orient)*edge.getValue()}function centerSource(edge,orient){return center(edge.node1,orient)}function center(node,orient){return"vertical"===orient?node.getLayout().x+node.getLayout().dx/2:node.getLayout().y+node.getLayout().dy/2}function getEdgeValue(edge){return edge.getValue()}function sum(array,cb,orient){for(var sum=0,len=array.length,i=-1;++i<len;){var value=+cb(array[i],orient);isNaN(value)||(sum+=value)}return sum}function relaxLeftToRight(nodesByBreadth,alpha,orient){util.each(nodesByBreadth,(function(nodes){util.each(nodes,(function(node){if(node.inEdges.length){var y=sum(node.inEdges,weightedSource,orient)/sum(node.inEdges,getEdgeValue);if(isNaN(y)){var len=node.inEdges.length;y=len?sum(node.inEdges,centerSource,orient)/len:0}if("vertical"===orient){var nodeX=node.getLayout().x+(y-center(node,orient))*alpha;node.setLayout({x:nodeX},!0)}else{var nodeY=node.getLayout().y+(y-center(node,orient))*alpha;node.setLayout({y:nodeY},!0)}}}))}))}var VisualMapping=__webpack_require__("./node_modules/echarts/lib/visual/VisualMapping.js");function sankeyVisual(ecModel){ecModel.eachSeriesByType("sankey",(function(seriesModel){var graph=seriesModel.getGraph(),nodes=graph.nodes,edges=graph.edges;if(nodes.length){var minValue_1=1/0,maxValue_1=-1/0;util.each(nodes,(function(node){var nodeValue=node.getLayout().value;nodeValue<minValue_1&&(minValue_1=nodeValue),nodeValue>maxValue_1&&(maxValue_1=nodeValue)})),util.each(nodes,(function(node){var mapValueToColor=new VisualMapping.Z({type:"color",mappingMethod:"linear",dataExtent:[minValue_1,maxValue_1],visual:seriesModel.get("color")}).mapValueToVisual(node.getLayout().value),customColor=node.getModel().get(["itemStyle","color"]);null!=customColor?(node.setVisual("color",customColor),node.setVisual("style",{fill:customColor})):(node.setVisual("color",mapValueToColor),node.setVisual("style",{fill:mapValueToColor}))}))}edges.length&&util.each(edges,(function(edge){var edgeStyle=edge.getModel().get("lineStyle");edge.setVisual("style",edgeStyle)}))}))}var dimensionHelper=__webpack_require__("./node_modules/echarts/lib/data/helper/dimensionHelper.js"),WhiskerBoxCommonMixin=function(){function WhiskerBoxCommonMixin(){}return WhiskerBoxCommonMixin.prototype.getInitialData=function(option,ecModel){var ordinalMeta,addOrdinal,xAxisModel=ecModel.getComponent("xAxis",this.get("xAxisIndex")),yAxisModel=ecModel.getComponent("yAxis",this.get("yAxisIndex")),xAxisType=xAxisModel.get("type"),yAxisType=yAxisModel.get("type");"category"===xAxisType?(option.layout="horizontal",ordinalMeta=xAxisModel.getOrdinalMeta(),addOrdinal=!0):"category"===yAxisType?(option.layout="vertical",ordinalMeta=yAxisModel.getOrdinalMeta(),addOrdinal=!0):option.layout=option.layout||"horizontal";var coordDims=["x","y"],baseAxisDimIndex="horizontal"===option.layout?0:1,baseAxisDim=this._baseAxisDim=coordDims[baseAxisDimIndex],otherAxisDim=coordDims[1-baseAxisDimIndex],axisModels=[xAxisModel,yAxisModel],baseAxisType=axisModels[baseAxisDimIndex].get("type"),otherAxisType=axisModels[1-baseAxisDimIndex].get("type"),data=option.data;if(data&&addOrdinal){var newOptionData_1=[];util.each(data,(function(item,index){var newItem;util.isArray(item)?(newItem=item.slice(),item.unshift(index)):util.isArray(item.value)?((newItem=util.extend({},item)).value=newItem.value.slice(),item.value.unshift(index)):newItem=item,newOptionData_1.push(newItem)})),option.data=newOptionData_1}var defaultValueDimensions=this.defaultValueDimensions,coordDimensions=[{name:baseAxisDim,type:(0,dimensionHelper.T)(baseAxisType),ordinalMeta,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:otherAxisDim,type:(0,dimensionHelper.T)(otherAxisType),dimsDef:defaultValueDimensions.slice()}];return(0,createSeriesDataSimply.Z)(this,{coordDimensions,dimensionsCount:defaultValueDimensions.length+1,encodeDefaulter:util.curry(sourceHelper.pY,coordDimensions,this)})},WhiskerBoxCommonMixin.prototype.getBaseAxis=function(){var dim=this._baseAxisDim;return this.ecModel.getComponent(dim+"Axis",this.get(dim+"AxisIndex")).axis},WhiskerBoxCommonMixin}(),BoxplotSeriesModel=function(_super){function BoxplotSeriesModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=BoxplotSeriesModel.type,_this.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],_this.visualDrawType="stroke",_this}return(0,tslib_es6.ZT)(BoxplotSeriesModel,_super),BoxplotSeriesModel.type="series.boxplot",BoxplotSeriesModel.dependencies=["xAxis","yAxis","grid"],BoxplotSeriesModel.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},BoxplotSeriesModel}(Series.Z);(0,util.mixin)(BoxplotSeriesModel,WhiskerBoxCommonMixin,!0);const BoxplotSeries=BoxplotSeriesModel;var BoxplotView=function(_super){function BoxplotView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=BoxplotView.type,_this}return(0,tslib_es6.ZT)(BoxplotView,_super),BoxplotView.prototype.render=function(seriesModel,ecModel,api){var data=seriesModel.getData(),group=this.group,oldData=this._data;this._data||group.removeAll();var constDim="horizontal"===seriesModel.get("layout")?1:0;data.diff(oldData).add((function(newIdx){if(data.hasValue(newIdx)){var symbolEl=createNormalBox(data.getItemLayout(newIdx),data,newIdx,constDim,!0);data.setItemGraphicEl(newIdx,symbolEl),group.add(symbolEl)}})).update((function(newIdx,oldIdx){var symbolEl=oldData.getItemGraphicEl(oldIdx);if(data.hasValue(newIdx)){var itemLayout=data.getItemLayout(newIdx);symbolEl?((0,basicTransition.Zi)(symbolEl),updateNormalBoxData(itemLayout,symbolEl,data,newIdx)):symbolEl=createNormalBox(itemLayout,data,newIdx,constDim),group.add(symbolEl),data.setItemGraphicEl(newIdx,symbolEl)}else group.remove(symbolEl)})).remove((function(oldIdx){var el=oldData.getItemGraphicEl(oldIdx);el&&group.remove(el)})).execute(),this._data=data},BoxplotView.prototype.remove=function(ecModel){var group=this.group,data=this._data;this._data=null,data&&data.eachItemGraphicEl((function(el){el&&group.remove(el)}))},BoxplotView.type="boxplot",BoxplotView}(Chart.Z),BoxPathShape=function BoxPathShape(){},BoxPath=function(_super){function BoxPath(opts){var _this=_super.call(this,opts)||this;return _this.type="boxplotBoxPath",_this}return(0,tslib_es6.ZT)(BoxPath,_super),BoxPath.prototype.getDefaultShape=function(){return new BoxPathShape},BoxPath.prototype.buildPath=function(ctx,shape){var ends=shape.points,i=0;for(ctx.moveTo(ends[i][0],ends[i][1]),i++;i<4;i++)ctx.lineTo(ends[i][0],ends[i][1]);for(ctx.closePath();i<ends.length;i++)ctx.moveTo(ends[i][0],ends[i][1]),i++,ctx.lineTo(ends[i][0],ends[i][1])},BoxPath}(Path.ZP);function createNormalBox(itemLayout,data,dataIndex,constDim,isInit){var ends=itemLayout.ends,el=new BoxPath({shape:{points:isInit?transInit(ends,constDim,itemLayout):ends}});return updateNormalBoxData(itemLayout,el,data,dataIndex,isInit),el}function updateNormalBoxData(itemLayout,el,data,dataIndex,isInit){var seriesModel=data.hostModel;(0,graphic[isInit?"initProps":"updateProps"])(el,{shape:{points:itemLayout.ends}},seriesModel,dataIndex),el.useStyle(data.getItemVisual(dataIndex,"style")),el.style.strokeNoScale=!0,el.z2=100;var itemModel=data.getItemModel(dataIndex),emphasisModel=itemModel.getModel("emphasis");(0,states.WO)(el,itemModel),(0,states.k5)(el,emphasisModel.get("focus"),emphasisModel.get("blurScope"),emphasisModel.get("disabled"))}function transInit(points,dim,itemLayout){return util.map(points,(function(point){return(point=point.slice())[dim]=itemLayout.initBaseline,point}))}const boxplot_BoxplotView=BoxplotView;var boxplotLayout_each=util.each;function boxplotLayout(ecModel){var groupResult=function groupSeriesByAxis(ecModel){var result=[],axisList=[];return ecModel.eachSeriesByType("boxplot",(function(seriesModel){var baseAxis=seriesModel.getBaseAxis(),idx=util.indexOf(axisList,baseAxis);idx<0&&(idx=axisList.length,axisList[idx]=baseAxis,result[idx]={axis:baseAxis,seriesModels:[]}),result[idx].seriesModels.push(seriesModel)})),result}(ecModel);boxplotLayout_each(groupResult,(function(groupItem){var seriesModels=groupItem.seriesModels;seriesModels.length&&(!function calculateBase(groupItem){var bandWidth,baseAxis=groupItem.axis,seriesModels=groupItem.seriesModels,seriesCount=seriesModels.length,boxWidthList=groupItem.boxWidthList=[],boxOffsetList=groupItem.boxOffsetList=[],boundList=[];if("category"===baseAxis.type)bandWidth=baseAxis.getBandWidth();else{var maxDataCount_1=0;boxplotLayout_each(seriesModels,(function(seriesModel){maxDataCount_1=Math.max(maxDataCount_1,seriesModel.getData().count())}));var extent=baseAxis.getExtent();bandWidth=Math.abs(extent[1]-extent[0])/maxDataCount_1}boxplotLayout_each(seriesModels,(function(seriesModel){var boxWidthBound=seriesModel.get("boxWidth");util.isArray(boxWidthBound)||(boxWidthBound=[boxWidthBound,boxWidthBound]),boundList.push([(0,number.GM)(boxWidthBound[0],bandWidth)||0,(0,number.GM)(boxWidthBound[1],bandWidth)||0])}));var availableWidth=.8*bandWidth-2,boxGap=availableWidth/seriesCount*.3,boxWidth=(availableWidth-boxGap*(seriesCount-1))/seriesCount,base=boxWidth/2-availableWidth/2;boxplotLayout_each(seriesModels,(function(seriesModel,idx){boxOffsetList.push(base),base+=boxGap+boxWidth,boxWidthList.push(Math.min(Math.max(boxWidth,boundList[idx][0]),boundList[idx][1]))}))}(groupItem),boxplotLayout_each(seriesModels,(function(seriesModel,idx){!function layoutSingleSeries(seriesModel,offset,boxWidth){var coordSys=seriesModel.coordinateSystem,data=seriesModel.getData(),halfWidth=boxWidth/2,cDimIdx="horizontal"===seriesModel.get("layout")?0:1,vDimIdx=1-cDimIdx,coordDims=["x","y"],cDim=data.mapDimension(coordDims[cDimIdx]),vDims=data.mapDimensionsAll(coordDims[vDimIdx]);if(null==cDim||vDims.length<5)return;for(var dataIndex=0;dataIndex<data.count();dataIndex++){var axisDimVal=data.get(cDim,dataIndex),median=getPoint(axisDimVal,vDims[2],dataIndex),end1=getPoint(axisDimVal,vDims[0],dataIndex),end2=getPoint(axisDimVal,vDims[1],dataIndex),end4=getPoint(axisDimVal,vDims[3],dataIndex),end5=getPoint(axisDimVal,vDims[4],dataIndex),ends=[];addBodyEnd(ends,end2,!1),addBodyEnd(ends,end4,!0),ends.push(end1,end2,end5,end4),layEndLine(ends,end1),layEndLine(ends,end5),layEndLine(ends,median),data.setItemLayout(dataIndex,{initBaseline:median[vDimIdx],ends})}function getPoint(axisDimVal,dim,dataIndex){var point,val=data.get(dim,dataIndex),p=[];return p[cDimIdx]=axisDimVal,p[vDimIdx]=val,isNaN(axisDimVal)||isNaN(val)?point=[NaN,NaN]:(point=coordSys.dataToPoint(p))[cDimIdx]+=offset,point}function addBodyEnd(ends,point,start){var point1=point.slice(),point2=point.slice();point1[cDimIdx]+=halfWidth,point2[cDimIdx]-=halfWidth,start?ends.push(point1,point2):ends.push(point2,point1)}function layEndLine(ends,endCenter){var from=endCenter.slice(),to=endCenter.slice();from[cDimIdx]-=halfWidth,to[cDimIdx]+=halfWidth,ends.push(from,to)}}(seriesModel,groupItem.boxOffsetList[idx],groupItem.boxWidthList[idx])})))}))}var log=__webpack_require__("./node_modules/echarts/lib/util/log.js"),types=__webpack_require__("./node_modules/echarts/lib/util/types.js"),boxplotTransform={type:"echarts:boxplot",transform:function transform(params){var upstream=params.upstream;if(upstream.sourceFormat!==types.XD){0,(0,log._y)("")}var result=function prepareBoxplotData(rawData,opt){for(var boxData=[],outliers=[],boundIQR=(opt=opt||{}).boundIQR,useExtreme="none"===boundIQR||0===boundIQR,i=0;i<rawData.length;i++){var ascList=(0,number.dt)(rawData[i].slice()),Q1=(0,number.VR)(ascList,.25),Q2=(0,number.VR)(ascList,.5),Q3=(0,number.VR)(ascList,.75),min=ascList[0],max=ascList[ascList.length-1],bound=(null==boundIQR?1.5:boundIQR)*(Q3-Q1),low=useExtreme?min:Math.max(min,Q1-bound),high=useExtreme?max:Math.min(max,Q3+bound),itemNameFormatter=opt.itemNameFormatter,itemName=(0,util.isFunction)(itemNameFormatter)?itemNameFormatter({value:i}):(0,util.isString)(itemNameFormatter)?itemNameFormatter.replace("{value}",i+""):i+"";boxData.push([itemName,low,Q1,Q2,Q3,high]);for(var j=0;j<ascList.length;j++){var dataItem=ascList[j];if(dataItem<low||dataItem>high){var outlier=[itemName,dataItem];outliers.push(outlier)}}}return{boxData,outliers}}(upstream.getRawData(),params.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:result.boxData},{data:result.outliers}]}};var SKIP_PROPS=["color","borderColor"],CandlestickView=function(_super){function CandlestickView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=CandlestickView.type,_this}return(0,tslib_es6.ZT)(CandlestickView,_super),CandlestickView.prototype.render=function(seriesModel,ecModel,api){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(seriesModel),this._isLargeDraw?this._renderLarge(seriesModel):this._renderNormal(seriesModel)},CandlestickView.prototype.incrementalPrepareRender=function(seriesModel,ecModel,api){this._clear(),this._updateDrawMode(seriesModel)},CandlestickView.prototype.incrementalRender=function(params,seriesModel,ecModel,api){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(params,seriesModel):this._incrementalRenderNormal(params,seriesModel)},CandlestickView.prototype.eachRendered=function(cb){graphic.traverseElements(this._progressiveEls||this.group,cb)},CandlestickView.prototype._updateDrawMode=function(seriesModel){var isLargeDraw=seriesModel.pipelineContext.large;null!=this._isLargeDraw&&isLargeDraw===this._isLargeDraw||(this._isLargeDraw=isLargeDraw,this._clear())},CandlestickView.prototype._renderNormal=function(seriesModel){var data=seriesModel.getData(),oldData=this._data,group=this.group,isSimpleBox=data.getLayout("isSimpleBox"),needsClip=seriesModel.get("clip",!0),coord=seriesModel.coordinateSystem,clipArea=coord.getArea&&coord.getArea();this._data||group.removeAll(),data.diff(oldData).add((function(newIdx){if(data.hasValue(newIdx)){var itemLayout=data.getItemLayout(newIdx);if(needsClip&&isNormalBoxClipped(clipArea,itemLayout))return;var el=CandlestickView_createNormalBox(itemLayout,newIdx,!0);basicTransition.KZ(el,{shape:{points:itemLayout.ends}},seriesModel,newIdx),setBoxCommon(el,data,newIdx,isSimpleBox),group.add(el),data.setItemGraphicEl(newIdx,el)}})).update((function(newIdx,oldIdx){var el=oldData.getItemGraphicEl(oldIdx);if(data.hasValue(newIdx)){var itemLayout=data.getItemLayout(newIdx);needsClip&&isNormalBoxClipped(clipArea,itemLayout)?group.remove(el):(el?(basicTransition.D(el,{shape:{points:itemLayout.ends}},seriesModel,newIdx),(0,basicTransition.Zi)(el)):el=CandlestickView_createNormalBox(itemLayout,newIdx),setBoxCommon(el,data,newIdx,isSimpleBox),group.add(el),data.setItemGraphicEl(newIdx,el))}else group.remove(el)})).remove((function(oldIdx){var el=oldData.getItemGraphicEl(oldIdx);el&&group.remove(el)})).execute(),this._data=data},CandlestickView.prototype._renderLarge=function(seriesModel){this._clear(),createLarge(seriesModel,this.group);var clipPath=seriesModel.get("clip",!0)?(0,createClipPathFromCoordSys.lQ)(seriesModel.coordinateSystem,!1,seriesModel):null;clipPath?this.group.setClipPath(clipPath):this.group.removeClipPath()},CandlestickView.prototype._incrementalRenderNormal=function(params,seriesModel){for(var dataIndex,data=seriesModel.getData(),isSimpleBox=data.getLayout("isSimpleBox");null!=(dataIndex=params.next());){var el=CandlestickView_createNormalBox(data.getItemLayout(dataIndex),dataIndex);setBoxCommon(el,data,dataIndex,isSimpleBox),el.incremental=!0,this.group.add(el),this._progressiveEls.push(el)}},CandlestickView.prototype._incrementalRenderLarge=function(params,seriesModel){createLarge(seriesModel,this.group,this._progressiveEls,!0)},CandlestickView.prototype.remove=function(ecModel){this._clear()},CandlestickView.prototype._clear=function(){this.group.removeAll(),this._data=null},CandlestickView.type="candlestick",CandlestickView}(Chart.Z),NormalBoxPathShape=function NormalBoxPathShape(){},NormalBoxPath=function(_super){function NormalBoxPath(opts){var _this=_super.call(this,opts)||this;return _this.type="normalCandlestickBox",_this}return(0,tslib_es6.ZT)(NormalBoxPath,_super),NormalBoxPath.prototype.getDefaultShape=function(){return new NormalBoxPathShape},NormalBoxPath.prototype.buildPath=function(ctx,shape){var ends=shape.points;this.__simpleBox?(ctx.moveTo(ends[4][0],ends[4][1]),ctx.lineTo(ends[6][0],ends[6][1])):(ctx.moveTo(ends[0][0],ends[0][1]),ctx.lineTo(ends[1][0],ends[1][1]),ctx.lineTo(ends[2][0],ends[2][1]),ctx.lineTo(ends[3][0],ends[3][1]),ctx.closePath(),ctx.moveTo(ends[4][0],ends[4][1]),ctx.lineTo(ends[5][0],ends[5][1]),ctx.moveTo(ends[6][0],ends[6][1]),ctx.lineTo(ends[7][0],ends[7][1]))},NormalBoxPath}(Path.ZP);function CandlestickView_createNormalBox(itemLayout,dataIndex,isInit){var ends=itemLayout.ends;return new NormalBoxPath({shape:{points:isInit?CandlestickView_transInit(ends,itemLayout):ends},z2:100})}function isNormalBoxClipped(clipArea,itemLayout){for(var clipped=!0,i=0;i<itemLayout.ends.length;i++)if(clipArea.contain(itemLayout.ends[i][0],itemLayout.ends[i][1])){clipped=!1;break}return clipped}function setBoxCommon(el,data,dataIndex,isSimpleBox){var itemModel=data.getItemModel(dataIndex);el.useStyle(data.getItemVisual(dataIndex,"style")),el.style.strokeNoScale=!0,el.__simpleBox=isSimpleBox,(0,states.WO)(el,itemModel)}function CandlestickView_transInit(points,itemLayout){return util.map(points,(function(point){return(point=point.slice())[1]=itemLayout.initBaseline,point}))}var LargeBoxPathShape=function LargeBoxPathShape(){},LargeBoxPath=function(_super){function LargeBoxPath(opts){var _this=_super.call(this,opts)||this;return _this.type="largeCandlestickBox",_this}return(0,tslib_es6.ZT)(LargeBoxPath,_super),LargeBoxPath.prototype.getDefaultShape=function(){return new LargeBoxPathShape},LargeBoxPath.prototype.buildPath=function(ctx,shape){for(var points=shape.points,i=0;i<points.length;)if(this.__sign===points[i++]){var x=points[i++];ctx.moveTo(x,points[i++]),ctx.lineTo(x,points[i++])}else i+=3},LargeBoxPath}(Path.ZP);function createLarge(seriesModel,group,progressiveEls,incremental){var data=seriesModel.getData(),largePoints=data.getLayout("largePoints"),elP=new LargeBoxPath({shape:{points:largePoints},__sign:1,ignoreCoarsePointer:!0});group.add(elP);var elN=new LargeBoxPath({shape:{points:largePoints},__sign:-1,ignoreCoarsePointer:!0});group.add(elN);var elDoji=new LargeBoxPath({shape:{points:largePoints},__sign:0,ignoreCoarsePointer:!0});group.add(elDoji),setLargeStyle(1,elP,seriesModel,data),setLargeStyle(-1,elN,seriesModel,data),setLargeStyle(0,elDoji,seriesModel,data),incremental&&(elP.incremental=!0,elN.incremental=!0),progressiveEls&&progressiveEls.push(elP,elN)}function setLargeStyle(sign,el,seriesModel,data){var borderColor=seriesModel.get(["itemStyle",sign>0?"borderColor":"borderColor0"])||seriesModel.get(["itemStyle",sign>0?"color":"color0"]);0===sign&&(borderColor=seriesModel.get(["itemStyle","borderColorDoji"]));var itemStyle=seriesModel.getModel("itemStyle").getItemStyle(SKIP_PROPS);el.useStyle(itemStyle),el.style.fill=null,el.style.stroke=borderColor}const candlestick_CandlestickView=CandlestickView;var CandlestickSeriesModel=function(_super){function CandlestickSeriesModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=CandlestickSeriesModel.type,_this.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],_this}return(0,tslib_es6.ZT)(CandlestickSeriesModel,_super),CandlestickSeriesModel.prototype.getShadowDim=function(){return"open"},CandlestickSeriesModel.prototype.brushSelector=function(dataIndex,data,selectors){var itemLayout=data.getItemLayout(dataIndex);return itemLayout&&selectors.rect(itemLayout.brushRect)},CandlestickSeriesModel.type="series.candlestick",CandlestickSeriesModel.dependencies=["xAxis","yAxis","grid"],CandlestickSeriesModel.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},CandlestickSeriesModel}(Series.Z);(0,util.mixin)(CandlestickSeriesModel,WhiskerBoxCommonMixin,!0);const CandlestickSeries=CandlestickSeriesModel;function candlestickPreprocessor(option){option&&util.isArray(option.series)&&util.each(option.series,(function(seriesItem){util.isObject(seriesItem)&&"k"===seriesItem.type&&(seriesItem.type="candlestick")}))}var positiveBorderColorQuery=["itemStyle","borderColor"],negativeBorderColorQuery=["itemStyle","borderColor0"],dojiBorderColorQuery=["itemStyle","borderColorDoji"],positiveColorQuery=["itemStyle","color"],negativeColorQuery=["itemStyle","color0"];const candlestick_candlestickVisual={seriesType:"candlestick",plan:(0,createRenderPlanner.Z)(),performRawSeries:!0,reset:function(seriesModel,ecModel){function getColor(sign,model){return model.get(sign>0?positiveColorQuery:negativeColorQuery)}function getBorderColor(sign,model){return model.get(0===sign?dojiBorderColorQuery:sign>0?positiveBorderColorQuery:negativeBorderColorQuery)}if(!ecModel.isSeriesFiltered(seriesModel))return!seriesModel.pipelineContext.large&&{progress:function(params,data){for(var dataIndex;null!=(dataIndex=params.next());){var itemModel=data.getItemModel(dataIndex),sign=data.getItemLayout(dataIndex).sign,style=itemModel.getItemStyle();style.fill=getColor(sign,itemModel),style.stroke=getBorderColor(sign,itemModel)||style.fill;var existsStyle=data.ensureUniqueItemVisual(dataIndex,"style");(0,util.extend)(existsStyle,style)}}}}};function getSign(store,dataIndex,openVal,closeVal,closeDimI,hasDojiColor){return openVal>closeVal?-1:openVal<closeVal?1:hasDojiColor?0:dataIndex>0?store.get(closeDimI,dataIndex-1)<=closeVal?1:-1:1}const candlestick_candlestickLayout={seriesType:"candlestick",plan:(0,createRenderPlanner.Z)(),reset:function(seriesModel){var coordSys=seriesModel.coordinateSystem,data=seriesModel.getData(),candleWidth=function calculateCandleWidth(seriesModel,data){var extent,baseAxis=seriesModel.getBaseAxis(),bandWidth="category"===baseAxis.type?baseAxis.getBandWidth():(extent=baseAxis.getExtent(),Math.abs(extent[1]-extent[0])/data.count()),barMaxWidth=(0,number.GM)((0,util.retrieve2)(seriesModel.get("barMaxWidth"),bandWidth),bandWidth),barMinWidth=(0,number.GM)((0,util.retrieve2)(seriesModel.get("barMinWidth"),1),bandWidth),barWidth=seriesModel.get("barWidth");return null!=barWidth?(0,number.GM)(barWidth,bandWidth):Math.max(Math.min(bandWidth/2,barMaxWidth),barMinWidth)}(seriesModel,data),coordDims=["x","y"],cDimI=data.getDimensionIndex(data.mapDimension(coordDims[0])),vDimsI=(0,util.map)(data.mapDimensionsAll(coordDims[1]),data.getDimensionIndex,data),openDimI=vDimsI[0],closeDimI=vDimsI[1],lowestDimI=vDimsI[2],highestDimI=vDimsI[3];if(data.setLayout({candleWidth,isSimpleBox:candleWidth<=1.3}),!(cDimI<0||vDimsI.length<4))return{progress:seriesModel.pipelineContext.large?function largeProgress(params,data){var point,dataIndex,points=(0,vendor.o)(4*params.count),offset=0,tmpIn=[],tmpOut=[],store=data.getStore(),hasDojiColor=!!seriesModel.get(["itemStyle","borderColorDoji"]);for(;null!=(dataIndex=params.next());){var axisDimVal=store.get(cDimI,dataIndex),openVal=store.get(openDimI,dataIndex),closeVal=store.get(closeDimI,dataIndex),lowestVal=store.get(lowestDimI,dataIndex),highestVal=store.get(highestDimI,dataIndex);isNaN(axisDimVal)||isNaN(lowestVal)||isNaN(highestVal)?(points[offset++]=NaN,offset+=3):(points[offset++]=getSign(store,dataIndex,openVal,closeVal,closeDimI,hasDojiColor),tmpIn[0]=axisDimVal,tmpIn[1]=lowestVal,point=coordSys.dataToPoint(tmpIn,null,tmpOut),points[offset++]=point?point[0]:NaN,points[offset++]=point?point[1]:NaN,tmpIn[1]=highestVal,point=coordSys.dataToPoint(tmpIn,null,tmpOut),points[offset++]=point?point[1]:NaN)}data.setLayout("largePoints",points)}:function normalProgress(params,data){var dataIndex,store=data.getStore();for(;null!=(dataIndex=params.next());){var axisDimVal=store.get(cDimI,dataIndex),openVal=store.get(openDimI,dataIndex),closeVal=store.get(closeDimI,dataIndex),lowestVal=store.get(lowestDimI,dataIndex),highestVal=store.get(highestDimI,dataIndex),ocLow=Math.min(openVal,closeVal),ocHigh=Math.max(openVal,closeVal),ocLowPoint=getPoint(ocLow,axisDimVal),ocHighPoint=getPoint(ocHigh,axisDimVal),lowestPoint=getPoint(lowestVal,axisDimVal),highestPoint=getPoint(highestVal,axisDimVal),ends=[];addBodyEnd(ends,ocHighPoint,0),addBodyEnd(ends,ocLowPoint,1),ends.push(subPixelOptimizePoint(highestPoint),subPixelOptimizePoint(ocHighPoint),subPixelOptimizePoint(lowestPoint),subPixelOptimizePoint(ocLowPoint));var hasDojiColor=!!data.getItemModel(dataIndex).get(["itemStyle","borderColorDoji"]);data.setItemLayout(dataIndex,{sign:getSign(store,dataIndex,openVal,closeVal,closeDimI,hasDojiColor),initBaseline:openVal>closeVal?ocHighPoint[1]:ocLowPoint[1],ends,brushRect:makeBrushRect(lowestVal,highestVal,axisDimVal)})}function getPoint(val,axisDimVal){var p=[];return p[0]=axisDimVal,p[1]=val,isNaN(axisDimVal)||isNaN(val)?[NaN,NaN]:coordSys.dataToPoint(p)}function addBodyEnd(ends,point,start){var point1=point.slice(),point2=point.slice();point1[0]=(0,graphic.subPixelOptimize)(point1[0]+candleWidth/2,1,!1),point2[0]=(0,graphic.subPixelOptimize)(point2[0]-candleWidth/2,1,!0),start?ends.push(point1,point2):ends.push(point2,point1)}function makeBrushRect(lowestVal,highestVal,axisDimVal){var pmin=getPoint(lowestVal,axisDimVal),pmax=getPoint(highestVal,axisDimVal);return pmin[0]-=candleWidth/2,pmax[0]-=candleWidth/2,{x:pmin[0],y:pmin[1],width:candleWidth,height:pmax[1]-pmin[1]}}function subPixelOptimizePoint(point){return point[0]=(0,graphic.subPixelOptimize)(point[0],1),point}}}}};function updateRipplePath(rippleGroup,effectCfg){var color=effectCfg.rippleEffectColor||effectCfg.color;rippleGroup.eachChild((function(ripplePath){ripplePath.attr({z:effectCfg.z,zlevel:effectCfg.zlevel,style:{stroke:"stroke"===effectCfg.brushType?color:null,fill:"fill"===effectCfg.brushType?color:null}})}))}const helper_EffectSymbol=function(_super){function EffectSymbol(data,idx){var _this=_super.call(this)||this,symbol=new helper_Symbol(data,idx),rippleGroup=new Group.Z;return _this.add(symbol),_this.add(rippleGroup),_this.updateData(data,idx),_this}return(0,tslib_es6.ZT)(EffectSymbol,_super),EffectSymbol.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},EffectSymbol.prototype.startEffectAnimation=function(effectCfg){for(var symbolType=effectCfg.symbolType,color=effectCfg.color,rippleNumber=effectCfg.rippleNumber,rippleGroup=this.childAt(1),i=0;i<rippleNumber;i++){var ripplePath=(0,util_symbol.th)(symbolType,-1,-1,2,2,color);ripplePath.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var delay=-i/rippleNumber*effectCfg.period+effectCfg.effectOffset;ripplePath.animate("",!0).when(effectCfg.period,{scaleX:effectCfg.rippleScale/2,scaleY:effectCfg.rippleScale/2}).delay(delay).start(),ripplePath.animateStyle(!0).when(effectCfg.period,{opacity:0}).delay(delay).start(),rippleGroup.add(ripplePath)}updateRipplePath(rippleGroup,effectCfg)},EffectSymbol.prototype.updateEffectAnimation=function(effectCfg){for(var oldEffectCfg=this._effectCfg,rippleGroup=this.childAt(1),DIFFICULT_PROPS=["symbolType","period","rippleScale","rippleNumber"],i=0;i<DIFFICULT_PROPS.length;i++){var propName=DIFFICULT_PROPS[i];if(oldEffectCfg[propName]!==effectCfg[propName])return this.stopEffectAnimation(),void this.startEffectAnimation(effectCfg)}updateRipplePath(rippleGroup,effectCfg)},EffectSymbol.prototype.highlight=function(){(0,states.fD)(this)},EffectSymbol.prototype.downplay=function(){(0,states.Mh)(this)},EffectSymbol.prototype.getSymbolType=function(){var symbol=this.childAt(0);return symbol&&symbol.getSymbolType()},EffectSymbol.prototype.updateData=function(data,idx){var _this=this,seriesModel=data.hostModel;this.childAt(0).updateData(data,idx);var rippleGroup=this.childAt(1),itemModel=data.getItemModel(idx),symbolType=data.getItemVisual(idx,"symbol"),symbolSize=(0,util_symbol.zp)(data.getItemVisual(idx,"symbolSize")),symbolStyle=data.getItemVisual(idx,"style"),color=symbolStyle&&symbolStyle.fill,emphasisModel=itemModel.getModel("emphasis");rippleGroup.setScale(symbolSize),rippleGroup.traverse((function(ripplePath){ripplePath.setStyle("fill",color)}));var symbolOffset=(0,util_symbol.Cq)(data.getItemVisual(idx,"symbolOffset"),symbolSize);symbolOffset&&(rippleGroup.x=symbolOffset[0],rippleGroup.y=symbolOffset[1]);var symbolRotate=data.getItemVisual(idx,"symbolRotate");rippleGroup.rotation=(symbolRotate||0)*Math.PI/180||0;var effectCfg={};effectCfg.showEffectOn=seriesModel.get("showEffectOn"),effectCfg.rippleScale=itemModel.get(["rippleEffect","scale"]),effectCfg.brushType=itemModel.get(["rippleEffect","brushType"]),effectCfg.period=1e3*itemModel.get(["rippleEffect","period"]),effectCfg.effectOffset=idx/data.count(),effectCfg.z=seriesModel.getShallow("z")||0,effectCfg.zlevel=seriesModel.getShallow("zlevel")||0,effectCfg.symbolType=symbolType,effectCfg.color=color,effectCfg.rippleEffectColor=itemModel.get(["rippleEffect","color"]),effectCfg.rippleNumber=itemModel.get(["rippleEffect","number"]),"render"===effectCfg.showEffectOn?(this._effectCfg?this.updateEffectAnimation(effectCfg):this.startEffectAnimation(effectCfg),this._effectCfg=effectCfg):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(toState){"emphasis"===toState?"render"!==effectCfg.showEffectOn&&_this.startEffectAnimation(effectCfg):"normal"===toState&&"render"!==effectCfg.showEffectOn&&_this.stopEffectAnimation()}),this._effectCfg=effectCfg,(0,states.k5)(this,emphasisModel.get("focus"),emphasisModel.get("blurScope"),emphasisModel.get("disabled"))},EffectSymbol.prototype.fadeOut=function(cb){cb&&cb()},EffectSymbol}(Group.Z);const effectScatter_EffectScatterView=function(_super){function EffectScatterView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=EffectScatterView.type,_this}return(0,tslib_es6.ZT)(EffectScatterView,_super),EffectScatterView.prototype.init=function(){this._symbolDraw=new helper_SymbolDraw(helper_EffectSymbol)},EffectScatterView.prototype.render=function(seriesModel,ecModel,api){var data=seriesModel.getData(),effectSymbolDraw=this._symbolDraw;effectSymbolDraw.updateData(data,{clipShape:this._getClipShape(seriesModel)}),this.group.add(effectSymbolDraw.group)},EffectScatterView.prototype._getClipShape=function(seriesModel){var coordSys=seriesModel.coordinateSystem,clipArea=coordSys&&coordSys.getArea&&coordSys.getArea();return seriesModel.get("clip",!0)?clipArea:null},EffectScatterView.prototype.updateTransform=function(seriesModel,ecModel,api){var data=seriesModel.getData();this.group.dirty();var res=pointsLayout("").reset(seriesModel,ecModel,api);res.progress&&res.progress({start:0,end:data.count(),count:data.count()},data),this._symbolDraw.updateLayout()},EffectScatterView.prototype._updateGroupTransform=function(seriesModel){var coordSys=seriesModel.coordinateSystem;coordSys&&coordSys.getRoamTransform&&(this.group.transform=matrix.clone(coordSys.getRoamTransform()),this.group.decomposeTransform())},EffectScatterView.prototype.remove=function(ecModel,api){this._symbolDraw&&this._symbolDraw.remove(!0)},EffectScatterView.type="effectScatter",EffectScatterView}(Chart.Z);const EffectScatterSeries=function(_super){function EffectScatterSeriesModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=EffectScatterSeriesModel.type,_this.hasSymbolVisual=!0,_this}return(0,tslib_es6.ZT)(EffectScatterSeriesModel,_super),EffectScatterSeriesModel.prototype.getInitialData=function(option,ecModel){return(0,createSeriesData.Z)(null,this,{useEncodeDefaulter:!0})},EffectScatterSeriesModel.prototype.brushSelector=function(dataIndex,data,selectors){return selectors.point(data.getItemLayout(dataIndex))},EffectScatterSeriesModel.type="series.effectScatter",EffectScatterSeriesModel.dependencies=["grid","polar"],EffectScatterSeriesModel.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},EffectScatterSeriesModel}(Series.Z);var EffectLine=function(_super){function EffectLine(lineData,idx,seriesScope){var _this=_super.call(this)||this;return _this.add(_this.createLine(lineData,idx,seriesScope)),_this._updateEffectSymbol(lineData,idx),_this}return(0,tslib_es6.ZT)(EffectLine,_super),EffectLine.prototype.createLine=function(lineData,idx,seriesScope){return new helper_Line(lineData,idx,seriesScope)},EffectLine.prototype._updateEffectSymbol=function(lineData,idx){var effectModel=lineData.getItemModel(idx).getModel("effect"),size=effectModel.get("symbolSize"),symbolType=effectModel.get("symbol");util.isArray(size)||(size=[size,size]);var lineStyle=lineData.getItemVisual(idx,"style"),color=effectModel.get("color")||lineStyle&&lineStyle.stroke,symbol=this.childAt(1);this._symbolType!==symbolType&&(this.remove(symbol),(symbol=(0,util_symbol.th)(symbolType,-.5,-.5,1,1,color)).z2=100,symbol.culling=!0,this.add(symbol)),symbol&&(symbol.setStyle("shadowColor",color),symbol.setStyle(effectModel.getItemStyle(["color"])),symbol.scaleX=size[0],symbol.scaleY=size[1],symbol.setColor(color),this._symbolType=symbolType,this._symbolScale=size,this._updateEffectAnimation(lineData,effectModel,idx))},EffectLine.prototype._updateEffectAnimation=function(lineData,effectModel,idx){var symbol=this.childAt(1);if(symbol){var points=lineData.getItemLayout(idx),period=1e3*effectModel.get("period"),loop=effectModel.get("loop"),roundTrip=effectModel.get("roundTrip"),constantSpeed=effectModel.get("constantSpeed"),delayExpr=util.retrieve(effectModel.get("delay"),(function(idx){return idx/lineData.count()*period/3}));if(symbol.ignore=!0,this._updateAnimationPoints(symbol,points),constantSpeed>0&&(period=this._getLineLength(symbol)/constantSpeed*1e3),period!==this._period||loop!==this._loop||roundTrip!==this._roundTrip){symbol.stopAnimation();var delayNum=void 0;delayNum=util.isFunction(delayExpr)?delayExpr(idx):delayExpr,symbol.__t>0&&(delayNum=-period*symbol.__t),this._animateSymbol(symbol,period,delayNum,loop,roundTrip)}this._period=period,this._loop=loop,this._roundTrip=roundTrip}},EffectLine.prototype._animateSymbol=function(symbol,period,delayNum,loop,roundTrip){if(period>0){symbol.__t=0;var self_1=this,animator=symbol.animate("",loop).when(roundTrip?2*period:period,{__t:roundTrip?2:1}).delay(delayNum).during((function(){self_1._updateSymbolPosition(symbol)}));loop||animator.done((function(){self_1.remove(symbol)})),animator.start()}},EffectLine.prototype._getLineLength=function(symbol){return vector.dist(symbol.__p1,symbol.__cp1)+vector.dist(symbol.__cp1,symbol.__p2)},EffectLine.prototype._updateAnimationPoints=function(symbol,points){symbol.__p1=points[0],symbol.__p2=points[1],symbol.__cp1=points[2]||[(points[0][0]+points[1][0])/2,(points[0][1]+points[1][1])/2]},EffectLine.prototype.updateData=function(lineData,idx,seriesScope){this.childAt(0).updateData(lineData,idx,seriesScope),this._updateEffectSymbol(lineData,idx)},EffectLine.prototype._updateSymbolPosition=function(symbol){var p1=symbol.__p1,p2=symbol.__p2,cp1=symbol.__cp1,t=symbol.__t<1?symbol.__t:2-symbol.__t,pos=[symbol.x,symbol.y],lastPos=pos.slice(),quadraticAt=curve.Zm,quadraticDerivativeAt=curve.AZ;pos[0]=quadraticAt(p1[0],cp1[0],p2[0],t),pos[1]=quadraticAt(p1[1],cp1[1],p2[1],t);var tx=symbol.__t<1?quadraticDerivativeAt(p1[0],cp1[0],p2[0],t):quadraticDerivativeAt(p2[0],cp1[0],p1[0],1-t),ty=symbol.__t<1?quadraticDerivativeAt(p1[1],cp1[1],p2[1],t):quadraticDerivativeAt(p2[1],cp1[1],p1[1],1-t);symbol.rotation=-Math.atan2(ty,tx)-Math.PI/2,"line"!==this._symbolType&&"rect"!==this._symbolType&&"roundRect"!==this._symbolType||(void 0!==symbol.__lastT&&symbol.__lastT<symbol.__t?(symbol.scaleY=1.05*vector.dist(lastPos,pos),1===t&&(pos[0]=lastPos[0]+(pos[0]-lastPos[0])/2,pos[1]=lastPos[1]+(pos[1]-lastPos[1])/2)):1===symbol.__lastT?symbol.scaleY=2*vector.dist(p1,pos):symbol.scaleY=this._symbolScale[1]),symbol.__lastT=symbol.__t,symbol.ignore=!1,symbol.x=pos[0],symbol.y=pos[1]},EffectLine.prototype.updateLayout=function(lineData,idx){this.childAt(0).updateLayout(lineData,idx);var effectModel=lineData.getItemModel(idx).getModel("effect");this._updateEffectAnimation(lineData,effectModel,idx)},EffectLine}(Group.Z);const helper_EffectLine=EffectLine;var Polyline=function(_super){function Polyline(lineData,idx,seriesScope){var _this=_super.call(this)||this;return _this._createPolyline(lineData,idx,seriesScope),_this}return(0,tslib_es6.ZT)(Polyline,_super),Polyline.prototype._createPolyline=function(lineData,idx,seriesScope){var points=lineData.getItemLayout(idx),line=new shape_Polyline.Z({shape:{points}});this.add(line),this._updateCommonStl(lineData,idx,seriesScope)},Polyline.prototype.updateData=function(lineData,idx,seriesScope){var seriesModel=lineData.hostModel,line=this.childAt(0),target={shape:{points:lineData.getItemLayout(idx)}};basicTransition.D(line,target,seriesModel,idx),this._updateCommonStl(lineData,idx,seriesScope)},Polyline.prototype._updateCommonStl=function(lineData,idx,seriesScope){var line=this.childAt(0),itemModel=lineData.getItemModel(idx),emphasisLineStyle=seriesScope&&seriesScope.emphasisLineStyle,focus=seriesScope&&seriesScope.focus,blurScope=seriesScope&&seriesScope.blurScope,emphasisDisabled=seriesScope&&seriesScope.emphasisDisabled;if(!seriesScope||lineData.hasItemOption){var emphasisModel=itemModel.getModel("emphasis");emphasisLineStyle=emphasisModel.getModel("lineStyle").getLineStyle(),emphasisDisabled=emphasisModel.get("disabled"),focus=emphasisModel.get("focus"),blurScope=emphasisModel.get("blurScope")}line.useStyle(lineData.getItemVisual(idx,"style")),line.style.fill=null,line.style.strokeNoScale=!0,line.ensureState("emphasis").style=emphasisLineStyle,(0,states.k5)(this,focus,blurScope,emphasisDisabled)},Polyline.prototype.updateLayout=function(lineData,idx){this.childAt(0).setShape("points",lineData.getItemLayout(idx))},Polyline}(Group.Z);const helper_Polyline=Polyline;const helper_EffectPolyline=function(_super){function EffectPolyline(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this._lastFrame=0,_this._lastFramePercent=0,_this}return(0,tslib_es6.ZT)(EffectPolyline,_super),EffectPolyline.prototype.createLine=function(lineData,idx,seriesScope){return new helper_Polyline(lineData,idx,seriesScope)},EffectPolyline.prototype._updateAnimationPoints=function(symbol,points){this._points=points;for(var accLenArr=[0],len=0,i=1;i<points.length;i++){var p1=points[i-1],p2=points[i];len+=vector.dist(p1,p2),accLenArr.push(len)}if(0!==len){for(i=0;i<accLenArr.length;i++)accLenArr[i]/=len;this._offsets=accLenArr,this._length=len}else this._length=0},EffectPolyline.prototype._getLineLength=function(){return this._length},EffectPolyline.prototype._updateSymbolPosition=function(symbol){var t=symbol.__t<1?symbol.__t:2-symbol.__t,points=this._points,offsets=this._offsets,len=points.length;if(offsets){var frame,lastFrame=this._lastFrame;if(t<this._lastFramePercent){for(frame=Math.min(lastFrame+1,len-1);frame>=0&&!(offsets[frame]<=t);frame--);frame=Math.min(frame,len-2)}else{for(frame=lastFrame;frame<len&&!(offsets[frame]>t);frame++);frame=Math.min(frame-1,len-2)}var p=(t-offsets[frame])/(offsets[frame+1]-offsets[frame]),p0=points[frame],p1=points[frame+1];symbol.x=p0[0]*(1-p)+p*p1[0],symbol.y=p0[1]*(1-p)+p*p1[1];var tx=symbol.__t<1?p1[0]-p0[0]:p0[0]-p1[0],ty=symbol.__t<1?p1[1]-p0[1]:p0[1]-p1[1];symbol.rotation=-Math.atan2(ty,tx)-Math.PI/2,this._lastFrame=frame,this._lastFramePercent=t,symbol.ignore=!1}},EffectPolyline}(helper_EffectLine);var line=__webpack_require__("./node_modules/zrender/lib/contain/line.js"),quadratic=__webpack_require__("./node_modules/zrender/lib/contain/quadratic.js"),LargeLinesPathShape=function LargeLinesPathShape(){this.polyline=!1,this.curveness=0,this.segs=[]},LargeLinesPath=function(_super){function LargeLinesPath(opts){var _this=_super.call(this,opts)||this;return _this._off=0,_this.hoverDataIdx=-1,_this}return(0,tslib_es6.ZT)(LargeLinesPath,_super),LargeLinesPath.prototype.reset=function(){this.notClear=!1,this._off=0},LargeLinesPath.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},LargeLinesPath.prototype.getDefaultShape=function(){return new LargeLinesPathShape},LargeLinesPath.prototype.buildPath=function(ctx,shape){var i,segs=shape.segs,curveness=shape.curveness;if(shape.polyline)for(i=this._off;i<segs.length;){var count=segs[i++];if(count>0){ctx.moveTo(segs[i++],segs[i++]);for(var k=1;k<count;k++)ctx.lineTo(segs[i++],segs[i++])}}else for(i=this._off;i<segs.length;){var x0=segs[i++],y0=segs[i++],x1=segs[i++],y1=segs[i++];if(ctx.moveTo(x0,y0),curveness>0){var x2=(x0+x1)/2-(y0-y1)*curveness,y2=(y0+y1)/2-(x1-x0)*curveness;ctx.quadraticCurveTo(x2,y2,x1,y1)}else ctx.lineTo(x1,y1)}this.incremental&&(this._off=i,this.notClear=!0)},LargeLinesPath.prototype.findDataIndex=function(x,y){var shape=this.shape,segs=shape.segs,curveness=shape.curveness,lineWidth=this.style.lineWidth;if(shape.polyline)for(var dataIndex=0,i=0;i<segs.length;){var count=segs[i++];if(count>0)for(var x0=segs[i++],y0=segs[i++],k=1;k<count;k++){var x1=segs[i++],y1=segs[i++];if(line.m(x0,y0,x1,y1,lineWidth,x,y))return dataIndex}dataIndex++}else for(dataIndex=0,i=0;i<segs.length;){x0=segs[i++],y0=segs[i++],x1=segs[i++],y1=segs[i++];if(curveness>0){var x2=(x0+x1)/2-(y0-y1)*curveness,y2=(y0+y1)/2-(x1-x0)*curveness;if(quadratic.m(x0,y0,x2,y2,x1,y1,lineWidth,x,y))return dataIndex}else if(line.m(x0,y0,x1,y1,lineWidth,x,y))return dataIndex;dataIndex++}return-1},LargeLinesPath.prototype.contain=function(x,y){var localPos=this.transformCoordToLocal(x,y),rect=this.getBoundingRect();return x=localPos[0],y=localPos[1],rect.contain(x,y)?(this.hoverDataIdx=this.findDataIndex(x,y))>=0:(this.hoverDataIdx=-1,!1)},LargeLinesPath.prototype.getBoundingRect=function(){var rect=this._rect;if(!rect){for(var points=this.shape.segs,minX=1/0,minY=1/0,maxX=-1/0,maxY=-1/0,i=0;i<points.length;){var x=points[i++],y=points[i++];minX=Math.min(x,minX),maxX=Math.max(x,maxX),minY=Math.min(y,minY),maxY=Math.max(y,maxY)}rect=this._rect=new BoundingRect.Z(minX,minY,maxX,maxY)}return rect},LargeLinesPath}(Path.ZP);const helper_LargeLineDraw=function(){function LargeLineDraw(){this.group=new Group.Z}return LargeLineDraw.prototype.updateData=function(data){this._clear();var lineEl=this._create();lineEl.setShape({segs:data.getLayout("linesPoints")}),this._setCommon(lineEl,data)},LargeLineDraw.prototype.incrementalPrepareUpdate=function(data){this.group.removeAll(),this._clear()},LargeLineDraw.prototype.incrementalUpdate=function(taskParams,data){var lastAdded=this._newAdded[0],linePoints=data.getLayout("linesPoints"),oldSegs=lastAdded&&lastAdded.shape.segs;if(oldSegs&&oldSegs.length<2e4){var oldLen=oldSegs.length,newSegs=new Float32Array(oldLen+linePoints.length);newSegs.set(oldSegs),newSegs.set(linePoints,oldLen),lastAdded.setShape({segs:newSegs})}else{this._newAdded=[];var lineEl=this._create();lineEl.incremental=!0,lineEl.setShape({segs:linePoints}),this._setCommon(lineEl,data),lineEl.__startIndex=taskParams.start}},LargeLineDraw.prototype.remove=function(){this._clear()},LargeLineDraw.prototype.eachRendered=function(cb){this._newAdded[0]&&cb(this._newAdded[0])},LargeLineDraw.prototype._create=function(){var lineEl=new LargeLinesPath({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(lineEl),this.group.add(lineEl),lineEl},LargeLineDraw.prototype._setCommon=function(lineEl,data,isIncremental){var hostModel=data.hostModel;lineEl.setShape({polyline:hostModel.get("polyline"),curveness:hostModel.get(["lineStyle","curveness"])}),lineEl.useStyle(hostModel.getModel("lineStyle").getLineStyle()),lineEl.style.strokeNoScale=!0;var style=data.getVisual("style");style&&style.stroke&&lineEl.setStyle("stroke",style.stroke),lineEl.setStyle("fill",null);var ecData=(0,innerStore.A)(lineEl);ecData.seriesIndex=hostModel.seriesIndex,lineEl.on("mousemove",(function(e){ecData.dataIndex=null;var dataIndex=lineEl.hoverDataIdx;dataIndex>0&&(ecData.dataIndex=dataIndex+lineEl.__startIndex)}))},LargeLineDraw.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},LargeLineDraw}();const lines_linesLayout={seriesType:"lines",plan:(0,createRenderPlanner.Z)(),reset:function(seriesModel){var coordSys=seriesModel.coordinateSystem;if(coordSys){var isPolyline=seriesModel.get("polyline"),isLarge=seriesModel.pipelineContext.large;return{progress:function(params,lineData){var lineCoords=[];if(isLarge){var points=void 0,segCount=params.end-params.start;if(isPolyline){for(var totalCoordsCount=0,i=params.start;i<params.end;i++)totalCoordsCount+=seriesModel.getLineCoordsCount(i);points=new Float32Array(segCount+2*totalCoordsCount)}else points=new Float32Array(4*segCount);var offset=0,pt=[];for(i=params.start;i<params.end;i++){var len=seriesModel.getLineCoords(i,lineCoords);isPolyline&&(points[offset++]=len);for(var k=0;k<len;k++)pt=coordSys.dataToPoint(lineCoords[k],!1,pt),points[offset++]=pt[0],points[offset++]=pt[1]}lineData.setLayout("linesPoints",points)}else for(i=params.start;i<params.end;i++){var itemModel=lineData.getItemModel(i),pts=(len=seriesModel.getLineCoords(i,lineCoords),[]);if(isPolyline)for(var j=0;j<len;j++)pts.push(coordSys.dataToPoint(lineCoords[j]));else{pts[0]=coordSys.dataToPoint(lineCoords[0]),pts[1]=coordSys.dataToPoint(lineCoords[1]);var curveness=itemModel.get(["lineStyle","curveness"]);+curveness&&(pts[2]=[(pts[0][0]+pts[1][0])/2-(pts[0][1]-pts[1][1])*curveness,(pts[0][1]+pts[1][1])/2-(pts[1][0]-pts[0][0])*curveness])}lineData.setItemLayout(i,pts)}}}}}};const lines_LinesView=function(_super){function LinesView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=LinesView.type,_this}return(0,tslib_es6.ZT)(LinesView,_super),LinesView.prototype.render=function(seriesModel,ecModel,api){var data=seriesModel.getData(),lineDraw=this._updateLineDraw(data,seriesModel),zlevel=seriesModel.get("zlevel"),trailLength=seriesModel.get(["effect","trailLength"]),zr=api.getZr(),isSvg="svg"===zr.painter.getType();isSvg||zr.painter.getLayer(zlevel).clear(!0),null==this._lastZlevel||isSvg||zr.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(seriesModel)&&trailLength>0&&(isSvg||zr.configLayer(zlevel,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(trailLength/10+.9,1),0)})),lineDraw.updateData(data);var clipPath=seriesModel.get("clip",!0)&&(0,createClipPathFromCoordSys.lQ)(seriesModel.coordinateSystem,!1,seriesModel);clipPath?this.group.setClipPath(clipPath):this.group.removeClipPath(),this._lastZlevel=zlevel,this._finished=!0},LinesView.prototype.incrementalPrepareRender=function(seriesModel,ecModel,api){var data=seriesModel.getData();this._updateLineDraw(data,seriesModel).incrementalPrepareUpdate(data),this._clearLayer(api),this._finished=!1},LinesView.prototype.incrementalRender=function(taskParams,seriesModel,ecModel){this._lineDraw.incrementalUpdate(taskParams,seriesModel.getData()),this._finished=taskParams.end===seriesModel.getData().count()},LinesView.prototype.eachRendered=function(cb){this._lineDraw&&this._lineDraw.eachRendered(cb)},LinesView.prototype.updateTransform=function(seriesModel,ecModel,api){var data=seriesModel.getData(),pipelineContext=seriesModel.pipelineContext;if(!this._finished||pipelineContext.large||pipelineContext.progressiveRender)return{update:!0};var res=lines_linesLayout.reset(seriesModel,ecModel,api);res.progress&&res.progress({start:0,end:data.count(),count:data.count()},data),this._lineDraw.updateLayout(),this._clearLayer(api)},LinesView.prototype._updateLineDraw=function(data,seriesModel){var lineDraw=this._lineDraw,hasEffect=this._showEffect(seriesModel),isPolyline=!!seriesModel.get("polyline"),isLargeDraw=seriesModel.pipelineContext.large;return lineDraw&&hasEffect===this._hasEffet&&isPolyline===this._isPolyline&&isLargeDraw===this._isLargeDraw||(lineDraw&&lineDraw.remove(),lineDraw=this._lineDraw=isLargeDraw?new helper_LargeLineDraw:new helper_LineDraw(isPolyline?hasEffect?helper_EffectPolyline:helper_Polyline:hasEffect?helper_EffectLine:helper_Line),this._hasEffet=hasEffect,this._isPolyline=isPolyline,this._isLargeDraw=isLargeDraw),this.group.add(lineDraw.group),lineDraw},LinesView.prototype._showEffect=function(seriesModel){return!!seriesModel.get(["effect","show"])},LinesView.prototype._clearLayer=function(api){var zr=api.getZr();"svg"===zr.painter.getType()||null==this._lastZlevel||zr.painter.getLayer(this._lastZlevel).clear(!0)},LinesView.prototype.remove=function(ecModel,api){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(api)},LinesView.prototype.dispose=function(ecModel,api){this.remove(ecModel,api)},LinesView.type="lines",LinesView}(Chart.Z);var Uint32Arr="undefined"==typeof Uint32Array?Array:Uint32Array,Float64Arr="undefined"==typeof Float64Array?Array:Float64Array;function compatEc2(seriesOpt){var data=seriesOpt.data;data&&data[0]&&data[0][0]&&data[0][0].coord&&(seriesOpt.data=(0,util.map)(data,(function(itemOpt){var target={coords:[itemOpt[0].coord,itemOpt[1].coord]};return itemOpt[0].name&&(target.fromName=itemOpt[0].name),itemOpt[1].name&&(target.toName=itemOpt[1].name),(0,util.mergeAll)([target,itemOpt[0],itemOpt[1]])})))}var LinesSeriesModel=function(_super){function LinesSeriesModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=LinesSeriesModel.type,_this.visualStyleAccessPath="lineStyle",_this.visualDrawType="stroke",_this}return(0,tslib_es6.ZT)(LinesSeriesModel,_super),LinesSeriesModel.prototype.init=function(option){option.data=option.data||[],compatEc2(option);var result=this._processFlatCoordsArray(option.data);this._flatCoords=result.flatCoords,this._flatCoordsOffset=result.flatCoordsOffset,result.flatCoords&&(option.data=new Float32Array(result.count)),_super.prototype.init.apply(this,arguments)},LinesSeriesModel.prototype.mergeOption=function(option){if(compatEc2(option),option.data){var result=this._processFlatCoordsArray(option.data);this._flatCoords=result.flatCoords,this._flatCoordsOffset=result.flatCoordsOffset,result.flatCoords&&(option.data=new Float32Array(result.count))}_super.prototype.mergeOption.apply(this,arguments)},LinesSeriesModel.prototype.appendData=function(params){var result=this._processFlatCoordsArray(params.data);result.flatCoords&&(this._flatCoords?(this._flatCoords=(0,util.concatArray)(this._flatCoords,result.flatCoords),this._flatCoordsOffset=(0,util.concatArray)(this._flatCoordsOffset,result.flatCoordsOffset)):(this._flatCoords=result.flatCoords,this._flatCoordsOffset=result.flatCoordsOffset),params.data=new Float32Array(result.count)),this.getRawData().appendData(params.data)},LinesSeriesModel.prototype._getCoordsFromItemModel=function(idx){var itemModel=this.getData().getItemModel(idx);return itemModel.option instanceof Array?itemModel.option:itemModel.getShallow("coords")},LinesSeriesModel.prototype.getLineCoordsCount=function(idx){return this._flatCoordsOffset?this._flatCoordsOffset[2*idx+1]:this._getCoordsFromItemModel(idx).length},LinesSeriesModel.prototype.getLineCoords=function(idx,out){if(this._flatCoordsOffset){for(var offset=this._flatCoordsOffset[2*idx],len=this._flatCoordsOffset[2*idx+1],i=0;i<len;i++)out[i]=out[i]||[],out[i][0]=this._flatCoords[offset+2*i],out[i][1]=this._flatCoords[offset+2*i+1];return len}var coords=this._getCoordsFromItemModel(idx);for(i=0;i<coords.length;i++)out[i]=out[i]||[],out[i][0]=coords[i][0],out[i][1]=coords[i][1];return coords.length},LinesSeriesModel.prototype._processFlatCoordsArray=function(data){var startOffset=0;if(this._flatCoords&&(startOffset=this._flatCoords.length),(0,util.isNumber)(data[0])){for(var len=data.length,coordsOffsetAndLenStorage=new Uint32Arr(len),coordsStorage=new Float64Arr(len),coordsCursor=0,offsetCursor=0,dataCount=0,i=0;i<len;){dataCount++;var count=data[i++];coordsOffsetAndLenStorage[offsetCursor++]=coordsCursor+startOffset,coordsOffsetAndLenStorage[offsetCursor++]=count;for(var k=0;k<count;k++){var x=data[i++],y=data[i++];coordsStorage[coordsCursor++]=x,coordsStorage[coordsCursor++]=y}}return{flatCoordsOffset:new Uint32Array(coordsOffsetAndLenStorage.buffer,0,offsetCursor),flatCoords:coordsStorage,count:dataCount}}return{flatCoordsOffset:null,flatCoords:null,count:data.length}},LinesSeriesModel.prototype.getInitialData=function(option,ecModel){var lineData=new SeriesData.Z(["value"],this);return lineData.hasItemOption=!1,lineData.initData(option.data,[],(function(dataItem,dimName,dataIndex,dimIndex){if(dataItem instanceof Array)return NaN;lineData.hasItemOption=!0;var value=dataItem.value;return null!=value?value instanceof Array?value[dimIndex]:value:void 0})),lineData},LinesSeriesModel.prototype.formatTooltip=function(dataIndex,multipleSeries,dataType){var itemModel=this.getData().getItemModel(dataIndex),name=itemModel.get("name");if(name)return name;var fromName=itemModel.get("fromName"),toName=itemModel.get("toName"),nameArr=[];return null!=fromName&&nameArr.push(fromName),null!=toName&&nameArr.push(toName),(0,tooltipMarkup.TX)("nameValue",{name:nameArr.join(" > ")})},LinesSeriesModel.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},LinesSeriesModel.prototype.getProgressive=function(){var progressive=this.option.progressive;return null==progressive?this.option.large?1e4:this.get("progressive"):progressive},LinesSeriesModel.prototype.getProgressiveThreshold=function(){var progressiveThreshold=this.option.progressiveThreshold;return null==progressiveThreshold?this.option.large?2e4:this.get("progressiveThreshold"):progressiveThreshold},LinesSeriesModel.prototype.getZLevelKey=function(){var effectModel=this.getModel("effect"),trailLength=effectModel.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:effectModel.get("show")&&trailLength>0?trailLength+"":""},LinesSeriesModel.type="series.lines",LinesSeriesModel.dependencies=["grid","polar","geo","calendar"],LinesSeriesModel.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},LinesSeriesModel}(Series.Z);const LinesSeries=LinesSeriesModel;function linesVisual_normalize(a){return a instanceof Array||(a=[a,a]),a}const lines_linesVisual={seriesType:"lines",reset:function(seriesModel){var symbolType=linesVisual_normalize(seriesModel.get("symbol")),symbolSize=linesVisual_normalize(seriesModel.get("symbolSize")),data=seriesModel.getData();return data.setVisual("fromSymbol",symbolType&&symbolType[0]),data.setVisual("toSymbol",symbolType&&symbolType[1]),data.setVisual("fromSymbolSize",symbolSize&&symbolSize[0]),data.setVisual("toSymbolSize",symbolSize&&symbolSize[1]),{dataEach:data.hasItemOption?function dataEach(data,idx){var itemModel=data.getItemModel(idx),symbolType=linesVisual_normalize(itemModel.getShallow("symbol",!0)),symbolSize=linesVisual_normalize(itemModel.getShallow("symbolSize",!0));symbolType[0]&&data.setItemVisual(idx,"fromSymbol",symbolType[0]),symbolType[1]&&data.setItemVisual(idx,"toSymbol",symbolType[1]),symbolSize[0]&&data.setItemVisual(idx,"fromSymbolSize",symbolSize[0]),symbolSize[1]&&data.setItemVisual(idx,"toSymbolSize",symbolSize[1])}:null}}};var heatmap_install=__webpack_require__("./node_modules/echarts/lib/chart/heatmap/install.js"),BAR_BORDER_WIDTH_QUERY=["itemStyle","borderWidth"],LAYOUT_ATTRS=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],pathForLineWidth=new Circle.Z;function getSymbolMeta(data,dataIndex,itemModel,opt){var layout=data.getItemLayout(dataIndex),symbolRepeat=itemModel.get("symbolRepeat"),symbolClip=itemModel.get("symbolClip"),symbolPosition=itemModel.get("symbolPosition")||"start",rotation=(itemModel.get("symbolRotate")||0)*Math.PI/180||0,symbolPatternSize=itemModel.get("symbolPatternSize")||2,isAnimationEnabled=itemModel.isAnimationEnabled(),symbolMeta={dataIndex,layout,itemModel,symbolType:data.getItemVisual(dataIndex,"symbol")||"circle",style:data.getItemVisual(dataIndex,"style"),symbolClip,symbolRepeat,symbolRepeatDirection:itemModel.get("symbolRepeatDirection"),symbolPatternSize,rotation,animationModel:isAnimationEnabled?itemModel:null,hoverScale:isAnimationEnabled&&itemModel.get(["emphasis","scale"]),z2:itemModel.getShallow("z",!0)||0};!function prepareBarLength(itemModel,symbolRepeat,layout,opt,outputSymbolMeta){var boundingLength,valueDim=opt.valueDim,symbolBoundingData=itemModel.get("symbolBoundingData"),valueAxis=opt.coordSys.getOtherAxis(opt.coordSys.getBaseAxis()),zeroPx=valueAxis.toGlobalCoord(valueAxis.dataToCoord(0)),pxSignIdx=1-+(layout[valueDim.wh]<=0);if(util.isArray(symbolBoundingData)){var symbolBoundingExtent=[convertToCoordOnAxis(valueAxis,symbolBoundingData[0])-zeroPx,convertToCoordOnAxis(valueAxis,symbolBoundingData[1])-zeroPx];symbolBoundingExtent[1]<symbolBoundingExtent[0]&&symbolBoundingExtent.reverse(),boundingLength=symbolBoundingExtent[pxSignIdx]}else boundingLength=null!=symbolBoundingData?convertToCoordOnAxis(valueAxis,symbolBoundingData)-zeroPx:symbolRepeat?opt.coordSysExtent[valueDim.index][pxSignIdx]-zeroPx:layout[valueDim.wh];outputSymbolMeta.boundingLength=boundingLength,symbolRepeat&&(outputSymbolMeta.repeatCutLength=layout[valueDim.wh]);outputSymbolMeta.pxSign=boundingLength>0?1:-1}(itemModel,symbolRepeat,layout,opt,symbolMeta),function prepareSymbolSize(data,dataIndex,layout,symbolRepeat,symbolClip,boundingLength,pxSign,symbolPatternSize,opt,outputSymbolMeta){var parsedSymbolSize,valueDim=opt.valueDim,categoryDim=opt.categoryDim,categorySize=Math.abs(layout[categoryDim.wh]),symbolSize=data.getItemVisual(dataIndex,"symbolSize");parsedSymbolSize=util.isArray(symbolSize)?symbolSize.slice():null==symbolSize?["100%","100%"]:[symbolSize,symbolSize];parsedSymbolSize[categoryDim.index]=(0,number.GM)(parsedSymbolSize[categoryDim.index],categorySize),parsedSymbolSize[valueDim.index]=(0,number.GM)(parsedSymbolSize[valueDim.index],symbolRepeat?categorySize:Math.abs(boundingLength)),outputSymbolMeta.symbolSize=parsedSymbolSize;var symbolScale=outputSymbolMeta.symbolScale=[parsedSymbolSize[0]/symbolPatternSize,parsedSymbolSize[1]/symbolPatternSize];symbolScale[valueDim.index]*=(opt.isHorizontal?-1:1)*pxSign}(data,dataIndex,layout,symbolRepeat,0,symbolMeta.boundingLength,symbolMeta.pxSign,symbolPatternSize,opt,symbolMeta),function prepareLineWidth(itemModel,symbolScale,rotation,opt,outputSymbolMeta){var valueLineWidth=itemModel.get(BAR_BORDER_WIDTH_QUERY)||0;valueLineWidth&&(pathForLineWidth.attr({scaleX:symbolScale[0],scaleY:symbolScale[1],rotation}),pathForLineWidth.updateTransform(),valueLineWidth/=pathForLineWidth.getLineScale(),valueLineWidth*=symbolScale[opt.valueDim.index]);outputSymbolMeta.valueLineWidth=valueLineWidth||0}(itemModel,symbolMeta.symbolScale,rotation,opt,symbolMeta);var symbolSize=symbolMeta.symbolSize,symbolOffset=(0,util_symbol.Cq)(itemModel.get("symbolOffset"),symbolSize);return function prepareLayoutInfo(itemModel,symbolSize,layout,symbolRepeat,symbolClip,symbolOffset,symbolPosition,valueLineWidth,boundingLength,repeatCutLength,opt,outputSymbolMeta){var categoryDim=opt.categoryDim,valueDim=opt.valueDim,pxSign=outputSymbolMeta.pxSign,unitLength=Math.max(symbolSize[valueDim.index]+valueLineWidth,0),pathLen=unitLength;if(symbolRepeat){var absBoundingLength=Math.abs(boundingLength),symbolMargin=util.retrieve(itemModel.get("symbolMargin"),"15%")+"",hasEndGap=!1;symbolMargin.lastIndexOf("!")===symbolMargin.length-1&&(hasEndGap=!0,symbolMargin=symbolMargin.slice(0,symbolMargin.length-1));var symbolMarginNumeric=(0,number.GM)(symbolMargin,symbolSize[valueDim.index]),uLenWithMargin=Math.max(unitLength+2*symbolMarginNumeric,0),endFix=hasEndGap?0:2*symbolMarginNumeric,repeatSpecified=(0,number.kE)(symbolRepeat),repeatTimes=repeatSpecified?symbolRepeat:toIntTimes((absBoundingLength+endFix)/uLenWithMargin);uLenWithMargin=unitLength+2*(symbolMarginNumeric=(absBoundingLength-repeatTimes*unitLength)/2/(hasEndGap?repeatTimes:Math.max(repeatTimes-1,1))),endFix=hasEndGap?0:2*symbolMarginNumeric,repeatSpecified||"fixed"===symbolRepeat||(repeatTimes=repeatCutLength?toIntTimes((Math.abs(repeatCutLength)+endFix)/uLenWithMargin):0),pathLen=repeatTimes*uLenWithMargin-endFix,outputSymbolMeta.repeatTimes=repeatTimes,outputSymbolMeta.symbolMargin=symbolMarginNumeric}var sizeFix=pxSign*(pathLen/2),pathPosition=outputSymbolMeta.pathPosition=[];pathPosition[categoryDim.index]=layout[categoryDim.wh]/2,pathPosition[valueDim.index]="start"===symbolPosition?sizeFix:"end"===symbolPosition?boundingLength-sizeFix:boundingLength/2,symbolOffset&&(pathPosition[0]+=symbolOffset[0],pathPosition[1]+=symbolOffset[1]);var bundlePosition=outputSymbolMeta.bundlePosition=[];bundlePosition[categoryDim.index]=layout[categoryDim.xy],bundlePosition[valueDim.index]=layout[valueDim.xy];var barRectShape=outputSymbolMeta.barRectShape=util.extend({},layout);barRectShape[valueDim.wh]=pxSign*Math.max(Math.abs(layout[valueDim.wh]),Math.abs(pathPosition[valueDim.index]+sizeFix)),barRectShape[categoryDim.wh]=layout[categoryDim.wh];var clipShape=outputSymbolMeta.clipShape={};clipShape[categoryDim.xy]=-layout[categoryDim.xy],clipShape[categoryDim.wh]=opt.ecSize[categoryDim.wh],clipShape[valueDim.xy]=0,clipShape[valueDim.wh]=layout[valueDim.wh]}(itemModel,symbolSize,layout,symbolRepeat,0,symbolOffset,symbolPosition,symbolMeta.valueLineWidth,symbolMeta.boundingLength,symbolMeta.repeatCutLength,opt,symbolMeta),symbolMeta}function convertToCoordOnAxis(axis,value){return axis.toGlobalCoord(axis.dataToCoord(axis.scale.parse(value)))}function createPath(symbolMeta){var symbolPatternSize=symbolMeta.symbolPatternSize,path=(0,util_symbol.th)(symbolMeta.symbolType,-symbolPatternSize/2,-symbolPatternSize/2,symbolPatternSize,symbolPatternSize);return path.attr({culling:!0}),"image"!==path.type&&path.setStyle({strokeNoScale:!0}),path}function createOrUpdateRepeatSymbols(bar,opt,symbolMeta,isUpdate){var bundle=bar.__pictorialBundle,symbolSize=symbolMeta.symbolSize,valueLineWidth=symbolMeta.valueLineWidth,pathPosition=symbolMeta.pathPosition,valueDim=opt.valueDim,repeatTimes=symbolMeta.repeatTimes||0,index=0,unit=symbolSize[opt.valueDim.index]+valueLineWidth+2*symbolMeta.symbolMargin;for(eachPath(bar,(function(path){path.__pictorialAnimationIndex=index,path.__pictorialRepeatTimes=repeatTimes,index<repeatTimes?updateAttr(path,null,makeTarget(index),symbolMeta,isUpdate):updateAttr(path,null,{scaleX:0,scaleY:0},symbolMeta,isUpdate,(function(){bundle.remove(path)})),index++}));index<repeatTimes;index++){var path=createPath(symbolMeta);path.__pictorialAnimationIndex=index,path.__pictorialRepeatTimes=repeatTimes,bundle.add(path);var target=makeTarget(index);updateAttr(path,{x:target.x,y:target.y,scaleX:0,scaleY:0},{scaleX:target.scaleX,scaleY:target.scaleY,rotation:target.rotation},symbolMeta,isUpdate)}function makeTarget(index){var position=pathPosition.slice(),pxSign=symbolMeta.pxSign,i=index;return("start"===symbolMeta.symbolRepeatDirection?pxSign>0:pxSign<0)&&(i=repeatTimes-1-index),position[valueDim.index]=unit*(i-repeatTimes/2+.5)+pathPosition[valueDim.index],{x:position[0],y:position[1],scaleX:symbolMeta.symbolScale[0],scaleY:symbolMeta.symbolScale[1],rotation:symbolMeta.rotation}}}function createOrUpdateSingleSymbol(bar,opt,symbolMeta,isUpdate){var bundle=bar.__pictorialBundle,mainPath=bar.__pictorialMainPath;mainPath?updateAttr(mainPath,null,{x:symbolMeta.pathPosition[0],y:symbolMeta.pathPosition[1],scaleX:symbolMeta.symbolScale[0],scaleY:symbolMeta.symbolScale[1],rotation:symbolMeta.rotation},symbolMeta,isUpdate):(mainPath=bar.__pictorialMainPath=createPath(symbolMeta),bundle.add(mainPath),updateAttr(mainPath,{x:symbolMeta.pathPosition[0],y:symbolMeta.pathPosition[1],scaleX:0,scaleY:0,rotation:symbolMeta.rotation},{scaleX:symbolMeta.symbolScale[0],scaleY:symbolMeta.symbolScale[1]},symbolMeta,isUpdate))}function createOrUpdateBarRect(bar,symbolMeta,isUpdate){var rectShape=util.extend({},symbolMeta.barRectShape),barRect=bar.__pictorialBarRect;barRect?updateAttr(barRect,null,{shape:rectShape},symbolMeta,isUpdate):((barRect=bar.__pictorialBarRect=new Rect.Z({z2:2,shape:rectShape,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}})).disableMorphing=!0,bar.add(barRect))}function createOrUpdateClip(bar,opt,symbolMeta,isUpdate){if(symbolMeta.symbolClip){var clipPath=bar.__pictorialClipPath,clipShape=util.extend({},symbolMeta.clipShape),valueDim=opt.valueDim,animationModel=symbolMeta.animationModel,dataIndex=symbolMeta.dataIndex;if(clipPath)basicTransition.D(clipPath,{shape:clipShape},animationModel,dataIndex);else{clipShape[valueDim.wh]=0,clipPath=new Rect.Z({shape:clipShape}),bar.__pictorialBundle.setClipPath(clipPath),bar.__pictorialClipPath=clipPath;var target={};target[valueDim.wh]=symbolMeta.clipShape[valueDim.wh],graphic[isUpdate?"updateProps":"initProps"](clipPath,{shape:target},animationModel,dataIndex)}}}function getItemModel(data,dataIndex){var itemModel=data.getItemModel(dataIndex);return itemModel.getAnimationDelayParams=getAnimationDelayParams,itemModel.isAnimationEnabled=isAnimationEnabled,itemModel}function getAnimationDelayParams(path){return{index:path.__pictorialAnimationIndex,count:path.__pictorialRepeatTimes}}function isAnimationEnabled(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function createBar(data,opt,symbolMeta,isUpdate){var bar=new Group.Z,bundle=new Group.Z;return bar.add(bundle),bar.__pictorialBundle=bundle,bundle.x=symbolMeta.bundlePosition[0],bundle.y=symbolMeta.bundlePosition[1],symbolMeta.symbolRepeat?createOrUpdateRepeatSymbols(bar,opt,symbolMeta):createOrUpdateSingleSymbol(bar,0,symbolMeta),createOrUpdateBarRect(bar,symbolMeta,isUpdate),createOrUpdateClip(bar,opt,symbolMeta,isUpdate),bar.__pictorialShapeStr=getShapeStr(data,symbolMeta),bar.__pictorialSymbolMeta=symbolMeta,bar}function removeBar(data,dataIndex,animationModel,bar){var labelRect=bar.__pictorialBarRect;labelRect&&labelRect.removeTextContent();var paths=[];eachPath(bar,(function(path){paths.push(path)})),bar.__pictorialMainPath&&paths.push(bar.__pictorialMainPath),bar.__pictorialClipPath&&(animationModel=null),util.each(paths,(function(path){basicTransition.bX(path,{scaleX:0,scaleY:0},animationModel,dataIndex,(function(){bar.parent&&bar.parent.remove(bar)}))})),data.setItemGraphicEl(dataIndex,null)}function getShapeStr(data,symbolMeta){return[data.getItemVisual(symbolMeta.dataIndex,"symbol")||"none",!!symbolMeta.symbolRepeat,!!symbolMeta.symbolClip].join(":")}function eachPath(bar,cb,context){util.each(bar.__pictorialBundle.children(),(function(el){el!==bar.__pictorialBarRect&&cb.call(context,el)}))}function updateAttr(el,immediateAttrs,animationAttrs,symbolMeta,isUpdate,cb){immediateAttrs&&el.attr(immediateAttrs),symbolMeta.symbolClip&&!isUpdate?animationAttrs&&el.attr(animationAttrs):animationAttrs&&graphic[isUpdate?"updateProps":"initProps"](el,animationAttrs,symbolMeta.animationModel,symbolMeta.dataIndex,cb)}function PictorialBarView_updateCommon(bar,opt,symbolMeta){var dataIndex=symbolMeta.dataIndex,itemModel=symbolMeta.itemModel,emphasisModel=itemModel.getModel("emphasis"),emphasisStyle=emphasisModel.getModel("itemStyle").getItemStyle(),blurStyle=itemModel.getModel(["blur","itemStyle"]).getItemStyle(),selectStyle=itemModel.getModel(["select","itemStyle"]).getItemStyle(),cursorStyle=itemModel.getShallow("cursor"),focus=emphasisModel.get("focus"),blurScope=emphasisModel.get("blurScope"),hoverScale=emphasisModel.get("scale");eachPath(bar,(function(path){if(path instanceof graphic_Image.ZP){var pathStyle=path.style;path.useStyle(util.extend({image:pathStyle.image,x:pathStyle.x,y:pathStyle.y,width:pathStyle.width,height:pathStyle.height},symbolMeta.style))}else path.useStyle(symbolMeta.style);var emphasisState=path.ensureState("emphasis");emphasisState.style=emphasisStyle,hoverScale&&(emphasisState.scaleX=1.1*path.scaleX,emphasisState.scaleY=1.1*path.scaleY),path.ensureState("blur").style=blurStyle,path.ensureState("select").style=selectStyle,cursorStyle&&(path.cursor=cursorStyle),path.z2=symbolMeta.z2}));var barPositionOutside=opt.valueDim.posDesc[+(symbolMeta.boundingLength>0)],barRect=bar.__pictorialBarRect;barRect.ignoreClip=!0,(0,labelStyle.ni)(barRect,(0,labelStyle.k3)(itemModel),{labelFetcher:opt.seriesModel,labelDataIndex:dataIndex,defaultText:(0,labelHelper.H)(opt.seriesModel.getData(),dataIndex),inheritColor:symbolMeta.style.fill,defaultOpacity:symbolMeta.style.opacity,defaultOutsidePosition:barPositionOutside}),(0,states.k5)(bar,focus,blurScope,emphasisModel.get("disabled"))}function toIntTimes(times){var roundedTimes=Math.round(times);return Math.abs(times-roundedTimes)<1e-4?roundedTimes:Math.ceil(times)}const bar_PictorialBarView=function(_super){function PictorialBarView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=PictorialBarView.type,_this}return(0,tslib_es6.ZT)(PictorialBarView,_super),PictorialBarView.prototype.render=function(seriesModel,ecModel,api){var group=this.group,data=seriesModel.getData(),oldData=this._data,cartesian=seriesModel.coordinateSystem,isHorizontal=cartesian.getBaseAxis().isHorizontal(),coordSysRect=cartesian.master.getRect(),opt={ecSize:{width:api.getWidth(),height:api.getHeight()},seriesModel,coordSys:cartesian,coordSysExtent:[[coordSysRect.x,coordSysRect.x+coordSysRect.width],[coordSysRect.y,coordSysRect.y+coordSysRect.height]],isHorizontal,valueDim:LAYOUT_ATTRS[+isHorizontal],categoryDim:LAYOUT_ATTRS[1-+isHorizontal]};data.diff(oldData).add((function(dataIndex){if(data.hasValue(dataIndex)){var itemModel=getItemModel(data,dataIndex),symbolMeta=getSymbolMeta(data,dataIndex,itemModel,opt),bar=createBar(data,opt,symbolMeta);data.setItemGraphicEl(dataIndex,bar),group.add(bar),PictorialBarView_updateCommon(bar,opt,symbolMeta)}})).update((function(newIndex,oldIndex){var bar=oldData.getItemGraphicEl(oldIndex);if(data.hasValue(newIndex)){var itemModel=getItemModel(data,newIndex),symbolMeta=getSymbolMeta(data,newIndex,itemModel,opt),pictorialShapeStr=getShapeStr(data,symbolMeta);bar&&pictorialShapeStr!==bar.__pictorialShapeStr&&(group.remove(bar),data.setItemGraphicEl(newIndex,null),bar=null),bar?function updateBar(bar,opt,symbolMeta){var animationModel=symbolMeta.animationModel,dataIndex=symbolMeta.dataIndex,bundle=bar.__pictorialBundle;basicTransition.D(bundle,{x:symbolMeta.bundlePosition[0],y:symbolMeta.bundlePosition[1]},animationModel,dataIndex),symbolMeta.symbolRepeat?createOrUpdateRepeatSymbols(bar,opt,symbolMeta,!0):createOrUpdateSingleSymbol(bar,opt,symbolMeta,!0);createOrUpdateBarRect(bar,symbolMeta,!0),createOrUpdateClip(bar,opt,symbolMeta,!0)}(bar,opt,symbolMeta):bar=createBar(data,opt,symbolMeta,!0),data.setItemGraphicEl(newIndex,bar),bar.__pictorialSymbolMeta=symbolMeta,group.add(bar),PictorialBarView_updateCommon(bar,opt,symbolMeta)}else group.remove(bar)})).remove((function(dataIndex){var bar=oldData.getItemGraphicEl(dataIndex);bar&&removeBar(oldData,dataIndex,bar.__pictorialSymbolMeta.animationModel,bar)})).execute();var clipPath=seriesModel.get("clip",!0)?(0,createClipPathFromCoordSys.lQ)(seriesModel.coordinateSystem,!1,seriesModel):null;return clipPath?group.setClipPath(clipPath):group.removeClipPath(),this._data=data,this.group},PictorialBarView.prototype.remove=function(ecModel,api){var group=this.group,data=this._data;ecModel.get("animation")?data&&data.eachItemGraphicEl((function(bar){removeBar(data,(0,innerStore.A)(bar).dataIndex,ecModel,bar)})):group.removeAll()},PictorialBarView.type="pictorialBar",PictorialBarView}(Chart.Z);var BaseBarSeries=__webpack_require__("./node_modules/echarts/lib/chart/bar/BaseBarSeries.js"),component=__webpack_require__("./node_modules/echarts/lib/util/component.js");const PictorialBarSeries=function(_super){function PictorialBarSeriesModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=PictorialBarSeriesModel.type,_this.hasSymbolVisual=!0,_this.defaultSymbol="roundRect",_this}return(0,tslib_es6.ZT)(PictorialBarSeriesModel,_super),PictorialBarSeriesModel.prototype.getInitialData=function(option){return option.stack=null,_super.prototype.getInitialData.apply(this,arguments)},PictorialBarSeriesModel.type="series.pictorialBar",PictorialBarSeriesModel.dependencies=["grid"],PictorialBarSeriesModel.defaultOption=(0,component.ZL)(BaseBarSeries.Z.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),PictorialBarSeriesModel}(BaseBarSeries.Z);var barGrid=__webpack_require__("./node_modules/echarts/lib/layout/barGrid.js");var ThemeRiverView=function(_super){function ThemeRiverView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=ThemeRiverView.type,_this._layers=[],_this}return(0,tslib_es6.ZT)(ThemeRiverView,_super),ThemeRiverView.prototype.render=function(seriesModel,ecModel,api){var data=seriesModel.getData(),self=this,group=this.group,layersSeries=seriesModel.getLayerSeries(),layoutInfo=data.getLayout("layoutInfo"),rect=layoutInfo.rect,boundaryGap=layoutInfo.boundaryGap;function keyGetter(item){return item.name}group.x=0,group.y=rect.y+boundaryGap[0];var dataDiffer=new DataDiffer.Z(this._layersSeries||[],layersSeries,keyGetter,keyGetter),newLayersGroups=[];function process(status,idx,oldIdx){var oldLayersGroups=self._layers;if("remove"!==status){for(var style,polygon,points0=[],points1=[],indices=layersSeries[idx].indices,j=0;j<indices.length;j++){var layout=data.getItemLayout(indices[j]),x=layout.x,y0=layout.y0,y=layout.y;points0.push(x,y0),points1.push(x,y0+y),style=data.getItemVisual(indices[j],"style")}var textLayout=data.getItemLayout(indices[0]),margin=seriesModel.getModel("label").get("margin"),emphasisModel=seriesModel.getModel("emphasis");if("add"===status){var layerGroup=newLayersGroups[idx]=new Group.Z;polygon=new ECPolygon({shape:{points:points0,stackedOnPoints:points1,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),layerGroup.add(polygon),group.add(layerGroup),seriesModel.isAnimationEnabled()&&polygon.setClipPath(function ThemeRiverView_createGridClipShape(rect,seriesModel,cb){var rectEl=new Rect.Z({shape:{x:rect.x-10,y:rect.y-10,width:0,height:rect.height+20}});return basicTransition.KZ(rectEl,{shape:{x:rect.x-50,width:rect.width+100,height:rect.height+20}},seriesModel,cb),rectEl}(polygon.getBoundingRect(),seriesModel,(function(){polygon.removeClipPath()})))}else{layerGroup=oldLayersGroups[oldIdx];polygon=layerGroup.childAt(0),group.add(layerGroup),newLayersGroups[idx]=layerGroup,basicTransition.D(polygon,{shape:{points:points0,stackedOnPoints:points1}},seriesModel),(0,basicTransition.Zi)(polygon)}(0,labelStyle.ni)(polygon,(0,labelStyle.k3)(seriesModel),{labelDataIndex:indices[j-1],defaultText:data.getName(indices[j-1]),inheritColor:style.fill},{normal:{verticalAlign:"middle"}}),polygon.setTextConfig({position:null,local:!0});var labelEl=polygon.getTextContent();labelEl&&(labelEl.x=textLayout.x-margin,labelEl.y=textLayout.y0+textLayout.y/2),polygon.useStyle(style),data.setItemGraphicEl(idx,polygon),(0,states.WO)(polygon,seriesModel),(0,states.k5)(polygon,emphasisModel.get("focus"),emphasisModel.get("blurScope"),emphasisModel.get("disabled"))}else group.remove(oldLayersGroups[idx])}dataDiffer.add((0,util.bind)(process,this,"add")).update((0,util.bind)(process,this,"update")).remove((0,util.bind)(process,this,"remove")).execute(),this._layersSeries=layersSeries,this._layers=newLayersGroups},ThemeRiverView.type="themeRiver",ThemeRiverView}(Chart.Z);const themeRiver_ThemeRiverView=ThemeRiverView;var ThemeRiverSeriesModel=function(_super){function ThemeRiverSeriesModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=ThemeRiverSeriesModel.type,_this}return(0,tslib_es6.ZT)(ThemeRiverSeriesModel,_super),ThemeRiverSeriesModel.prototype.init=function(option){_super.prototype.init.apply(this,arguments),this.legendVisualProvider=new visual_LegendVisualProvider(util.bind(this.getData,this),util.bind(this.getRawData,this))},ThemeRiverSeriesModel.prototype.fixData=function(data){var rawDataLength=data.length,timeValueKeys={},groupResult=(0,util_model.pv)(data,(function(item){return timeValueKeys.hasOwnProperty(item[0]+"")||(timeValueKeys[item[0]+""]=-1),item[2]})),layerData=[];groupResult.buckets.each((function(items,key){layerData.push({name:key,dataList:items})}));for(var layerNum=layerData.length,k=0;k<layerNum;++k){for(var name_1=layerData[k].name,j=0;j<layerData[k].dataList.length;++j){var timeValue=layerData[k].dataList[j][0]+"";timeValueKeys[timeValue]=k}for(var timeValue in timeValueKeys)timeValueKeys.hasOwnProperty(timeValue)&&timeValueKeys[timeValue]!==k&&(timeValueKeys[timeValue]=k,data[rawDataLength]=[timeValue,0,name_1],rawDataLength++)}return data},ThemeRiverSeriesModel.prototype.getInitialData=function(option,ecModel){for(var axisType=this.getReferringComponents("singleAxis",util_model.C6).models[0].get("type"),filterData=util.filter(option.data,(function(dataItem){return void 0!==dataItem[2]})),data=this.fixData(filterData||[]),nameList=[],nameMap=this.nameMap=util.createHashMap(),count=0,i=0;i<data.length;++i)nameList.push(data[i][2]),nameMap.get(data[i][2])||(nameMap.set(data[i][2],count),count++);var dimensions=(0,createDimensions.Z)(data,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:(0,dimensionHelper.T)(axisType)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,list=new SeriesData.Z(dimensions,this);return list.initData(data),list},ThemeRiverSeriesModel.prototype.getLayerSeries=function(){for(var data=this.getData(),lenCount=data.count(),indexArr=[],i=0;i<lenCount;++i)indexArr[i]=i;var timeDim=data.mapDimension("single"),groupResult=(0,util_model.pv)(indexArr,(function(index){return data.get("name",index)})),layerSeries=[];return groupResult.buckets.each((function(items,key){items.sort((function(index1,index2){return data.get(timeDim,index1)-data.get(timeDim,index2)})),layerSeries.push({name:key,indices:items})})),layerSeries},ThemeRiverSeriesModel.prototype.getAxisTooltipData=function(dim,value,baseAxis){util.isArray(dim)||(dim=dim?[dim]:[]);for(var nestestValue,data=this.getData(),layerSeries=this.getLayerSeries(),indices=[],layerNum=layerSeries.length,i=0;i<layerNum;++i){for(var minDist=Number.MAX_VALUE,nearestIdx=-1,pointNum=layerSeries[i].indices.length,j=0;j<pointNum;++j){var theValue=data.get(dim[0],layerSeries[i].indices[j]),dist=Math.abs(theValue-value);dist<=minDist&&(nestestValue=theValue,minDist=dist,nearestIdx=layerSeries[i].indices[j])}indices.push(nearestIdx)}return{dataIndices:indices,nestestValue}},ThemeRiverSeriesModel.prototype.formatTooltip=function(dataIndex,multipleSeries,dataType){var data=this.getData(),name=data.getName(dataIndex),value=data.get(data.mapDimension("value"),dataIndex);return(0,tooltipMarkup.TX)("nameValue",{name,value})},ThemeRiverSeriesModel.type="series.themeRiver",ThemeRiverSeriesModel.dependencies=["singleAxis"],ThemeRiverSeriesModel.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},ThemeRiverSeriesModel}(Series.Z);const ThemeRiverSeries=ThemeRiverSeriesModel;function themeRiverLayout(ecModel,api){ecModel.eachSeriesByType("themeRiver",(function(seriesModel){var data=seriesModel.getData(),single=seriesModel.coordinateSystem,layoutInfo={},rect=single.getRect();layoutInfo.rect=rect;var boundaryGap=seriesModel.get("boundaryGap"),axis=single.getAxis();(layoutInfo.boundaryGap=boundaryGap,"horizontal"===axis.orient)?(boundaryGap[0]=number.GM(boundaryGap[0],rect.height),boundaryGap[1]=number.GM(boundaryGap[1],rect.height),doThemeRiverLayout(data,seriesModel,rect.height-boundaryGap[0]-boundaryGap[1])):(boundaryGap[0]=number.GM(boundaryGap[0],rect.width),boundaryGap[1]=number.GM(boundaryGap[1],rect.width),doThemeRiverLayout(data,seriesModel,rect.width-boundaryGap[0]-boundaryGap[1]));data.setLayout("layoutInfo",layoutInfo)}))}function doThemeRiverLayout(data,seriesModel,height){if(data.count())for(var baseY0,coordSys=seriesModel.coordinateSystem,layerSeries=seriesModel.getLayerSeries(),timeDim=data.mapDimension("single"),valueDim=data.mapDimension("value"),layerPoints=util.map(layerSeries,(function(singleLayer){return util.map(singleLayer.indices,(function(idx){var pt=coordSys.dataToPoint(data.get(timeDim,idx));return pt[1]=data.get(valueDim,idx),pt}))})),base=function computeBaseline(data){for(var layerNum=data.length,pointNum=data[0].length,sums=[],y0=[],max=0,i=0;i<pointNum;++i){for(var temp=0,j=0;j<layerNum;++j)temp+=data[j][i][1];temp>max&&(max=temp),sums.push(temp)}for(var k=0;k<pointNum;++k)y0[k]=(max-sums[k])/2;max=0;for(var l=0;l<pointNum;++l){var sum=sums[l]+y0[l];sum>max&&(max=sum)}return{y0,max}}(layerPoints),baseLine=base.y0,ky=height/base.max,n=layerSeries.length,m=layerSeries[0].indices.length,j=0;j<m;++j){baseY0=baseLine[j]*ky,data.setItemLayout(layerSeries[0].indices[j],{layerIndex:0,x:layerPoints[0][j][0],y0:baseY0,y:layerPoints[0][j][1]*ky});for(var i=1;i<n;++i)baseY0+=layerPoints[i-1][j][1]*ky,data.setItemLayout(layerSeries[i].indices[j],{layerIndex:i,x:layerPoints[i][j][0],y0:baseY0,y:layerPoints[i][j][1]*ky})}}var util_decal=__webpack_require__("./node_modules/echarts/lib/util/decal.js"),contain_util=__webpack_require__("./node_modules/zrender/lib/contain/util.js"),SunburstPiece=function(_super){function SunburstPiece(node,seriesModel,ecModel,api){var _this=_super.call(this)||this;_this.z2=2,_this.textConfig={inside:!0},(0,innerStore.A)(_this).seriesIndex=seriesModel.seriesIndex;var text=new Text.ZP({z2:4,silent:node.getModel().get(["label","silent"])});return _this.setTextContent(text),_this.updateData(!0,node,seriesModel,ecModel,api),_this}return(0,tslib_es6.ZT)(SunburstPiece,_super),SunburstPiece.prototype.updateData=function(firstCreate,node,seriesModel,ecModel,api){this.node=node,node.piece=this,seriesModel=seriesModel||this._seriesModel,ecModel=ecModel||this._ecModel;var sector=this;(0,innerStore.A)(sector).dataIndex=node.dataIndex;var itemModel=node.getModel(),emphasisModel=itemModel.getModel("emphasis"),layout=node.getLayout(),sectorShape=util.extend({},layout);sectorShape.label=null;var normalStyle=node.getVisual("style");normalStyle.lineJoin="bevel";var decal=node.getVisual("decal");decal&&(normalStyle.decal=(0,util_decal.I)(decal,api));var cornerRadius=(0,sectorHelper.T)(itemModel.getModel("itemStyle"),sectorShape,!0);util.extend(sectorShape,cornerRadius),util.each(states.L1,(function(stateName){var state=sector.ensureState(stateName),itemStyleModel=itemModel.getModel([stateName,"itemStyle"]);state.style=itemStyleModel.getItemStyle();var cornerRadius=(0,sectorHelper.T)(itemStyleModel,sectorShape);cornerRadius&&(state.shape=cornerRadius)})),firstCreate?(sector.setShape(sectorShape),sector.shape.r=layout.r0,basicTransition.KZ(sector,{shape:{r:layout.r}},seriesModel,node.dataIndex)):(basicTransition.D(sector,{shape:sectorShape},seriesModel),(0,basicTransition.Zi)(sector)),sector.useStyle(normalStyle),this._updateLabel(seriesModel);var cursorStyle=itemModel.getShallow("cursor");cursorStyle&&sector.attr("cursor",cursorStyle),this._seriesModel=seriesModel||this._seriesModel,this._ecModel=ecModel||this._ecModel;var focus=emphasisModel.get("focus"),focusOrIndices="ancestor"===focus?node.getAncestorsIndices():"descendant"===focus?node.getDescendantIndices():focus;(0,states.k5)(this,focusOrIndices,emphasisModel.get("blurScope"),emphasisModel.get("disabled"))},SunburstPiece.prototype._updateLabel=function(seriesModel){var _this=this,itemModel=this.node.getModel(),normalLabelModel=itemModel.getModel("label"),layout=this.node.getLayout(),angle=layout.endAngle-layout.startAngle,midAngle=(layout.startAngle+layout.endAngle)/2,dx=Math.cos(midAngle),dy=Math.sin(midAngle),sector=this,label=sector.getTextContent(),dataIndex=this.node.dataIndex,labelMinAngle=normalLabelModel.get("minAngle")/180*Math.PI,isNormalShown=normalLabelModel.get("show")&&!(null!=labelMinAngle&&Math.abs(angle)<labelMinAngle);function getLabelAttr(model,name){var stateAttr=model.get(name);return null==stateAttr?normalLabelModel.get(name):stateAttr}label.ignore=!isNormalShown,util.each(states.qc,(function(stateName){var labelStateModel="normal"===stateName?itemModel.getModel("label"):itemModel.getModel([stateName,"label"]),isNormal="normal"===stateName,state=isNormal?label:label.ensureState(stateName),text=seriesModel.getFormattedLabel(dataIndex,stateName);isNormal&&(text=text||_this.node.name),state.style=(0,labelStyle.Lr)(labelStateModel,{},null,"normal"!==stateName,!0),text&&(state.style.text=text);var isShown=labelStateModel.get("show");null==isShown||isNormal||(state.ignore=!isShown);var r,labelPosition=getLabelAttr(labelStateModel,"position"),sectorState=isNormal?sector:sector.states[stateName],labelColor=sectorState.style.fill;sectorState.textConfig={outsideFill:"inherit"===labelStateModel.get("color")?labelColor:null,inside:"outside"!==labelPosition};var labelPadding=getLabelAttr(labelStateModel,"distance")||0,textAlign=getLabelAttr(labelStateModel,"align"),rotateType=getLabelAttr(labelStateModel,"rotate"),flipStartAngle=.5*Math.PI,flipEndAngle=1.5*Math.PI,midAngleNormal=(0,contain_util.m)("tangential"===rotateType?Math.PI/2-midAngle:midAngle),needsFlip=midAngleNormal>flipStartAngle&&!(0,number.mW)(midAngleNormal-flipStartAngle)&&midAngleNormal<flipEndAngle;"outside"===labelPosition?(r=layout.r+labelPadding,textAlign=needsFlip?"right":"left"):textAlign&&"center"!==textAlign?"left"===textAlign?(r=layout.r0+labelPadding,textAlign=needsFlip?"right":"left"):"right"===textAlign&&(r=layout.r-labelPadding,textAlign=needsFlip?"left":"right"):(r=angle===2*Math.PI&&0===layout.r0?0:(layout.r+layout.r0)/2,textAlign="center"),state.style.align=textAlign,state.style.verticalAlign=getLabelAttr(labelStateModel,"verticalAlign")||"middle",state.x=r*dx+layout.cx,state.y=r*dy+layout.cy;var rotate=0;"radial"===rotateType?rotate=(0,contain_util.m)(-midAngle)+(needsFlip?Math.PI:0):"tangential"===rotateType?rotate=(0,contain_util.m)(Math.PI/2-midAngle)+(needsFlip?Math.PI:0):util.isNumber(rotateType)&&(rotate=rotateType*Math.PI/180),state.rotation=(0,contain_util.m)(rotate)})),label.dirtyStyle()},SunburstPiece}(Sector.C);const sunburst_SunburstPiece=SunburstPiece;var ROOT_TO_NODE_ACTION="sunburstRootToNode",HIGHLIGHT_ACTION="sunburstHighlight",UNHIGHLIGHT_ACTION="sunburstUnhighlight";var SunburstView=function(_super){function SunburstView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=SunburstView.type,_this}return(0,tslib_es6.ZT)(SunburstView,_super),SunburstView.prototype.render=function(seriesModel,ecModel,api,payload){var self=this;this.seriesModel=seriesModel,this.api=api,this.ecModel=ecModel;var data=seriesModel.getData(),virtualRoot=data.tree.root,newRoot=seriesModel.getViewRoot(),group=this.group,renderLabelForZeroData=seriesModel.get("renderLabelForZeroData"),newChildren=[];newRoot.eachNode((function(node){newChildren.push(node)}));var oldChildren=this._oldChildren||[];!function dualTravel(newChildren,oldChildren){if(0===newChildren.length&&0===oldChildren.length)return;function getKey(node){return node.getId()}function processNode(newIdx,oldIdx){!function doRenderNode(newNode,oldNode){renderLabelForZeroData||!newNode||newNode.getValue()||(newNode=null);if(newNode!==virtualRoot&&oldNode!==virtualRoot)if(oldNode&&oldNode.piece)newNode?(oldNode.piece.updateData(!1,newNode,seriesModel,ecModel,api),data.setItemGraphicEl(newNode.dataIndex,oldNode.piece)):function removeNode(node){if(!node)return;node.piece&&(group.remove(node.piece),node.piece=null)}(oldNode);else if(newNode){var piece=new sunburst_SunburstPiece(newNode,seriesModel,ecModel,api);group.add(piece),data.setItemGraphicEl(newNode.dataIndex,piece)}}(null==newIdx?null:newChildren[newIdx],null==oldIdx?null:oldChildren[oldIdx])}new DataDiffer.Z(oldChildren,newChildren,getKey,getKey).add(processNode).update(processNode).remove(util.curry(processNode,null)).execute()}(newChildren,oldChildren),function renderRollUp(virtualRoot,viewRoot){viewRoot.depth>0?(self.virtualPiece?self.virtualPiece.updateData(!1,virtualRoot,seriesModel,ecModel,api):(self.virtualPiece=new sunburst_SunburstPiece(virtualRoot,seriesModel,ecModel,api),group.add(self.virtualPiece)),viewRoot.piece.off("click"),self.virtualPiece.on("click",(function(e){self._rootToNode(viewRoot.parentNode)}))):self.virtualPiece&&(group.remove(self.virtualPiece),self.virtualPiece=null)}(virtualRoot,newRoot),this._initEvents(),this._oldChildren=newChildren},SunburstView.prototype._initEvents=function(){var _this=this;this.group.off("click"),this.group.on("click",(function(e){var targetFound=!1;_this.seriesModel.getViewRoot().eachNode((function(node){if(!targetFound&&node.piece&&node.piece===e.target){var nodeClick=node.getModel().get("nodeClick");if("rootToNode"===nodeClick)_this._rootToNode(node);else if("link"===nodeClick){var itemModel=node.getModel(),link=itemModel.get("link");if(link){var linkTarget=itemModel.get("target",!0)||"_blank";(0,format.MI)(link,linkTarget)}}targetFound=!0}}))}))},SunburstView.prototype._rootToNode=function(node){node!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:ROOT_TO_NODE_ACTION,from:this.uid,seriesId:this.seriesModel.id,targetNode:node})},SunburstView.prototype.containPoint=function(point,seriesModel){var itemLayout=seriesModel.getData().getItemLayout(0);if(itemLayout){var dx=point[0]-itemLayout.cx,dy=point[1]-itemLayout.cy,radius=Math.sqrt(dx*dx+dy*dy);return radius<=itemLayout.r&&radius>=itemLayout.r0}},SunburstView.type="sunburst",SunburstView}(Chart.Z);const sunburst_SunburstView=SunburstView;var enableAriaDecalForTree=__webpack_require__("./node_modules/echarts/lib/chart/helper/enableAriaDecalForTree.js");function completeTreeValue(dataNode){var sum=0;util.each(dataNode.children,(function(child){completeTreeValue(child);var childValue=child.value;util.isArray(childValue)&&(childValue=childValue[0]),sum+=childValue}));var thisValue=dataNode.value;util.isArray(thisValue)&&(thisValue=thisValue[0]),(null==thisValue||isNaN(thisValue))&&(thisValue=sum),thisValue<0&&(thisValue=0),util.isArray(dataNode.value)?dataNode.value[0]=thisValue:dataNode.value=thisValue}const SunburstSeries=function(_super){function SunburstSeriesModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=SunburstSeriesModel.type,_this.ignoreStyleOnData=!0,_this}return(0,tslib_es6.ZT)(SunburstSeriesModel,_super),SunburstSeriesModel.prototype.getInitialData=function(option,ecModel){var root={name:option.name,children:option.data};completeTreeValue(root);var levelModels=this._levelModels=util.map(option.levels||[],(function(levelDefine){return new Model.Z(levelDefine,this,ecModel)}),this),tree=Tree.Z.createTree(root,this,(function beforeLink(nodeData){nodeData.wrapMethod("getItemModel",(function(model,idx){var node=tree.getNodeByDataIndex(idx),levelModel=levelModels[node.depth];return levelModel&&(model.parentModel=levelModel),model}))}));return tree.data},SunburstSeriesModel.prototype.optionUpdated=function(){this.resetViewRoot()},SunburstSeriesModel.prototype.getDataParams=function(dataIndex){var params=_super.prototype.getDataParams.apply(this,arguments),node=this.getData().tree.getNodeByDataIndex(dataIndex);return params.treePathInfo=(0,treeHelper.n3)(node,this),params},SunburstSeriesModel.prototype.getLevelModel=function(node){return this._levelModels&&this._levelModels[node.depth]},SunburstSeriesModel.prototype.getViewRoot=function(){return this._viewRoot},SunburstSeriesModel.prototype.resetViewRoot=function(viewRoot){viewRoot?this._viewRoot=viewRoot:viewRoot=this._viewRoot;var root=this.getRawData().tree.root;viewRoot&&(viewRoot===root||root.contains(viewRoot))||(this._viewRoot=root)},SunburstSeriesModel.prototype.enableAriaDecal=function(){(0,enableAriaDecalForTree.Z)(this)},SunburstSeriesModel.type="series.sunburst",SunburstSeriesModel.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},SunburstSeriesModel}(Series.Z);var sunburstLayout_RADIAN=Math.PI/180;function sunburstLayout(seriesType,ecModel,api){ecModel.eachSeriesByType(seriesType,(function(seriesModel){var center=seriesModel.get("center"),radius=seriesModel.get("radius");util.isArray(radius)||(radius=[0,radius]),util.isArray(center)||(center=[center,center]);var width=api.getWidth(),height=api.getHeight(),size=Math.min(width,height),cx=(0,number.GM)(center[0],width),cy=(0,number.GM)(center[1],height),r0=(0,number.GM)(radius[0],size/2),r=(0,number.GM)(radius[1],size/2),startAngle=-seriesModel.get("startAngle")*sunburstLayout_RADIAN,minAngle=seriesModel.get("minAngle")*sunburstLayout_RADIAN,virtualRoot=seriesModel.getData().tree.root,treeRoot=seriesModel.getViewRoot(),rootDepth=treeRoot.depth,sort=seriesModel.get("sort");null!=sort&&initChildren(treeRoot,sort);var validDataCount=0;util.each(treeRoot.children,(function(child){!isNaN(child.getValue())&&validDataCount++}));var sum=treeRoot.getValue(),unitRadian=Math.PI/(sum||validDataCount)*2,renderRollupNode=treeRoot.depth>0,levels=treeRoot.height-(renderRollupNode?-1:1),rPerLevel=(r-r0)/(levels||1),clockwise=seriesModel.get("clockwise"),stillShowZeroSum=seriesModel.get("stillShowZeroSum"),dir=clockwise?1:-1,renderNode=function(node,startAngle){if(node){var endAngle=startAngle;if(node!==virtualRoot){var value=node.getValue(),angle=0===sum&&stillShowZeroSum?unitRadian:value*unitRadian;angle<minAngle&&(angle=minAngle),endAngle=startAngle+dir*angle;var depth=node.depth-rootDepth-(renderRollupNode?-1:1),rStart=r0+rPerLevel*depth,rEnd=r0+rPerLevel*(depth+1),levelModel=seriesModel.getLevelModel(node);if(levelModel){var r0_1=levelModel.get("r0",!0),r_1=levelModel.get("r",!0),radius_1=levelModel.get("radius",!0);null!=radius_1&&(r0_1=radius_1[0],r_1=radius_1[1]),null!=r0_1&&(rStart=(0,number.GM)(r0_1,size/2)),null!=r_1&&(rEnd=(0,number.GM)(r_1,size/2))}node.setLayout({angle,startAngle,endAngle,clockwise,cx,cy,r0:rStart,r:rEnd})}if(node.children&&node.children.length){var siblingAngle_1=0;util.each(node.children,(function(node){siblingAngle_1+=renderNode(node,startAngle+siblingAngle_1)}))}return endAngle-startAngle}};if(renderRollupNode){var rStart=r0,rEnd=r0+rPerLevel,angle=2*Math.PI;virtualRoot.setLayout({angle,startAngle,endAngle:startAngle+angle,clockwise,cx,cy,r0:rStart,r:rEnd})}renderNode(treeRoot,startAngle)}))}function initChildren(node,sortOrder){var children=node.children||[];node.children=function sort(children,sortOrder){if(util.isFunction(sortOrder)){var sortTargets=util.map(children,(function(child,idx){var value=child.getValue();return{params:{depth:child.depth,height:child.height,dataIndex:child.dataIndex,getValue:function(){return value}},index:idx}}));return sortTargets.sort((function(a,b){return sortOrder(a.params,b.params)})),util.map(sortTargets,(function(target){return children[target.index]}))}var isAsc_1="asc"===sortOrder;return children.sort((function(a,b){var diff=(a.getValue()-b.getValue())*(isAsc_1?1:-1);return 0===diff?(a.dataIndex-b.dataIndex)*(isAsc_1?-1:1):diff}))}(children,sortOrder),children.length&&util.each(node.children,(function(child){initChildren(child,sortOrder)}))}function sunburstVisual(ecModel){var paletteScope={};ecModel.eachSeriesByType("sunburst",(function(seriesModel){var data=seriesModel.getData(),tree=data.tree;tree.eachNode((function(node){var style=node.getModel().getModel("itemStyle").getItemStyle();style.fill||(style.fill=function pickColor(node,seriesModel,treeHeight){for(var current=node;current&&current.depth>1;)current=current.parentNode;var color=seriesModel.getColorFromPalette(current.name||current.dataIndex+"",paletteScope);return node.depth>1&&(0,util.isString)(color)&&(color=(0,tool_color.lift)(color,(node.depth-1)/(treeHeight-1)*.5)),color}(node,seriesModel,tree.root.height));var existsStyle=data.ensureUniqueItemVisual(node.dataIndex,"style");(0,util.extend)(existsStyle,style)}))}))}var STYLE_VISUAL_TYPE={color:"fill",borderColor:"stroke"},NON_STYLE_VISUAL_PROPS={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},customInnerStore=(0,util_model.Yf)();const CustomSeries=function(_super){function CustomSeriesModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=CustomSeriesModel.type,_this}return(0,tslib_es6.ZT)(CustomSeriesModel,_super),CustomSeriesModel.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},CustomSeriesModel.prototype.getInitialData=function(option,ecModel){return(0,createSeriesData.Z)(null,this)},CustomSeriesModel.prototype.getDataParams=function(dataIndex,dataType,el){var params=_super.prototype.getDataParams.call(this,dataIndex,dataType);return el&&(params.info=customInnerStore(el).info),params},CustomSeriesModel.type="series.custom",CustomSeriesModel.dependencies=["grid","polar","geo","singleAxis","calendar"],CustomSeriesModel.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},CustomSeriesModel}(Series.Z);function dataToCoordSize(dataSize,dataItem){return dataItem=dataItem||[0,0],util.map(["x","y"],(function(dim,dimIdx){var axis=this.getAxis(dim),val=dataItem[dimIdx],halfSize=dataSize[dimIdx]/2;return"category"===axis.type?axis.getBandWidth():Math.abs(axis.dataToCoord(val-halfSize)-axis.dataToCoord(val+halfSize))}),this)}function prepareCustom_dataToCoordSize(dataSize,dataItem){return dataItem=dataItem||[0,0],util.map([0,1],(function(dimIdx){var val=dataItem[dimIdx],halfSize=dataSize[dimIdx]/2,p1=[],p2=[];return p1[dimIdx]=val-halfSize,p2[dimIdx]=val+halfSize,p1[1-dimIdx]=p2[1-dimIdx]=dataItem[1-dimIdx],Math.abs(this.dataToPoint(p1)[dimIdx]-this.dataToPoint(p2)[dimIdx])}),this)}function single_prepareCustom_dataToCoordSize(dataSize,dataItem){var axis=this.getAxis(),val=dataItem instanceof Array?dataItem[0]:dataItem,halfSize=(dataSize instanceof Array?dataSize[0]:dataSize)/2;return"category"===axis.type?axis.getBandWidth():Math.abs(axis.dataToCoord(val-halfSize)-axis.dataToCoord(val+halfSize))}function polar_prepareCustom_dataToCoordSize(dataSize,dataItem){return dataItem=dataItem||[0,0],util.map(["Radius","Angle"],(function(dim,dimIdx){var axis=this["get"+dim+"Axis"](),val=dataItem[dimIdx],halfSize=dataSize[dimIdx]/2,result="category"===axis.type?axis.getBandWidth():Math.abs(axis.dataToCoord(val-halfSize)-axis.dataToCoord(val+halfSize));return"Angle"===dim&&(result=result*Math.PI/180),result}),this)}var Displayable=__webpack_require__("./node_modules/zrender/lib/graphic/Displayable.js");function isEC4CompatibleStyle(style,elType,hasOwnTextContentOption,hasOwnTextConfig){return style&&(style.legacy||!1!==style.legacy&&!hasOwnTextContentOption&&!hasOwnTextConfig&&"tspan"!==elType&&("text"===elType||(0,util.hasOwn)(style,"text")))}function convertFromEC4CompatibleStyle(hostStyle,elType,isNormal){var textConfig,textContent,textContentStyle,srcStyle=hostStyle;if("text"===elType)textContentStyle=srcStyle;else{textContentStyle={},(0,util.hasOwn)(srcStyle,"text")&&(textContentStyle.text=srcStyle.text),(0,util.hasOwn)(srcStyle,"rich")&&(textContentStyle.rich=srcStyle.rich),(0,util.hasOwn)(srcStyle,"textFill")&&(textContentStyle.fill=srcStyle.textFill),(0,util.hasOwn)(srcStyle,"textStroke")&&(textContentStyle.stroke=srcStyle.textStroke),(0,util.hasOwn)(srcStyle,"fontFamily")&&(textContentStyle.fontFamily=srcStyle.fontFamily),(0,util.hasOwn)(srcStyle,"fontSize")&&(textContentStyle.fontSize=srcStyle.fontSize),(0,util.hasOwn)(srcStyle,"fontStyle")&&(textContentStyle.fontStyle=srcStyle.fontStyle),(0,util.hasOwn)(srcStyle,"fontWeight")&&(textContentStyle.fontWeight=srcStyle.fontWeight),textContent={type:"text",style:textContentStyle,silent:!0},textConfig={};var hasOwnPos=(0,util.hasOwn)(srcStyle,"textPosition");isNormal?textConfig.position=hasOwnPos?srcStyle.textPosition:"inside":hasOwnPos&&(textConfig.position=srcStyle.textPosition),(0,util.hasOwn)(srcStyle,"textPosition")&&(textConfig.position=srcStyle.textPosition),(0,util.hasOwn)(srcStyle,"textOffset")&&(textConfig.offset=srcStyle.textOffset),(0,util.hasOwn)(srcStyle,"textRotation")&&(textConfig.rotation=srcStyle.textRotation),(0,util.hasOwn)(srcStyle,"textDistance")&&(textConfig.distance=srcStyle.textDistance)}return convertEC4CompatibleRichItem(textContentStyle,hostStyle),(0,util.each)(textContentStyle.rich,(function(richItem){convertEC4CompatibleRichItem(richItem,richItem)})),{textConfig,textContent}}function convertEC4CompatibleRichItem(out,richItem){richItem&&(richItem.font=richItem.textFont||richItem.font,(0,util.hasOwn)(richItem,"textStrokeWidth")&&(out.lineWidth=richItem.textStrokeWidth),(0,util.hasOwn)(richItem,"textAlign")&&(out.align=richItem.textAlign),(0,util.hasOwn)(richItem,"textVerticalAlign")&&(out.verticalAlign=richItem.textVerticalAlign),(0,util.hasOwn)(richItem,"textLineHeight")&&(out.lineHeight=richItem.textLineHeight),(0,util.hasOwn)(richItem,"textWidth")&&(out.width=richItem.textWidth),(0,util.hasOwn)(richItem,"textHeight")&&(out.height=richItem.textHeight),(0,util.hasOwn)(richItem,"textBackgroundColor")&&(out.backgroundColor=richItem.textBackgroundColor),(0,util.hasOwn)(richItem,"textPadding")&&(out.padding=richItem.textPadding),(0,util.hasOwn)(richItem,"textBorderColor")&&(out.borderColor=richItem.textBorderColor),(0,util.hasOwn)(richItem,"textBorderWidth")&&(out.borderWidth=richItem.textBorderWidth),(0,util.hasOwn)(richItem,"textBorderRadius")&&(out.borderRadius=richItem.textBorderRadius),(0,util.hasOwn)(richItem,"textBoxShadowColor")&&(out.shadowColor=richItem.textBoxShadowColor),(0,util.hasOwn)(richItem,"textBoxShadowBlur")&&(out.shadowBlur=richItem.textBoxShadowBlur),(0,util.hasOwn)(richItem,"textBoxShadowOffsetX")&&(out.shadowOffsetX=richItem.textBoxShadowOffsetX),(0,util.hasOwn)(richItem,"textBoxShadowOffsetY")&&(out.shadowOffsetY=richItem.textBoxShadowOffsetY))}function convertToEC4StyleForCustomSerise(itemStl,txStl,txCfg){var out=itemStl;out.textPosition=out.textPosition||txCfg.position||"inside",null!=txCfg.offset&&(out.textOffset=txCfg.offset),null!=txCfg.rotation&&(out.textRotation=txCfg.rotation),null!=txCfg.distance&&(out.textDistance=txCfg.distance);var isInside=out.textPosition.indexOf("inside")>=0,hostFill=itemStl.fill||"#000";convertToEC4RichItem(out,txStl);var textFillNotSet=null==out.textFill;return isInside?textFillNotSet&&(out.textFill=txCfg.insideFill||"#fff",!out.textStroke&&txCfg.insideStroke&&(out.textStroke=txCfg.insideStroke),!out.textStroke&&(out.textStroke=hostFill),null==out.textStrokeWidth&&(out.textStrokeWidth=2)):(textFillNotSet&&(out.textFill=itemStl.fill||txCfg.outsideFill||"#000"),!out.textStroke&&txCfg.outsideStroke&&(out.textStroke=txCfg.outsideStroke)),out.text=txStl.text,out.rich=txStl.rich,(0,util.each)(txStl.rich,(function(richItem){convertToEC4RichItem(richItem,richItem)})),out}function convertToEC4RichItem(out,richItem){richItem&&((0,util.hasOwn)(richItem,"fill")&&(out.textFill=richItem.fill),(0,util.hasOwn)(richItem,"stroke")&&(out.textStroke=richItem.fill),(0,util.hasOwn)(richItem,"lineWidth")&&(out.textStrokeWidth=richItem.lineWidth),(0,util.hasOwn)(richItem,"font")&&(out.font=richItem.font),(0,util.hasOwn)(richItem,"fontStyle")&&(out.fontStyle=richItem.fontStyle),(0,util.hasOwn)(richItem,"fontWeight")&&(out.fontWeight=richItem.fontWeight),(0,util.hasOwn)(richItem,"fontSize")&&(out.fontSize=richItem.fontSize),(0,util.hasOwn)(richItem,"fontFamily")&&(out.fontFamily=richItem.fontFamily),(0,util.hasOwn)(richItem,"align")&&(out.textAlign=richItem.align),(0,util.hasOwn)(richItem,"verticalAlign")&&(out.textVerticalAlign=richItem.verticalAlign),(0,util.hasOwn)(richItem,"lineHeight")&&(out.textLineHeight=richItem.lineHeight),(0,util.hasOwn)(richItem,"width")&&(out.textWidth=richItem.width),(0,util.hasOwn)(richItem,"height")&&(out.textHeight=richItem.height),(0,util.hasOwn)(richItem,"backgroundColor")&&(out.textBackgroundColor=richItem.backgroundColor),(0,util.hasOwn)(richItem,"padding")&&(out.textPadding=richItem.padding),(0,util.hasOwn)(richItem,"borderColor")&&(out.textBorderColor=richItem.borderColor),(0,util.hasOwn)(richItem,"borderWidth")&&(out.textBorderWidth=richItem.borderWidth),(0,util.hasOwn)(richItem,"borderRadius")&&(out.textBorderRadius=richItem.borderRadius),(0,util.hasOwn)(richItem,"shadowColor")&&(out.textBoxShadowColor=richItem.shadowColor),(0,util.hasOwn)(richItem,"shadowBlur")&&(out.textBoxShadowBlur=richItem.shadowBlur),(0,util.hasOwn)(richItem,"shadowOffsetX")&&(out.textBoxShadowOffsetX=richItem.shadowOffsetX),(0,util.hasOwn)(richItem,"shadowOffsetY")&&(out.textBoxShadowOffsetY=richItem.shadowOffsetY),(0,util.hasOwn)(richItem,"textShadowColor")&&(out.textShadowColor=richItem.textShadowColor),(0,util.hasOwn)(richItem,"textShadowBlur")&&(out.textShadowBlur=richItem.textShadowBlur),(0,util.hasOwn)(richItem,"textShadowOffsetX")&&(out.textShadowOffsetX=richItem.textShadowOffsetX),(0,util.hasOwn)(richItem,"textShadowOffsetY")&&(out.textShadowOffsetY=richItem.textShadowOffsetY))}var Animator=__webpack_require__("./node_modules/zrender/lib/animation/Animator.js"),LEGACY_TRANSFORM_PROPS_MAP={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},LEGACY_TRANSFORM_PROPS=(0,util.keys)(LEGACY_TRANSFORM_PROPS_MAP),ELEMENT_ANIMATABLE_PROPS=((0,util.reduce)(Transformable.dN,(function(obj,key){return obj[key]=1,obj}),{}),Transformable.dN.join(", "),["","style","shape","extra"]),transitionInnerStore=(0,util_model.Yf)();function getElementAnimationConfig(animationType,el,elOption,parentModel,dataIndex){var animationProp=animationType+"Animation",config=(0,basicTransition.ke)(animationType,parentModel,dataIndex)||{},userDuring=transitionInnerStore(el).userDuring;return config.duration>0&&(config.during=userDuring?(0,util.bind)(duringCall,{el,userDuring}):null,config.setToFinal=!0,config.scope=animationType),(0,util.extend)(config,elOption[animationProp]),config}function applyUpdateTransition(el,elOption,animatableModel,opts){var dataIndex=(opts=opts||{}).dataIndex,isInit=opts.isInit,clearStyle=opts.clearStyle,hasAnimation=animatableModel.isAnimationEnabled(),store=transitionInnerStore(el),styleOpt=elOption.style;store.userDuring=elOption.during;var transFromProps={},propsToSet={};if(function prepareTransformAllPropsFinal(el,elOption,allProps){for(var i=0;i<LEGACY_TRANSFORM_PROPS.length;i++){var legacyName=LEGACY_TRANSFORM_PROPS[i],xyName=LEGACY_TRANSFORM_PROPS_MAP[legacyName],legacyArr=elOption[legacyName];legacyArr&&(allProps[xyName[0]]=legacyArr[0],allProps[xyName[1]]=legacyArr[1])}for(i=0;i<Transformable.dN.length;i++){var key=Transformable.dN[i];null!=elOption[key]&&(allProps[key]=elOption[key])}}(0,elOption,propsToSet),prepareShapeOrExtraAllPropsFinal("shape",elOption,propsToSet),prepareShapeOrExtraAllPropsFinal("extra",elOption,propsToSet),!isInit&&hasAnimation&&(!function prepareTransformTransitionFrom(el,elOption,transFromProps){for(var transition=elOption.transition,transitionKeys=isTransitionAll(transition)?Transformable.dN:(0,util_model.kF)(transition||[]),i=0;i<transitionKeys.length;i++){var key=transitionKeys[i];if("style"!==key&&"shape"!==key&&"extra"!==key){var elVal=el[key];0,transFromProps[key]=elVal}}}(el,elOption,transFromProps),prepareShapeOrExtraTransitionFrom("shape",el,elOption,transFromProps),prepareShapeOrExtraTransitionFrom("extra",el,elOption,transFromProps),function prepareStyleTransitionFrom(fromEl,elOption,styleOpt,transFromProps){if(!styleOpt)return;var transFromStyleProps,fromElStyle=fromEl.style;if(fromElStyle){var styleTransition=styleOpt.transition,elTransition=elOption.transition;if(styleTransition&&!isTransitionAll(styleTransition)){var transitionKeys=(0,util_model.kF)(styleTransition);!transFromStyleProps&&(transFromStyleProps=transFromProps.style={});for(var i=0;i<transitionKeys.length;i++){var elVal=fromElStyle[key=transitionKeys[i]];transFromStyleProps[key]=elVal}}else if(fromEl.getAnimationStyleProps&&(isTransitionAll(elTransition)||isTransitionAll(styleTransition)||(0,util.indexOf)(elTransition,"style")>=0)){var animationProps=fromEl.getAnimationStyleProps(),animationStyleProps=animationProps?animationProps.style:null;if(animationStyleProps){!transFromStyleProps&&(transFromStyleProps=transFromProps.style={});var styleKeys=(0,util.keys)(styleOpt);for(i=0;i<styleKeys.length;i++){var key;if(animationStyleProps[key=styleKeys[i]]){elVal=fromElStyle[key];transFromStyleProps[key]=elVal}}}}}}(el,elOption,styleOpt,transFromProps)),propsToSet.style=styleOpt,function applyPropsDirectly(el,allPropsFinal,clearStyle){var styleOpt=allPropsFinal.style;if(!el.isGroup&&styleOpt){if(clearStyle){el.useStyle({});for(var animators=el.animators,i=0;i<animators.length;i++){var animator=animators[i];"style"===animator.targetName&&animator.changeTarget(el.style)}}el.setStyle(styleOpt)}allPropsFinal&&(allPropsFinal.style=null,allPropsFinal&&el.attr(allPropsFinal),allPropsFinal.style=styleOpt)}(el,propsToSet,clearStyle),function applyMiscProps(el,elOption){(0,util.hasOwn)(elOption,"silent")&&(el.silent=elOption.silent),(0,util.hasOwn)(elOption,"ignore")&&(el.ignore=elOption.ignore),el instanceof Displayable.ZP&&(0,util.hasOwn)(elOption,"invisible")&&(el.invisible=elOption.invisible);el instanceof Path.ZP&&(0,util.hasOwn)(elOption,"autoBatch")&&(el.autoBatch=elOption.autoBatch)}(el,elOption),hasAnimation)if(isInit){var enterFromProps_1={};(0,util.each)(ELEMENT_ANIMATABLE_PROPS,(function(propName){var prop=propName?elOption[propName]:elOption;prop&&prop.enterFrom&&(propName&&(enterFromProps_1[propName]=enterFromProps_1[propName]||{}),(0,util.extend)(propName?enterFromProps_1[propName]:enterFromProps_1,prop.enterFrom))}));var config=getElementAnimationConfig("enter",el,elOption,animatableModel,dataIndex);config.duration>0&&el.animateFrom(enterFromProps_1,config)}else!function applyPropsTransition(el,elOption,dataIndex,model,transFromProps){if(transFromProps){var config=getElementAnimationConfig("update",el,elOption,model,dataIndex);config.duration>0&&el.animateFrom(transFromProps,config)}}(el,elOption,dataIndex||0,animatableModel,transFromProps);updateLeaveTo(el,elOption),styleOpt?el.dirty():el.markRedraw()}function updateLeaveTo(el,elOption){for(var leaveToProps=transitionInnerStore(el).leaveToProps,i=0;i<ELEMENT_ANIMATABLE_PROPS.length;i++){var propName=ELEMENT_ANIMATABLE_PROPS[i],prop=propName?elOption[propName]:elOption;prop&&prop.leaveTo&&(leaveToProps||(leaveToProps=transitionInnerStore(el).leaveToProps={}),propName&&(leaveToProps[propName]=leaveToProps[propName]||{}),(0,util.extend)(propName?leaveToProps[propName]:leaveToProps,prop.leaveTo))}}function applyLeaveTransition(el,elOption,animatableModel,onRemove){if(el){var parent_1=el.parent,leaveToProps=transitionInnerStore(el).leaveToProps;if(leaveToProps){var config=getElementAnimationConfig("update",el,elOption,animatableModel,0);config.done=function(){parent_1.remove(el),onRemove&&onRemove()},el.animateTo(leaveToProps,config)}else parent_1.remove(el),onRemove&&onRemove()}}function isTransitionAll(transition){return"all"===transition}var tmpDuringScope={},transitionDuringAPI={setTransform:function(key,val){return tmpDuringScope.el[key]=val,this},getTransform:function(key){return tmpDuringScope.el[key]},setShape:function(key,val){var el=tmpDuringScope.el;return(el.shape||(el.shape={}))[key]=val,el.dirtyShape&&el.dirtyShape(),this},getShape:function(key){var shape=tmpDuringScope.el.shape;if(shape)return shape[key]},setStyle:function(key,val){var el=tmpDuringScope.el,style=el.style;return style&&(style[key]=val,el.dirtyStyle&&el.dirtyStyle()),this},getStyle:function(key){var style=tmpDuringScope.el.style;if(style)return style[key]},setExtra:function(key,val){return(tmpDuringScope.el.extra||(tmpDuringScope.el.extra={}))[key]=val,this},getExtra:function(key){var extra=tmpDuringScope.el.extra;if(extra)return extra[key]}};function duringCall(){var el=this.el;if(el){var latestUserDuring=transitionInnerStore(el).userDuring,scopeUserDuring=this.userDuring;latestUserDuring===scopeUserDuring?(tmpDuringScope.el=el,scopeUserDuring(transitionDuringAPI)):this.el=this.userDuring=null}}function prepareShapeOrExtraTransitionFrom(mainAttr,fromEl,elOption,transFromProps){var attrOpt=elOption[mainAttr];if(attrOpt){var transFromPropsInAttr,elPropsInAttr=fromEl[mainAttr];if(elPropsInAttr){var transition=elOption.transition,attrTransition=attrOpt.transition;if(attrTransition)if(!transFromPropsInAttr&&(transFromPropsInAttr=transFromProps[mainAttr]={}),isTransitionAll(attrTransition))(0,util.extend)(transFromPropsInAttr,elPropsInAttr);else for(var transitionKeys=(0,util_model.kF)(attrTransition),i=0;i<transitionKeys.length;i++){var elVal=elPropsInAttr[key=transitionKeys[i]];transFromPropsInAttr[key]=elVal}else if(isTransitionAll(transition)||(0,util.indexOf)(transition,mainAttr)>=0){!transFromPropsInAttr&&(transFromPropsInAttr=transFromProps[mainAttr]={});var elPropsInAttrKeys=(0,util.keys)(elPropsInAttr);for(i=0;i<elPropsInAttrKeys.length;i++){var key;elVal=elPropsInAttr[key=elPropsInAttrKeys[i]];isNonStyleTransitionEnabled(attrOpt[key],elVal)&&(transFromPropsInAttr[key]=elVal)}}}}}function prepareShapeOrExtraAllPropsFinal(mainAttr,elOption,allProps){var attrOpt=elOption[mainAttr];if(attrOpt)for(var allPropsInAttr=allProps[mainAttr]={},keysInAttr=(0,util.keys)(attrOpt),i=0;i<keysInAttr.length;i++){var key=keysInAttr[i];allPropsInAttr[key]=(0,Animator.V)(attrOpt[key])}}function isNonStyleTransitionEnabled(optVal,elVal){return(0,util.isArrayLike)(optVal)?optVal!==elVal:null!=optVal&&isFinite(optVal)}var getStateToRestore=(0,util_model.Yf)(),KEYFRAME_EXCLUDE_KEYS=["percent","easing","shape","style","extra"];function stopPreviousKeyframeAnimationAndRestore(el){el.stopAnimation("keyframe"),el.attr(getStateToRestore(el))}function applyKeyframeAnimation(el,animationOpts,animatableModel){if(animatableModel.isAnimationEnabled()&&animationOpts)if((0,util.isArray)(animationOpts))(0,util.each)(animationOpts,(function(singleAnimationOpts){applyKeyframeAnimation(el,singleAnimationOpts,animatableModel)}));else{var keyframes=animationOpts.keyframes,duration=animationOpts.duration;if(animatableModel&&null==duration){var config=(0,basicTransition.ke)("enter",animatableModel,0);duration=config&&config.duration}if(keyframes&&duration){var stateToRestore=getStateToRestore(el);(0,util.each)(ELEMENT_ANIMATABLE_PROPS,(function(targetPropName){if(!targetPropName||el[targetPropName]){var animator;keyframes.sort((function(a,b){return a.percent-b.percent})),(0,util.each)(keyframes,(function(kf){var animators=el.animators,kfValues=targetPropName?kf[targetPropName]:kf;if(kfValues){var propKeys=(0,util.keys)(kfValues);if(targetPropName||(propKeys=(0,util.filter)(propKeys,(function(key){return(0,util.indexOf)(KEYFRAME_EXCLUDE_KEYS,key)<0}))),propKeys.length){animator||((animator=el.animate(targetPropName,animationOpts.loop,!0)).scope="keyframe");for(var i=0;i<animators.length;i++)animators[i]!==animator&&animators[i].targetName===animator.targetName&&animators[i].stopTracks(propKeys);targetPropName&&(stateToRestore[targetPropName]=stateToRestore[targetPropName]||{});var savedTarget=targetPropName?stateToRestore[targetPropName]:stateToRestore;(0,util.each)(propKeys,(function(key){savedTarget[key]=((targetPropName?el[targetPropName]:el)||{})[key]})),animator.whenWithKeys(duration*kf.percent,kfValues,propKeys,kf.easing)}}})),animator&&animator.delay(animationOpts.delay||0).duration(duration).start(animationOpts.easing)}}))}}}var EMPHASIS="emphasis",NORMAL="normal",STATES=[NORMAL,EMPHASIS,"blur","select"],PATH_ITEM_STYLE={normal:["itemStyle"],emphasis:[EMPHASIS,"itemStyle"],blur:["blur","itemStyle"],select:["select","itemStyle"]},PATH_LABEL={normal:["label"],emphasis:[EMPHASIS,"label"],blur:["blur","label"],select:["select","label"]},DEFAULT_TRANSITION=["x","y"],GROUP_DIFF_PREFIX="e\0\0",attachedTxInfoTmp={normal:{},emphasis:{},blur:{},select:{}},prepareCustoms={cartesian2d:function cartesianPrepareCustom(coordSys){var rect=coordSys.master.getRect();return{coordSys:{type:"cartesian2d",x:rect.x,y:rect.y,width:rect.width,height:rect.height},api:{coord:function(data){return coordSys.dataToPoint(data)},size:util.bind(dataToCoordSize,coordSys)}}},geo:function geoPrepareCustom(coordSys){var rect=coordSys.getBoundingRect();return{coordSys:{type:"geo",x:rect.x,y:rect.y,width:rect.width,height:rect.height,zoom:coordSys.getZoom()},api:{coord:function(data){return coordSys.dataToPoint(data)},size:util.bind(prepareCustom_dataToCoordSize,coordSys)}}},single:function singlePrepareCustom(coordSys){var rect=coordSys.getRect();return{coordSys:{type:"singleAxis",x:rect.x,y:rect.y,width:rect.width,height:rect.height},api:{coord:function(val){return coordSys.dataToPoint(val)},size:(0,util.bind)(single_prepareCustom_dataToCoordSize,coordSys)}}},polar:function polarPrepareCustom(coordSys){var radiusAxis=coordSys.getRadiusAxis(),angleAxis=coordSys.getAngleAxis(),radius=radiusAxis.getExtent();return radius[0]>radius[1]&&radius.reverse(),{coordSys:{type:"polar",cx:coordSys.cx,cy:coordSys.cy,r:radius[1],r0:radius[0]},api:{coord:function(data){var radius=radiusAxis.dataToRadius(data[0]),angle=angleAxis.dataToAngle(data[1]),coord=coordSys.coordToPoint([radius,angle]);return coord.push(radius,angle*Math.PI/180),coord},size:util.bind(polar_prepareCustom_dataToCoordSize,coordSys)}}},calendar:function calendarPrepareCustom(coordSys){var rect=coordSys.getRect(),rangeInfo=coordSys.getRangeInfo();return{coordSys:{type:"calendar",x:rect.x,y:rect.y,width:rect.width,height:rect.height,cellWidth:coordSys.getCellWidth(),cellHeight:coordSys.getCellHeight(),rangeInfo:{start:rangeInfo.start,end:rangeInfo.end,weeks:rangeInfo.weeks,dayCount:rangeInfo.allDay}},api:{coord:function(data,clamp){return coordSys.dataToPoint(data,clamp)}}}}};function isPath(el){return el instanceof Path.ZP}function isDisplayable(el){return el instanceof Displayable.ZP}const CustomView=function(_super){function CustomChartView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=CustomChartView.type,_this}return(0,tslib_es6.ZT)(CustomChartView,_super),CustomChartView.prototype.render=function(customSeries,ecModel,api,payload){this._progressiveEls=null;var oldData=this._data,data=customSeries.getData(),group=this.group,renderItem=makeRenderItem(customSeries,data,ecModel,api);oldData||group.removeAll(),data.diff(oldData).add((function(newIdx){createOrUpdateItem(api,null,newIdx,renderItem(newIdx,payload),customSeries,group,data)})).remove((function(oldIdx){var el=oldData.getItemGraphicEl(oldIdx);el&&applyLeaveTransition(el,customInnerStore(el).option,customSeries)})).update((function(newIdx,oldIdx){var oldEl=oldData.getItemGraphicEl(oldIdx);createOrUpdateItem(api,oldEl,newIdx,renderItem(newIdx,payload),customSeries,group,data)})).execute();var clipPath=customSeries.get("clip",!0)?(0,createClipPathFromCoordSys.lQ)(customSeries.coordinateSystem,!1,customSeries):null;clipPath?group.setClipPath(clipPath):group.removeClipPath(),this._data=data},CustomChartView.prototype.incrementalPrepareRender=function(customSeries,ecModel,api){this.group.removeAll(),this._data=null},CustomChartView.prototype.incrementalRender=function(params,customSeries,ecModel,api,payload){var data=customSeries.getData(),renderItem=makeRenderItem(customSeries,data,ecModel,api),progressiveEls=this._progressiveEls=[];function setIncrementalAndHoverLayer(el){el.isGroup||(el.incremental=!0,el.ensureState("emphasis").hoverLayer=!0)}for(var idx=params.start;idx<params.end;idx++){var el=createOrUpdateItem(null,null,idx,renderItem(idx,payload),customSeries,this.group,data);el&&(el.traverse(setIncrementalAndHoverLayer),progressiveEls.push(el))}},CustomChartView.prototype.eachRendered=function(cb){graphic.traverseElements(this._progressiveEls||this.group,cb)},CustomChartView.prototype.filterForExposedEvent=function(eventType,query,targetEl,packedEvent){var elementName=query.element;if(null==elementName||targetEl.name===elementName)return!0;for(;(targetEl=targetEl.__hostTarget||targetEl.parent)&&targetEl!==this.group;)if(targetEl.name===elementName)return!0;return!1},CustomChartView.type="custom",CustomChartView}(Chart.Z);function createEl(elOption){var el,graphicType=elOption.type;if("path"===graphicType){var shape=elOption.shape,pathRect=null!=shape.width&&null!=shape.height?{x:shape.x||0,y:shape.y||0,width:shape.width,height:shape.height}:null,pathData=getPathData(shape);el=graphic.makePath(pathData,null,pathRect,shape.layout||"center"),customInnerStore(el).customPathData=pathData}else if("image"===graphicType)el=new graphic_Image.ZP({}),customInnerStore(el).customImagePath=elOption.style.image;else if("text"===graphicType)el=new Text.ZP({});else if("group"===graphicType)el=new Group.Z;else{if("compoundPath"===graphicType)throw new Error('"compoundPath" is not supported yet.');var Clz=graphic.getShapeClass(graphicType);if(!Clz){0,(0,log._y)("")}el=new Clz}return customInnerStore(el).customGraphicType=graphicType,el.name=elOption.name,el.z2EmphasisLift=1,el.z2SelectLift=1,el}function updateElNormal(api,el,dataIndex,elOption,attachedTxInfo,seriesModel,isInit){stopPreviousKeyframeAnimationAndRestore(el);var txCfgOpt=attachedTxInfo&&attachedTxInfo.normal.cfg;txCfgOpt&&el.setTextConfig(txCfgOpt),elOption&&null==elOption.transition&&(elOption.transition=DEFAULT_TRANSITION);var styleOpt=elOption&&elOption.style;if(styleOpt){if("text"===el.type){var textOptionStyle=styleOpt;(0,util.hasOwn)(textOptionStyle,"textFill")&&(textOptionStyle.fill=textOptionStyle.textFill),(0,util.hasOwn)(textOptionStyle,"textStroke")&&(textOptionStyle.stroke=textOptionStyle.textStroke)}var decalPattern=void 0,decalObj=isPath(el)?styleOpt.decal:null;api&&decalObj&&(decalObj.dirty=!0,decalPattern=(0,util_decal.I)(decalObj,api)),styleOpt.__decalPattern=decalPattern}isDisplayable(el)&&(styleOpt&&(decalPattern=styleOpt.__decalPattern)&&(styleOpt.decal=decalPattern));applyUpdateTransition(el,elOption,seriesModel,{dataIndex,isInit,clearStyle:!0}),applyKeyframeAnimation(el,elOption.keyframeAnimation,seriesModel)}function updateElOnState(state,el,elStateOpt,styleOpt,attachedTxInfo){var elDisplayable=el.isGroup?null:el,txCfgOpt=attachedTxInfo&&attachedTxInfo[state].cfg;if(elDisplayable){var stateObj=elDisplayable.ensureState(state);if(!1===styleOpt){var existingEmphasisState=elDisplayable.getState(state);existingEmphasisState&&(existingEmphasisState.style=null)}else stateObj.style=styleOpt||null;txCfgOpt&&(stateObj.textConfig=txCfgOpt),(0,states.MA)(elDisplayable)}}function updateZForEachState(elDisplayable,elOption,state){var isNormal=state===NORMAL,elStateOpt=isNormal?elOption:retrieveStateOption(elOption,state),optZ2=elStateOpt?elStateOpt.z2:null;null!=optZ2&&((isNormal?elDisplayable:elDisplayable.ensureState(state)).z2=optZ2||0)}function makeRenderItem(customSeries,data,ecModel,api){var renderItem=customSeries.get("renderItem"),coordSys=customSeries.coordinateSystem,prepareResult={};coordSys&&(prepareResult=coordSys.prepareCustoms?coordSys.prepareCustoms(coordSys):prepareCustoms[coordSys.type](coordSys));for(var currDataIndexInside,currItemModel,userAPI=(0,util.defaults)({getWidth:api.getWidth,getHeight:api.getHeight,getZr:api.getZr,getDevicePixelRatio:api.getDevicePixelRatio,value:function value(dim,dataIndexInside){return null==dataIndexInside&&(dataIndexInside=currDataIndexInside),data.getStore().get(data.getDimensionIndex(dim||0),dataIndexInside)},style:function style(userProps,dataIndexInside){0;null==dataIndexInside&&(dataIndexInside=currDataIndexInside);var style=data.getItemVisual(dataIndexInside,"style"),visualColor=style&&style.fill,opacity=style&&style.opacity,itemStyle=getItemStyleModel(dataIndexInside,NORMAL).getItemStyle();null!=visualColor&&(itemStyle.fill=visualColor),null!=opacity&&(itemStyle.opacity=opacity);var opt={inheritColor:(0,util.isString)(visualColor)?visualColor:"#000"},labelModel=getLabelModel(dataIndexInside,NORMAL),textStyle=labelStyle.Lr(labelModel,null,opt,!1,!0);textStyle.text=labelModel.getShallow("show")?(0,util.retrieve2)(customSeries.getFormattedLabel(dataIndexInside,NORMAL),(0,labelHelper.H)(data,dataIndexInside)):null;var textConfig=labelStyle.nC(labelModel,opt,!1);return preFetchFromExtra(userProps,itemStyle),itemStyle=convertToEC4StyleForCustomSerise(itemStyle,textStyle,textConfig),userProps&&applyUserPropsAfter(itemStyle,userProps),itemStyle.legacy=!0,itemStyle},ordinalRawValue:function ordinalRawValue(dim,dataIndexInside){null==dataIndexInside&&(dataIndexInside=currDataIndexInside),dim=dim||0;var dimInfo=data.getDimensionInfo(dim);if(!dimInfo){var dimIndex=data.getDimensionIndex(dim);return dimIndex>=0?data.getStore().get(dimIndex,dataIndexInside):void 0}var val=data.get(dimInfo.name,dataIndexInside),ordinalMeta=dimInfo&&dimInfo.ordinalMeta;return ordinalMeta?ordinalMeta.categories[val]:val},styleEmphasis:function styleEmphasis(userProps,dataIndexInside){0;null==dataIndexInside&&(dataIndexInside=currDataIndexInside);var itemStyle=getItemStyleModel(dataIndexInside,EMPHASIS).getItemStyle(),labelModel=getLabelModel(dataIndexInside,EMPHASIS),textStyle=labelStyle.Lr(labelModel,null,null,!0,!0);textStyle.text=labelModel.getShallow("show")?(0,util.retrieve3)(customSeries.getFormattedLabel(dataIndexInside,EMPHASIS),customSeries.getFormattedLabel(dataIndexInside,NORMAL),(0,labelHelper.H)(data,dataIndexInside)):null;var textConfig=labelStyle.nC(labelModel,null,!0);return preFetchFromExtra(userProps,itemStyle),itemStyle=convertToEC4StyleForCustomSerise(itemStyle,textStyle,textConfig),userProps&&applyUserPropsAfter(itemStyle,userProps),itemStyle.legacy=!0,itemStyle},visual:function visual(visualType,dataIndexInside){if(null==dataIndexInside&&(dataIndexInside=currDataIndexInside),(0,util.hasOwn)(STYLE_VISUAL_TYPE,visualType)){var style_1=data.getItemVisual(dataIndexInside,"style");return style_1?style_1[STYLE_VISUAL_TYPE[visualType]]:null}if((0,util.hasOwn)(NON_STYLE_VISUAL_PROPS,visualType))return data.getItemVisual(dataIndexInside,visualType)},barLayout:function barLayout(opt){if("cartesian2d"===coordSys.type){var baseAxis=coordSys.getBaseAxis();return(0,barGrid.Gk)((0,util.defaults)({axis:baseAxis},opt))}},currentSeriesIndices:function currentSeriesIndices(){return ecModel.getCurrentSeriesIndices()},font:function font(opt){return labelStyle.qT(opt,ecModel)}},prepareResult.api||{}),userParams={context:{},seriesId:customSeries.id,seriesName:customSeries.name,seriesIndex:customSeries.seriesIndex,coordSys:prepareResult.coordSys,dataInsideLength:data.count(),encode:wrapEncodeDef(customSeries.getData())},currItemStyleModels={},currLabelModels={},seriesItemStyleModels={},seriesLabelModels={},i=0;i<STATES.length;i++){var stateName=STATES[i];seriesItemStyleModels[stateName]=customSeries.getModel(PATH_ITEM_STYLE[stateName]),seriesLabelModels[stateName]=customSeries.getModel(PATH_LABEL[stateName])}function getItemModel(dataIndexInside){return dataIndexInside===currDataIndexInside?currItemModel||(currItemModel=data.getItemModel(dataIndexInside)):data.getItemModel(dataIndexInside)}function getItemStyleModel(dataIndexInside,state){return data.hasItemOption?dataIndexInside===currDataIndexInside?currItemStyleModels[state]||(currItemStyleModels[state]=getItemModel(dataIndexInside).getModel(PATH_ITEM_STYLE[state])):getItemModel(dataIndexInside).getModel(PATH_ITEM_STYLE[state]):seriesItemStyleModels[state]}function getLabelModel(dataIndexInside,state){return data.hasItemOption?dataIndexInside===currDataIndexInside?currLabelModels[state]||(currLabelModels[state]=getItemModel(dataIndexInside).getModel(PATH_LABEL[state])):getItemModel(dataIndexInside).getModel(PATH_LABEL[state]):seriesLabelModels[state]}return function(dataIndexInside,payload){return currDataIndexInside=dataIndexInside,currItemModel=null,currItemStyleModels={},currLabelModels={},renderItem&&renderItem((0,util.defaults)({dataIndexInside,dataIndex:data.getRawIndex(dataIndexInside),actionType:payload?payload.type:null},userParams),userAPI)};function applyUserPropsAfter(itemStyle,extra){for(var key in extra)(0,util.hasOwn)(extra,key)&&(itemStyle[key]=extra[key])}function preFetchFromExtra(extra,itemStyle){extra&&(extra.textFill&&(itemStyle.textFill=extra.textFill),extra.textPosition&&(itemStyle.textPosition=extra.textPosition))}}function wrapEncodeDef(data){var encodeDef={};return(0,util.each)(data.dimensions,(function(dimName){var dimInfo=data.getDimensionInfo(dimName);if(!dimInfo.isExtraCoord){var coordDim=dimInfo.coordDim;(encodeDef[coordDim]=encodeDef[coordDim]||[])[dimInfo.coordDimIndex]=data.getDimensionIndex(dimName)}})),encodeDef}function createOrUpdateItem(api,existsEl,dataIndex,elOption,seriesModel,group,data){if(elOption){var el=doCreateOrUpdateEl(api,existsEl,dataIndex,elOption,seriesModel,group);return el&&data.setItemGraphicEl(dataIndex,el),el&&(0,states.k5)(el,elOption.focus,elOption.blurScope,elOption.emphasisDisabled),el}group.remove(existsEl)}function doCreateOrUpdateEl(api,existsEl,dataIndex,elOption,seriesModel,group){var toBeReplacedIdx=-1,oldEl=existsEl;existsEl&&doesElNeedRecreate(existsEl,elOption,seriesModel)&&(toBeReplacedIdx=(0,util.indexOf)(group.childrenRef(),existsEl),existsEl=null);var isInit=!existsEl,el=existsEl;el?el.clearStates():(el=createEl(elOption),oldEl&&function copyElement(sourceEl,targetEl){targetEl.copyTransform(sourceEl),isDisplayable(targetEl)&&isDisplayable(sourceEl)&&(targetEl.setStyle(sourceEl.style),targetEl.z=sourceEl.z,targetEl.z2=sourceEl.z2,targetEl.zlevel=sourceEl.zlevel,targetEl.invisible=sourceEl.invisible,targetEl.ignore=sourceEl.ignore,isPath(targetEl)&&isPath(sourceEl)&&targetEl.setShape(sourceEl.shape))}(oldEl,el)),!1===elOption.morph?el.disableMorphing=!0:el.disableMorphing&&(el.disableMorphing=!1),attachedTxInfoTmp.normal.cfg=attachedTxInfoTmp.normal.conOpt=attachedTxInfoTmp.emphasis.cfg=attachedTxInfoTmp.emphasis.conOpt=attachedTxInfoTmp.blur.cfg=attachedTxInfoTmp.blur.conOpt=attachedTxInfoTmp.select.cfg=attachedTxInfoTmp.select.conOpt=null,attachedTxInfoTmp.isLegacy=!1,function doCreateOrUpdateAttachedTx(el,dataIndex,elOption,seriesModel,isInit,attachedTxInfo){if(el.isGroup)return;processTxInfo(elOption,null,attachedTxInfo),processTxInfo(elOption,EMPHASIS,attachedTxInfo);var txConOptNormal=attachedTxInfo.normal.conOpt,txConOptEmphasis=attachedTxInfo.emphasis.conOpt,txConOptBlur=attachedTxInfo.blur.conOpt,txConOptSelect=attachedTxInfo.select.conOpt;if(null!=txConOptNormal||null!=txConOptEmphasis||null!=txConOptSelect||null!=txConOptBlur){var textContent=el.getTextContent();if(!1===txConOptNormal)textContent&&el.removeTextContent();else{txConOptNormal=attachedTxInfo.normal.conOpt=txConOptNormal||{type:"text"},textContent?textContent.clearStates():(textContent=createEl(txConOptNormal),el.setTextContent(textContent)),updateElNormal(null,textContent,dataIndex,txConOptNormal,null,seriesModel,isInit);for(var txConStlOptNormal=txConOptNormal&&txConOptNormal.style,i=0;i<STATES.length;i++){var stateName=STATES[i];if(stateName!==NORMAL){var txConOptOtherState=attachedTxInfo[stateName].conOpt;updateElOnState(stateName,textContent,0,retrieveStyleOptionOnState(txConOptNormal,txConOptOtherState,stateName),null)}}txConStlOptNormal?textContent.dirty():textContent.markRedraw()}}}(el,dataIndex,elOption,seriesModel,isInit,attachedTxInfoTmp),function doCreateOrUpdateClipPath(el,dataIndex,elOption,seriesModel,isInit){var clipPathOpt=elOption.clipPath;if(!1===clipPathOpt)el&&el.getClipPath()&&el.removeClipPath();else if(clipPathOpt){var clipPath=el.getClipPath();clipPath&&doesElNeedRecreate(clipPath,clipPathOpt,seriesModel)&&(clipPath=null),clipPath||(clipPath=createEl(clipPathOpt),el.setClipPath(clipPath)),updateElNormal(null,clipPath,dataIndex,clipPathOpt,null,seriesModel,isInit)}}(el,dataIndex,elOption,seriesModel,isInit),updateElNormal(api,el,dataIndex,elOption,attachedTxInfoTmp,seriesModel,isInit),(0,util.hasOwn)(elOption,"info")&&(customInnerStore(el).info=elOption.info);for(var i=0;i<STATES.length;i++){var stateName=STATES[i];if(stateName!==NORMAL){var otherStateOpt=retrieveStateOption(elOption,stateName);updateElOnState(stateName,el,0,retrieveStyleOptionOnState(elOption,otherStateOpt,stateName),attachedTxInfoTmp)}}return function CustomView_updateZ(el,elOption,seriesModel){if(!el.isGroup){var elDisplayable=el,currentZ=seriesModel.currentZ,currentZLevel=seriesModel.currentZLevel;elDisplayable.z=currentZ,elDisplayable.zlevel=currentZLevel;var optZ2=elOption.z2;null!=optZ2&&(elDisplayable.z2=optZ2||0);for(var i=0;i<STATES.length;i++)updateZForEachState(elDisplayable,elOption,STATES[i])}}(el,elOption,seriesModel),"group"===elOption.type&&function mergeChildren(api,el,dataIndex,elOption,seriesModel){var newChildren=elOption.children,newLen=newChildren?newChildren.length:0,mergeChildren=elOption.$mergeChildren,byName="byName"===mergeChildren||elOption.diffChildrenByName,notMerge=!1===mergeChildren;if(!newLen&&!byName&&!notMerge)return;if(byName)return void function diffGroupChildren(context){new DataDiffer.Z(context.oldChildren,context.newChildren,getKey,getKey,context).add(processAddUpdate).update(processAddUpdate).remove(processRemove).execute()}({api,oldChildren:el.children()||[],newChildren:newChildren||[],dataIndex,seriesModel,group:el});notMerge&&el.removeAll();for(var index=0;index<newLen;index++){var newChild=newChildren[index],oldChild=el.childAt(index);newChild?(null==newChild.ignore&&(newChild.ignore=!1),doCreateOrUpdateEl(api,oldChild,dataIndex,newChild,seriesModel,el)):oldChild.ignore=!0}for(var i=el.childCount()-1;i>=index;i--){var child=el.childAt(i);removeChildFromGroup(el,child,seriesModel)}}(api,el,dataIndex,elOption,seriesModel),toBeReplacedIdx>=0?group.replaceAt(el,toBeReplacedIdx):group.add(el),el}function doesElNeedRecreate(el,elOption,seriesModel){var elInner=customInnerStore(el),elOptionType=elOption.type,elOptionShape=elOption.shape,elOptionStyle=elOption.style;return seriesModel.isUniversalTransitionEnabled()||null!=elOptionType&&elOptionType!==elInner.customGraphicType||"path"===elOptionType&&function hasOwnPathData(shape){return shape&&((0,util.hasOwn)(shape,"pathData")||(0,util.hasOwn)(shape,"d"))}(elOptionShape)&&getPathData(elOptionShape)!==elInner.customPathData||"image"===elOptionType&&(0,util.hasOwn)(elOptionStyle,"image")&&elOptionStyle.image!==elInner.customImagePath}function processTxInfo(elOption,state,attachedTxInfo){var stateOpt=state?retrieveStateOption(elOption,state):elOption,styleOpt=state?retrieveStyleOptionOnState(elOption,stateOpt,EMPHASIS):elOption.style,elType=elOption.type,txCfg=stateOpt?stateOpt.textConfig:null,txConOptNormal=elOption.textContent,txConOpt=txConOptNormal?state?retrieveStateOption(txConOptNormal,state):txConOptNormal:null;if(styleOpt&&(attachedTxInfo.isLegacy||isEC4CompatibleStyle(styleOpt,elType,!!txCfg,!!txConOpt))){attachedTxInfo.isLegacy=!0;var convertResult=convertFromEC4CompatibleStyle(styleOpt,elType,!state);!txCfg&&convertResult.textConfig&&(txCfg=convertResult.textConfig),!txConOpt&&convertResult.textContent&&(txConOpt=convertResult.textContent)}if(!state&&txConOpt){var txConOptNormal_1=txConOpt;!txConOptNormal_1.type&&(txConOptNormal_1.type="text")}var info=state?attachedTxInfo[state]:attachedTxInfo.normal;info.cfg=txCfg,info.conOpt=txConOpt}function retrieveStateOption(elOption,state){return state?elOption?elOption[state]:null:elOption}function retrieveStyleOptionOnState(stateOptionNormal,stateOption,state){var style=stateOption&&stateOption.style;return null==style&&state===EMPHASIS&&stateOptionNormal&&(style=stateOptionNormal.styleEmphasis),style}function removeChildFromGroup(group,child,seriesModel){child&&applyLeaveTransition(child,customInnerStore(group).option,seriesModel)}function getKey(item,idx){var name=item&&item.name;return null!=name?name:GROUP_DIFF_PREFIX+idx}function processAddUpdate(newIndex,oldIndex){var context=this.context,childOption=null!=newIndex?context.newChildren[newIndex]:null,child=null!=oldIndex?context.oldChildren[oldIndex]:null;doCreateOrUpdateEl(context.api,child,context.dataIndex,childOption,context.seriesModel,context.group)}function processRemove(oldIndex){var context=this.context,child=context.oldChildren[oldIndex];child&&applyLeaveTransition(child,customInnerStore(child).option,context.seriesModel)}function getPathData(shape){return shape&&(shape.pathData||shape.d)}var core_event=__webpack_require__("./node_modules/zrender/lib/core/event.js"),BaseAxisPointer_inner=(0,util_model.Yf)(),clone=util.clone,bind=util.bind,BaseAxisPointer=function(){function BaseAxisPointer(){this._dragging=!1,this.animationThreshold=15}return BaseAxisPointer.prototype.render=function(axisModel,axisPointerModel,api,forceRender){var value=axisPointerModel.get("value"),status=axisPointerModel.get("status");if(this._axisModel=axisModel,this._axisPointerModel=axisPointerModel,this._api=api,forceRender||this._lastValue!==value||this._lastStatus!==status){this._lastValue=value,this._lastStatus=status;var group=this._group,handle=this._handle;if(!status||"hide"===status)return group&&group.hide(),void(handle&&handle.hide());group&&group.show(),handle&&handle.show();var elOption={};this.makeElOption(elOption,value,axisModel,axisPointerModel,api);var graphicKey=elOption.graphicKey;graphicKey!==this._lastGraphicKey&&this.clear(api),this._lastGraphicKey=graphicKey;var moveAnimation=this._moveAnimation=this.determineAnimation(axisModel,axisPointerModel);if(group){var doUpdateProps=util.curry(updateProps,axisPointerModel,moveAnimation);this.updatePointerEl(group,elOption,doUpdateProps),this.updateLabelEl(group,elOption,doUpdateProps,axisPointerModel)}else group=this._group=new Group.Z,this.createPointerEl(group,elOption,axisModel,axisPointerModel),this.createLabelEl(group,elOption,axisModel,axisPointerModel),api.getZr().add(group);updateMandatoryProps(group,axisPointerModel,!0),this._renderHandle(value)}},BaseAxisPointer.prototype.remove=function(api){this.clear(api)},BaseAxisPointer.prototype.dispose=function(api){this.clear(api)},BaseAxisPointer.prototype.determineAnimation=function(axisModel,axisPointerModel){var animation=axisPointerModel.get("animation"),axis=axisModel.axis,isCategoryAxis="category"===axis.type,useSnap=axisPointerModel.get("snap");if(!useSnap&&!isCategoryAxis)return!1;if("auto"===animation||null==animation){var animationThreshold=this.animationThreshold;if(isCategoryAxis&&axis.getBandWidth()>animationThreshold)return!0;if(useSnap){var seriesDataCount=getAxisInfo(axisModel).seriesDataCount,axisExtent=axis.getExtent();return Math.abs(axisExtent[0]-axisExtent[1])/seriesDataCount>animationThreshold}return!1}return!0===animation},BaseAxisPointer.prototype.makeElOption=function(elOption,value,axisModel,axisPointerModel,api){},BaseAxisPointer.prototype.createPointerEl=function(group,elOption,axisModel,axisPointerModel){var pointerOption=elOption.pointer;if(pointerOption){var pointerEl=BaseAxisPointer_inner(group).pointerEl=new graphic[pointerOption.type](clone(elOption.pointer));group.add(pointerEl)}},BaseAxisPointer.prototype.createLabelEl=function(group,elOption,axisModel,axisPointerModel){if(elOption.label){var labelEl=BaseAxisPointer_inner(group).labelEl=new Text.ZP(clone(elOption.label));group.add(labelEl),updateLabelShowHide(labelEl,axisPointerModel)}},BaseAxisPointer.prototype.updatePointerEl=function(group,elOption,updateProps){var pointerEl=BaseAxisPointer_inner(group).pointerEl;pointerEl&&elOption.pointer&&(pointerEl.setStyle(elOption.pointer.style),updateProps(pointerEl,{shape:elOption.pointer.shape}))},BaseAxisPointer.prototype.updateLabelEl=function(group,elOption,updateProps,axisPointerModel){var labelEl=BaseAxisPointer_inner(group).labelEl;labelEl&&(labelEl.setStyle(elOption.label.style),updateProps(labelEl,{x:elOption.label.x,y:elOption.label.y}),updateLabelShowHide(labelEl,axisPointerModel))},BaseAxisPointer.prototype._renderHandle=function(value){if(!this._dragging&&this.updateHandleTransform){var isInit,axisPointerModel=this._axisPointerModel,zr=this._api.getZr(),handle=this._handle,handleModel=axisPointerModel.getModel("handle"),status=axisPointerModel.get("status");if(!handleModel.get("show")||!status||"hide"===status)return handle&&zr.remove(handle),void(this._handle=null);this._handle||(isInit=!0,handle=this._handle=graphic.createIcon(handleModel.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(e){core_event.sT(e.event)},onmousedown:bind(this._onHandleDragMove,this,0,0),drift:bind(this._onHandleDragMove,this),ondragend:bind(this._onHandleDragEnd,this)}),zr.add(handle)),updateMandatoryProps(handle,axisPointerModel,!1),handle.setStyle(handleModel.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var handleSize=handleModel.get("size");util.isArray(handleSize)||(handleSize=[handleSize,handleSize]),handle.scaleX=handleSize[0]/2,handle.scaleY=handleSize[1]/2,throttle.T9(this,"_doDispatchAxisPointer",handleModel.get("throttle")||0,"fixRate"),this._moveHandleToValue(value,isInit)}},BaseAxisPointer.prototype._moveHandleToValue=function(value,isInit){updateProps(this._axisPointerModel,!isInit&&this._moveAnimation,this._handle,getHandleTransProps(this.getHandleTransform(value,this._axisModel,this._axisPointerModel)))},BaseAxisPointer.prototype._onHandleDragMove=function(dx,dy){var handle=this._handle;if(handle){this._dragging=!0;var trans=this.updateHandleTransform(getHandleTransProps(handle),[dx,dy],this._axisModel,this._axisPointerModel);this._payloadInfo=trans,handle.stopAnimation(),handle.attr(getHandleTransProps(trans)),BaseAxisPointer_inner(handle).lastProp=null,this._doDispatchAxisPointer()}},BaseAxisPointer.prototype._doDispatchAxisPointer=function(){if(this._handle){var payloadInfo=this._payloadInfo,axisModel=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:payloadInfo.cursorPoint[0],y:payloadInfo.cursorPoint[1],tooltipOption:payloadInfo.tooltipOption,axesInfo:[{axisDim:axisModel.axis.dim,axisIndex:axisModel.componentIndex}]})}},BaseAxisPointer.prototype._onHandleDragEnd=function(){if(this._dragging=!1,this._handle){var value=this._axisPointerModel.get("value");this._moveHandleToValue(value),this._api.dispatchAction({type:"hideTip"})}},BaseAxisPointer.prototype.clear=function(api){this._lastValue=null,this._lastStatus=null;var zr=api.getZr(),group=this._group,handle=this._handle;zr&&group&&(this._lastGraphicKey=null,group&&zr.remove(group),handle&&zr.remove(handle),this._group=null,this._handle=null,this._payloadInfo=null),throttle.ZH(this,"_doDispatchAxisPointer")},BaseAxisPointer.prototype.doClear=function(){},BaseAxisPointer.prototype.buildLabel=function(xy,wh,xDimIndex){return{x:xy[xDimIndex=xDimIndex||0],y:xy[1-xDimIndex],width:wh[xDimIndex],height:wh[1-xDimIndex]}},BaseAxisPointer}();function updateProps(animationModel,moveAnimation,el,props){propsEqual(BaseAxisPointer_inner(el).lastProp,props)||(BaseAxisPointer_inner(el).lastProp=props,moveAnimation?basicTransition.D(el,props,animationModel):(el.stopAnimation(),el.attr(props)))}function propsEqual(lastProps,newProps){if(util.isObject(lastProps)&&util.isObject(newProps)){var equals_1=!0;return util.each(newProps,(function(item,key){equals_1=equals_1&&propsEqual(lastProps[key],item)})),!!equals_1}return lastProps===newProps}function updateLabelShowHide(labelEl,axisPointerModel){labelEl[axisPointerModel.get(["label","show"])?"show":"hide"]()}function getHandleTransProps(trans){return{x:trans.x||0,y:trans.y||0,rotation:trans.rotation||0}}function updateMandatoryProps(group,axisPointerModel,silent){var z=axisPointerModel.get("z"),zlevel=axisPointerModel.get("zlevel");group&&group.traverse((function(el){"group"!==el.type&&(null!=z&&(el.z=z),null!=zlevel&&(el.zlevel=zlevel),el.silent=silent)}))}const axisPointer_BaseAxisPointer=BaseAxisPointer;function buildElStyle(axisPointerModel){var style,axisPointerType=axisPointerModel.get("type"),styleModel=axisPointerModel.getModel(axisPointerType+"Style");return"line"===axisPointerType?(style=styleModel.getLineStyle()).fill=null:"shadow"===axisPointerType&&((style=styleModel.getAreaStyle()).stroke=null),style}function buildLabelElOption(elOption,axisModel,axisPointerModel,api,labelPos){var text=getValueLabel(axisPointerModel.get("value"),axisModel.axis,axisModel.ecModel,axisPointerModel.get("seriesDataIndices"),{precision:axisPointerModel.get(["label","precision"]),formatter:axisPointerModel.get(["label","formatter"])}),labelModel=axisPointerModel.getModel("label"),paddings=format.MY(labelModel.get("padding")||0),font=labelModel.getFont(),textRect=contain_text.lP(text,font),position=labelPos.position,width=textRect.width+paddings[1]+paddings[3],height=textRect.height+paddings[0]+paddings[2],align=labelPos.align;"right"===align&&(position[0]-=width),"center"===align&&(position[0]-=width/2);var verticalAlign=labelPos.verticalAlign;"bottom"===verticalAlign&&(position[1]-=height),"middle"===verticalAlign&&(position[1]-=height/2),function confineInContainer(position,width,height,api){var viewWidth=api.getWidth(),viewHeight=api.getHeight();position[0]=Math.min(position[0]+width,viewWidth)-width,position[1]=Math.min(position[1]+height,viewHeight)-height,position[0]=Math.max(position[0],0),position[1]=Math.max(position[1],0)}(position,width,height,api);var bgColor=labelModel.get("backgroundColor");bgColor&&"auto"!==bgColor||(bgColor=axisModel.get(["axisLine","lineStyle","color"])),elOption.label={x:position[0],y:position[1],style:(0,labelStyle.Lr)(labelModel,{text,font,fill:labelModel.getTextColor(),padding:paddings,backgroundColor:bgColor}),z2:10}}function getValueLabel(value,axis,ecModel,seriesDataIndices,opt){value=axis.scale.parse(value);var text=axis.scale.getLabel({value},{precision:opt.precision}),formatter=opt.formatter;if(formatter){var params_1={value:axisHelper.DX(axis,{value}),axisDimension:axis.dim,axisIndex:axis.index,seriesData:[]};util.each(seriesDataIndices,(function(idxItem){var series=ecModel.getSeriesByIndex(idxItem.seriesIndex),dataIndex=idxItem.dataIndexInside,dataParams=series&&series.getDataParams(dataIndex);dataParams&&params_1.seriesData.push(dataParams)})),util.isString(formatter)?text=formatter.replace("{value}",text):util.isFunction(formatter)&&(text=formatter(params_1))}return text}function getTransformedPosition(axis,value,layoutInfo){var transform=matrix.create();return matrix.rotate(transform,transform,layoutInfo.rotation),matrix.translate(transform,transform,layoutInfo.position),graphic.applyTransform([axis.dataToCoord(value),(layoutInfo.labelOffset||0)+(layoutInfo.labelDirection||1)*(layoutInfo.labelMargin||0)],transform)}function buildCartesianSingleLabelElOption(value,elOption,layoutInfo,axisModel,axisPointerModel,api){var textLayout=axis_AxisBuilder.innerTextLayout(layoutInfo.rotation,0,layoutInfo.labelDirection);layoutInfo.labelMargin=axisPointerModel.get(["label","margin"]),buildLabelElOption(elOption,axisModel,axisPointerModel,api,{position:getTransformedPosition(axisModel.axis,value,layoutInfo),align:textLayout.textAlign,verticalAlign:textLayout.textVerticalAlign})}function makeLineShape(p1,p2,xDimIndex){return{x1:p1[xDimIndex=xDimIndex||0],y1:p1[1-xDimIndex],x2:p2[xDimIndex],y2:p2[1-xDimIndex]}}function makeRectShape(xy,wh,xDimIndex){return{x:xy[xDimIndex=xDimIndex||0],y:xy[1-xDimIndex],width:wh[xDimIndex],height:wh[1-xDimIndex]}}function makeSectorShape(cx,cy,r0,r,startAngle,endAngle){return{cx,cy,r0,r,startAngle,endAngle,clockwise:!0}}var CartesianAxisPointer=function(_super){function CartesianAxisPointer(){return null!==_super&&_super.apply(this,arguments)||this}return(0,tslib_es6.ZT)(CartesianAxisPointer,_super),CartesianAxisPointer.prototype.makeElOption=function(elOption,value,axisModel,axisPointerModel,api){var axis=axisModel.axis,grid=axis.grid,axisPointerType=axisPointerModel.get("type"),otherExtent=getCartesian(grid,axis).getOtherAxis(axis).getGlobalExtent(),pixelValue=axis.toGlobalCoord(axis.dataToCoord(value,!0));if(axisPointerType&&"none"!==axisPointerType){var elStyle=buildElStyle(axisPointerModel),pointerOption=pointerShapeBuilder[axisPointerType](axis,pixelValue,otherExtent);pointerOption.style=elStyle,elOption.graphicKey=pointerOption.type,elOption.pointer=pointerOption}buildCartesianSingleLabelElOption(value,elOption,cartesianAxisHelper_layout(grid.model,axisModel),axisModel,axisPointerModel,api)},CartesianAxisPointer.prototype.getHandleTransform=function(value,axisModel,axisPointerModel){var layoutInfo=cartesianAxisHelper_layout(axisModel.axis.grid.model,axisModel,{labelInside:!1});layoutInfo.labelMargin=axisPointerModel.get(["handle","margin"]);var pos=getTransformedPosition(axisModel.axis,value,layoutInfo);return{x:pos[0],y:pos[1],rotation:layoutInfo.rotation+(layoutInfo.labelDirection<0?Math.PI:0)}},CartesianAxisPointer.prototype.updateHandleTransform=function(transform,delta,axisModel,axisPointerModel){var axis=axisModel.axis,grid=axis.grid,axisExtent=axis.getGlobalExtent(!0),otherExtent=getCartesian(grid,axis).getOtherAxis(axis).getGlobalExtent(),dimIndex="x"===axis.dim?0:1,currPosition=[transform.x,transform.y];currPosition[dimIndex]+=delta[dimIndex],currPosition[dimIndex]=Math.min(axisExtent[1],currPosition[dimIndex]),currPosition[dimIndex]=Math.max(axisExtent[0],currPosition[dimIndex]);var cursorOtherValue=(otherExtent[1]+otherExtent[0])/2,cursorPoint=[cursorOtherValue,cursorOtherValue];cursorPoint[dimIndex]=currPosition[dimIndex];return{x:currPosition[0],y:currPosition[1],rotation:transform.rotation,cursorPoint,tooltipOption:[{verticalAlign:"middle"},{align:"center"}][dimIndex]}},CartesianAxisPointer}(axisPointer_BaseAxisPointer);function getCartesian(grid,axis){var opt={};return opt[axis.dim+"AxisIndex"]=axis.index,grid.getCartesian(opt)}var pointerShapeBuilder={line:function(axis,pixelValue,otherExtent){return{type:"Line",subPixelOptimize:!0,shape:makeLineShape([pixelValue,otherExtent[0]],[pixelValue,otherExtent[1]],getAxisDimIndex(axis))}},shadow:function(axis,pixelValue,otherExtent){var bandWidth=Math.max(1,axis.getBandWidth()),span=otherExtent[1]-otherExtent[0];return{type:"Rect",shape:makeRectShape([pixelValue-bandWidth/2,otherExtent[0]],[bandWidth,span],getAxisDimIndex(axis))}}};function getAxisDimIndex(axis){return"x"===axis.dim?0:1}const axisPointer_CartesianAxisPointer=CartesianAxisPointer;const axisPointer_AxisPointerModel=function(_super){function AxisPointerModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=AxisPointerModel.type,_this}return(0,tslib_es6.ZT)(AxisPointerModel,_super),AxisPointerModel.type="axisPointer",AxisPointerModel.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},AxisPointerModel}(model_Component.Z);var env=__webpack_require__("./node_modules/zrender/lib/core/env.js"),globalListener_inner=(0,util_model.Yf)(),globalListener_each=util.each;function register(key,api,handler){if(!env.Z.node){var zr=api.getZr();globalListener_inner(zr).records||(globalListener_inner(zr).records={}),function initGlobalListeners(zr,api){if(globalListener_inner(zr).initialized)return;function useHandler(eventType,cb){zr.on(eventType,(function(e){var dis=function makeDispatchAction(api){var pendings={showTip:[],hideTip:[]},dispatchAction=function(payload){var pendingList=pendings[payload.type];pendingList?pendingList.push(payload):(payload.dispatchAction=dispatchAction,api.dispatchAction(payload))};return{dispatchAction,pendings}}(api);globalListener_each(globalListener_inner(zr).records,(function(record){record&&cb(record,e,dis.dispatchAction)})),function dispatchTooltipFinally(pendings,api){var actuallyPayload,showLen=pendings.showTip.length,hideLen=pendings.hideTip.length;showLen?actuallyPayload=pendings.showTip[showLen-1]:hideLen&&(actuallyPayload=pendings.hideTip[hideLen-1]);actuallyPayload&&(actuallyPayload.dispatchAction=null,api.dispatchAction(actuallyPayload))}(dis.pendings,api)}))}globalListener_inner(zr).initialized=!0,useHandler("click",util.curry(doEnter,"click")),useHandler("mousemove",util.curry(doEnter,"mousemove")),useHandler("globalout",onLeave)}(zr,api),(globalListener_inner(zr).records[key]||(globalListener_inner(zr).records[key]={})).handler=handler}}function onLeave(record,e,dispatchAction){record.handler("leave",null,dispatchAction)}function doEnter(currTrigger,record,e,dispatchAction){record.handler(currTrigger,e,dispatchAction)}function unregister(key,api){if(!env.Z.node){var zr=api.getZr();(globalListener_inner(zr).records||{})[key]&&(globalListener_inner(zr).records[key]=null)}}var AxisPointerView=function(_super){function AxisPointerView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=AxisPointerView.type,_this}return(0,tslib_es6.ZT)(AxisPointerView,_super),AxisPointerView.prototype.render=function(globalAxisPointerModel,ecModel,api){var globalTooltipModel=ecModel.getComponent("tooltip"),triggerOn=globalAxisPointerModel.get("triggerOn")||globalTooltipModel&&globalTooltipModel.get("triggerOn")||"mousemove|click";register("axisPointer",api,(function(currTrigger,e,dispatchAction){"none"!==triggerOn&&("leave"===currTrigger||triggerOn.indexOf(currTrigger)>=0)&&dispatchAction({type:"updateAxisPointer",currTrigger,x:e&&e.offsetX,y:e&&e.offsetY})}))},AxisPointerView.prototype.remove=function(ecModel,api){unregister("axisPointer",api)},AxisPointerView.prototype.dispose=function(ecModel,api){unregister("axisPointer",api)},AxisPointerView.type="axisPointer",AxisPointerView}(Component.Z);const axisPointer_AxisPointerView=AxisPointerView;function findPointFromSeries(finder,ecModel){var seriesModel,point=[],seriesIndex=finder.seriesIndex;if(null==seriesIndex||!(seriesModel=ecModel.getSeriesByIndex(seriesIndex)))return{point:[]};var data=seriesModel.getData(),dataIndex=util_model.gO(data,finder);if(null==dataIndex||dataIndex<0||util.isArray(dataIndex))return{point:[]};var el=data.getItemGraphicEl(dataIndex),coordSys=seriesModel.coordinateSystem;if(seriesModel.getTooltipPosition)point=seriesModel.getTooltipPosition(dataIndex)||[];else if(coordSys&&coordSys.dataToPoint)if(finder.isStacked){var baseAxis=coordSys.getBaseAxis(),valueAxisDim=coordSys.getOtherAxis(baseAxis).dim,baseAxisDim=baseAxis.dim,baseDataOffset="x"===valueAxisDim||"radius"===valueAxisDim?1:0,baseDim=data.mapDimension(baseAxisDim),stackedData=[];stackedData[baseDataOffset]=data.get(baseDim,dataIndex),stackedData[1-baseDataOffset]=data.get(data.getCalculationInfo("stackResultDimension"),dataIndex),point=coordSys.dataToPoint(stackedData)||[]}else point=coordSys.dataToPoint(data.getValues(util.map(coordSys.dimensions,(function(dim){return data.mapDimension(dim)})),dataIndex))||[];else if(el){var rect=el.getBoundingRect().clone();rect.applyTransform(el.transform),point=[rect.x+rect.width/2,rect.y+rect.height/2]}return{point,el}}var axisTrigger_inner=(0,util_model.Yf)();function axisTrigger(payload,ecModel,api){var currTrigger=payload.currTrigger,point=[payload.x,payload.y],finder=payload,dispatchAction=payload.dispatchAction||(0,util.bind)(api.dispatchAction,api),coordSysAxesInfo=ecModel.getComponent("axisPointer").coordSysAxesInfo;if(coordSysAxesInfo){illegalPoint(point)&&(point=findPointFromSeries({seriesIndex:finder.seriesIndex,dataIndex:finder.dataIndex},ecModel).point);var isIllegalPoint=illegalPoint(point),inputAxesInfo=finder.axesInfo,axesInfo=coordSysAxesInfo.axesInfo,shouldHide="leave"===currTrigger||illegalPoint(point),outputPayload={},showValueMap={},dataByCoordSys={list:[],map:{}},updaters={showPointer:(0,util.curry)(showPointer,showValueMap),showTooltip:(0,util.curry)(showTooltip,dataByCoordSys)};(0,util.each)(coordSysAxesInfo.coordSysMap,(function(coordSys,coordSysKey){var coordSysContainsPoint=isIllegalPoint||coordSys.containPoint(point);(0,util.each)(coordSysAxesInfo.coordSysAxesInfo[coordSysKey],(function(axisInfo,key){var axis=axisInfo.axis,inputAxisInfo=function findInputAxisInfo(inputAxesInfo,axisInfo){for(var i=0;i<(inputAxesInfo||[]).length;i++){var inputAxisInfo=inputAxesInfo[i];if(axisInfo.axis.dim===inputAxisInfo.axisDim&&axisInfo.axis.model.componentIndex===inputAxisInfo.axisIndex)return inputAxisInfo}}(inputAxesInfo,axisInfo);if(!shouldHide&&coordSysContainsPoint&&(!inputAxesInfo||inputAxisInfo)){var val=inputAxisInfo&&inputAxisInfo.value;null!=val||isIllegalPoint||(val=axis.pointToData(point)),null!=val&&processOnAxis(axisInfo,val,updaters,!1,outputPayload)}}))}));var linkTriggers={};return(0,util.each)(axesInfo,(function(tarAxisInfo,tarKey){var linkGroup=tarAxisInfo.linkGroup;linkGroup&&!showValueMap[tarKey]&&(0,util.each)(linkGroup.axesInfo,(function(srcAxisInfo,srcKey){var srcValItem=showValueMap[srcKey];if(srcAxisInfo!==tarAxisInfo&&srcValItem){var val=srcValItem.value;linkGroup.mapper&&(val=tarAxisInfo.axis.scale.parse(linkGroup.mapper(val,makeMapperParam(srcAxisInfo),makeMapperParam(tarAxisInfo)))),linkTriggers[tarAxisInfo.key]=val}}))})),(0,util.each)(linkTriggers,(function(val,tarKey){processOnAxis(axesInfo[tarKey],val,updaters,!0,outputPayload)})),function updateModelActually(showValueMap,axesInfo,outputPayload){var outputAxesInfo=outputPayload.axesInfo=[];(0,util.each)(axesInfo,(function(axisInfo,key){var option=axisInfo.axisPointerModel.option,valItem=showValueMap[key];valItem?(!axisInfo.useHandle&&(option.status="show"),option.value=valItem.value,option.seriesDataIndices=(valItem.payloadBatch||[]).slice()):!axisInfo.useHandle&&(option.status="hide"),"show"===option.status&&outputAxesInfo.push({axisDim:axisInfo.axis.dim,axisIndex:axisInfo.axis.model.componentIndex,value:option.value})}))}(showValueMap,axesInfo,outputPayload),function dispatchTooltipActually(dataByCoordSys,point,payload,dispatchAction){if(illegalPoint(point)||!dataByCoordSys.list.length)return void dispatchAction({type:"hideTip"});var sampleItem=((dataByCoordSys.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};dispatchAction({type:"showTip",escapeConnect:!0,x:point[0],y:point[1],tooltipOption:payload.tooltipOption,position:payload.position,dataIndexInside:sampleItem.dataIndexInside,dataIndex:sampleItem.dataIndex,seriesIndex:sampleItem.seriesIndex,dataByCoordSys:dataByCoordSys.list})}(dataByCoordSys,point,payload,dispatchAction),function dispatchHighDownActually(axesInfo,dispatchAction,api){var zr=api.getZr(),highDownKey="axisPointerLastHighlights",lastHighlights=axisTrigger_inner(zr)[highDownKey]||{},newHighlights=axisTrigger_inner(zr)[highDownKey]={};(0,util.each)(axesInfo,(function(axisInfo,key){var option=axisInfo.axisPointerModel.option;"show"===option.status&&axisInfo.triggerEmphasis&&(0,util.each)(option.seriesDataIndices,(function(batchItem){var key=batchItem.seriesIndex+" | "+batchItem.dataIndex;newHighlights[key]=batchItem}))}));var toHighlight=[],toDownplay=[];(0,util.each)(lastHighlights,(function(batchItem,key){!newHighlights[key]&&toDownplay.push(batchItem)})),(0,util.each)(newHighlights,(function(batchItem,key){!lastHighlights[key]&&toHighlight.push(batchItem)})),toDownplay.length&&api.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:toDownplay}),toHighlight.length&&api.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:toHighlight})}(axesInfo,0,api),outputPayload}}function processOnAxis(axisInfo,newValue,updaters,noSnap,outputFinder){var axis=axisInfo.axis;if(!axis.scale.isBlank()&&axis.containData(newValue))if(axisInfo.involveSeries){var payloadInfo=function buildPayloadsBySeries(value,axisInfo){var axis=axisInfo.axis,dim=axis.dim,snapToValue=value,payloadBatch=[],minDist=Number.MAX_VALUE,minDiff=-1;return(0,util.each)(axisInfo.seriesModels,(function(series,idx){var seriesNestestValue,dataIndices,dataDim=series.getData().mapDimensionsAll(dim);if(series.getAxisTooltipData){var result=series.getAxisTooltipData(dataDim,value,axis);dataIndices=result.dataIndices,seriesNestestValue=result.nestestValue}else{if(!(dataIndices=series.getData().indicesOfNearest(dataDim[0],value,"category"===axis.type?.5:null)).length)return;seriesNestestValue=series.getData().get(dataDim[0],dataIndices[0])}if(null!=seriesNestestValue&&isFinite(seriesNestestValue)){var diff=value-seriesNestestValue,dist=Math.abs(diff);dist<=minDist&&((dist<minDist||diff>=0&&minDiff<0)&&(minDist=dist,minDiff=diff,snapToValue=seriesNestestValue,payloadBatch.length=0),(0,util.each)(dataIndices,(function(dataIndex){payloadBatch.push({seriesIndex:series.seriesIndex,dataIndexInside:dataIndex,dataIndex:series.getData().getRawIndex(dataIndex)})})))}})),{payloadBatch,snapToValue}}(newValue,axisInfo),payloadBatch=payloadInfo.payloadBatch,snapToValue=payloadInfo.snapToValue;payloadBatch[0]&&null==outputFinder.seriesIndex&&(0,util.extend)(outputFinder,payloadBatch[0]),!noSnap&&axisInfo.snap&&axis.containData(snapToValue)&&null!=snapToValue&&(newValue=snapToValue),updaters.showPointer(axisInfo,newValue,payloadBatch),updaters.showTooltip(axisInfo,payloadInfo,snapToValue)}else updaters.showPointer(axisInfo,newValue)}function showPointer(showValueMap,axisInfo,value,payloadBatch){showValueMap[axisInfo.key]={value,payloadBatch}}function showTooltip(dataByCoordSys,axisInfo,payloadInfo,value){var payloadBatch=payloadInfo.payloadBatch,axis=axisInfo.axis,axisModel=axis.model,axisPointerModel=axisInfo.axisPointerModel;if(axisInfo.triggerTooltip&&payloadBatch.length){var coordSysModel=axisInfo.coordSys.model,coordSysKey=makeKey(coordSysModel),coordSysItem=dataByCoordSys.map[coordSysKey];coordSysItem||(coordSysItem=dataByCoordSys.map[coordSysKey]={coordSysId:coordSysModel.id,coordSysIndex:coordSysModel.componentIndex,coordSysType:coordSysModel.type,coordSysMainType:coordSysModel.mainType,dataByAxis:[]},dataByCoordSys.list.push(coordSysItem)),coordSysItem.dataByAxis.push({axisDim:axis.dim,axisIndex:axisModel.componentIndex,axisType:axisModel.type,axisId:axisModel.id,value,valueLabelOpt:{precision:axisPointerModel.get(["label","precision"]),formatter:axisPointerModel.get(["label","formatter"])},seriesDataIndices:payloadBatch.slice()})}}function makeMapperParam(axisInfo){var axisModel=axisInfo.axis.model,item={},dim=item.axisDim=axisInfo.axis.dim;return item.axisIndex=item[dim+"AxisIndex"]=axisModel.componentIndex,item.axisName=item[dim+"AxisName"]=axisModel.name,item.axisId=item[dim+"AxisId"]=axisModel.id,item}function illegalPoint(point){return!point||null==point[0]||isNaN(point[0])||null==point[1]||isNaN(point[1])}function axisPointer_install_install(registers){axis_AxisView.registerAxisPointerClass("CartesianAxisPointer",axisPointer_CartesianAxisPointer),registers.registerComponentModel(axisPointer_AxisPointerModel),registers.registerComponentView(axisPointer_AxisPointerView),registers.registerPreprocessor((function(option){if(option){(!option.axisPointer||0===option.axisPointer.length)&&(option.axisPointer={});var link=option.axisPointer.link;link&&!(0,util.isArray)(link)&&(option.axisPointer.link=[link])}})),registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC,(function(ecModel,api){ecModel.getComponent("axisPointer").coordSysAxesInfo=collect(ecModel,api)})),registers.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},axisTrigger)}var PolarAxisPointer=function(_super){function PolarAxisPointer(){return null!==_super&&_super.apply(this,arguments)||this}return(0,tslib_es6.ZT)(PolarAxisPointer,_super),PolarAxisPointer.prototype.makeElOption=function(elOption,value,axisModel,axisPointerModel,api){var axis=axisModel.axis;"angle"===axis.dim&&(this.animationThreshold=Math.PI/18);var polar=axis.polar,otherExtent=polar.getOtherAxis(axis).getExtent(),coordValue=axis.dataToCoord(value),axisPointerType=axisPointerModel.get("type");if(axisPointerType&&"none"!==axisPointerType){var elStyle=buildElStyle(axisPointerModel),pointerOption=PolarAxisPointer_pointerShapeBuilder[axisPointerType](axis,polar,coordValue,otherExtent);pointerOption.style=elStyle,elOption.graphicKey=pointerOption.type,elOption.pointer=pointerOption}var labelPos=function getLabelPosition(value,axisModel,axisPointerModel,polar,labelMargin){var axis=axisModel.axis,coord=axis.dataToCoord(value),axisAngle=polar.getAngleAxis().getExtent()[0];axisAngle=axisAngle/180*Math.PI;var position,align,verticalAlign,radiusExtent=polar.getRadiusAxis().getExtent();if("radius"===axis.dim){var transform=matrix.create();matrix.rotate(transform,transform,axisAngle),matrix.translate(transform,transform,[polar.cx,polar.cy]),position=graphic.applyTransform([coord,-labelMargin],transform);var labelRotation=axisModel.getModel("axisLabel").get("rotate")||0,labelLayout=axis_AxisBuilder.innerTextLayout(axisAngle,labelRotation*Math.PI/180,-1);align=labelLayout.textAlign,verticalAlign=labelLayout.textVerticalAlign}else{var r=radiusExtent[1];position=polar.coordToPoint([r+labelMargin,coord]);var cx=polar.cx,cy=polar.cy;align=Math.abs(position[0]-cx)/r<.3?"center":position[0]>cx?"left":"right",verticalAlign=Math.abs(position[1]-cy)/r<.3?"middle":position[1]>cy?"top":"bottom"}return{position,align,verticalAlign}}(value,axisModel,0,polar,axisPointerModel.get(["label","margin"]));buildLabelElOption(elOption,axisModel,axisPointerModel,api,labelPos)},PolarAxisPointer}(axisPointer_BaseAxisPointer);var PolarAxisPointer_pointerShapeBuilder={line:function(axis,polar,coordValue,otherExtent){return"angle"===axis.dim?{type:"Line",shape:makeLineShape(polar.coordToPoint([otherExtent[0],coordValue]),polar.coordToPoint([otherExtent[1],coordValue]))}:{type:"Circle",shape:{cx:polar.cx,cy:polar.cy,r:coordValue}}},shadow:function(axis,polar,coordValue,otherExtent){var bandWidth=Math.max(1,axis.getBandWidth()),radian=Math.PI/180;return"angle"===axis.dim?{type:"Sector",shape:makeSectorShape(polar.cx,polar.cy,otherExtent[0],otherExtent[1],(-coordValue-bandWidth/2)*radian,(bandWidth/2-coordValue)*radian)}:{type:"Sector",shape:makeSectorShape(polar.cx,polar.cy,coordValue-bandWidth/2,coordValue+bandWidth/2,0,2*Math.PI)}}};const axisPointer_PolarAxisPointer=PolarAxisPointer;const polar_PolarModel=function(_super){function PolarModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=PolarModel.type,_this}return(0,tslib_es6.ZT)(PolarModel,_super),PolarModel.prototype.findAxisModel=function(axisType){var foundAxisModel;return this.ecModel.eachComponent(axisType,(function(axisModel){axisModel.getCoordSysModel()===this&&(foundAxisModel=axisModel)}),this),foundAxisModel},PolarModel.type="polar",PolarModel.dependencies=["radiusAxis","angleAxis"],PolarModel.defaultOption={z:0,center:["50%","50%"],radius:"80%"},PolarModel}(model_Component.Z);var PolarAxisModel=function(_super){function PolarAxisModel(){return null!==_super&&_super.apply(this,arguments)||this}return(0,tslib_es6.ZT)(PolarAxisModel,_super),PolarAxisModel.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",util_model.C6).models[0]},PolarAxisModel.type="polarAxis",PolarAxisModel}(model_Component.Z);util.mixin(PolarAxisModel,axisModelCommonMixin.W);var AngleAxisModel=function(_super){function AngleAxisModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=AngleAxisModel.type,_this}return(0,tslib_es6.ZT)(AngleAxisModel,_super),AngleAxisModel.type="angleAxis",AngleAxisModel}(PolarAxisModel),RadiusAxisModel=function(_super){function RadiusAxisModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=RadiusAxisModel.type,_this}return(0,tslib_es6.ZT)(RadiusAxisModel,_super),RadiusAxisModel.type="radiusAxis",RadiusAxisModel}(PolarAxisModel),RadiusAxis=function(_super){function RadiusAxis(scale,radiusExtent){return _super.call(this,"radius",scale,radiusExtent)||this}return(0,tslib_es6.ZT)(RadiusAxis,_super),RadiusAxis.prototype.pointToData=function(point,clamp){return this.polar.pointToData(point,clamp)["radius"===this.dim?0:1]},RadiusAxis}(Axis.Z);RadiusAxis.prototype.dataToRadius=Axis.Z.prototype.dataToCoord,RadiusAxis.prototype.radiusToData=Axis.Z.prototype.coordToData;const polar_RadiusAxis=RadiusAxis;var AngleAxis_inner=(0,util_model.Yf)(),AngleAxis=function(_super){function AngleAxis(scale,angleExtent){return _super.call(this,"angle",scale,angleExtent||[0,360])||this}return(0,tslib_es6.ZT)(AngleAxis,_super),AngleAxis.prototype.pointToData=function(point,clamp){return this.polar.pointToData(point,clamp)["radius"===this.dim?0:1]},AngleAxis.prototype.calculateCategoryInterval=function(){var labelModel=this.getLabelModel(),ordinalScale=this.scale,ordinalExtent=ordinalScale.getExtent(),tickCount=ordinalScale.count();if(ordinalExtent[1]-ordinalExtent[0]<1)return 0;var tickValue=ordinalExtent[0],unitSpan=this.dataToCoord(tickValue+1)-this.dataToCoord(tickValue),unitH=Math.abs(unitSpan),rect=contain_text.lP(null==tickValue?"":tickValue+"",labelModel.getFont(),"center","top"),dh=Math.max(rect.height,7)/unitH;isNaN(dh)&&(dh=1/0);var interval=Math.max(0,Math.floor(dh)),cache=AngleAxis_inner(this.model),lastAutoInterval=cache.lastAutoInterval,lastTickCount=cache.lastTickCount;return null!=lastAutoInterval&&null!=lastTickCount&&Math.abs(lastAutoInterval-interval)<=1&&Math.abs(lastTickCount-tickCount)<=1&&lastAutoInterval>interval?interval=lastAutoInterval:(cache.lastTickCount=tickCount,cache.lastAutoInterval=interval),interval},AngleAxis}(Axis.Z);AngleAxis.prototype.dataToAngle=Axis.Z.prototype.dataToCoord,AngleAxis.prototype.angleToData=Axis.Z.prototype.coordToData;const polar_AngleAxis=AngleAxis;var polarDimensions=["radius","angle"],Polar=function(){function Polar(name){this.dimensions=polarDimensions,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new polar_RadiusAxis,this._angleAxis=new polar_AngleAxis,this.axisPointerEnabled=!0,this.name=name||"",this._radiusAxis.polar=this._angleAxis.polar=this}return Polar.prototype.containPoint=function(point){var coord=this.pointToCoord(point);return this._radiusAxis.contain(coord[0])&&this._angleAxis.contain(coord[1])},Polar.prototype.containData=function(data){return this._radiusAxis.containData(data[0])&&this._angleAxis.containData(data[1])},Polar.prototype.getAxis=function(dim){return this["_"+dim+"Axis"]},Polar.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},Polar.prototype.getAxesByScale=function(scaleType){var axes=[],angleAxis=this._angleAxis,radiusAxis=this._radiusAxis;return angleAxis.scale.type===scaleType&&axes.push(angleAxis),radiusAxis.scale.type===scaleType&&axes.push(radiusAxis),axes},Polar.prototype.getAngleAxis=function(){return this._angleAxis},Polar.prototype.getRadiusAxis=function(){return this._radiusAxis},Polar.prototype.getOtherAxis=function(axis){var angleAxis=this._angleAxis;return axis===angleAxis?this._radiusAxis:angleAxis},Polar.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},Polar.prototype.getTooltipAxes=function(dim){var baseAxis=null!=dim&&"auto"!==dim?this.getAxis(dim):this.getBaseAxis();return{baseAxes:[baseAxis],otherAxes:[this.getOtherAxis(baseAxis)]}},Polar.prototype.dataToPoint=function(data,clamp){return this.coordToPoint([this._radiusAxis.dataToRadius(data[0],clamp),this._angleAxis.dataToAngle(data[1],clamp)])},Polar.prototype.pointToData=function(point,clamp){var coord=this.pointToCoord(point);return[this._radiusAxis.radiusToData(coord[0],clamp),this._angleAxis.angleToData(coord[1],clamp)]},Polar.prototype.pointToCoord=function(point){var dx=point[0]-this.cx,dy=point[1]-this.cy,angleAxis=this.getAngleAxis(),extent=angleAxis.getExtent(),minAngle=Math.min(extent[0],extent[1]),maxAngle=Math.max(extent[0],extent[1]);angleAxis.inverse?minAngle=maxAngle-360:maxAngle=minAngle+360;var radius=Math.sqrt(dx*dx+dy*dy);dx/=radius,dy/=radius;for(var radian=Math.atan2(-dy,dx)/Math.PI*180,dir=radian<minAngle?1:-1;radian<minAngle||radian>maxAngle;)radian+=360*dir;return[radius,radian]},Polar.prototype.coordToPoint=function(coord){var radius=coord[0],radian=coord[1]/180*Math.PI;return[Math.cos(radian)*radius+this.cx,-Math.sin(radian)*radius+this.cy]},Polar.prototype.getArea=function(){var angleAxis=this.getAngleAxis(),radiusExtent=this.getRadiusAxis().getExtent().slice();radiusExtent[0]>radiusExtent[1]&&radiusExtent.reverse();var angleExtent=angleAxis.getExtent(),RADIAN=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:radiusExtent[0],r:radiusExtent[1],startAngle:-angleExtent[0]*RADIAN,endAngle:-angleExtent[1]*RADIAN,clockwise:angleAxis.inverse,contain:function(x,y){var dx=x-this.cx,dy=y-this.cy,d2=dx*dx+dy*dy-1e-4,r=this.r,r0=this.r0;return d2<=r*r&&d2>=r0*r0}}},Polar.prototype.convertToPixel=function(ecModel,finder,value){return getCoordSys(finder)===this?this.dataToPoint(value):null},Polar.prototype.convertFromPixel=function(ecModel,finder,pixel){return getCoordSys(finder)===this?this.pointToData(pixel):null},Polar}();function getCoordSys(finder){var seriesModel=finder.seriesModel,polarModel=finder.polarModel;return polarModel&&polarModel.coordinateSystem||seriesModel&&seriesModel.coordinateSystem}const polar_Polar=Polar;function updatePolarScale(ecModel,api){var polar=this,angleAxis=polar.getAngleAxis(),radiusAxis=polar.getRadiusAxis();if(angleAxis.scale.setExtent(1/0,-1/0),radiusAxis.scale.setExtent(1/0,-1/0),ecModel.eachSeries((function(seriesModel){if(seriesModel.coordinateSystem===polar){var data_1=seriesModel.getData();util.each((0,axisHelper.PY)(data_1,"radius"),(function(dim){radiusAxis.scale.unionExtentFromData(data_1,dim)})),util.each((0,axisHelper.PY)(data_1,"angle"),(function(dim){angleAxis.scale.unionExtentFromData(data_1,dim)}))}})),(0,axisHelper.Jk)(angleAxis.scale,angleAxis.model),(0,axisHelper.Jk)(radiusAxis.scale,radiusAxis.model),"category"===angleAxis.type&&!angleAxis.onBand){var extent=angleAxis.getExtent(),diff=360/angleAxis.scale.count();angleAxis.inverse?extent[1]+=diff:extent[1]-=diff,angleAxis.setExtent(extent[0],extent[1])}}function setAxis(axis,axisModel){var _a;if(axis.type=axisModel.get("type"),axis.scale=(0,axisHelper.aG)(axisModel),axis.onBand=axisModel.get("boundaryGap")&&"category"===axis.type,axis.inverse=axisModel.get("inverse"),function isAngleAxisModel(axisModel){return"angleAxis"===axisModel.mainType}(axisModel)){axis.inverse=axis.inverse!==axisModel.get("clockwise");var startAngle=axisModel.get("startAngle"),endAngle=null!==(_a=axisModel.get("endAngle"))&&void 0!==_a?_a:startAngle+(axis.inverse?-360:360);axis.setExtent(startAngle,endAngle)}axisModel.axis=axis,axis.model=axisModel}var polarCreator={dimensions:polarDimensions,create:function(ecModel,api){var polarList=[];return ecModel.eachComponent("polar",(function(polarModel,idx){var polar=new polar_Polar(idx+"");polar.update=updatePolarScale;var radiusAxis=polar.getRadiusAxis(),angleAxis=polar.getAngleAxis(),radiusAxisModel=polarModel.findAxisModel("radiusAxis"),angleAxisModel=polarModel.findAxisModel("angleAxis");setAxis(radiusAxis,radiusAxisModel),setAxis(angleAxis,angleAxisModel),function resizePolar(polar,polarModel,api){var center=polarModel.get("center"),width=api.getWidth(),height=api.getHeight();polar.cx=(0,number.GM)(center[0],width),polar.cy=(0,number.GM)(center[1],height);var radiusAxis=polar.getRadiusAxis(),size=Math.min(width,height)/2,radius=polarModel.get("radius");null==radius?radius=[0,"100%"]:util.isArray(radius)||(radius=[0,radius]);var parsedRadius=[(0,number.GM)(radius[0],size),(0,number.GM)(radius[1],size)];radiusAxis.inverse?radiusAxis.setExtent(parsedRadius[1],parsedRadius[0]):radiusAxis.setExtent(parsedRadius[0],parsedRadius[1])}(polar,polarModel,api),polarList.push(polar),polarModel.coordinateSystem=polar,polar.model=polarModel})),ecModel.eachSeries((function(seriesModel){if("polar"===seriesModel.get("coordinateSystem")){var polarModel=seriesModel.getReferringComponents("polar",util_model.C6).models[0];0,seriesModel.coordinateSystem=polarModel.coordinateSystem}})),polarList}};const polar_polarCreator=polarCreator;var AngleAxisView_elementList=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function getAxisLineShape(polar,rExtent,angle){rExtent[1]>rExtent[0]&&(rExtent=rExtent.slice().reverse());var start=polar.coordToPoint([rExtent[0],angle]),end=polar.coordToPoint([rExtent[1],angle]);return{x1:start[0],y1:start[1],x2:end[0],y2:end[1]}}function getRadiusIdx(polar){return polar.getRadiusAxis().inverse?0:1}function fixAngleOverlap(list){var firstItem=list[0],lastItem=list[list.length-1];firstItem&&lastItem&&Math.abs(Math.abs(firstItem.coord-lastItem.coord)-360)<1e-4&&list.pop()}var AngleAxisView=function(_super){function AngleAxisView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=AngleAxisView.type,_this.axisPointerClass="PolarAxisPointer",_this}return(0,tslib_es6.ZT)(AngleAxisView,_super),AngleAxisView.prototype.render=function(angleAxisModel,ecModel){if(this.group.removeAll(),angleAxisModel.get("show")){var angleAxis=angleAxisModel.axis,polar=angleAxis.polar,radiusExtent=polar.getRadiusAxis().getExtent(),ticksAngles=angleAxis.getTicksCoords(),minorTickAngles=angleAxis.getMinorTicksCoords(),labels=util.map(angleAxis.getViewLabels(),(function(labelItem){labelItem=util.clone(labelItem);var scale=angleAxis.scale,tickValue="ordinal"===scale.type?scale.getRawOrdinalNumber(labelItem.tickValue):labelItem.tickValue;return labelItem.coord=angleAxis.dataToCoord(tickValue),labelItem}));fixAngleOverlap(labels),fixAngleOverlap(ticksAngles),util.each(AngleAxisView_elementList,(function(name){!angleAxisModel.get([name,"show"])||angleAxis.scale.isBlank()&&"axisLine"!==name||angelAxisElementsBuilders[name](this.group,angleAxisModel,polar,ticksAngles,minorTickAngles,radiusExtent,labels)}),this)}},AngleAxisView.type="angleAxis",AngleAxisView}(axis_AxisView),angelAxisElementsBuilders={axisLine:function(group,angleAxisModel,polar,ticksAngles,minorTickAngles,radiusExtent){var shape,lineStyleModel=angleAxisModel.getModel(["axisLine","lineStyle"]),angleAxis=polar.getAngleAxis(),RADIAN=Math.PI/180,angleExtent=angleAxis.getExtent(),rId=getRadiusIdx(polar),r0Id=rId?0:1,shapeType=360===Math.abs(angleExtent[1]-angleExtent[0])?"Circle":"Arc";(shape=0===radiusExtent[r0Id]?new graphic[shapeType]({shape:{cx:polar.cx,cy:polar.cy,r:radiusExtent[rId],startAngle:-angleExtent[0]*RADIAN,endAngle:-angleExtent[1]*RADIAN,clockwise:angleAxis.inverse},style:lineStyleModel.getLineStyle(),z2:1,silent:!0}):new Ring.Z({shape:{cx:polar.cx,cy:polar.cy,r:radiusExtent[rId],r0:radiusExtent[r0Id]},style:lineStyleModel.getLineStyle(),z2:1,silent:!0})).style.fill=null,group.add(shape)},axisTick:function(group,angleAxisModel,polar,ticksAngles,minorTickAngles,radiusExtent){var tickModel=angleAxisModel.getModel("axisTick"),tickLen=(tickModel.get("inside")?-1:1)*tickModel.get("length"),radius=radiusExtent[getRadiusIdx(polar)],lines=util.map(ticksAngles,(function(tickAngleItem){return new Line.Z({shape:getAxisLineShape(polar,[radius,radius+tickLen],tickAngleItem.coord)})}));group.add(graphic.mergePath(lines,{style:util.defaults(tickModel.getModel("lineStyle").getLineStyle(),{stroke:angleAxisModel.get(["axisLine","lineStyle","color"])})}))},minorTick:function(group,angleAxisModel,polar,tickAngles,minorTickAngles,radiusExtent){if(minorTickAngles.length){for(var tickModel=angleAxisModel.getModel("axisTick"),minorTickModel=angleAxisModel.getModel("minorTick"),tickLen=(tickModel.get("inside")?-1:1)*minorTickModel.get("length"),radius=radiusExtent[getRadiusIdx(polar)],lines=[],i=0;i<minorTickAngles.length;i++)for(var k=0;k<minorTickAngles[i].length;k++)lines.push(new Line.Z({shape:getAxisLineShape(polar,[radius,radius+tickLen],minorTickAngles[i][k].coord)}));group.add(graphic.mergePath(lines,{style:util.defaults(minorTickModel.getModel("lineStyle").getLineStyle(),util.defaults(tickModel.getLineStyle(),{stroke:angleAxisModel.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(group,angleAxisModel,polar,ticksAngles,minorTickAngles,radiusExtent,labels){var rawCategoryData=angleAxisModel.getCategories(!0),commonLabelModel=angleAxisModel.getModel("axisLabel"),labelMargin=commonLabelModel.get("margin"),triggerEvent=angleAxisModel.get("triggerEvent");util.each(labels,(function(labelItem,idx){var labelModel=commonLabelModel,tickValue=labelItem.tickValue,r=radiusExtent[getRadiusIdx(polar)],p=polar.coordToPoint([r+labelMargin,labelItem.coord]),cx=polar.cx,cy=polar.cy,labelTextAlign=Math.abs(p[0]-cx)/r<.3?"center":p[0]>cx?"left":"right",labelTextVerticalAlign=Math.abs(p[1]-cy)/r<.3?"middle":p[1]>cy?"top":"bottom";if(rawCategoryData&&rawCategoryData[tickValue]){var rawCategoryItem=rawCategoryData[tickValue];util.isObject(rawCategoryItem)&&rawCategoryItem.textStyle&&(labelModel=new Model.Z(rawCategoryItem.textStyle,commonLabelModel,commonLabelModel.ecModel))}var textEl=new Text.ZP({silent:axis_AxisBuilder.isLabelSilent(angleAxisModel),style:(0,labelStyle.Lr)(labelModel,{x:p[0],y:p[1],fill:labelModel.getTextColor()||angleAxisModel.get(["axisLine","lineStyle","color"]),text:labelItem.formattedLabel,align:labelTextAlign,verticalAlign:labelTextVerticalAlign})});if(group.add(textEl),triggerEvent){var eventData=axis_AxisBuilder.makeAxisEventDataBase(angleAxisModel);eventData.targetType="axisLabel",eventData.value=labelItem.rawLabel,(0,innerStore.A)(textEl).eventData=eventData}}),this)},splitLine:function(group,angleAxisModel,polar,ticksAngles,minorTickAngles,radiusExtent){var lineStyleModel=angleAxisModel.getModel("splitLine").getModel("lineStyle"),lineColors=lineStyleModel.get("color"),lineCount=0;lineColors=lineColors instanceof Array?lineColors:[lineColors];for(var splitLines=[],i=0;i<ticksAngles.length;i++){var colorIndex=lineCount++%lineColors.length;splitLines[colorIndex]=splitLines[colorIndex]||[],splitLines[colorIndex].push(new Line.Z({shape:getAxisLineShape(polar,radiusExtent,ticksAngles[i].coord)}))}for(i=0;i<splitLines.length;i++)group.add(graphic.mergePath(splitLines[i],{style:util.defaults({stroke:lineColors[i%lineColors.length]},lineStyleModel.getLineStyle()),silent:!0,z:angleAxisModel.get("z")}))},minorSplitLine:function(group,angleAxisModel,polar,ticksAngles,minorTickAngles,radiusExtent){if(minorTickAngles.length){for(var lineStyleModel=angleAxisModel.getModel("minorSplitLine").getModel("lineStyle"),lines=[],i=0;i<minorTickAngles.length;i++)for(var k=0;k<minorTickAngles[i].length;k++)lines.push(new Line.Z({shape:getAxisLineShape(polar,radiusExtent,minorTickAngles[i][k].coord)}));group.add(graphic.mergePath(lines,{style:lineStyleModel.getLineStyle(),silent:!0,z:angleAxisModel.get("z")}))}},splitArea:function(group,angleAxisModel,polar,ticksAngles,minorTickAngles,radiusExtent){if(ticksAngles.length){var areaStyleModel=angleAxisModel.getModel("splitArea").getModel("areaStyle"),areaColors=areaStyleModel.get("color"),lineCount=0;areaColors=areaColors instanceof Array?areaColors:[areaColors];for(var splitAreas=[],RADIAN=Math.PI/180,prevAngle=-ticksAngles[0].coord*RADIAN,r0=Math.min(radiusExtent[0],radiusExtent[1]),r1=Math.max(radiusExtent[0],radiusExtent[1]),clockwise=angleAxisModel.get("clockwise"),i=1,len=ticksAngles.length;i<=len;i++){var coord=i===len?ticksAngles[0].coord:ticksAngles[i].coord,colorIndex=lineCount++%areaColors.length;splitAreas[colorIndex]=splitAreas[colorIndex]||[],splitAreas[colorIndex].push(new Sector.C({shape:{cx:polar.cx,cy:polar.cy,r0,r:r1,startAngle:prevAngle,endAngle:-coord*RADIAN,clockwise},silent:!0})),prevAngle=-coord*RADIAN}for(i=0;i<splitAreas.length;i++)group.add(graphic.mergePath(splitAreas[i],{style:util.defaults({fill:areaColors[i%areaColors.length]},areaStyleModel.getAreaStyle()),silent:!0}))}}};const axis_AngleAxisView=AngleAxisView;var RadiusAxisView_axisBuilderAttrs=["axisLine","axisTickLabel","axisName"],RadiusAxisView_selfBuilderAttrs=["splitLine","splitArea","minorSplitLine"],RadiusAxisView=function(_super){function RadiusAxisView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=RadiusAxisView.type,_this.axisPointerClass="PolarAxisPointer",_this}return(0,tslib_es6.ZT)(RadiusAxisView,_super),RadiusAxisView.prototype.render=function(radiusAxisModel,ecModel){if(this.group.removeAll(),radiusAxisModel.get("show")){var oldAxisGroup=this._axisGroup,newAxisGroup=this._axisGroup=new Group.Z;this.group.add(newAxisGroup);var radiusAxis=radiusAxisModel.axis,polar=radiusAxis.polar,angleAxis=polar.getAngleAxis(),ticksCoords=radiusAxis.getTicksCoords(),minorTicksCoords=radiusAxis.getMinorTicksCoords(),axisAngle=angleAxis.getExtent()[0],radiusExtent=radiusAxis.getExtent(),layout=function layoutAxis(polar,radiusAxisModel,axisAngle){return{position:[polar.cx,polar.cy],rotation:axisAngle/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:radiusAxisModel.getModel("axisLabel").get("rotate"),z2:1}}(polar,radiusAxisModel,axisAngle),axisBuilder=new axis_AxisBuilder(radiusAxisModel,layout);util.each(RadiusAxisView_axisBuilderAttrs,axisBuilder.add,axisBuilder),newAxisGroup.add(axisBuilder.getGroup()),graphic.groupTransition(oldAxisGroup,newAxisGroup,radiusAxisModel),util.each(RadiusAxisView_selfBuilderAttrs,(function(name){radiusAxisModel.get([name,"show"])&&!radiusAxis.scale.isBlank()&&RadiusAxisView_axisElementBuilders[name](this.group,radiusAxisModel,polar,axisAngle,radiusExtent,ticksCoords,minorTicksCoords)}),this)}},RadiusAxisView.type="radiusAxis",RadiusAxisView}(axis_AxisView),RadiusAxisView_axisElementBuilders={splitLine:function(group,radiusAxisModel,polar,axisAngle,radiusExtent,ticksCoords){var lineStyleModel=radiusAxisModel.getModel("splitLine").getModel("lineStyle"),lineColors=lineStyleModel.get("color"),lineCount=0,angleAxis=polar.getAngleAxis(),RADIAN=Math.PI/180,angleExtent=angleAxis.getExtent(),shapeType=360===Math.abs(angleExtent[1]-angleExtent[0])?"Circle":"Arc";lineColors=lineColors instanceof Array?lineColors:[lineColors];for(var splitLines=[],i=0;i<ticksCoords.length;i++){var colorIndex=lineCount++%lineColors.length;splitLines[colorIndex]=splitLines[colorIndex]||[],splitLines[colorIndex].push(new graphic[shapeType]({shape:{cx:polar.cx,cy:polar.cy,r:Math.max(ticksCoords[i].coord,0),startAngle:-angleExtent[0]*RADIAN,endAngle:-angleExtent[1]*RADIAN,clockwise:angleAxis.inverse}}))}for(i=0;i<splitLines.length;i++)group.add(graphic.mergePath(splitLines[i],{style:util.defaults({stroke:lineColors[i%lineColors.length],fill:null},lineStyleModel.getLineStyle()),silent:!0}))},minorSplitLine:function(group,radiusAxisModel,polar,axisAngle,radiusExtent,ticksCoords,minorTicksCoords){if(minorTicksCoords.length){for(var lineStyleModel=radiusAxisModel.getModel("minorSplitLine").getModel("lineStyle"),lines=[],i=0;i<minorTicksCoords.length;i++)for(var k=0;k<minorTicksCoords[i].length;k++)lines.push(new Circle.Z({shape:{cx:polar.cx,cy:polar.cy,r:minorTicksCoords[i][k].coord}}));group.add(graphic.mergePath(lines,{style:util.defaults({fill:null},lineStyleModel.getLineStyle()),silent:!0}))}},splitArea:function(group,radiusAxisModel,polar,axisAngle,radiusExtent,ticksCoords){if(ticksCoords.length){var areaStyleModel=radiusAxisModel.getModel("splitArea").getModel("areaStyle"),areaColors=areaStyleModel.get("color"),lineCount=0;areaColors=areaColors instanceof Array?areaColors:[areaColors];for(var splitAreas=[],prevRadius=ticksCoords[0].coord,i=1;i<ticksCoords.length;i++){var colorIndex=lineCount++%areaColors.length;splitAreas[colorIndex]=splitAreas[colorIndex]||[],splitAreas[colorIndex].push(new Sector.C({shape:{cx:polar.cx,cy:polar.cy,r0:prevRadius,r:ticksCoords[i].coord,startAngle:0,endAngle:2*Math.PI},silent:!0})),prevRadius=ticksCoords[i].coord}for(i=0;i<splitAreas.length;i++)group.add(graphic.mergePath(splitAreas[i],{style:util.defaults({fill:areaColors[i%areaColors.length]},areaStyleModel.getAreaStyle()),silent:!0}))}}};const axis_RadiusAxisView=RadiusAxisView;function getSeriesStackId(seriesModel){return seriesModel.get("stack")||"__ec_stack_"+seriesModel.seriesIndex}function getAxisKey(polar,axis){return axis.dim+polar.model.componentIndex}const barPolar=function barLayoutPolar(seriesType,ecModel,api){var lastStackCoords={},barWidthAndOffset=function calRadialBar(barSeries){var columnsMap={};util.each(barSeries,(function(seriesModel,idx){var data=seriesModel.getData(),polar=seriesModel.coordinateSystem,baseAxis=polar.getBaseAxis(),axisKey=getAxisKey(polar,baseAxis),axisExtent=baseAxis.getExtent(),bandWidth="category"===baseAxis.type?baseAxis.getBandWidth():Math.abs(axisExtent[1]-axisExtent[0])/data.count(),columnsOnAxis=columnsMap[axisKey]||{bandWidth,remainedWidth:bandWidth,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},stacks=columnsOnAxis.stacks;columnsMap[axisKey]=columnsOnAxis;var stackId=getSeriesStackId(seriesModel);stacks[stackId]||columnsOnAxis.autoWidthCount++,stacks[stackId]=stacks[stackId]||{width:0,maxWidth:0};var barWidth=(0,number.GM)(seriesModel.get("barWidth"),bandWidth),barMaxWidth=(0,number.GM)(seriesModel.get("barMaxWidth"),bandWidth),barGap=seriesModel.get("barGap"),barCategoryGap=seriesModel.get("barCategoryGap");barWidth&&!stacks[stackId].width&&(barWidth=Math.min(columnsOnAxis.remainedWidth,barWidth),stacks[stackId].width=barWidth,columnsOnAxis.remainedWidth-=barWidth),barMaxWidth&&(stacks[stackId].maxWidth=barMaxWidth),null!=barGap&&(columnsOnAxis.gap=barGap),null!=barCategoryGap&&(columnsOnAxis.categoryGap=barCategoryGap)}));var result={};return util.each(columnsMap,(function(columnsOnAxis,coordSysName){result[coordSysName]={};var stacks=columnsOnAxis.stacks,bandWidth=columnsOnAxis.bandWidth,categoryGap=(0,number.GM)(columnsOnAxis.categoryGap,bandWidth),barGapPercent=(0,number.GM)(columnsOnAxis.gap,1),remainedWidth=columnsOnAxis.remainedWidth,autoWidthCount=columnsOnAxis.autoWidthCount,autoWidth=(remainedWidth-categoryGap)/(autoWidthCount+(autoWidthCount-1)*barGapPercent);autoWidth=Math.max(autoWidth,0),util.each(stacks,(function(column,stack){var maxWidth=column.maxWidth;maxWidth&&maxWidth<autoWidth&&(maxWidth=Math.min(maxWidth,remainedWidth),column.width&&(maxWidth=Math.min(maxWidth,column.width)),remainedWidth-=maxWidth,column.width=maxWidth,autoWidthCount--)})),autoWidth=(remainedWidth-categoryGap)/(autoWidthCount+(autoWidthCount-1)*barGapPercent),autoWidth=Math.max(autoWidth,0);var lastColumn,widthSum=0;util.each(stacks,(function(column,idx){column.width||(column.width=autoWidth),lastColumn=column,widthSum+=column.width*(1+barGapPercent)})),lastColumn&&(widthSum-=lastColumn.width*barGapPercent);var offset=-widthSum/2;util.each(stacks,(function(column,stackId){result[coordSysName][stackId]=result[coordSysName][stackId]||{offset,width:column.width},offset+=column.width*(1+barGapPercent)}))})),result}(util.filter(ecModel.getSeriesByType(seriesType),(function(seriesModel){return!ecModel.isSeriesFiltered(seriesModel)&&seriesModel.coordinateSystem&&"polar"===seriesModel.coordinateSystem.type})));ecModel.eachSeriesByType(seriesType,(function(seriesModel){if("polar"===seriesModel.coordinateSystem.type){var data=seriesModel.getData(),polar=seriesModel.coordinateSystem,baseAxis=polar.getBaseAxis(),axisKey=getAxisKey(polar,baseAxis),stackId=getSeriesStackId(seriesModel),columnLayoutInfo=barWidthAndOffset[axisKey][stackId],columnOffset=columnLayoutInfo.offset,columnWidth=columnLayoutInfo.width,valueAxis=polar.getOtherAxis(baseAxis),cx=seriesModel.coordinateSystem.cx,cy=seriesModel.coordinateSystem.cy,barMinHeight=seriesModel.get("barMinHeight")||0,barMinAngle=seriesModel.get("barMinAngle")||0;lastStackCoords[stackId]=lastStackCoords[stackId]||[];for(var valueDim=data.mapDimension(valueAxis.dim),baseDim=data.mapDimension(baseAxis.dim),stacked=(0,dataStackHelper.M)(data,valueDim),clampLayout="radius"!==baseAxis.dim||!seriesModel.get("roundCap",!0),valueAxisStart=valueAxis.dataToCoord(0),idx=0,len=data.count();idx<len;idx++){var value=data.get(valueDim,idx),baseValue=data.get(baseDim,idx),sign=value>=0?"p":"n",baseCoord=valueAxisStart;stacked&&(lastStackCoords[stackId][baseValue]||(lastStackCoords[stackId][baseValue]={p:valueAxisStart,n:valueAxisStart}),baseCoord=lastStackCoords[stackId][baseValue][sign]);var r0=void 0,r=void 0,startAngle=void 0,endAngle=void 0;if("radius"===valueAxis.dim){var radiusSpan=valueAxis.dataToCoord(value)-valueAxisStart,angle=baseAxis.dataToCoord(baseValue);Math.abs(radiusSpan)<barMinHeight&&(radiusSpan=(radiusSpan<0?-1:1)*barMinHeight),r0=baseCoord,r=baseCoord+radiusSpan,endAngle=(startAngle=angle-columnOffset)-columnWidth,stacked&&(lastStackCoords[stackId][baseValue][sign]=r)}else{var angleSpan=valueAxis.dataToCoord(value,clampLayout)-valueAxisStart,radius=baseAxis.dataToCoord(baseValue);Math.abs(angleSpan)<barMinAngle&&(angleSpan=(angleSpan<0?-1:1)*barMinAngle),r=(r0=radius+columnOffset)+columnWidth,startAngle=baseCoord,endAngle=baseCoord+angleSpan,stacked&&(lastStackCoords[stackId][baseValue][sign]=endAngle)}data.setItemLayout(idx,{cx,cy,r0,r,startAngle:-startAngle*Math.PI/180,endAngle:-endAngle*Math.PI/180,clockwise:startAngle>=endAngle})}}}))};var angleAxisExtraOption={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},radiusAxisExtraOption={splitNumber:5},PolarView=function(_super){function PolarView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=PolarView.type,_this}return(0,tslib_es6.ZT)(PolarView,_super),PolarView.type="polar",PolarView}(Component.Z);var geo_install=__webpack_require__("./node_modules/echarts/lib/component/geo/install.js");function singleAxisHelper_layout(axisModel,opt){opt=opt||{};var single=axisModel.coordinateSystem,axis=axisModel.axis,layout={},axisPosition=axis.position,orient=axis.orient,rect=single.getRect(),rectBound=[rect.x,rect.x+rect.width,rect.y,rect.y+rect.height],positionMap={horizontal:{top:rectBound[2],bottom:rectBound[3]},vertical:{left:rectBound[0],right:rectBound[1]}};layout.position=["vertical"===orient?positionMap.vertical[axisPosition]:rectBound[0],"horizontal"===orient?positionMap.horizontal[axisPosition]:rectBound[3]];layout.rotation=Math.PI/2*{horizontal:0,vertical:1}[orient];layout.labelDirection=layout.tickDirection=layout.nameDirection={top:-1,bottom:1,right:1,left:-1}[axisPosition],axisModel.get(["axisTick","inside"])&&(layout.tickDirection=-layout.tickDirection),util.retrieve(opt.labelInside,axisModel.get(["axisLabel","inside"]))&&(layout.labelDirection=-layout.labelDirection);var labelRotation=opt.rotate;return null==labelRotation&&(labelRotation=axisModel.get(["axisLabel","rotate"])),layout.labelRotation="top"===axisPosition?-labelRotation:labelRotation,layout.z2=1,layout}var SingleAxisView_axisBuilderAttrs=["axisLine","axisTickLabel","axisName"],SingleAxisView_selfBuilderAttrs=["splitArea","splitLine"],SingleAxisView=function(_super){function SingleAxisView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=SingleAxisView.type,_this.axisPointerClass="SingleAxisPointer",_this}return(0,tslib_es6.ZT)(SingleAxisView,_super),SingleAxisView.prototype.render=function(axisModel,ecModel,api,payload){var group=this.group;group.removeAll();var oldAxisGroup=this._axisGroup;this._axisGroup=new Group.Z;var layout=singleAxisHelper_layout(axisModel),axisBuilder=new axis_AxisBuilder(axisModel,layout);util.each(SingleAxisView_axisBuilderAttrs,axisBuilder.add,axisBuilder),group.add(this._axisGroup),group.add(axisBuilder.getGroup()),util.each(SingleAxisView_selfBuilderAttrs,(function(name){axisModel.get([name,"show"])&&SingleAxisView_axisElementBuilders[name](this,this.group,this._axisGroup,axisModel)}),this),graphic.groupTransition(oldAxisGroup,this._axisGroup,axisModel),_super.prototype.render.call(this,axisModel,ecModel,api,payload)},SingleAxisView.prototype.remove=function(){rectCoordAxisHandleRemove(this)},SingleAxisView.type="singleAxis",SingleAxisView}(axis_AxisView),SingleAxisView_axisElementBuilders={splitLine:function(axisView,group,axisGroup,axisModel){var axis=axisModel.axis;if(!axis.scale.isBlank()){var splitLineModel=axisModel.getModel("splitLine"),lineStyleModel=splitLineModel.getModel("lineStyle"),lineColors=lineStyleModel.get("color");lineColors=lineColors instanceof Array?lineColors:[lineColors];for(var lineWidth=lineStyleModel.get("width"),gridRect=axisModel.coordinateSystem.getRect(),isHorizontal=axis.isHorizontal(),splitLines=[],lineCount=0,ticksCoords=axis.getTicksCoords({tickModel:splitLineModel}),p1=[],p2=[],i=0;i<ticksCoords.length;++i){var tickCoord=axis.toGlobalCoord(ticksCoords[i].coord);isHorizontal?(p1[0]=tickCoord,p1[1]=gridRect.y,p2[0]=tickCoord,p2[1]=gridRect.y+gridRect.height):(p1[0]=gridRect.x,p1[1]=tickCoord,p2[0]=gridRect.x+gridRect.width,p2[1]=tickCoord);var line=new Line.Z({shape:{x1:p1[0],y1:p1[1],x2:p2[0],y2:p2[1]},silent:!0});graphic.subPixelOptimizeLine(line.shape,lineWidth);var colorIndex=lineCount++%lineColors.length;splitLines[colorIndex]=splitLines[colorIndex]||[],splitLines[colorIndex].push(line)}var lineStyle=lineStyleModel.getLineStyle(["color"]);for(i=0;i<splitLines.length;++i)group.add(graphic.mergePath(splitLines[i],{style:util.defaults({stroke:lineColors[i%lineColors.length]},lineStyle),silent:!0}))}},splitArea:function(axisView,group,axisGroup,axisModel){rectCoordAxisBuildSplitArea(axisView,axisGroup,axisModel,axisModel)}};const axis_SingleAxisView=SingleAxisView;var SingleAxisModel=function(_super){function SingleAxisModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=SingleAxisModel.type,_this}return(0,tslib_es6.ZT)(SingleAxisModel,_super),SingleAxisModel.prototype.getCoordSysModel=function(){return this},SingleAxisModel.type="singleAxis",SingleAxisModel.layoutMode="box",SingleAxisModel.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},SingleAxisModel}(model_Component.Z);(0,util.mixin)(SingleAxisModel,axisModelCommonMixin.W.prototype);const single_AxisModel=SingleAxisModel;const single_SingleAxis=function(_super){function SingleAxis(dim,scale,coordExtent,axisType,position){var _this=_super.call(this,dim,scale,coordExtent)||this;return _this.type=axisType||"value",_this.position=position||"bottom",_this}return(0,tslib_es6.ZT)(SingleAxis,_super),SingleAxis.prototype.isHorizontal=function(){var position=this.position;return"top"===position||"bottom"===position},SingleAxis.prototype.pointToData=function(point,clamp){return this.coordinateSystem.pointToData(point)[0]},SingleAxis}(Axis.Z);var singleDimensions=["single"];function Single_getCoordSys(finder){var seriesModel=finder.seriesModel,singleModel=finder.singleAxisModel;return singleModel&&singleModel.coordinateSystem||seriesModel&&seriesModel.coordinateSystem}const single_Single=function(){function Single(axisModel,ecModel,api){this.type="single",this.dimension="single",this.dimensions=singleDimensions,this.axisPointerEnabled=!0,this.model=axisModel,this._init(axisModel,ecModel,api)}return Single.prototype._init=function(axisModel,ecModel,api){var dim=this.dimension,axis=new single_SingleAxis(dim,axisHelper.aG(axisModel),[0,0],axisModel.get("type"),axisModel.get("position")),isCategory="category"===axis.type;axis.onBand=isCategory&&axisModel.get("boundaryGap"),axis.inverse=axisModel.get("inverse"),axis.orient=axisModel.get("orient"),axisModel.axis=axis,axis.model=axisModel,axis.coordinateSystem=this,this._axis=axis},Single.prototype.update=function(ecModel,api){ecModel.eachSeries((function(seriesModel){if(seriesModel.coordinateSystem===this){var data_1=seriesModel.getData();(0,util.each)(data_1.mapDimensionsAll(this.dimension),(function(dim){this._axis.scale.unionExtentFromData(data_1,dim)}),this),axisHelper.Jk(this._axis.scale,this._axis.model)}}),this)},Single.prototype.resize=function(axisModel,api){this._rect=(0,layout.ME)({left:axisModel.get("left"),top:axisModel.get("top"),right:axisModel.get("right"),bottom:axisModel.get("bottom"),width:axisModel.get("width"),height:axisModel.get("height")},{width:api.getWidth(),height:api.getHeight()}),this._adjustAxis()},Single.prototype.getRect=function(){return this._rect},Single.prototype._adjustAxis=function(){var rect=this._rect,axis=this._axis,isHorizontal=axis.isHorizontal(),extent=isHorizontal?[0,rect.width]:[0,rect.height],idx=axis.inverse?1:0;axis.setExtent(extent[idx],extent[1-idx]),this._updateAxisTransform(axis,isHorizontal?rect.x:rect.y)},Single.prototype._updateAxisTransform=function(axis,coordBase){var axisExtent=axis.getExtent(),extentSum=axisExtent[0]+axisExtent[1],isHorizontal=axis.isHorizontal();axis.toGlobalCoord=isHorizontal?function(coord){return coord+coordBase}:function(coord){return extentSum-coord+coordBase},axis.toLocalCoord=isHorizontal?function(coord){return coord-coordBase}:function(coord){return extentSum-coord+coordBase}},Single.prototype.getAxis=function(){return this._axis},Single.prototype.getBaseAxis=function(){return this._axis},Single.prototype.getAxes=function(){return[this._axis]},Single.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},Single.prototype.containPoint=function(point){var rect=this.getRect(),axis=this.getAxis();return"horizontal"===axis.orient?axis.contain(axis.toLocalCoord(point[0]))&&point[1]>=rect.y&&point[1]<=rect.y+rect.height:axis.contain(axis.toLocalCoord(point[1]))&&point[0]>=rect.y&&point[0]<=rect.y+rect.height},Single.prototype.pointToData=function(point){var axis=this.getAxis();return[axis.coordToData(axis.toLocalCoord(point["horizontal"===axis.orient?0:1]))]},Single.prototype.dataToPoint=function(val){var axis=this.getAxis(),rect=this.getRect(),pt=[],idx="horizontal"===axis.orient?0:1;return val instanceof Array&&(val=val[0]),pt[idx]=axis.toGlobalCoord(axis.dataToCoord(+val)),pt[1-idx]=0===idx?rect.y+rect.height/2:rect.x+rect.width/2,pt},Single.prototype.convertToPixel=function(ecModel,finder,value){return Single_getCoordSys(finder)===this?this.dataToPoint(value):null},Single.prototype.convertFromPixel=function(ecModel,finder,pixel){return Single_getCoordSys(finder)===this?this.pointToData(pixel):null},Single}();const single_singleCreator={create:function create(ecModel,api){var singles=[];return ecModel.eachComponent("singleAxis",(function(axisModel,idx){var single=new single_Single(axisModel,ecModel,api);single.name="single_"+idx,single.resize(axisModel,api),axisModel.coordinateSystem=single,singles.push(single)})),ecModel.eachSeries((function(seriesModel){if("singleAxis"===seriesModel.get("coordinateSystem")){var singleAxisModel=seriesModel.getReferringComponents("singleAxis",util_model.C6).models[0];seriesModel.coordinateSystem=singleAxisModel&&singleAxisModel.coordinateSystem}})),singles},dimensions:singleDimensions};var XY=["x","y"],WH=["width","height"],SingleAxisPointer=function(_super){function SingleAxisPointer(){return null!==_super&&_super.apply(this,arguments)||this}return(0,tslib_es6.ZT)(SingleAxisPointer,_super),SingleAxisPointer.prototype.makeElOption=function(elOption,value,axisModel,axisPointerModel,api){var axis=axisModel.axis,coordSys=axis.coordinateSystem,otherExtent=getGlobalExtent(coordSys,1-getPointDimIndex(axis)),pixelValue=coordSys.dataToPoint(value)[0],axisPointerType=axisPointerModel.get("type");if(axisPointerType&&"none"!==axisPointerType){var elStyle=buildElStyle(axisPointerModel),pointerOption=SingleAxisPointer_pointerShapeBuilder[axisPointerType](axis,pixelValue,otherExtent);pointerOption.style=elStyle,elOption.graphicKey=pointerOption.type,elOption.pointer=pointerOption}buildCartesianSingleLabelElOption(value,elOption,singleAxisHelper_layout(axisModel),axisModel,axisPointerModel,api)},SingleAxisPointer.prototype.getHandleTransform=function(value,axisModel,axisPointerModel){var layoutInfo=singleAxisHelper_layout(axisModel,{labelInside:!1});layoutInfo.labelMargin=axisPointerModel.get(["handle","margin"]);var position=getTransformedPosition(axisModel.axis,value,layoutInfo);return{x:position[0],y:position[1],rotation:layoutInfo.rotation+(layoutInfo.labelDirection<0?Math.PI:0)}},SingleAxisPointer.prototype.updateHandleTransform=function(transform,delta,axisModel,axisPointerModel){var axis=axisModel.axis,coordSys=axis.coordinateSystem,dimIndex=getPointDimIndex(axis),axisExtent=getGlobalExtent(coordSys,dimIndex),currPosition=[transform.x,transform.y];currPosition[dimIndex]+=delta[dimIndex],currPosition[dimIndex]=Math.min(axisExtent[1],currPosition[dimIndex]),currPosition[dimIndex]=Math.max(axisExtent[0],currPosition[dimIndex]);var otherExtent=getGlobalExtent(coordSys,1-dimIndex),cursorOtherValue=(otherExtent[1]+otherExtent[0])/2,cursorPoint=[cursorOtherValue,cursorOtherValue];return cursorPoint[dimIndex]=currPosition[dimIndex],{x:currPosition[0],y:currPosition[1],rotation:transform.rotation,cursorPoint,tooltipOption:{verticalAlign:"middle"}}},SingleAxisPointer}(axisPointer_BaseAxisPointer),SingleAxisPointer_pointerShapeBuilder={line:function(axis,pixelValue,otherExtent){return{type:"Line",subPixelOptimize:!0,shape:makeLineShape([pixelValue,otherExtent[0]],[pixelValue,otherExtent[1]],getPointDimIndex(axis))}},shadow:function(axis,pixelValue,otherExtent){var bandWidth=axis.getBandWidth(),span=otherExtent[1]-otherExtent[0];return{type:"Rect",shape:makeRectShape([pixelValue-bandWidth/2,otherExtent[0]],[bandWidth,span],getPointDimIndex(axis))}}};function getPointDimIndex(axis){return axis.isHorizontal()?0:1}function getGlobalExtent(coordSys,dimIndex){var rect=coordSys.getRect();return[rect[XY[dimIndex]],rect[XY[dimIndex]]+rect[WH[dimIndex]]]}const axisPointer_SingleAxisPointer=SingleAxisPointer;var SingleView=function(_super){function SingleView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=SingleView.type,_this}return(0,tslib_es6.ZT)(SingleView,_super),SingleView.type="single",SingleView}(Component.Z);function mergeAndNormalizeLayoutParams(target,raw){var cellSizeArr,cellSize=target.cellSize;1===(cellSizeArr=util.isArray(cellSize)?cellSize:target.cellSize=[cellSize,cellSize]).length&&(cellSizeArr[1]=cellSizeArr[0]);var ignoreSize=util.map([0,1],(function(hvIdx){return(0,layout.QM)(raw,hvIdx)&&(cellSizeArr[hvIdx]="auto"),null!=cellSizeArr[hvIdx]&&"auto"!==cellSizeArr[hvIdx]}));(0,layout.dt)(target,raw,{type:"box",ignoreSize})}const calendar_CalendarModel=function(_super){function CalendarModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=CalendarModel.type,_this}return(0,tslib_es6.ZT)(CalendarModel,_super),CalendarModel.prototype.init=function(option,parentModel,ecModel){var inputPositionParams=(0,layout.tE)(option);_super.prototype.init.apply(this,arguments),mergeAndNormalizeLayoutParams(option,inputPositionParams)},CalendarModel.prototype.mergeOption=function(option){_super.prototype.mergeOption.apply(this,arguments),mergeAndNormalizeLayoutParams(this.option,option)},CalendarModel.prototype.getCellSize=function(){return this.option.cellSize},CalendarModel.type="calendar",CalendarModel.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},CalendarModel}(model_Component.Z);var locale=__webpack_require__("./node_modules/echarts/lib/core/locale.js");const calendar_CalendarView=function(_super){function CalendarView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=CalendarView.type,_this}return(0,tslib_es6.ZT)(CalendarView,_super),CalendarView.prototype.render=function(calendarModel,ecModel,api){var group=this.group;group.removeAll();var coordSys=calendarModel.coordinateSystem,rangeData=coordSys.getRangeInfo(),orient=coordSys.getOrient(),localeModel=ecModel.getLocaleModel();this._renderDayRect(calendarModel,rangeData,group),this._renderLines(calendarModel,rangeData,orient,group),this._renderYearText(calendarModel,rangeData,orient,group),this._renderMonthText(calendarModel,localeModel,orient,group),this._renderWeekText(calendarModel,localeModel,rangeData,orient,group)},CalendarView.prototype._renderDayRect=function(calendarModel,rangeData,group){for(var coordSys=calendarModel.coordinateSystem,itemRectStyleModel=calendarModel.getModel("itemStyle").getItemStyle(),sw=coordSys.getCellWidth(),sh=coordSys.getCellHeight(),i=rangeData.start.time;i<=rangeData.end.time;i=coordSys.getNextNDay(i,1).time){var point=coordSys.dataToRect([i],!1).tl,rect=new Rect.Z({shape:{x:point[0],y:point[1],width:sw,height:sh},cursor:"default",style:itemRectStyleModel});group.add(rect)}},CalendarView.prototype._renderLines=function(calendarModel,rangeData,orient,group){var self=this,coordSys=calendarModel.coordinateSystem,lineStyleModel=calendarModel.getModel(["splitLine","lineStyle"]).getLineStyle(),show=calendarModel.get(["splitLine","show"]),lineWidth=lineStyleModel.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var firstDay=rangeData.start,i=0;firstDay.time<=rangeData.end.time;i++){addPoints(firstDay.formatedDate),0===i&&(firstDay=coordSys.getDateInfo(rangeData.start.y+"-"+rangeData.start.m));var date=firstDay.date;date.setMonth(date.getMonth()+1),firstDay=coordSys.getDateInfo(date)}function addPoints(date){self._firstDayOfMonth.push(coordSys.getDateInfo(date)),self._firstDayPoints.push(coordSys.dataToRect([date],!1).tl);var points=self._getLinePointsOfOneWeek(calendarModel,date,orient);self._tlpoints.push(points[0]),self._blpoints.push(points[points.length-1]),show&&self._drawSplitline(points,lineStyleModel,group)}addPoints(coordSys.getNextNDay(rangeData.end.time,1).formatedDate),show&&this._drawSplitline(self._getEdgesPoints(self._tlpoints,lineWidth,orient),lineStyleModel,group),show&&this._drawSplitline(self._getEdgesPoints(self._blpoints,lineWidth,orient),lineStyleModel,group)},CalendarView.prototype._getEdgesPoints=function(points,lineWidth,orient){var rs=[points[0].slice(),points[points.length-1].slice()],idx="horizontal"===orient?0:1;return rs[0][idx]=rs[0][idx]-lineWidth/2,rs[1][idx]=rs[1][idx]+lineWidth/2,rs},CalendarView.prototype._drawSplitline=function(points,lineStyle,group){var poyline=new shape_Polyline.Z({z2:20,shape:{points},style:lineStyle});group.add(poyline)},CalendarView.prototype._getLinePointsOfOneWeek=function(calendarModel,date,orient){for(var coordSys=calendarModel.coordinateSystem,parsedDate=coordSys.getDateInfo(date),points=[],i=0;i<7;i++){var tmpD=coordSys.getNextNDay(parsedDate.time,i),point=coordSys.dataToRect([tmpD.time],!1);points[2*tmpD.day]=point.tl,points[2*tmpD.day+1]=point["horizontal"===orient?"bl":"tr"]}return points},CalendarView.prototype._formatterLabel=function(formatter,params){return(0,util.isString)(formatter)&&formatter?(0,format.wx)(formatter,params):(0,util.isFunction)(formatter)?formatter(params):params.nameMap},CalendarView.prototype._yearTextPositionControl=function(textEl,point,orient,position,margin){var x=point[0],y=point[1],aligns=["center","bottom"];"bottom"===position?(y+=margin,aligns=["center","top"]):"left"===position?x-=margin:"right"===position?(x+=margin,aligns=["center","top"]):y-=margin;var rotate=0;return"left"!==position&&"right"!==position||(rotate=Math.PI/2),{rotation:rotate,x,y,style:{align:aligns[0],verticalAlign:aligns[1]}}},CalendarView.prototype._renderYearText=function(calendarModel,rangeData,orient,group){var yearLabel=calendarModel.getModel("yearLabel");if(yearLabel.get("show")){var margin=yearLabel.get("margin"),pos=yearLabel.get("position");pos||(pos="horizontal"!==orient?"top":"left");var points=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],xc=(points[0][0]+points[1][0])/2,yc=(points[0][1]+points[1][1])/2,idx="horizontal"===orient?0:1,posPoints={top:[xc,points[idx][1]],bottom:[xc,points[1-idx][1]],left:[points[1-idx][0],yc],right:[points[idx][0],yc]},name=rangeData.start.y;+rangeData.end.y>+rangeData.start.y&&(name=name+"-"+rangeData.end.y);var formatter=yearLabel.get("formatter"),params={start:rangeData.start.y,end:rangeData.end.y,nameMap:name},content=this._formatterLabel(formatter,params),yearText=new Text.ZP({z2:30,style:(0,labelStyle.Lr)(yearLabel,{text:content})});yearText.attr(this._yearTextPositionControl(yearText,posPoints[pos],orient,pos,margin)),group.add(yearText)}},CalendarView.prototype._monthTextPositionControl=function(point,isCenter,orient,position,margin){var align="left",vAlign="top",x=point[0],y=point[1];return"horizontal"===orient?(y+=margin,isCenter&&(align="center"),"start"===position&&(vAlign="bottom")):(x+=margin,isCenter&&(vAlign="middle"),"start"===position&&(align="right")),{x,y,align,verticalAlign:vAlign}},CalendarView.prototype._renderMonthText=function(calendarModel,localeModel,orient,group){var monthLabel=calendarModel.getModel("monthLabel");if(monthLabel.get("show")){var nameMap=monthLabel.get("nameMap"),margin=monthLabel.get("margin"),pos=monthLabel.get("position"),align=monthLabel.get("align"),termPoints=[this._tlpoints,this._blpoints];nameMap&&!(0,util.isString)(nameMap)||(nameMap&&(localeModel=(0,locale.G8)(nameMap)||localeModel),nameMap=localeModel.get(["time","monthAbbr"])||[]);var idx="start"===pos?0:1,axis="horizontal"===orient?0:1;margin="start"===pos?-margin:margin;for(var isCenter="center"===align,i=0;i<termPoints[idx].length-1;i++){var tmp=termPoints[idx][i].slice(),firstDay=this._firstDayOfMonth[i];if(isCenter){var firstDayPoints=this._firstDayPoints[i];tmp[axis]=(firstDayPoints[axis]+termPoints[0][i+1][axis])/2}var formatter=monthLabel.get("formatter"),name_1=nameMap[+firstDay.m-1],params={yyyy:firstDay.y,yy:(firstDay.y+"").slice(2),MM:firstDay.m,M:+firstDay.m,nameMap:name_1},content=this._formatterLabel(formatter,params),monthText=new Text.ZP({z2:30,style:(0,util.extend)((0,labelStyle.Lr)(monthLabel,{text:content}),this._monthTextPositionControl(tmp,isCenter,orient,pos,margin))});group.add(monthText)}}},CalendarView.prototype._weekTextPositionControl=function(point,orient,position,margin,cellSize){var align="center",vAlign="middle",x=point[0],y=point[1],isStart="start"===position;return"horizontal"===orient?(x=x+margin+(isStart?1:-1)*cellSize[0]/2,align=isStart?"right":"left"):(y=y+margin+(isStart?1:-1)*cellSize[1]/2,vAlign=isStart?"bottom":"top"),{x,y,align,verticalAlign:vAlign}},CalendarView.prototype._renderWeekText=function(calendarModel,localeModel,rangeData,orient,group){var dayLabel=calendarModel.getModel("dayLabel");if(dayLabel.get("show")){var coordSys=calendarModel.coordinateSystem,pos=dayLabel.get("position"),nameMap=dayLabel.get("nameMap"),margin=dayLabel.get("margin"),firstDayOfWeek=coordSys.getFirstDayOfWeek();if(!nameMap||(0,util.isString)(nameMap))nameMap&&(localeModel=(0,locale.G8)(nameMap)||localeModel),nameMap=localeModel.get(["time","dayOfWeekShort"])||(0,util.map)(localeModel.get(["time","dayOfWeekAbbr"]),(function(val){return val[0]}));var start=coordSys.getNextNDay(rangeData.end.time,7-rangeData.lweek).time,cellSize=[coordSys.getCellWidth(),coordSys.getCellHeight()];margin=(0,number.GM)(margin,Math.min(cellSize[1],cellSize[0])),"start"===pos&&(start=coordSys.getNextNDay(rangeData.start.time,-(7+rangeData.fweek)).time,margin=-margin);for(var i=0;i<7;i++){var day,tmpD=coordSys.getNextNDay(start,i),point=coordSys.dataToRect([tmpD.time],!1).center;day=Math.abs((i+firstDayOfWeek)%7);var weekText=new Text.ZP({z2:30,style:(0,util.extend)((0,labelStyle.Lr)(dayLabel,{text:nameMap[day]}),this._weekTextPositionControl(point,orient,pos,margin,cellSize))});group.add(weekText)}}},CalendarView.type="calendar",CalendarView}(Component.Z);function Calendar_getCoordSys(finder){var calendarModel=finder.calendarModel,seriesModel=finder.seriesModel;return calendarModel?calendarModel.coordinateSystem:seriesModel?seriesModel.coordinateSystem:null}const calendar_Calendar=function(){function Calendar(calendarModel,ecModel,api){this.type="calendar",this.dimensions=Calendar.dimensions,this.getDimensionsInfo=Calendar.getDimensionsInfo,this._model=calendarModel}return Calendar.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},Calendar.prototype.getRangeInfo=function(){return this._rangeInfo},Calendar.prototype.getModel=function(){return this._model},Calendar.prototype.getRect=function(){return this._rect},Calendar.prototype.getCellWidth=function(){return this._sw},Calendar.prototype.getCellHeight=function(){return this._sh},Calendar.prototype.getOrient=function(){return this._orient},Calendar.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},Calendar.prototype.getDateInfo=function(date){var y=(date=number.sG(date)).getFullYear(),m=date.getMonth()+1,mStr=m<10?"0"+m:""+m,d=date.getDate(),dStr=d<10?"0"+d:""+d,day=date.getDay();return{y:y+"",m:mStr,d:dStr,day:day=Math.abs((day+7-this.getFirstDayOfWeek())%7),time:date.getTime(),formatedDate:y+"-"+mStr+"-"+dStr,date}},Calendar.prototype.getNextNDay=function(date,n){return 0===(n=n||0)||(date=new Date(this.getDateInfo(date).time)).setDate(date.getDate()+n),this.getDateInfo(date)},Calendar.prototype.update=function(ecModel,api){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var weeks=this._rangeInfo.weeks||1,whNames=["width","height"],cellSize=this._model.getCellSize().slice(),layoutParams=this._model.getBoxLayoutParams(),cellNumbers="horizontal"===this._orient?[weeks,7]:[7,weeks];util.each([0,1],(function(idx){cellSizeSpecified(cellSize,idx)&&(layoutParams[whNames[idx]]=cellSize[idx]*cellNumbers[idx])}));var whGlobal={width:api.getWidth(),height:api.getHeight()},calendarRect=this._rect=layout.ME(layoutParams,whGlobal);function cellSizeSpecified(cellSize,idx){return null!=cellSize[idx]&&"auto"!==cellSize[idx]}util.each([0,1],(function(idx){cellSizeSpecified(cellSize,idx)||(cellSize[idx]=calendarRect[whNames[idx]]/cellNumbers[idx])})),this._sw=cellSize[0],this._sh=cellSize[1]},Calendar.prototype.dataToPoint=function(data,clamp){util.isArray(data)&&(data=data[0]),null==clamp&&(clamp=!0);var dayInfo=this.getDateInfo(data),range=this._rangeInfo,date=dayInfo.formatedDate;if(clamp&&!(dayInfo.time>=range.start.time&&dayInfo.time<range.end.time+864e5))return[NaN,NaN];var week=dayInfo.day,nthWeek=this._getRangeInfo([range.start.time,date]).nthWeek;return"vertical"===this._orient?[this._rect.x+week*this._sw+this._sw/2,this._rect.y+nthWeek*this._sh+this._sh/2]:[this._rect.x+nthWeek*this._sw+this._sw/2,this._rect.y+week*this._sh+this._sh/2]},Calendar.prototype.pointToData=function(point){var date=this.pointToDate(point);return date&&date.time},Calendar.prototype.dataToRect=function(data,clamp){var point=this.dataToPoint(data,clamp);return{contentShape:{x:point[0]-(this._sw-this._lineWidth)/2,y:point[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:point,tl:[point[0]-this._sw/2,point[1]-this._sh/2],tr:[point[0]+this._sw/2,point[1]-this._sh/2],br:[point[0]+this._sw/2,point[1]+this._sh/2],bl:[point[0]-this._sw/2,point[1]+this._sh/2]}},Calendar.prototype.pointToDate=function(point){var nthX=Math.floor((point[0]-this._rect.x)/this._sw)+1,nthY=Math.floor((point[1]-this._rect.y)/this._sh)+1,range=this._rangeInfo.range;return"vertical"===this._orient?this._getDateByWeeksAndDay(nthY,nthX-1,range):this._getDateByWeeksAndDay(nthX,nthY-1,range)},Calendar.prototype.convertToPixel=function(ecModel,finder,value){var coordSys=Calendar_getCoordSys(finder);return coordSys===this?coordSys.dataToPoint(value):null},Calendar.prototype.convertFromPixel=function(ecModel,finder,pixel){var coordSys=Calendar_getCoordSys(finder);return coordSys===this?coordSys.pointToData(pixel):null},Calendar.prototype.containPoint=function(point){return console.warn("Not implemented."),!1},Calendar.prototype._initRangeOption=function(){var normalizedRange,range=this._model.get("range");if(util.isArray(range)&&1===range.length&&(range=range[0]),util.isArray(range))normalizedRange=range;else{var rangeStr=range.toString();if(/^\d{4}$/.test(rangeStr)&&(normalizedRange=[rangeStr+"-01-01",rangeStr+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(rangeStr)){var start=this.getDateInfo(rangeStr),firstDay=start.date;firstDay.setMonth(firstDay.getMonth()+1);var end=this.getNextNDay(firstDay,-1);normalizedRange=[start.formatedDate,end.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(rangeStr)&&(normalizedRange=[rangeStr,rangeStr])}if(!normalizedRange)return range;var tmp=this._getRangeInfo(normalizedRange);return tmp.start.time>tmp.end.time&&normalizedRange.reverse(),normalizedRange},Calendar.prototype._getRangeInfo=function(range){var reversed,parsedRange=[this.getDateInfo(range[0]),this.getDateInfo(range[1])];parsedRange[0].time>parsedRange[1].time&&(reversed=!0,parsedRange.reverse());var allDay=Math.floor(parsedRange[1].time/864e5)-Math.floor(parsedRange[0].time/864e5)+1,date=new Date(parsedRange[0].time),startDateNum=date.getDate(),endDateNum=parsedRange[1].date.getDate();date.setDate(startDateNum+allDay-1);var dateNum=date.getDate();if(dateNum!==endDateNum)for(var sign=date.getTime()-parsedRange[1].time>0?1:-1;(dateNum=date.getDate())!==endDateNum&&(date.getTime()-parsedRange[1].time)*sign>0;)allDay-=sign,date.setDate(dateNum-sign);var weeks=Math.floor((allDay+parsedRange[0].day+6)/7),nthWeek=reversed?1-weeks:weeks-1;return reversed&&parsedRange.reverse(),{range:[parsedRange[0].formatedDate,parsedRange[1].formatedDate],start:parsedRange[0],end:parsedRange[1],allDay,weeks,nthWeek,fweek:parsedRange[0].day,lweek:parsedRange[1].day}},Calendar.prototype._getDateByWeeksAndDay=function(nthWeek,day,range){var rangeInfo=this._getRangeInfo(range);if(nthWeek>rangeInfo.weeks||0===nthWeek&&day<rangeInfo.fweek||nthWeek===rangeInfo.weeks&&day>rangeInfo.lweek)return null;var nthDay=7*(nthWeek-1)-rangeInfo.fweek+day,date=new Date(rangeInfo.start.time);return date.setDate(+rangeInfo.start.d+nthDay),this.getDateInfo(date)},Calendar.create=function(ecModel,api){var calendarList=[];return ecModel.eachComponent("calendar",(function(calendarModel){var calendar=new Calendar(calendarModel,ecModel,api);calendarList.push(calendar),calendarModel.coordinateSystem=calendar})),ecModel.eachSeries((function(calendarSeries){"calendar"===calendarSeries.get("coordinateSystem")&&(calendarSeries.coordinateSystem=calendarList[calendarSeries.get("calendarIndex")||0])})),calendarList},Calendar.dimensions=["time","value"],Calendar}();function isSetLoc(obj,props){var isSet;return util.each(props,(function(prop){null!=obj[prop]&&"auto"!==obj[prop]&&(isSet=!0)})),isSet}var TRANSITION_PROPS_TO_COPY=["transition","enterFrom","leaveTo"],ROOT_TRANSITION_PROPS_TO_COPY=TRANSITION_PROPS_TO_COPY.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function copyTransitionInfo(target,source,targetProp){if(targetProp&&(!target[targetProp]&&source[targetProp]&&(target[targetProp]={}),target=target[targetProp],source=source[targetProp]),target&&source)for(var props=targetProp?TRANSITION_PROPS_TO_COPY:ROOT_TRANSITION_PROPS_TO_COPY,i=0;i<props.length;i++){var prop=props[i];null==target[prop]&&null!=source[prop]&&(target[prop]=source[prop])}}var GraphicComponentModel=function(_super){function GraphicComponentModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=GraphicComponentModel.type,_this.preventAutoZ=!0,_this}return(0,tslib_es6.ZT)(GraphicComponentModel,_super),GraphicComponentModel.prototype.mergeOption=function(option,ecModel){var elements=this.option.elements;this.option.elements=null,_super.prototype.mergeOption.call(this,option,ecModel),this.option.elements=elements},GraphicComponentModel.prototype.optionUpdated=function(newOption,isInit){var thisOption=this.option,newList=(isInit?thisOption:newOption).elements,existList=thisOption.elements=isInit?[]:thisOption.elements,flattenedList=[];this._flatten(newList,flattenedList,null);var mappingResult=util_model.ab(existList,flattenedList,"normalMerge"),elOptionsToUpdate=this._elOptionsToUpdate=[];util.each(mappingResult,(function(resultItem,index){var newElOption=resultItem.newOption;newElOption&&(elOptionsToUpdate.push(newElOption),function setKeyInfoToNewElOption(resultItem,newElOption){var existElOption=resultItem.existing;if(newElOption.id=resultItem.keyInfo.id,!newElOption.type&&existElOption&&(newElOption.type=existElOption.type),null==newElOption.parentId){var newElParentOption=newElOption.parentOption;newElParentOption?newElOption.parentId=newElParentOption.id:existElOption&&(newElOption.parentId=existElOption.parentId)}newElOption.parentOption=null}(resultItem,newElOption),function mergeNewElOptionToExist(existList,index,newElOption){var newElOptCopy=util.extend({},newElOption),existElOption=existList[index],$action=newElOption.$action||"merge";"merge"===$action?existElOption?(util.merge(existElOption,newElOptCopy,!0),(0,layout.dt)(existElOption,newElOptCopy,{ignoreSize:!0}),(0,layout.QT)(newElOption,existElOption),copyTransitionInfo(newElOption,existElOption),copyTransitionInfo(newElOption,existElOption,"shape"),copyTransitionInfo(newElOption,existElOption,"style"),copyTransitionInfo(newElOption,existElOption,"extra"),newElOption.clipPath=existElOption.clipPath):existList[index]=newElOptCopy:"replace"===$action?existList[index]=newElOptCopy:"remove"===$action&&existElOption&&(existList[index]=null)}(existList,index,newElOption),function setLayoutInfoToExist(existItem,newElOption){if(existItem&&(existItem.hv=newElOption.hv=[isSetLoc(newElOption,["left","right"]),isSetLoc(newElOption,["top","bottom"])],"group"===existItem.type)){var existingGroupOpt=existItem,newGroupOpt=newElOption;null==existingGroupOpt.width&&(existingGroupOpt.width=newGroupOpt.width=0),null==existingGroupOpt.height&&(existingGroupOpt.height=newGroupOpt.height=0)}}(existList[index],newElOption))}),this),thisOption.elements=util.filter(existList,(function(item){return item&&delete item.$action,null!=item}))},GraphicComponentModel.prototype._flatten=function(optionList,result,parentOption){util.each(optionList,(function(option){if(option){parentOption&&(option.parentOption=parentOption),result.push(option);var children=option.children;children&&children.length&&this._flatten(children,result,option),delete option.children}}),this)},GraphicComponentModel.prototype.useElOptionsToUpdate=function(){var els=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,els},GraphicComponentModel.type="graphic",GraphicComponentModel.defaultOption={elements:[]},GraphicComponentModel}(model_Component.Z),nonShapeGraphicElements={path:null,compoundPath:null,group:Group.Z,image:graphic_Image.ZP,text:Text.ZP},GraphicView_inner=util_model.Yf(),GraphicComponentView=function(_super){function GraphicComponentView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=GraphicComponentView.type,_this}return(0,tslib_es6.ZT)(GraphicComponentView,_super),GraphicComponentView.prototype.init=function(){this._elMap=util.createHashMap()},GraphicComponentView.prototype.render=function(graphicModel,ecModel,api){graphicModel!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=graphicModel,this._updateElements(graphicModel),this._relocate(graphicModel,api)},GraphicComponentView.prototype._updateElements=function(graphicModel){var elOptionsToUpdate=graphicModel.useElOptionsToUpdate();if(elOptionsToUpdate){var elMap=this._elMap,rootGroup=this.group,globalZ=graphicModel.get("z"),globalZLevel=graphicModel.get("zlevel");util.each(elOptionsToUpdate,(function(elOption){var id=util_model.U5(elOption.id,null),elExisting=null!=id?elMap.get(id):null,parentId=util_model.U5(elOption.parentId,null),targetElParent=null!=parentId?elMap.get(parentId):rootGroup,elType=elOption.type,elOptionStyle=elOption.style;"text"===elType&&elOptionStyle&&elOption.hv&&elOption.hv[1]&&(elOptionStyle.textVerticalAlign=elOptionStyle.textBaseline=elOptionStyle.verticalAlign=elOptionStyle.align=null);var textContentOption=elOption.textContent,textConfig=elOption.textConfig;if(elOptionStyle&&isEC4CompatibleStyle(elOptionStyle,elType,!!textConfig,!!textContentOption)){var convertResult=convertFromEC4CompatibleStyle(elOptionStyle,elType,!0);!textConfig&&convertResult.textConfig&&(textConfig=elOption.textConfig=convertResult.textConfig),!textContentOption&&convertResult.textContent&&(textContentOption=convertResult.textContent)}var elOptionCleaned=function getCleanedElOption(elOption){return elOption=util.extend({},elOption),util.each(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(layout.gN),(function(name){delete elOption[name]})),elOption}(elOption);var $action=elOption.$action||"merge",isMerge="merge"===$action,isReplace="replace"===$action;if(isMerge){var el_1=elExisting;(isInit=!elExisting)?el_1=GraphicView_createEl(id,targetElParent,elOption.type,elMap):(el_1&&(GraphicView_inner(el_1).isNew=!1),stopPreviousKeyframeAnimationAndRestore(el_1)),el_1&&(applyUpdateTransition(el_1,elOptionCleaned,graphicModel,{isInit}),updateCommonAttrs(el_1,elOption,globalZ,globalZLevel))}else if(isReplace){removeEl(elExisting,elOption,elMap,graphicModel);var el_2=GraphicView_createEl(id,targetElParent,elOption.type,elMap);el_2&&(applyUpdateTransition(el_2,elOptionCleaned,graphicModel,{isInit:!0}),updateCommonAttrs(el_2,elOption,globalZ,globalZLevel))}else"remove"===$action&&(updateLeaveTo(elExisting,elOption),removeEl(elExisting,elOption,elMap,graphicModel));var el=elMap.get(id);if(el&&textContentOption)if(isMerge){var textContentExisting=el.getTextContent();textContentExisting?textContentExisting.attr(textContentOption):el.setTextContent(new Text.ZP(textContentOption))}else isReplace&&el.setTextContent(new Text.ZP(textContentOption));if(el){var clipPathOption=elOption.clipPath;if(clipPathOption){var clipPathType=clipPathOption.type,clipPath=void 0,isInit=!1;if(isMerge){var oldClipPath=el.getClipPath();clipPath=(isInit=!oldClipPath||GraphicView_inner(oldClipPath).type!==clipPathType)?newEl(clipPathType):oldClipPath}else isReplace&&(isInit=!0,clipPath=newEl(clipPathType));el.setClipPath(clipPath),applyUpdateTransition(clipPath,clipPathOption,graphicModel,{isInit}),applyKeyframeAnimation(clipPath,clipPathOption.keyframeAnimation,graphicModel)}var elInner=GraphicView_inner(el);el.setTextConfig(textConfig),elInner.option=elOption,function setEventData(el,graphicModel,elOption){var eventData=(0,innerStore.A)(el).eventData;el.silent||el.ignore||eventData||(eventData=(0,innerStore.A)(el).eventData={componentType:"graphic",componentIndex:graphicModel.componentIndex,name:el.name});eventData&&(eventData.info=elOption.info)}(el,graphicModel,elOption),graphic.setTooltipConfig({el,componentModel:graphicModel,itemName:el.name,itemTooltipOption:elOption.tooltip}),applyKeyframeAnimation(el,elOption.keyframeAnimation,graphicModel)}}))}},GraphicComponentView.prototype._relocate=function(graphicModel,api){for(var elOptions=graphicModel.option.elements,rootGroup=this.group,elMap=this._elMap,apiWidth=api.getWidth(),apiHeight=api.getHeight(),xy=["x","y"],i=0;i<elOptions.length;i++){var elOption=elOptions[i];if((el=null!=(id=util_model.U5(elOption.id,null))?elMap.get(id):null)&&el.isGroup){var isParentRoot=(parentEl=el.parent)===rootGroup,elInner=GraphicView_inner(el),parentElInner=GraphicView_inner(parentEl);elInner.width=(0,number.GM)(elInner.option.width,isParentRoot?apiWidth:parentElInner.width)||0,elInner.height=(0,number.GM)(elInner.option.height,isParentRoot?apiHeight:parentElInner.height)||0}}for(i=elOptions.length-1;i>=0;i--){var id,el;elOption=elOptions[i];if(el=null!=(id=util_model.U5(elOption.id,null))?elMap.get(id):null){var parentEl=el.parent,containerInfo=(parentElInner=GraphicView_inner(parentEl),parentEl===rootGroup?{width:apiWidth,height:apiHeight}:{width:parentElInner.width,height:parentElInner.height}),layoutPos={},layouted=layout.p$(el,elOption,containerInfo,null,{hv:elOption.hv,boundingMode:elOption.bounding},layoutPos);if(!GraphicView_inner(el).isNew&&layouted){for(var transition=elOption.transition,animatePos={},k=0;k<xy.length;k++){var key=xy[k],val=layoutPos[key];transition&&(isTransitionAll(transition)||util.indexOf(transition,key)>=0)?animatePos[key]=val:el[key]=val}(0,basicTransition.D)(el,animatePos,graphicModel,0)}else el.attr(layoutPos)}}},GraphicComponentView.prototype._clear=function(){var _this=this,elMap=this._elMap;elMap.each((function(el){removeEl(el,GraphicView_inner(el).option,elMap,_this._lastGraphicModel)})),this._elMap=util.createHashMap()},GraphicComponentView.prototype.dispose=function(){this._clear()},GraphicComponentView.type="graphic",GraphicComponentView}(Component.Z);function newEl(graphicType){var el=new(util.hasOwn(nonShapeGraphicElements,graphicType)?nonShapeGraphicElements[graphicType]:graphic.getShapeClass(graphicType))({});return GraphicView_inner(el).type=graphicType,el}function GraphicView_createEl(id,targetElParent,graphicType,elMap){var el=newEl(graphicType);return targetElParent.add(el),elMap.set(id,el),GraphicView_inner(el).id=id,GraphicView_inner(el).isNew=!0,el}function removeEl(elExisting,elOption,elMap,graphicModel){elExisting&&elExisting.parent&&("group"===elExisting.type&&elExisting.traverse((function(el){removeEl(el,elOption,elMap,graphicModel)})),applyLeaveTransition(elExisting,elOption,graphicModel),elMap.removeKey(GraphicView_inner(elExisting).id))}function updateCommonAttrs(el,elOption,defaultZ,defaultZlevel){el.isGroup||util.each([["cursor",Displayable.ZP.prototype.cursor],["zlevel",defaultZlevel||0],["z",defaultZ||0],["z2",0]],(function(item){var prop=item[0];util.hasOwn(elOption,prop)?el[prop]=util.retrieve2(elOption[prop],item[1]):null==el[prop]&&(el[prop]=item[1])})),util.each(util.keys(elOption),(function(key){if(0===key.indexOf("on")){var val=elOption[key];el[key]=util.isFunction(val)?val:null}})),util.hasOwn(elOption,"draggable")&&(el.draggable=elOption.draggable),null!=elOption.name&&(el.name=elOption.name),null!=elOption.id&&(el.id=elOption.id)}var DATA_ZOOM_AXIS_DIMENSIONS=["x","y","radius","angle","single"],SERIES_COORDS=["cartesian2d","polar","singleAxis"];function getAxisMainType(axisDim){return axisDim+"Axis"}function findEffectedDataZooms(ecModel,payload){var foundNewLink,axisRecords=(0,util.createHashMap)(),effectedModels=[],effectedModelMap=(0,util.createHashMap)();ecModel.eachComponent({mainType:"dataZoom",query:payload},(function(dataZoomModel){effectedModelMap.get(dataZoomModel.uid)||addToEffected(dataZoomModel)}));do{foundNewLink=!1,ecModel.eachComponent("dataZoom",processSingle)}while(foundNewLink);function processSingle(dataZoomModel){!effectedModelMap.get(dataZoomModel.uid)&&function isLinked(dataZoomModel){var isLink=!1;return dataZoomModel.eachTargetAxis((function(axisDim,axisIndex){var axisIdxArr=axisRecords.get(axisDim);axisIdxArr&&axisIdxArr[axisIndex]&&(isLink=!0)})),isLink}(dataZoomModel)&&(addToEffected(dataZoomModel),foundNewLink=!0)}function addToEffected(dataZoom){effectedModelMap.set(dataZoom.uid,!0),effectedModels.push(dataZoom),function markAxisControlled(dataZoomModel){dataZoomModel.eachTargetAxis((function(axisDim,axisIndex){(axisRecords.get(axisDim)||axisRecords.set(axisDim,[]))[axisIndex]=!0}))}(dataZoom)}return effectedModels}function collectReferCoordSysModelInfo(dataZoomModel){var ecModel=dataZoomModel.ecModel,coordSysInfoWrap={infoList:[],infoMap:(0,util.createHashMap)()};return dataZoomModel.eachTargetAxis((function(axisDim,axisIndex){var axisModel=ecModel.getComponent(getAxisMainType(axisDim),axisIndex);if(axisModel){var coordSysModel=axisModel.getCoordSysModel();if(coordSysModel){var coordSysUid=coordSysModel.uid,coordSysInfo=coordSysInfoWrap.infoMap.get(coordSysUid);coordSysInfo||(coordSysInfo={model:coordSysModel,axisModels:[]},coordSysInfoWrap.infoList.push(coordSysInfo),coordSysInfoWrap.infoMap.set(coordSysUid,coordSysInfo)),coordSysInfo.axisModels.push(axisModel)}}})),coordSysInfoWrap}var DataZoomAxisInfo=function(){function DataZoomAxisInfo(){this.indexList=[],this.indexMap=[]}return DataZoomAxisInfo.prototype.add=function(axisCmptIdx){this.indexMap[axisCmptIdx]||(this.indexList.push(axisCmptIdx),this.indexMap[axisCmptIdx]=!0)},DataZoomAxisInfo}();function retrieveRawOption(option){var ret={};return(0,util.each)(["start","end","startValue","endValue","throttle"],(function(name){option.hasOwnProperty(name)&&(ret[name]=option[name])})),ret}const dataZoom_DataZoomModel=function(_super){function DataZoomModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=DataZoomModel.type,_this._autoThrottle=!0,_this._noTarget=!0,_this._rangePropMode=["percent","percent"],_this}return(0,tslib_es6.ZT)(DataZoomModel,_super),DataZoomModel.prototype.init=function(option,parentModel,ecModel){var inputRawOption=retrieveRawOption(option);this.settledOption=inputRawOption,this.mergeDefaultAndTheme(option,ecModel),this._doInit(inputRawOption)},DataZoomModel.prototype.mergeOption=function(newOption){var inputRawOption=retrieveRawOption(newOption);(0,util.merge)(this.option,newOption,!0),(0,util.merge)(this.settledOption,inputRawOption,!0),this._doInit(inputRawOption)},DataZoomModel.prototype._doInit=function(inputRawOption){var thisOption=this.option;this._setDefaultThrottle(inputRawOption),this._updateRangeUse(inputRawOption);var settledOption=this.settledOption;(0,util.each)([["start","startValue"],["end","endValue"]],(function(names,index){"value"===this._rangePropMode[index]&&(thisOption[names[0]]=settledOption[names[0]]=null)}),this),this._resetTarget()},DataZoomModel.prototype._resetTarget=function(){var optionOrient=this.get("orient",!0),targetAxisIndexMap=this._targetAxisInfoMap=(0,util.createHashMap)();this._fillSpecifiedTargetAxis(targetAxisIndexMap)?this._orient=optionOrient||this._makeAutoOrientByTargetAxis():(this._orient=optionOrient||"horizontal",this._fillAutoTargetAxisByOrient(targetAxisIndexMap,this._orient)),this._noTarget=!0,targetAxisIndexMap.each((function(axisInfo){axisInfo.indexList.length&&(this._noTarget=!1)}),this)},DataZoomModel.prototype._fillSpecifiedTargetAxis=function(targetAxisIndexMap){var hasAxisSpecified=!1;return(0,util.each)(DATA_ZOOM_AXIS_DIMENSIONS,(function(axisDim){var refering=this.getReferringComponents(getAxisMainType(axisDim),util_model.iP);if(refering.specified){hasAxisSpecified=!0;var axisInfo=new DataZoomAxisInfo;(0,util.each)(refering.models,(function(axisModel){axisInfo.add(axisModel.componentIndex)})),targetAxisIndexMap.set(axisDim,axisInfo)}}),this),hasAxisSpecified},DataZoomModel.prototype._fillAutoTargetAxisByOrient=function(targetAxisIndexMap,orient){var ecModel=this.ecModel,needAuto=!0;if(needAuto){var axisDim="vertical"===orient?"y":"x";setParallelAxis(ecModel.findComponents({mainType:axisDim+"Axis"}),axisDim)}needAuto&&setParallelAxis(ecModel.findComponents({mainType:"singleAxis",filter:function(axisModel){return axisModel.get("orient",!0)===orient}}),"single");function setParallelAxis(axisModels,axisDim){var axisModel=axisModels[0];if(axisModel){var axisInfo=new DataZoomAxisInfo;if(axisInfo.add(axisModel.componentIndex),targetAxisIndexMap.set(axisDim,axisInfo),needAuto=!1,"x"===axisDim||"y"===axisDim){var gridModel_1=axisModel.getReferringComponents("grid",util_model.C6).models[0];gridModel_1&&(0,util.each)(axisModels,(function(axModel){axisModel.componentIndex!==axModel.componentIndex&&gridModel_1===axModel.getReferringComponents("grid",util_model.C6).models[0]&&axisInfo.add(axModel.componentIndex)}))}}}needAuto&&(0,util.each)(DATA_ZOOM_AXIS_DIMENSIONS,(function(axisDim){if(needAuto){var axisModels=ecModel.findComponents({mainType:getAxisMainType(axisDim),filter:function(axisModel){return"category"===axisModel.get("type",!0)}});if(axisModels[0]){var axisInfo=new DataZoomAxisInfo;axisInfo.add(axisModels[0].componentIndex),targetAxisIndexMap.set(axisDim,axisInfo),needAuto=!1}}}),this)},DataZoomModel.prototype._makeAutoOrientByTargetAxis=function(){var dim;return this.eachTargetAxis((function(axisDim){!dim&&(dim=axisDim)}),this),"y"===dim?"vertical":"horizontal"},DataZoomModel.prototype._setDefaultThrottle=function(inputRawOption){if(inputRawOption.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var globalOption=this.ecModel.option;this.option.throttle=globalOption.animation&&globalOption.animationDurationUpdate>0?100:20}},DataZoomModel.prototype._updateRangeUse=function(inputRawOption){var rangePropMode=this._rangePropMode,rangeModeInOption=this.get("rangeMode");(0,util.each)([["start","startValue"],["end","endValue"]],(function(names,index){var percentSpecified=null!=inputRawOption[names[0]],valueSpecified=null!=inputRawOption[names[1]];percentSpecified&&!valueSpecified?rangePropMode[index]="percent":!percentSpecified&&valueSpecified?rangePropMode[index]="value":rangeModeInOption?rangePropMode[index]=rangeModeInOption[index]:percentSpecified&&(rangePropMode[index]="percent")}))},DataZoomModel.prototype.noTarget=function(){return this._noTarget},DataZoomModel.prototype.getFirstTargetAxisModel=function(){var firstAxisModel;return this.eachTargetAxis((function(axisDim,axisIndex){null==firstAxisModel&&(firstAxisModel=this.ecModel.getComponent(getAxisMainType(axisDim),axisIndex))}),this),firstAxisModel},DataZoomModel.prototype.eachTargetAxis=function(callback,context){this._targetAxisInfoMap.each((function(axisInfo,axisDim){(0,util.each)(axisInfo.indexList,(function(axisIndex){callback.call(context,axisDim,axisIndex)}))}))},DataZoomModel.prototype.getAxisProxy=function(axisDim,axisIndex){var axisModel=this.getAxisModel(axisDim,axisIndex);if(axisModel)return axisModel.__dzAxisProxy},DataZoomModel.prototype.getAxisModel=function(axisDim,axisIndex){var axisInfo=this._targetAxisInfoMap.get(axisDim);if(axisInfo&&axisInfo.indexMap[axisIndex])return this.ecModel.getComponent(getAxisMainType(axisDim),axisIndex)},DataZoomModel.prototype.setRawRange=function(opt){var thisOption=this.option,settledOption=this.settledOption;(0,util.each)([["start","startValue"],["end","endValue"]],(function(names){null==opt[names[0]]&&null==opt[names[1]]||(thisOption[names[0]]=settledOption[names[0]]=opt[names[0]],thisOption[names[1]]=settledOption[names[1]]=opt[names[1]])}),this),this._updateRangeUse(opt)},DataZoomModel.prototype.setCalculatedRange=function(opt){var option=this.option;(0,util.each)(["start","startValue","end","endValue"],(function(name){option[name]=opt[name]}))},DataZoomModel.prototype.getPercentRange=function(){var axisProxy=this.findRepresentativeAxisProxy();if(axisProxy)return axisProxy.getDataPercentWindow()},DataZoomModel.prototype.getValueRange=function(axisDim,axisIndex){if(null!=axisDim||null!=axisIndex)return this.getAxisProxy(axisDim,axisIndex).getDataValueWindow();var axisProxy=this.findRepresentativeAxisProxy();return axisProxy?axisProxy.getDataValueWindow():void 0},DataZoomModel.prototype.findRepresentativeAxisProxy=function(axisModel){if(axisModel)return axisModel.__dzAxisProxy;for(var firstProxy,axisDimList=this._targetAxisInfoMap.keys(),i=0;i<axisDimList.length;i++)for(var axisDim=axisDimList[i],axisInfo=this._targetAxisInfoMap.get(axisDim),j=0;j<axisInfo.indexList.length;j++){var proxy=this.getAxisProxy(axisDim,axisInfo.indexList[j]);if(proxy.hostedBy(this))return proxy;firstProxy||(firstProxy=proxy)}return firstProxy},DataZoomModel.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},DataZoomModel.prototype.getOrient=function(){return this._orient},DataZoomModel.type="dataZoom",DataZoomModel.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],DataZoomModel.defaultOption={z:4,filterMode:"filter",start:0,end:100},DataZoomModel}(model_Component.Z);const SelectZoomModel=function(_super){function SelectDataZoomModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=SelectDataZoomModel.type,_this}return(0,tslib_es6.ZT)(SelectDataZoomModel,_super),SelectDataZoomModel.type="dataZoom.select",SelectDataZoomModel}(dataZoom_DataZoomModel);const dataZoom_DataZoomView=function(_super){function DataZoomView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=DataZoomView.type,_this}return(0,tslib_es6.ZT)(DataZoomView,_super),DataZoomView.prototype.render=function(dataZoomModel,ecModel,api,payload){this.dataZoomModel=dataZoomModel,this.ecModel=ecModel,this.api=api},DataZoomView.type="dataZoom",DataZoomView}(Component.Z);const SelectZoomView=function(_super){function SelectDataZoomView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=SelectDataZoomView.type,_this}return(0,tslib_es6.ZT)(SelectDataZoomView,_super),SelectDataZoomView.type="dataZoom.select",SelectDataZoomView}(dataZoom_DataZoomView);var scaleRawExtentInfo=__webpack_require__("./node_modules/echarts/lib/coord/scaleRawExtentInfo.js"),AxisProxy_each=util.each,asc=number.dt;const dataZoom_AxisProxy=function(){function AxisProxy(dimName,axisIndex,dataZoomModel,ecModel){this._dimName=dimName,this._axisIndex=axisIndex,this.ecModel=ecModel,this._dataZoomModel=dataZoomModel}return AxisProxy.prototype.hostedBy=function(dataZoomModel){return this._dataZoomModel===dataZoomModel},AxisProxy.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},AxisProxy.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},AxisProxy.prototype.getTargetSeriesModels=function(){var seriesModels=[];return this.ecModel.eachSeries((function(seriesModel){if(function isCoordSupported(seriesModel){var coordType=seriesModel.get("coordinateSystem");return(0,util.indexOf)(SERIES_COORDS,coordType)>=0}(seriesModel)){var axisMainType=getAxisMainType(this._dimName),axisModel=seriesModel.getReferringComponents(axisMainType,util_model.C6).models[0];axisModel&&this._axisIndex===axisModel.componentIndex&&seriesModels.push(seriesModel)}}),this),seriesModels},AxisProxy.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},AxisProxy.prototype.getMinMaxSpan=function(){return util.clone(this._minMaxSpan)},AxisProxy.prototype.calculateDataWindow=function(opt){var hasPropModeValue,dataExtent=this._dataExtent,scale=this.getAxisModel().axis.scale,rangePropMode=this._dataZoomModel.getRangePropMode(),percentExtent=[0,100],percentWindow=[],valueWindow=[];AxisProxy_each(["start","end"],(function(prop,idx){var boundPercent=opt[prop],boundValue=opt[prop+"Value"];"percent"===rangePropMode[idx]?(null==boundPercent&&(boundPercent=percentExtent[idx]),boundValue=scale.parse(number.NU(boundPercent,percentExtent,dataExtent))):(hasPropModeValue=!0,boundValue=null==boundValue?dataExtent[idx]:scale.parse(boundValue),boundPercent=number.NU(boundValue,dataExtent,percentExtent)),valueWindow[idx]=null==boundValue||isNaN(boundValue)?dataExtent[idx]:boundValue,percentWindow[idx]=null==boundPercent||isNaN(boundPercent)?percentExtent[idx]:boundPercent})),asc(valueWindow),asc(percentWindow);var spans=this._minMaxSpan;function restrictSet(fromWindow,toWindow,fromExtent,toExtent,toValue){var suffix=toValue?"Span":"ValueSpan";sliderMove(0,fromWindow,fromExtent,"all",spans["min"+suffix],spans["max"+suffix]);for(var i=0;i<2;i++)toWindow[i]=number.NU(fromWindow[i],fromExtent,toExtent,!0),toValue&&(toWindow[i]=scale.parse(toWindow[i]))}return hasPropModeValue?restrictSet(valueWindow,percentWindow,dataExtent,percentExtent,!1):restrictSet(percentWindow,valueWindow,percentExtent,dataExtent,!0),{valueWindow,percentWindow}},AxisProxy.prototype.reset=function(dataZoomModel){if(dataZoomModel===this._dataZoomModel){var targetSeries=this.getTargetSeriesModels();this._dataExtent=function calculateDataExtent(axisProxy,axisDim,seriesModels){var dataExtent=[1/0,-1/0];AxisProxy_each(seriesModels,(function(seriesModel){(0,axisHelper.AH)(dataExtent,seriesModel.getData(),axisDim)}));var axisModel=axisProxy.getAxisModel(),rawExtentResult=(0,scaleRawExtentInfo.Qw)(axisModel.axis.scale,axisModel,dataExtent).calculate();return[rawExtentResult.min,rawExtentResult.max]}(this,this._dimName,targetSeries),this._updateMinMaxSpan();var dataWindow=this.calculateDataWindow(dataZoomModel.settledOption);this._valueWindow=dataWindow.valueWindow,this._percentWindow=dataWindow.percentWindow,this._setAxisModel()}},AxisProxy.prototype.filterData=function(dataZoomModel,api){if(dataZoomModel===this._dataZoomModel){var axisDim=this._dimName,seriesModels=this.getTargetSeriesModels(),filterMode=dataZoomModel.get("filterMode"),valueWindow=this._valueWindow;"none"!==filterMode&&AxisProxy_each(seriesModels,(function(seriesModel){var seriesData=seriesModel.getData(),dataDims=seriesData.mapDimensionsAll(axisDim);if(dataDims.length){if("weakFilter"===filterMode){var store_1=seriesData.getStore(),dataDimIndices_1=util.map(dataDims,(function(dim){return seriesData.getDimensionIndex(dim)}),seriesData);seriesData.filterSelf((function(dataIndex){for(var leftOut,rightOut,hasValue,i=0;i<dataDims.length;i++){var value=store_1.get(dataDimIndices_1[i],dataIndex),thisHasValue=!isNaN(value),thisLeftOut=value<valueWindow[0],thisRightOut=value>valueWindow[1];if(thisHasValue&&!thisLeftOut&&!thisRightOut)return!0;thisHasValue&&(hasValue=!0),thisLeftOut&&(leftOut=!0),thisRightOut&&(rightOut=!0)}return hasValue&&leftOut&&rightOut}))}else AxisProxy_each(dataDims,(function(dim){if("empty"===filterMode)seriesModel.setData(seriesData=seriesData.map(dim,(function(value){return function isInWindow(value){return value>=valueWindow[0]&&value<=valueWindow[1]}(value)?value:NaN})));else{var range={};range[dim]=valueWindow,seriesData.selectRange(range)}}));AxisProxy_each(dataDims,(function(dim){seriesData.setApproximateExtent(valueWindow,dim)}))}}))}},AxisProxy.prototype._updateMinMaxSpan=function(){var minMaxSpan=this._minMaxSpan={},dataZoomModel=this._dataZoomModel,dataExtent=this._dataExtent;AxisProxy_each(["min","max"],(function(minMax){var percentSpan=dataZoomModel.get(minMax+"Span"),valueSpan=dataZoomModel.get(minMax+"ValueSpan");null!=valueSpan&&(valueSpan=this.getAxisModel().axis.scale.parse(valueSpan)),null!=valueSpan?percentSpan=number.NU(dataExtent[0]+valueSpan,dataExtent,[0,100],!0):null!=percentSpan&&(valueSpan=number.NU(percentSpan,[0,100],dataExtent,!0)-dataExtent[0]),minMaxSpan[minMax+"Span"]=percentSpan,minMaxSpan[minMax+"ValueSpan"]=valueSpan}),this)},AxisProxy.prototype._setAxisModel=function(){var axisModel=this.getAxisModel(),percentWindow=this._percentWindow,valueWindow=this._valueWindow;if(percentWindow){var precision=number.M9(valueWindow,[0,500]);precision=Math.min(precision,20);var rawExtentInfo=axisModel.axis.scale.rawExtentInfo;0!==percentWindow[0]&&rawExtentInfo.setDeterminedMinMax("min",+valueWindow[0].toFixed(precision)),100!==percentWindow[1]&&rawExtentInfo.setDeterminedMinMax("max",+valueWindow[1].toFixed(precision)),rawExtentInfo.freeze()}},AxisProxy}();const dataZoom_dataZoomProcessor={getTargetSeries:function(ecModel){function eachAxisModel(cb){ecModel.eachComponent("dataZoom",(function(dataZoomModel){dataZoomModel.eachTargetAxis((function(axisDim,axisIndex){var axisModel=ecModel.getComponent(getAxisMainType(axisDim),axisIndex);cb(axisDim,axisIndex,axisModel,dataZoomModel)}))}))}eachAxisModel((function(axisDim,axisIndex,axisModel,dataZoomModel){axisModel.__dzAxisProxy=null}));var proxyList=[];eachAxisModel((function(axisDim,axisIndex,axisModel,dataZoomModel){axisModel.__dzAxisProxy||(axisModel.__dzAxisProxy=new dataZoom_AxisProxy(axisDim,axisIndex,dataZoomModel,ecModel),proxyList.push(axisModel.__dzAxisProxy))}));var seriesModelMap=(0,util.createHashMap)();return(0,util.each)(proxyList,(function(axisProxy){(0,util.each)(axisProxy.getTargetSeriesModels(),(function(seriesModel){seriesModelMap.set(seriesModel.uid,seriesModel)}))})),seriesModelMap},overallReset:function(ecModel,api){ecModel.eachComponent("dataZoom",(function(dataZoomModel){dataZoomModel.eachTargetAxis((function(axisDim,axisIndex){dataZoomModel.getAxisProxy(axisDim,axisIndex).reset(dataZoomModel)})),dataZoomModel.eachTargetAxis((function(axisDim,axisIndex){dataZoomModel.getAxisProxy(axisDim,axisIndex).filterData(dataZoomModel,api)}))})),ecModel.eachComponent("dataZoom",(function(dataZoomModel){var axisProxy=dataZoomModel.findRepresentativeAxisProxy();if(axisProxy){var percentRange=axisProxy.getDataPercentWindow(),valueRange=axisProxy.getDataValueWindow();dataZoomModel.setCalculatedRange({start:percentRange[0],end:percentRange[1],startValue:valueRange[0],endValue:valueRange[1]})}}))}};var installed=!1;function installCommon(registers){installed||(installed=!0,registers.registerProcessor(registers.PRIORITY.PROCESSOR.FILTER,dataZoom_dataZoomProcessor),function installDataZoomAction(registers){registers.registerAction("dataZoom",(function(payload,ecModel){var effectedModels=findEffectedDataZooms(ecModel,payload);(0,util.each)(effectedModels,(function(dataZoomModel){dataZoomModel.setRawRange({start:payload.start,end:payload.end,startValue:payload.startValue,endValue:payload.endValue})}))}))}(registers),registers.registerSubTypeDefaulter("dataZoom",(function(){return"slider"})))}function installDataZoomSelect_install(registers){registers.registerComponentModel(SelectZoomModel),registers.registerComponentView(SelectZoomView),installCommon(registers)}var ToolboxFeature=function ToolboxFeature(){},features={};function registerFeature(name,ctor){features[name]=ctor}function getFeature(name){return features[name]}const toolbox_ToolboxModel=function(_super){function ToolboxModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=ToolboxModel.type,_this}return(0,tslib_es6.ZT)(ToolboxModel,_super),ToolboxModel.prototype.optionUpdated=function(){_super.prototype.optionUpdated.apply(this,arguments);var ecModel=this.ecModel;util.each(this.option.feature,(function(featureOpt,featureName){var Feature=getFeature(featureName);Feature&&(Feature.getDefaultOption&&(Feature.defaultOption=Feature.getDefaultOption(ecModel)),util.merge(featureOpt,Feature.defaultOption))}))},ToolboxModel.type="toolbox",ToolboxModel.layoutMode={type:"box",ignoreSize:!0},ToolboxModel.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},ToolboxModel}(model_Component.Z);function makeBackground(rect,componentModel){var padding=format.MY(componentModel.get("padding")),style=componentModel.getItemStyle(["color","opacity"]);return style.fill=componentModel.get("backgroundColor"),rect=new Rect.Z({shape:{x:rect.x-padding[3],y:rect.y-padding[0],width:rect.width+padding[1]+padding[3],height:rect.height+padding[0]+padding[2],r:componentModel.get("borderRadius")},style,silent:!0,z2:-1})}var ToolboxView=function(_super){function ToolboxView(){return null!==_super&&_super.apply(this,arguments)||this}return(0,tslib_es6.ZT)(ToolboxView,_super),ToolboxView.prototype.render=function(toolboxModel,ecModel,api,payload){var group=this.group;if(group.removeAll(),toolboxModel.get("show")){var itemSize=+toolboxModel.get("itemSize"),isVertical="vertical"===toolboxModel.get("orient"),featureOpts=toolboxModel.get("feature")||{},features=this._features||(this._features={}),featureNames=[];util.each(featureOpts,(function(opt,name){featureNames.push(name)})),new DataDiffer.Z(this._featureNames||[],featureNames).add(processFeature).update(processFeature).remove(util.curry(processFeature,null)).execute(),this._featureNames=featureNames,function listComponent_layout(group,componentModel,api){var boxLayoutParams=componentModel.getBoxLayoutParams(),padding=componentModel.get("padding"),viewportSize={width:api.getWidth(),height:api.getHeight()},rect=(0,layout.ME)(boxLayoutParams,viewportSize,padding);(0,layout.BZ)(componentModel.get("orient"),group,componentModel.get("itemGap"),rect.width,rect.height),(0,layout.p$)(group,boxLayoutParams,viewportSize,padding)}(group,toolboxModel,api),group.add(makeBackground(group.getBoundingRect(),toolboxModel)),isVertical||group.eachChild((function(icon){var titleText=icon.__title,emphasisState=icon.ensureState("emphasis"),emphasisTextConfig=emphasisState.textConfig||(emphasisState.textConfig={}),textContent=icon.getTextContent(),emphasisTextState=textContent&&textContent.ensureState("emphasis");if(emphasisTextState&&!util.isFunction(emphasisTextState)&&titleText){var emphasisTextStyle=emphasisTextState.style||(emphasisTextState.style={}),rect=contain_text.lP(titleText,Text.ZP.makeFont(emphasisTextStyle)),offsetX=icon.x+group.x,needPutOnTop=!1;icon.y+group.y+itemSize+rect.height>api.getHeight()&&(emphasisTextConfig.position="top",needPutOnTop=!0);var topOffset=needPutOnTop?-5-rect.height:itemSize+10;offsetX+rect.width/2>api.getWidth()?(emphasisTextConfig.position=["100%",topOffset],emphasisTextStyle.align="right"):offsetX-rect.width/2<0&&(emphasisTextConfig.position=[0,topOffset],emphasisTextStyle.align="left")}}))}function processFeature(newIndex,oldIndex){var feature,featureName=featureNames[newIndex],oldName=featureNames[oldIndex],featureOpt=featureOpts[featureName],featureModel=new Model.Z(featureOpt,toolboxModel,toolboxModel.ecModel);if(payload&&null!=payload.newTitle&&payload.featureName===featureName&&(featureOpt.title=payload.newTitle),featureName&&!oldName){if(function isUserFeatureName(featureName){return 0===featureName.indexOf("my")}(featureName))feature={onclick:featureModel.option.onclick,featureName};else{var Feature=getFeature(featureName);if(!Feature)return;feature=new Feature}features[featureName]=feature}else if(!(feature=features[oldName]))return;feature.uid=(0,component.Kr)("toolbox-feature"),feature.model=featureModel,feature.ecModel=ecModel,feature.api=api;var isToolboxFeature=feature instanceof ToolboxFeature;featureName||!oldName?!featureModel.get("show")||isToolboxFeature&&feature.unusable?isToolboxFeature&&feature.remove&&feature.remove(ecModel,api):(!function createIconPaths(featureModel,feature,featureName){var iconsMap,titlesMap,iconStyleModel=featureModel.getModel("iconStyle"),iconStyleEmphasisModel=featureModel.getModel(["emphasis","iconStyle"]),icons=feature instanceof ToolboxFeature&&feature.getIcons?feature.getIcons():featureModel.get("icon"),titles=featureModel.get("title")||{};util.isString(icons)?(iconsMap={})[featureName]=icons:iconsMap=icons;util.isString(titles)?(titlesMap={})[featureName]=titles:titlesMap=titles;var iconPaths=featureModel.iconPaths={};util.each(iconsMap,(function(iconStr,iconName){var path=graphic.createIcon(iconStr,{},{x:-itemSize/2,y:-itemSize/2,width:itemSize,height:itemSize});path.setStyle(iconStyleModel.getItemStyle()),path.ensureState("emphasis").style=iconStyleEmphasisModel.getItemStyle();var textContent=new Text.ZP({style:{text:titlesMap[iconName],align:iconStyleEmphasisModel.get("textAlign"),borderRadius:iconStyleEmphasisModel.get("textBorderRadius"),padding:iconStyleEmphasisModel.get("textPadding"),fill:null,font:(0,labelStyle.qT)({fontStyle:iconStyleEmphasisModel.get("textFontStyle"),fontFamily:iconStyleEmphasisModel.get("textFontFamily"),fontSize:iconStyleEmphasisModel.get("textFontSize"),fontWeight:iconStyleEmphasisModel.get("textFontWeight")},ecModel)},ignore:!0});path.setTextContent(textContent),graphic.setTooltipConfig({el:path,componentModel:toolboxModel,itemName:iconName,formatterParamsExtra:{title:titlesMap[iconName]}}),path.__title=titlesMap[iconName],path.on("mouseover",(function(){var hoverStyle=iconStyleEmphasisModel.getItemStyle(),defaultTextPosition=isVertical?null==toolboxModel.get("right")&&"right"!==toolboxModel.get("left")?"right":"left":null==toolboxModel.get("bottom")&&"bottom"!==toolboxModel.get("top")?"bottom":"top";textContent.setStyle({fill:iconStyleEmphasisModel.get("textFill")||hoverStyle.fill||hoverStyle.stroke||"#000",backgroundColor:iconStyleEmphasisModel.get("textBackgroundColor")}),path.setTextConfig({position:iconStyleEmphasisModel.get("textPosition")||defaultTextPosition}),textContent.ignore=!toolboxModel.get("showTitle"),api.enterEmphasis(this)})).on("mouseout",(function(){"emphasis"!==featureModel.get(["iconStatus",iconName])&&api.leaveEmphasis(this),textContent.hide()})),("emphasis"===featureModel.get(["iconStatus",iconName])?states.fD:states.Mh)(path),group.add(path),path.on("click",util.bind(feature.onclick,feature,ecModel,api,iconName)),iconPaths[iconName]=path}))}(featureModel,feature,featureName),featureModel.setIconStatus=function(iconName,status){var option=this.option,iconPaths=this.iconPaths;option.iconStatus=option.iconStatus||{},option.iconStatus[iconName]=status,iconPaths[iconName]&&("emphasis"===status?states.fD:states.Mh)(iconPaths[iconName])},feature instanceof ToolboxFeature&&feature.render&&feature.render(featureModel,ecModel,api,payload)):isToolboxFeature&&feature.dispose&&feature.dispose(ecModel,api)}},ToolboxView.prototype.updateView=function(toolboxModel,ecModel,api,payload){util.each(this._features,(function(feature){feature instanceof ToolboxFeature&&feature.updateView&&feature.updateView(feature.model,ecModel,api,payload)}))},ToolboxView.prototype.remove=function(ecModel,api){util.each(this._features,(function(feature){feature instanceof ToolboxFeature&&feature.remove&&feature.remove(ecModel,api)})),this.group.removeAll()},ToolboxView.prototype.dispose=function(ecModel,api){util.each(this._features,(function(feature){feature instanceof ToolboxFeature&&feature.dispose&&feature.dispose(ecModel,api)}))},ToolboxView.type="toolbox",ToolboxView}(Component.Z);const toolbox_ToolboxView=ToolboxView;const feature_SaveAsImage=function(_super){function SaveAsImage(){return null!==_super&&_super.apply(this,arguments)||this}return(0,tslib_es6.ZT)(SaveAsImage,_super),SaveAsImage.prototype.onclick=function(ecModel,api){var model=this.model,title=model.get("name")||ecModel.get("title.0.text")||"echarts",isSvg="svg"===api.getZr().painter.getType(),type=isSvg?"svg":model.get("type",!0)||"png",url=api.getConnectedDataURL({type,backgroundColor:model.get("backgroundColor",!0)||ecModel.get("backgroundColor")||"#fff",connectedBackgroundColor:model.get("connectedBackgroundColor"),excludeComponents:model.get("excludeComponents"),pixelRatio:model.get("pixelRatio")}),browser=env.Z.browser;if((0,util.isFunction)(MouseEvent)&&(browser.newEdge||!browser.ie&&!browser.edge)){var $a=document.createElement("a");$a.download=title+"."+type,$a.target="_blank",$a.href=url;var evt=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});$a.dispatchEvent(evt)}else if(window.navigator.msSaveOrOpenBlob||isSvg){var parts=url.split(","),base64Encoded=parts[0].indexOf("base64")>-1,bstr=isSvg?decodeURIComponent(parts[1]):parts[1];base64Encoded&&(bstr=window.atob(bstr));var filename=title+"."+type;if(window.navigator.msSaveOrOpenBlob){for(var n=bstr.length,u8arr=new Uint8Array(n);n--;)u8arr[n]=bstr.charCodeAt(n);var blob=new Blob([u8arr]);window.navigator.msSaveOrOpenBlob(blob,filename)}else{var frame=document.createElement("iframe");document.body.appendChild(frame);var cw=frame.contentWindow,doc=cw.document;doc.open("image/svg+xml","replace"),doc.write(bstr),doc.close(),cw.focus(),doc.execCommand("SaveAs",!0,filename),document.body.removeChild(frame)}}else{var lang=model.get("lang"),html='<body style="margin:0;"><img src="'+url+'" style="max-width:100%;" title="'+(lang&&lang[0]||"")+'" /></body>',tab=window.open();tab.document.write(html),tab.document.title=title}},SaveAsImage.getDefaultOption=function(ecModel){return{show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:ecModel.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:ecModel.getLocaleModel().get(["toolbox","saveAsImage","lang"])}},SaveAsImage}(ToolboxFeature);var echarts=__webpack_require__("./node_modules/echarts/lib/core/echarts.js"),radioTypes=[["line","bar"],["stack"]],MagicType=function(_super){function MagicType(){return null!==_super&&_super.apply(this,arguments)||this}return(0,tslib_es6.ZT)(MagicType,_super),MagicType.prototype.getIcons=function(){var model=this.model,availableIcons=model.get("icon"),icons={};return util.each(model.get("type"),(function(type){availableIcons[type]&&(icons[type]=availableIcons[type])})),icons},MagicType.getDefaultOption=function(ecModel){return{show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:ecModel.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}}},MagicType.prototype.onclick=function(ecModel,api,type){var model=this.model,seriesIndex=model.get(["seriesIndex",type]);if(seriesOptGenreator[type]){var newTitle,newOption={series:[]};util.each(radioTypes,(function(radio){util.indexOf(radio,type)>=0&&util.each(radio,(function(item){model.setIconStatus(item,"normal")}))})),model.setIconStatus(type,"emphasis"),ecModel.eachComponent({mainType:"series",query:null==seriesIndex?null:{seriesIndex}},(function(seriesModel){var seriesType=seriesModel.subType,seriesId=seriesModel.id,newSeriesOpt=seriesOptGenreator[type](seriesType,seriesId,seriesModel,model);newSeriesOpt&&(util.defaults(newSeriesOpt,seriesModel.option),newOption.series.push(newSeriesOpt));var coordSys=seriesModel.coordinateSystem;if(coordSys&&"cartesian2d"===coordSys.type&&("line"===type||"bar"===type)){var categoryAxis=coordSys.getAxesByScale("ordinal")[0];if(categoryAxis){var axisType=categoryAxis.dim+"Axis",axisIndex=seriesModel.getReferringComponents(axisType,util_model.C6).models[0].componentIndex;newOption[axisType]=newOption[axisType]||[];for(var i=0;i<=axisIndex;i++)newOption[axisType][axisIndex]=newOption[axisType][axisIndex]||{};newOption[axisType][axisIndex].boundaryGap="bar"===type}}}));var currentType=type;"stack"===type&&(newTitle=util.merge({stack:model.option.title.tiled,tiled:model.option.title.stack},model.option.title),"emphasis"!==model.get(["iconStatus",type])&&(currentType="tiled")),api.dispatchAction({type:"changeMagicType",currentType,newOption,newTitle,featureName:"magicType"})}},MagicType}(ToolboxFeature),seriesOptGenreator={line:function(seriesType,seriesId,seriesModel,model){if("bar"===seriesType)return util.merge({id:seriesId,type:"line",data:seriesModel.get("data"),stack:seriesModel.get("stack"),markPoint:seriesModel.get("markPoint"),markLine:seriesModel.get("markLine")},model.get(["option","line"])||{},!0)},bar:function(seriesType,seriesId,seriesModel,model){if("line"===seriesType)return util.merge({id:seriesId,type:"bar",data:seriesModel.get("data"),stack:seriesModel.get("stack"),markPoint:seriesModel.get("markPoint"),markLine:seriesModel.get("markLine")},model.get(["option","bar"])||{},!0)},stack:function(seriesType,seriesId,seriesModel,model){var isStack="__ec_magicType_stack__"===seriesModel.get("stack");if("line"===seriesType||"bar"===seriesType)return model.setIconStatus("stack",isStack?"normal":"emphasis"),util.merge({id:seriesId,stack:isStack?"":"__ec_magicType_stack__"},model.get(["option","stack"])||{},!0)}};echarts.zl({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},(function(payload,ecModel){ecModel.mergeOption(payload.newOption)}));const feature_MagicType=MagicType;var BLOCK_SPLITER=new Array(60).join("-"),ITEM_SPLITER="\t";function trim(str){return str.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var itemSplitRegex=new RegExp("["+ITEM_SPLITER+"]+","g");function parseContents(str,blockMetaList){var blocks=str.split(new RegExp("\n*"+BLOCK_SPLITER+"\n*","g")),newOption={series:[]};return util.each(blocks,(function(block,idx){if(function isTSVFormat(block){if(block.slice(0,block.indexOf("\n")).indexOf(ITEM_SPLITER)>=0)return!0}(block)){var result=function parseTSVContents(tsv){for(var tsvLines=tsv.split(/\n+/g),headers=trim(tsvLines.shift()).split(itemSplitRegex),categories=[],series=util.map(headers,(function(header){return{name:header,data:[]}})),i=0;i<tsvLines.length;i++){var items=trim(tsvLines[i]).split(itemSplitRegex);categories.push(items.shift());for(var j=0;j<items.length;j++)series[j]&&(series[j].data[i]=items[j])}return{series,categories}}(block),blockMeta=blockMetaList[idx],axisKey=blockMeta.axisDim+"Axis";blockMeta&&(newOption[axisKey]=newOption[axisKey]||[],newOption[axisKey][blockMeta.axisIndex]={data:result.categories},newOption.series=newOption.series.concat(result.series))}else{result=function parseListContents(str){for(var lines=str.split(/\n+/g),seriesName=trim(lines.shift()),data=[],i=0;i<lines.length;i++){var line=trim(lines[i]);if(line){var items=line.split(itemSplitRegex),name_1="",value=void 0,hasName=!1;isNaN(items[0])?(hasName=!0,name_1=items[0],items=items.slice(1),data[i]={name:name_1,value:[]},value=data[i].value):value=data[i]=[];for(var j=0;j<items.length;j++)value.push(+items[j]);1===value.length&&(hasName?data[i].value=value[0]:data[i]=value[0])}}return{name:seriesName,data}}(block);newOption.series.push(result)}})),newOption}var DataView=function(_super){function DataView(){return null!==_super&&_super.apply(this,arguments)||this}return(0,tslib_es6.ZT)(DataView,_super),DataView.prototype.onclick=function(ecModel,api){setTimeout((function(){api.dispatchAction({type:"hideTip"})}));var container=api.getDom(),model=this.model;this._dom&&container.removeChild(this._dom);var root=document.createElement("div");root.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",root.style.backgroundColor=model.get("backgroundColor")||"#fff";var header=document.createElement("h4"),lang=model.get("lang")||[];header.innerHTML=lang[0]||model.get("title"),header.style.cssText="margin:10px 20px",header.style.color=model.get("textColor");var viewMain=document.createElement("div"),textarea=document.createElement("textarea");viewMain.style.cssText="overflow:auto";var optionToContent=model.get("optionToContent"),contentToOption=model.get("contentToOption"),result=function getContentFromModel(ecModel){var series,groups,tables,result=function groupSeries(ecModel){var seriesGroupByCategoryAxis={},otherSeries=[],meta=[];return ecModel.eachRawSeries((function(seriesModel){var coordSys=seriesModel.coordinateSystem;if(!coordSys||"cartesian2d"!==coordSys.type&&"polar"!==coordSys.type)otherSeries.push(seriesModel);else{var baseAxis=coordSys.getBaseAxis();if("category"===baseAxis.type){var key=baseAxis.dim+"_"+baseAxis.index;seriesGroupByCategoryAxis[key]||(seriesGroupByCategoryAxis[key]={categoryAxis:baseAxis,valueAxis:coordSys.getOtherAxis(baseAxis),series:[]},meta.push({axisDim:baseAxis.dim,axisIndex:baseAxis.index})),seriesGroupByCategoryAxis[key].series.push(seriesModel)}else otherSeries.push(seriesModel)}})),{seriesGroupByCategoryAxis,other:otherSeries,meta}}(ecModel);return{value:util.filter([(groups=result.seriesGroupByCategoryAxis,tables=[],util.each(groups,(function(group,key){var categoryAxis=group.categoryAxis,valueAxisDim=group.valueAxis.dim,headers=[" "].concat(util.map(group.series,(function(series){return series.name}))),columns=[categoryAxis.model.getCategories()];util.each(group.series,(function(series){var rawData=series.getRawData();columns.push(series.getRawData().mapArray(rawData.mapDimension(valueAxisDim),(function(val){return val})))}));for(var lines=[headers.join(ITEM_SPLITER)],i=0;i<columns[0].length;i++){for(var items=[],j=0;j<columns.length;j++)items.push(columns[j][i]);lines.push(items.join(ITEM_SPLITER))}tables.push(lines.join("\n"))})),tables.join("\n\n"+BLOCK_SPLITER+"\n\n")),(series=result.other,util.map(series,(function(series){var data=series.getRawData(),lines=[series.name],vals=[];return data.each(data.dimensions,(function(){for(var argLen=arguments.length,dataIndex=arguments[argLen-1],name=data.getName(dataIndex),i=0;i<argLen-1;i++)vals[i]=arguments[i];lines.push((name?name+ITEM_SPLITER:"")+vals.join(ITEM_SPLITER))})),lines.join("\n")})).join("\n\n"+BLOCK_SPLITER+"\n\n"))],(function(str){return!!str.replace(/[\n\t\s]/g,"")})).join("\n\n"+BLOCK_SPLITER+"\n\n"),meta:result.meta}}(ecModel);if(util.isFunction(optionToContent)){var htmlOrDom=optionToContent(api.getOption());util.isString(htmlOrDom)?viewMain.innerHTML=htmlOrDom:util.isDom(htmlOrDom)&&viewMain.appendChild(htmlOrDom)}else{textarea.readOnly=model.get("readOnly");var style=textarea.style;style.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",style.color=model.get("textColor"),style.borderColor=model.get("textareaBorderColor"),style.backgroundColor=model.get("textareaColor"),textarea.value=result.value,viewMain.appendChild(textarea)}var blockMetaList=result.meta,buttonContainer=document.createElement("div");buttonContainer.style.cssText="position:absolute;bottom:5px;left:0;right:0";var buttonStyle="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",closeButton=document.createElement("div"),refreshButton=document.createElement("div");buttonStyle+=";background-color:"+model.get("buttonColor"),buttonStyle+=";color:"+model.get("buttonTextColor");var self=this;function close(){container.removeChild(root),self._dom=null}(0,core_event.Oo)(closeButton,"click",close),(0,core_event.Oo)(refreshButton,"click",(function(){if(null==contentToOption&&null!=optionToContent||null!=contentToOption&&null==optionToContent)close();else{var newOption;try{newOption=util.isFunction(contentToOption)?contentToOption(viewMain,api.getOption()):parseContents(textarea.value,blockMetaList)}catch(e){throw close(),new Error("Data view format error "+e)}newOption&&api.dispatchAction({type:"changeDataView",newOption}),close()}})),closeButton.innerHTML=lang[1],refreshButton.innerHTML=lang[2],refreshButton.style.cssText=closeButton.style.cssText=buttonStyle,!model.get("readOnly")&&buttonContainer.appendChild(refreshButton),buttonContainer.appendChild(closeButton),root.appendChild(header),root.appendChild(viewMain),root.appendChild(buttonContainer),viewMain.style.height=container.clientHeight-80+"px",container.appendChild(root),this._dom=root},DataView.prototype.remove=function(ecModel,api){this._dom&&api.getDom().removeChild(this._dom)},DataView.prototype.dispose=function(ecModel,api){this.remove(ecModel,api)},DataView.getDefaultOption=function(ecModel){return{show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:ecModel.getLocaleModel().get(["toolbox","dataView","title"]),lang:ecModel.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"}},DataView}(ToolboxFeature);function tryMergeDataOption(newData,originalData){return util.map(newData,(function(newVal,idx){var original=originalData&&originalData[idx];if(util.isObject(original)&&!util.isArray(original)){util.isObject(newVal)&&!util.isArray(newVal)||(newVal={value:newVal});var shouldDeleteName=null!=original.name&&null==newVal.name;return newVal=util.defaults(newVal,original),shouldDeleteName&&delete newVal.name,newVal}return newVal}))}echarts.zl({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},(function(payload,ecModel){var newSeriesOptList=[];util.each(payload.newOption.series,(function(seriesOpt){var seriesModel=ecModel.getSeriesByName(seriesOpt.name)[0];if(seriesModel){var originalData=seriesModel.get("data");newSeriesOptList.push({name:seriesOpt.name,data:tryMergeDataOption(seriesOpt.data,originalData)})}else newSeriesOptList.push(util.extend({type:"scatter"},seriesOpt))})),ecModel.mergeOption(util.defaults({series:newSeriesOptList},payload.newOption))}));const feature_DataView=DataView;var history_each=util.each,history_inner=(0,util_model.Yf)();function getStoreSnapshots(ecModel){var store=history_inner(ecModel);return store.snapshots||(store.snapshots=[{}]),store.snapshots}var RestoreOption=function(_super){function RestoreOption(){return null!==_super&&_super.apply(this,arguments)||this}return(0,tslib_es6.ZT)(RestoreOption,_super),RestoreOption.prototype.onclick=function(ecModel,api){!function clear(ecModel){history_inner(ecModel).snapshots=null}(ecModel),api.dispatchAction({type:"restore",from:this.uid})},RestoreOption.getDefaultOption=function(ecModel){return{show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:ecModel.getLocaleModel().get(["toolbox","restore","title"])}},RestoreOption}(ToolboxFeature);echarts.zl({type:"restore",event:"restore",update:"prepareAndUpdate"},(function(payload,ecModel){ecModel.resetOption("recreate")}));const Restore=RestoreOption;var INCLUDE_FINDER_MAIN_TYPES=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],BrushTargetManager=function(){function BrushTargetManager(finder,ecModel,opt){var _this=this;this._targetInfoList=[];var foundCpts=parseFinder(ecModel,finder);(0,util.each)(targetInfoBuilders,(function(builder,type){(!opt||!opt.include||(0,util.indexOf)(opt.include,type)>=0)&&builder(foundCpts,_this._targetInfoList)}))}return BrushTargetManager.prototype.setOutputRanges=function(areas,ecModel){return this.matchOutputRanges(areas,ecModel,(function(area,coordRange,coordSys){if((area.coordRanges||(area.coordRanges=[])).push(coordRange),!area.coordRange){area.coordRange=coordRange;var result=coordConvert[area.brushType](0,coordSys,coordRange);area.__rangeOffset={offset:diffProcessor[area.brushType](result.values,area.range,[1,1]),xyMinMax:result.xyMinMax}}})),areas},BrushTargetManager.prototype.matchOutputRanges=function(areas,ecModel,cb){(0,util.each)(areas,(function(area){var targetInfo=this.findTargetInfo(area,ecModel);targetInfo&&!0!==targetInfo&&(0,util.each)(targetInfo.coordSyses,(function(coordSys){var result=coordConvert[area.brushType](1,coordSys,area.range,!0);cb(area,result.values,coordSys,ecModel)}))}),this)},BrushTargetManager.prototype.setInputRanges=function(areas,ecModel){(0,util.each)(areas,(function(area){var targetInfo=this.findTargetInfo(area,ecModel);if(area.range=area.range||[],targetInfo&&!0!==targetInfo){area.panelId=targetInfo.panelId;var result=coordConvert[area.brushType](0,targetInfo.coordSys,area.coordRange),rangeOffset=area.__rangeOffset;area.range=rangeOffset?diffProcessor[area.brushType](result.values,rangeOffset.offset,function getScales(xyMinMaxCurr,xyMinMaxOrigin){var sizeCurr=getSize(xyMinMaxCurr),sizeOrigin=getSize(xyMinMaxOrigin),scales=[sizeCurr[0]/sizeOrigin[0],sizeCurr[1]/sizeOrigin[1]];return isNaN(scales[0])&&(scales[0]=1),isNaN(scales[1])&&(scales[1]=1),scales}(result.xyMinMax,rangeOffset.xyMinMax)):result.values}}),this)},BrushTargetManager.prototype.makePanelOpts=function(api,getDefaultBrushType){return(0,util.map)(this._targetInfoList,(function(targetInfo){var rect=targetInfo.getPanelRect();return{panelId:targetInfo.panelId,defaultBrushType:getDefaultBrushType?getDefaultBrushType(targetInfo):null,clipPath:makeRectPanelClipPath(rect),isTargetByCursor:makeRectIsTargetByCursor(rect,api,targetInfo.coordSysModel),getLinearBrushOtherExtent:makeLinearBrushOtherExtent(rect)}}))},BrushTargetManager.prototype.controlSeries=function(area,seriesModel,ecModel){var targetInfo=this.findTargetInfo(area,ecModel);return!0===targetInfo||targetInfo&&(0,util.indexOf)(targetInfo.coordSyses,seriesModel.coordinateSystem)>=0},BrushTargetManager.prototype.findTargetInfo=function(area,ecModel){for(var targetInfoList=this._targetInfoList,foundCpts=parseFinder(ecModel,area),i=0;i<targetInfoList.length;i++){var targetInfo=targetInfoList[i],areaPanelId=area.panelId;if(areaPanelId){if(targetInfo.panelId===areaPanelId)return targetInfo}else for(var j=0;j<targetInfoMatchers.length;j++)if(targetInfoMatchers[j](foundCpts,targetInfo))return targetInfo}return!0},BrushTargetManager}();function formatMinMax(minMax){return minMax[0]>minMax[1]&&minMax.reverse(),minMax}function parseFinder(ecModel,finder){return(0,util_model.pm)(ecModel,finder,{includeMainTypes:INCLUDE_FINDER_MAIN_TYPES})}var targetInfoBuilders={grid:function(foundCpts,targetInfoList){var xAxisModels=foundCpts.xAxisModels,yAxisModels=foundCpts.yAxisModels,gridModels=foundCpts.gridModels,gridModelMap=(0,util.createHashMap)(),xAxesHas={},yAxesHas={};(xAxisModels||yAxisModels||gridModels)&&((0,util.each)(xAxisModels,(function(axisModel){var gridModel=axisModel.axis.grid.model;gridModelMap.set(gridModel.id,gridModel),xAxesHas[gridModel.id]=!0})),(0,util.each)(yAxisModels,(function(axisModel){var gridModel=axisModel.axis.grid.model;gridModelMap.set(gridModel.id,gridModel),yAxesHas[gridModel.id]=!0})),(0,util.each)(gridModels,(function(gridModel){gridModelMap.set(gridModel.id,gridModel),xAxesHas[gridModel.id]=!0,yAxesHas[gridModel.id]=!0})),gridModelMap.each((function(gridModel){var grid=gridModel.coordinateSystem,cartesians=[];(0,util.each)(grid.getCartesians(),(function(cartesian,index){((0,util.indexOf)(xAxisModels,cartesian.getAxis("x").model)>=0||(0,util.indexOf)(yAxisModels,cartesian.getAxis("y").model)>=0)&&cartesians.push(cartesian)})),targetInfoList.push({panelId:"grid--"+gridModel.id,gridModel,coordSysModel:gridModel,coordSys:cartesians[0],coordSyses:cartesians,getPanelRect:panelRectBuilders.grid,xAxisDeclared:xAxesHas[gridModel.id],yAxisDeclared:yAxesHas[gridModel.id]})})))},geo:function(foundCpts,targetInfoList){(0,util.each)(foundCpts.geoModels,(function(geoModel){var coordSys=geoModel.coordinateSystem;targetInfoList.push({panelId:"geo--"+geoModel.id,geoModel,coordSysModel:geoModel,coordSys,coordSyses:[coordSys],getPanelRect:panelRectBuilders.geo})}))}},targetInfoMatchers=[function(foundCpts,targetInfo){var xAxisModel=foundCpts.xAxisModel,yAxisModel=foundCpts.yAxisModel,gridModel=foundCpts.gridModel;return!gridModel&&xAxisModel&&(gridModel=xAxisModel.axis.grid.model),!gridModel&&yAxisModel&&(gridModel=yAxisModel.axis.grid.model),gridModel&&gridModel===targetInfo.gridModel},function(foundCpts,targetInfo){var geoModel=foundCpts.geoModel;return geoModel&&geoModel===targetInfo.geoModel}],panelRectBuilders={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var coordSys=this.coordSys,rect=coordSys.getBoundingRect().clone();return rect.applyTransform(graphic.getTransform(coordSys)),rect}},coordConvert={lineX:(0,util.curry)(axisConvert,0),lineY:(0,util.curry)(axisConvert,1),rect:function(to,coordSys,rangeOrCoordRange,clamp){var xminymin=to?coordSys.pointToData([rangeOrCoordRange[0][0],rangeOrCoordRange[1][0]],clamp):coordSys.dataToPoint([rangeOrCoordRange[0][0],rangeOrCoordRange[1][0]],clamp),xmaxymax=to?coordSys.pointToData([rangeOrCoordRange[0][1],rangeOrCoordRange[1][1]],clamp):coordSys.dataToPoint([rangeOrCoordRange[0][1],rangeOrCoordRange[1][1]],clamp),values=[formatMinMax([xminymin[0],xmaxymax[0]]),formatMinMax([xminymin[1],xmaxymax[1]])];return{values,xyMinMax:values}},polygon:function(to,coordSys,rangeOrCoordRange,clamp){var xyMinMax=[[1/0,-1/0],[1/0,-1/0]];return{values:(0,util.map)(rangeOrCoordRange,(function(item){var p=to?coordSys.pointToData(item,clamp):coordSys.dataToPoint(item,clamp);return xyMinMax[0][0]=Math.min(xyMinMax[0][0],p[0]),xyMinMax[1][0]=Math.min(xyMinMax[1][0],p[1]),xyMinMax[0][1]=Math.max(xyMinMax[0][1],p[0]),xyMinMax[1][1]=Math.max(xyMinMax[1][1],p[1]),p})),xyMinMax}}};function axisConvert(axisNameIndex,to,coordSys,rangeOrCoordRange){var axis=coordSys.getAxis(["x","y"][axisNameIndex]),values=formatMinMax((0,util.map)([0,1],(function(i){return to?axis.coordToData(axis.toLocalCoord(rangeOrCoordRange[i]),!0):axis.toGlobalCoord(axis.dataToCoord(rangeOrCoordRange[i]))}))),xyMinMax=[];return xyMinMax[axisNameIndex]=values,xyMinMax[1-axisNameIndex]=[NaN,NaN],{values,xyMinMax}}var diffProcessor={lineX:(0,util.curry)(axisDiffProcessor,0),lineY:(0,util.curry)(axisDiffProcessor,1),rect:function(values,refer,scales){return[[values[0][0]-scales[0]*refer[0][0],values[0][1]-scales[0]*refer[0][1]],[values[1][0]-scales[1]*refer[1][0],values[1][1]-scales[1]*refer[1][1]]]},polygon:function(values,refer,scales){return(0,util.map)(values,(function(item,idx){return[item[0]-scales[0]*refer[idx][0],item[1]-scales[1]*refer[idx][1]]}))}};function axisDiffProcessor(axisNameIndex,values,refer,scales){return[values[0]-scales[axisNameIndex]*refer[0],values[1]-scales[axisNameIndex]*refer[1]]}function getSize(xyMinMax){return xyMinMax?[xyMinMax[0][1]-xyMinMax[0][0],xyMinMax[1][1]-xyMinMax[1][0]]:[NaN,NaN]}const helper_BrushTargetManager=BrushTargetManager;var internalComponentCreator=__webpack_require__("./node_modules/echarts/lib/model/internalComponentCreator.js"),DataZoom_each=util.each,DATA_ZOOM_ID_BASE=(0,util_model.g0)("toolbox-dataZoom_"),DataZoomFeature=function(_super){function DataZoomFeature(){return null!==_super&&_super.apply(this,arguments)||this}return(0,tslib_es6.ZT)(DataZoomFeature,_super),DataZoomFeature.prototype.render=function(featureModel,ecModel,api,payload){this._brushController||(this._brushController=new helper_BrushController(api.getZr()),this._brushController.on("brush",util.bind(this._onBrush,this)).mount()),function updateZoomBtnStatus(featureModel,ecModel,view,payload,api){var zoomActive=view._isZoomActive;payload&&"takeGlobalCursor"===payload.type&&(zoomActive="dataZoomSelect"===payload.key&&payload.dataZoomSelectActive);view._isZoomActive=zoomActive,featureModel.setIconStatus("zoom",zoomActive?"emphasis":"normal");var brushTargetManager=new helper_BrushTargetManager(makeAxisFinder(featureModel),ecModel,{include:["grid"]}),panels=brushTargetManager.makePanelOpts(api,(function(targetInfo){return targetInfo.xAxisDeclared&&!targetInfo.yAxisDeclared?"lineX":!targetInfo.xAxisDeclared&&targetInfo.yAxisDeclared?"lineY":"rect"}));view._brushController.setPanels(panels).enableBrush(!(!zoomActive||!panels.length)&&{brushType:"auto",brushStyle:featureModel.getModel("brushStyle").getItemStyle()})}(featureModel,ecModel,this,payload,api),function updateBackBtnStatus(featureModel,ecModel){featureModel.setIconStatus("back",function count(ecModel){return getStoreSnapshots(ecModel).length}(ecModel)>1?"emphasis":"normal")}(featureModel,ecModel)},DataZoomFeature.prototype.onclick=function(ecModel,api,type){DataZoom_handlers[type].call(this)},DataZoomFeature.prototype.remove=function(ecModel,api){this._brushController&&this._brushController.unmount()},DataZoomFeature.prototype.dispose=function(ecModel,api){this._brushController&&this._brushController.dispose()},DataZoomFeature.prototype._onBrush=function(eventParam){var areas=eventParam.areas;if(eventParam.isEnd&&areas.length){var snapshot={},ecModel=this.ecModel;this._brushController.updateCovers([]),new helper_BrushTargetManager(makeAxisFinder(this.model),ecModel,{include:["grid"]}).matchOutputRanges(areas,ecModel,(function(area,coordRange,coordSys){if("cartesian2d"===coordSys.type){var brushType=area.brushType;"rect"===brushType?(setBatch("x",coordSys,coordRange[0]),setBatch("y",coordSys,coordRange[1])):setBatch({lineX:"x",lineY:"y"}[brushType],coordSys,coordRange)}})),function push(ecModel,newSnapshot){var storedSnapshots=getStoreSnapshots(ecModel);history_each(newSnapshot,(function(batchItem,dataZoomId){for(var i=storedSnapshots.length-1;i>=0&&!storedSnapshots[i][dataZoomId];i--);if(i<0){var dataZoomModel=ecModel.queryComponents({mainType:"dataZoom",subType:"select",id:dataZoomId})[0];if(dataZoomModel){var percentRange=dataZoomModel.getPercentRange();storedSnapshots[0][dataZoomId]={dataZoomId,start:percentRange[0],end:percentRange[1]}}}})),storedSnapshots.push(newSnapshot)}(ecModel,snapshot),this._dispatchZoomAction(snapshot)}function setBatch(dimName,coordSys,minMax){var axis=coordSys.getAxis(dimName),axisModel=axis.model,dataZoomModel=function findDataZoom(dimName,axisModel,ecModel){var found;return ecModel.eachComponent({mainType:"dataZoom",subType:"select"},(function(dzModel){dzModel.getAxisModel(dimName,axisModel.componentIndex)&&(found=dzModel)})),found}(dimName,axisModel,ecModel),minMaxSpan=dataZoomModel.findRepresentativeAxisProxy(axisModel).getMinMaxSpan();null==minMaxSpan.minValueSpan&&null==minMaxSpan.maxValueSpan||(minMax=sliderMove(0,minMax.slice(),axis.scale.getExtent(),0,minMaxSpan.minValueSpan,minMaxSpan.maxValueSpan)),dataZoomModel&&(snapshot[dataZoomModel.id]={dataZoomId:dataZoomModel.id,startValue:minMax[0],endValue:minMax[1]})}},DataZoomFeature.prototype._dispatchZoomAction=function(snapshot){var batch=[];DataZoom_each(snapshot,(function(batchItem,dataZoomId){batch.push(util.clone(batchItem))})),batch.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch})},DataZoomFeature.getDefaultOption=function(ecModel){return{show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:ecModel.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}}},DataZoomFeature}(ToolboxFeature),DataZoom_handlers={zoom:function(){var nextActive=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:nextActive})},back:function(){this._dispatchZoomAction(function pop(ecModel){var storedSnapshots=getStoreSnapshots(ecModel),head=storedSnapshots[storedSnapshots.length-1];storedSnapshots.length>1&&storedSnapshots.pop();var snapshot={};return history_each(head,(function(batchItem,dataZoomId){for(var i=storedSnapshots.length-1;i>=0;i--)if(batchItem=storedSnapshots[i][dataZoomId]){snapshot[dataZoomId]=batchItem;break}})),snapshot}(this.ecModel))}};function makeAxisFinder(dzFeatureModel){var setting={xAxisIndex:dzFeatureModel.get("xAxisIndex",!0),yAxisIndex:dzFeatureModel.get("yAxisIndex",!0),xAxisId:dzFeatureModel.get("xAxisId",!0),yAxisId:dzFeatureModel.get("yAxisId",!0)};return null==setting.xAxisIndex&&null==setting.xAxisId&&(setting.xAxisIndex="all"),null==setting.yAxisIndex&&null==setting.yAxisId&&(setting.yAxisIndex="all"),setting}(0,internalComponentCreator.f)("dataZoom",(function(ecModel){var toolboxModel=ecModel.getComponent("toolbox",0),featureDataZoomPath=["feature","dataZoom"];if(toolboxModel&&null!=toolboxModel.get(featureDataZoomPath)){var dzFeatureModel=toolboxModel.getModel(featureDataZoomPath),dzOptions=[],finder=makeAxisFinder(dzFeatureModel),finderResult=(0,util_model.pm)(ecModel,finder);return DataZoom_each(finderResult.xAxisModels,(function(axisModel){return buildInternalOptions(axisModel,"xAxis","xAxisIndex")})),DataZoom_each(finderResult.yAxisModels,(function(axisModel){return buildInternalOptions(axisModel,"yAxis","yAxisIndex")})),dzOptions}function buildInternalOptions(axisModel,axisMainType,axisIndexPropName){var axisIndex=axisModel.componentIndex,newOpt={type:"select",$fromToolbox:!0,filterMode:dzFeatureModel.get("filterMode",!0)||"filter",id:DATA_ZOOM_ID_BASE+axisMainType+axisIndex};newOpt[axisIndexPropName]=axisIndex,dzOptions.push(newOpt)}}));const DataZoom=DataZoomFeature;const tooltip_TooltipModel=function(_super){function TooltipModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=TooltipModel.type,_this}return(0,tslib_es6.ZT)(TooltipModel,_super),TooltipModel.type="tooltip",TooltipModel.dependencies=["axisPointer"],TooltipModel.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},TooltipModel}(model_Component.Z);function shouldTooltipConfine(tooltipModel){var confineOption=tooltipModel.get("confine");return null!=confineOption?!!confineOption:"richText"===tooltipModel.get("renderMode")}function testStyle(styleProps){if(env.Z.domSupported)for(var style=document.documentElement.style,i=0,len=styleProps.length;i<len;i++)if(styleProps[i]in style)return styleProps[i]}var TRANSFORM_VENDOR=testStyle(["transform","webkitTransform","OTransform","MozTransform","msTransform"]);function toCSSVendorPrefix(styleVendor,styleProp){if(!styleVendor)return styleProp;styleProp=(0,format.zW)(styleProp,!0);var idx=styleVendor.indexOf(styleProp);return(styleVendor=-1===idx?styleProp:"-"+styleVendor.slice(0,idx)+"-"+styleProp).toLowerCase()}var CSS_TRANSITION_VENDOR=toCSSVendorPrefix(testStyle(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),"transition"),CSS_TRANSFORM_VENDOR=toCSSVendorPrefix(TRANSFORM_VENDOR,"transform"),gCssText="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(env.Z.transform3dSupported?"will-change:transform;":"");function assembleTransform(x,y,toString){var x0=x.toFixed(0)+"px",y0=y.toFixed(0)+"px";if(!env.Z.transformSupported)return toString?"top:"+y0+";left:"+x0+";":[["top",y0],["left",x0]];var is3d=env.Z.transform3dSupported,translate="translate"+(is3d?"3d":"")+"("+x0+","+y0+(is3d?",0":"")+")";return toString?"top:0;left:0;"+CSS_TRANSFORM_VENDOR+":"+translate+";":[["top",0],["left",0],[TRANSFORM_VENDOR,translate]]}function assembleCssText(tooltipModel,enableTransition,onlyFade){var cssText=[],transitionDuration=tooltipModel.get("transitionDuration"),backgroundColor=tooltipModel.get("backgroundColor"),shadowBlur=tooltipModel.get("shadowBlur"),shadowColor=tooltipModel.get("shadowColor"),shadowOffsetX=tooltipModel.get("shadowOffsetX"),shadowOffsetY=tooltipModel.get("shadowOffsetY"),textStyleModel=tooltipModel.getModel("textStyle"),padding=(0,tooltipMarkup.d_)(tooltipModel,"html"),boxShadow=shadowOffsetX+"px "+shadowOffsetY+"px "+shadowBlur+"px "+shadowColor;return cssText.push("box-shadow:"+boxShadow),enableTransition&&transitionDuration&&cssText.push(function assembleTransition(duration,onlyFade){var transitionOption=" "+duration/2+"s cubic-bezier(0.23,1,0.32,1)",transitionText="opacity"+transitionOption+",visibility"+transitionOption;return onlyFade||(transitionOption=" "+duration+"s cubic-bezier(0.23,1,0.32,1)",transitionText+=env.Z.transformSupported?","+CSS_TRANSFORM_VENDOR+transitionOption:",left"+transitionOption+",top"+transitionOption),CSS_TRANSITION_VENDOR+":"+transitionText}(transitionDuration,onlyFade)),backgroundColor&&cssText.push("background-color:"+backgroundColor),(0,util.each)(["width","color","radius"],(function(name){var borderName="border-"+name,camelCase=(0,format.zW)(borderName),val=tooltipModel.get(camelCase);null!=val&&cssText.push(borderName+":"+val+("color"===name?"":"px"))})),cssText.push(function assembleFont(textStyleModel){var cssText=[],fontSize=textStyleModel.get("fontSize"),color=textStyleModel.getTextColor();color&&cssText.push("color:"+color),cssText.push("font:"+textStyleModel.getFont()),fontSize&&cssText.push("line-height:"+Math.round(3*fontSize/2)+"px");var shadowColor=textStyleModel.get("textShadowColor"),shadowBlur=textStyleModel.get("textShadowBlur")||0,shadowOffsetX=textStyleModel.get("textShadowOffsetX")||0,shadowOffsetY=textStyleModel.get("textShadowOffsetY")||0;return shadowColor&&shadowBlur&&cssText.push("text-shadow:"+shadowOffsetX+"px "+shadowOffsetY+"px "+shadowBlur+"px "+shadowColor),(0,util.each)(["decoration","align"],(function(name){var val=textStyleModel.get(name);val&&cssText.push("text-"+name+":"+val)})),cssText.join(";")}(textStyleModel)),null!=padding&&cssText.push("padding:"+(0,format.MY)(padding).join("px ")+"px"),cssText.join(";")+";"}function makeStyleCoord(out,zr,container,zrX,zrY){var zrPainter=zr&&zr.painter;if(container){var zrViewportRoot=zrPainter&&zrPainter.getViewportRoot();zrViewportRoot&&(0,dom.YB)(out,zrViewportRoot,container,zrX,zrY)}else{out[0]=zrX,out[1]=zrY;var viewportRootOffset=zrPainter&&zrPainter.getViewportRootOffset();viewportRootOffset&&(out[0]+=viewportRootOffset.offsetLeft,out[1]+=viewportRootOffset.offsetTop)}out[2]=out[0]/zr.getWidth(),out[3]=out[1]/zr.getHeight()}var TooltipHTMLContent=function(){function TooltipHTMLContent(api,opt){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,env.Z.wxa)return null;var el=document.createElement("div");el.domBelongToZr=!0,this.el=el;var zr=this._zr=api.getZr(),appendTo=opt.appendTo,container=appendTo&&((0,util.isString)(appendTo)?document.querySelector(appendTo):(0,util.isDom)(appendTo)?appendTo:(0,util.isFunction)(appendTo)&&appendTo(api.getDom()));makeStyleCoord(this._styleCoord,zr,container,api.getWidth()/2,api.getHeight()/2),(container||api.getDom()).appendChild(el),this._api=api,this._container=container;var self=this;el.onmouseenter=function(){self._enterable&&(clearTimeout(self._hideTimeout),self._show=!0),self._inContent=!0},el.onmousemove=function(e){if(e=e||window.event,!self._enterable){var handler=zr.handler,zrViewportRoot=zr.painter.getViewportRoot();(0,core_event.OD)(zrViewportRoot,e,!0),handler.dispatch("mousemove",e)}},el.onmouseleave=function(){self._inContent=!1,self._enterable&&self._show&&self.hideLater(self._hideDelay)}}return TooltipHTMLContent.prototype.update=function(tooltipModel){if(!this._container){var container=this._api.getDom(),position=function getComputedStyle(el,style){var stl=el.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(el);return stl?style?stl[style]:stl:null}(container,"position"),domStyle=container.style;"absolute"!==domStyle.position&&"absolute"!==position&&(domStyle.position="relative")}var alwaysShowContent=tooltipModel.get("alwaysShowContent");alwaysShowContent&&this._moveIfResized(),this._alwaysShowContent=alwaysShowContent,this.el.className=tooltipModel.get("className")||""},TooltipHTMLContent.prototype.show=function(tooltipModel,nearPointColor){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var el=this.el,style=el.style,styleCoord=this._styleCoord;el.innerHTML?style.cssText=gCssText+assembleCssText(tooltipModel,!this._firstShow,this._longHide)+assembleTransform(styleCoord[0],styleCoord[1],!0)+"border-color:"+(0,format.Lz)(nearPointColor)+";"+(tooltipModel.get("extraCssText")||"")+";pointer-events:"+(this._enterable?"auto":"none"):style.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},TooltipHTMLContent.prototype.setContent=function(content,markers,tooltipModel,borderColor,arrowPosition){var el=this.el;if(null!=content){var arrow="";if((0,util.isString)(arrowPosition)&&"item"===tooltipModel.get("trigger")&&!shouldTooltipConfine(tooltipModel)&&(arrow=function assembleArrow(tooltipModel,borderColor,arrowPosition){if(!(0,util.isString)(arrowPosition)||"inside"===arrowPosition)return"";var backgroundColor=tooltipModel.get("backgroundColor"),borderWidth=tooltipModel.get("borderWidth");borderColor=(0,format.Lz)(borderColor);var rotateDeg,arrowPos=function mirrorPos(pos){return"left"===pos?"right":"right"===pos?"left":"top"===pos?"bottom":"top"}(arrowPosition),arrowSize=Math.max(1.5*Math.round(borderWidth),6),positionStyle="",transformStyle=CSS_TRANSFORM_VENDOR+":";(0,util.indexOf)(["left","right"],arrowPos)>-1?(positionStyle+="top:50%",transformStyle+="translateY(-50%) rotate("+(rotateDeg="left"===arrowPos?-225:-45)+"deg)"):(positionStyle+="left:50%",transformStyle+="translateX(-50%) rotate("+(rotateDeg="top"===arrowPos?225:45)+"deg)");var rotateRadian=rotateDeg*Math.PI/180,arrowWH=arrowSize+borderWidth,rotatedWH=arrowWH*Math.abs(Math.cos(rotateRadian))+arrowWH*Math.abs(Math.sin(rotateRadian)),borderStyle=borderColor+" solid "+borderWidth+"px;";return'<div style="'+["position:absolute;width:"+arrowSize+"px;height:"+arrowSize+"px;z-index:-1;",(positionStyle+=";"+arrowPos+":-"+Math.round(100*((rotatedWH-Math.SQRT2*borderWidth)/2+Math.SQRT2*borderWidth-(rotatedWH-arrowWH)/2))/100+"px")+";"+transformStyle+";","border-bottom:"+borderStyle,"border-right:"+borderStyle,"background-color:"+backgroundColor+";"].join("")+'"></div>'}(tooltipModel,borderColor,arrowPosition)),(0,util.isString)(content))el.innerHTML=content+arrow;else if(content){el.innerHTML="",(0,util.isArray)(content)||(content=[content]);for(var i=0;i<content.length;i++)(0,util.isDom)(content[i])&&content[i].parentNode!==el&&el.appendChild(content[i]);if(arrow&&el.childNodes.length){var arrowEl=document.createElement("div");arrowEl.innerHTML=arrow,el.appendChild(arrowEl)}}}else el.innerHTML=""},TooltipHTMLContent.prototype.setEnterable=function(enterable){this._enterable=enterable},TooltipHTMLContent.prototype.getSize=function(){var el=this.el;return[el.offsetWidth,el.offsetHeight]},TooltipHTMLContent.prototype.moveTo=function(zrX,zrY){var styleCoord=this._styleCoord;if(makeStyleCoord(styleCoord,this._zr,this._container,zrX,zrY),null!=styleCoord[0]&&null!=styleCoord[1]){var style_1=this.el.style,transforms=assembleTransform(styleCoord[0],styleCoord[1]);(0,util.each)(transforms,(function(transform){style_1[transform[0]]=transform[1]}))}},TooltipHTMLContent.prototype._moveIfResized=function(){var ratioX=this._styleCoord[2],ratioY=this._styleCoord[3];this.moveTo(ratioX*this._zr.getWidth(),ratioY*this._zr.getHeight())},TooltipHTMLContent.prototype.hide=function(){var _this=this,style=this.el.style;style.visibility="hidden",style.opacity="0",env.Z.transform3dSupported&&(style.willChange=""),this._show=!1,this._longHideTimeout=setTimeout((function(){return _this._longHide=!0}),500)},TooltipHTMLContent.prototype.hideLater=function(time){!this._show||this._inContent&&this._enterable||this._alwaysShowContent||(time?(this._hideDelay=time,this._show=!1,this._hideTimeout=setTimeout((0,util.bind)(this.hide,this),time)):this.hide())},TooltipHTMLContent.prototype.isShow=function(){return this._show},TooltipHTMLContent.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var parentNode=this.el.parentNode;parentNode&&parentNode.removeChild(this.el),this.el=this._container=null},TooltipHTMLContent}();const tooltip_TooltipHTMLContent=TooltipHTMLContent;var TooltipRichContent=function(){function TooltipRichContent(api){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=api.getZr(),TooltipRichContent_makeStyleCoord(this._styleCoord,this._zr,api.getWidth()/2,api.getHeight()/2)}return TooltipRichContent.prototype.update=function(tooltipModel){var alwaysShowContent=tooltipModel.get("alwaysShowContent");alwaysShowContent&&this._moveIfResized(),this._alwaysShowContent=alwaysShowContent},TooltipRichContent.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},TooltipRichContent.prototype.setContent=function(content,markupStyleCreator,tooltipModel,borderColor,arrowPosition){var _this=this;util.isObject(content)&&(0,log._y)(""),this.el&&this._zr.remove(this.el);var textStyleModel=tooltipModel.getModel("textStyle");this.el=new Text.ZP({style:{rich:markupStyleCreator.richTextStyles,text:content,lineHeight:22,borderWidth:1,borderColor,textShadowColor:textStyleModel.get("textShadowColor"),fill:tooltipModel.get(["textStyle","color"]),padding:(0,tooltipMarkup.d_)(tooltipModel,"richText"),verticalAlign:"top",align:"left"},z:tooltipModel.get("z")}),util.each(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],(function(propName){_this.el.style[propName]=tooltipModel.get(propName)})),util.each(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],(function(propName){_this.el.style[propName]=textStyleModel.get(propName)||0})),this._zr.add(this.el);var self=this;this.el.on("mouseover",(function(){self._enterable&&(clearTimeout(self._hideTimeout),self._show=!0),self._inContent=!0})),this.el.on("mouseout",(function(){self._enterable&&self._show&&self.hideLater(self._hideDelay),self._inContent=!1}))},TooltipRichContent.prototype.setEnterable=function(enterable){this._enterable=enterable},TooltipRichContent.prototype.getSize=function(){var el=this.el,bounding=this.el.getBoundingRect(),shadowOuterSize=calcShadowOuterSize(el.style);return[bounding.width+shadowOuterSize.left+shadowOuterSize.right,bounding.height+shadowOuterSize.top+shadowOuterSize.bottom]},TooltipRichContent.prototype.moveTo=function(x,y){var el=this.el;if(el){var styleCoord=this._styleCoord;TooltipRichContent_makeStyleCoord(styleCoord,this._zr,x,y),x=styleCoord[0],y=styleCoord[1];var style=el.style,borderWidth=mathMaxWith0(style.borderWidth||0),shadowOuterSize=calcShadowOuterSize(style);el.x=x+borderWidth+shadowOuterSize.left,el.y=y+borderWidth+shadowOuterSize.top,el.markRedraw()}},TooltipRichContent.prototype._moveIfResized=function(){var ratioX=this._styleCoord[2],ratioY=this._styleCoord[3];this.moveTo(ratioX*this._zr.getWidth(),ratioY*this._zr.getHeight())},TooltipRichContent.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},TooltipRichContent.prototype.hideLater=function(time){!this._show||this._inContent&&this._enterable||this._alwaysShowContent||(time?(this._hideDelay=time,this._show=!1,this._hideTimeout=setTimeout(util.bind(this.hide,this),time)):this.hide())},TooltipRichContent.prototype.isShow=function(){return this._show},TooltipRichContent.prototype.dispose=function(){this._zr.remove(this.el)},TooltipRichContent}();function mathMaxWith0(val){return Math.max(0,val)}function calcShadowOuterSize(style){var shadowBlur=mathMaxWith0(style.shadowBlur||0),shadowOffsetX=mathMaxWith0(style.shadowOffsetX||0),shadowOffsetY=mathMaxWith0(style.shadowOffsetY||0);return{left:mathMaxWith0(shadowBlur-shadowOffsetX),right:mathMaxWith0(shadowBlur+shadowOffsetX),top:mathMaxWith0(shadowBlur-shadowOffsetY),bottom:mathMaxWith0(shadowBlur+shadowOffsetY)}}function TooltipRichContent_makeStyleCoord(out,zr,zrX,zrY){out[0]=zrX,out[1]=zrY,out[2]=out[0]/zr.getWidth(),out[3]=out[1]/zr.getHeight()}const tooltip_TooltipRichContent=TooltipRichContent;var time=__webpack_require__("./node_modules/echarts/lib/util/time.js"),dataFormat=__webpack_require__("./node_modules/echarts/lib/model/mixin/dataFormat.js"),util_event=__webpack_require__("./node_modules/echarts/lib/util/event.js"),proxyRect=new Rect.Z({shape:{x:-1,y:-1,width:2,height:2}}),TooltipView=function(_super){function TooltipView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=TooltipView.type,_this}return(0,tslib_es6.ZT)(TooltipView,_super),TooltipView.prototype.init=function(ecModel,api){if(!env.Z.node&&api.getDom()){var tooltipModel=ecModel.getComponent("tooltip"),renderMode=this._renderMode=(0,util_model.U9)(tooltipModel.get("renderMode"));this._tooltipContent="richText"===renderMode?new tooltip_TooltipRichContent(api):new tooltip_TooltipHTMLContent(api,{appendTo:tooltipModel.get("appendToBody",!0)?"body":tooltipModel.get("appendTo",!0)})}},TooltipView.prototype.render=function(tooltipModel,ecModel,api){if(!env.Z.node&&api.getDom()){this.group.removeAll(),this._tooltipModel=tooltipModel,this._ecModel=ecModel,this._api=api;var tooltipContent=this._tooltipContent;tooltipContent.update(tooltipModel),tooltipContent.setEnterable(tooltipModel.get("enterable")),this._initGlobalListener(),this._keepShow(),"richText"!==this._renderMode&&tooltipModel.get("transitionDuration")?(0,throttle.T9)(this,"_updatePosition",50,"fixRate"):(0,throttle.ZH)(this,"_updatePosition")}},TooltipView.prototype._initGlobalListener=function(){var triggerOn=this._tooltipModel.get("triggerOn");register("itemTooltip",this._api,(0,util.bind)((function(currTrigger,e,dispatchAction){"none"!==triggerOn&&(triggerOn.indexOf(currTrigger)>=0?this._tryShow(e,dispatchAction):"leave"===currTrigger&&this._hide(dispatchAction))}),this))},TooltipView.prototype._keepShow=function(){var tooltipModel=this._tooltipModel,ecModel=this._ecModel,api=this._api,triggerOn=tooltipModel.get("triggerOn");if(null!=this._lastX&&null!=this._lastY&&"none"!==triggerOn&&"click"!==triggerOn){var self_1=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout((function(){!api.isDisposed()&&self_1.manuallyShowTip(tooltipModel,ecModel,api,{x:self_1._lastX,y:self_1._lastY,dataByCoordSys:self_1._lastDataByCoordSys})}))}},TooltipView.prototype.manuallyShowTip=function(tooltipModel,ecModel,api,payload){if(payload.from!==this.uid&&!env.Z.node&&api.getDom()){var dispatchAction=TooltipView_makeDispatchAction(payload,api);this._ticket="";var dataByCoordSys=payload.dataByCoordSys,cmptRef=function findComponentReference(payload,ecModel,api){var queryOptionMap=(0,util_model.zH)(payload).queryOptionMap,componentMainType=queryOptionMap.keys()[0];if(!componentMainType||"series"===componentMainType)return;var queryResult=(0,util_model.HZ)(ecModel,componentMainType,queryOptionMap.get(componentMainType),{useDefault:!1,enableAll:!1,enableNone:!1}),model=queryResult.models[0];if(!model)return;var el,view=api.getViewOfComponentModel(model);if(view.group.traverse((function(subEl){var tooltipConfig=(0,innerStore.A)(subEl).tooltipConfig;if(tooltipConfig&&tooltipConfig.name===payload.name)return el=subEl,!0})),el)return{componentMainType,componentIndex:model.componentIndex,el}}(payload,ecModel,api);if(cmptRef){var rect=cmptRef.el.getBoundingRect().clone();rect.applyTransform(cmptRef.el.transform),this._tryShow({offsetX:rect.x+rect.width/2,offsetY:rect.y+rect.height/2,target:cmptRef.el,position:payload.position,positionDefault:"bottom"},dispatchAction)}else if(payload.tooltip&&null!=payload.x&&null!=payload.y){var el=proxyRect;el.x=payload.x,el.y=payload.y,el.update(),(0,innerStore.A)(el).tooltipConfig={name:null,option:payload.tooltip},this._tryShow({offsetX:payload.x,offsetY:payload.y,target:el},dispatchAction)}else if(dataByCoordSys)this._tryShow({offsetX:payload.x,offsetY:payload.y,position:payload.position,dataByCoordSys,tooltipOption:payload.tooltipOption},dispatchAction);else if(null!=payload.seriesIndex){if(this._manuallyAxisShowTip(tooltipModel,ecModel,api,payload))return;var pointInfo=findPointFromSeries(payload,ecModel),cx=pointInfo.point[0],cy=pointInfo.point[1];null!=cx&&null!=cy&&this._tryShow({offsetX:cx,offsetY:cy,target:pointInfo.el,position:payload.position,positionDefault:"bottom"},dispatchAction)}else null!=payload.x&&null!=payload.y&&(api.dispatchAction({type:"updateAxisPointer",x:payload.x,y:payload.y}),this._tryShow({offsetX:payload.x,offsetY:payload.y,position:payload.position,target:api.getZr().findHover(payload.x,payload.y).target},dispatchAction))}},TooltipView.prototype.manuallyHideTip=function(tooltipModel,ecModel,api,payload){var tooltipContent=this._tooltipContent;this._tooltipModel&&tooltipContent.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,payload.from!==this.uid&&this._hide(TooltipView_makeDispatchAction(payload,api))},TooltipView.prototype._manuallyAxisShowTip=function(tooltipModel,ecModel,api,payload){var seriesIndex=payload.seriesIndex,dataIndex=payload.dataIndex,coordSysAxesInfo=ecModel.getComponent("axisPointer").coordSysAxesInfo;if(null!=seriesIndex&&null!=dataIndex&&null!=coordSysAxesInfo){var seriesModel=ecModel.getSeriesByIndex(seriesIndex);if(seriesModel)if("axis"===buildTooltipModel([seriesModel.getData().getItemModel(dataIndex),seriesModel,(seriesModel.coordinateSystem||{}).model],this._tooltipModel).get("trigger"))return api.dispatchAction({type:"updateAxisPointer",seriesIndex,dataIndex,position:payload.position}),!0}},TooltipView.prototype._tryShow=function(e,dispatchAction){var el=e.target;if(this._tooltipModel){this._lastX=e.offsetX,this._lastY=e.offsetY;var dataByCoordSys=e.dataByCoordSys;if(dataByCoordSys&&dataByCoordSys.length)this._showAxisTooltip(dataByCoordSys,e);else if(el){var seriesDispatcher_1,cmptDispatcher_1;if("legend"===(0,innerStore.A)(el).ssrType)return;this._lastDataByCoordSys=null,(0,util_event.o)(el,(function(target){return null!=(0,innerStore.A)(target).dataIndex?(seriesDispatcher_1=target,!0):null!=(0,innerStore.A)(target).tooltipConfig?(cmptDispatcher_1=target,!0):void 0}),!0),seriesDispatcher_1?this._showSeriesItemTooltip(e,seriesDispatcher_1,dispatchAction):cmptDispatcher_1?this._showComponentItemTooltip(e,cmptDispatcher_1,dispatchAction):this._hide(dispatchAction)}else this._lastDataByCoordSys=null,this._hide(dispatchAction)}},TooltipView.prototype._showOrMove=function(tooltipModel,cb){var delay=tooltipModel.get("showDelay");cb=(0,util.bind)(cb,this),clearTimeout(this._showTimout),delay>0?this._showTimout=setTimeout(cb,delay):cb()},TooltipView.prototype._showAxisTooltip=function(dataByCoordSys,e){var ecModel=this._ecModel,globalTooltipModel=this._tooltipModel,point=[e.offsetX,e.offsetY],singleTooltipModel=buildTooltipModel([e.tooltipOption],globalTooltipModel),renderMode=this._renderMode,cbParamsList=[],articleMarkup=(0,tooltipMarkup.TX)("section",{blocks:[],noHeader:!0}),markupTextArrLegacy=[],markupStyleCreator=new tooltipMarkup.iv;(0,util.each)(dataByCoordSys,(function(itemCoordSys){(0,util.each)(itemCoordSys.dataByAxis,(function(axisItem){var axisModel=ecModel.getComponent(axisItem.axisDim+"Axis",axisItem.axisIndex),axisValue=axisItem.value;if(axisModel&&null!=axisValue){var axisValueLabel=getValueLabel(axisValue,axisModel.axis,ecModel,axisItem.seriesDataIndices,axisItem.valueLabelOpt),axisSectionMarkup=(0,tooltipMarkup.TX)("section",{header:axisValueLabel,noHeader:!(0,util.trim)(axisValueLabel),sortBlocks:!0,blocks:[]});articleMarkup.blocks.push(axisSectionMarkup),(0,util.each)(axisItem.seriesDataIndices,(function(idxItem){var series=ecModel.getSeriesByIndex(idxItem.seriesIndex),dataIndex=idxItem.dataIndexInside,cbParams=series.getDataParams(dataIndex);if(!(cbParams.dataIndex<0)){cbParams.axisDim=axisItem.axisDim,cbParams.axisIndex=axisItem.axisIndex,cbParams.axisType=axisItem.axisType,cbParams.axisId=axisItem.axisId,cbParams.axisValue=axisHelper.DX(axisModel.axis,{value:axisValue}),cbParams.axisValueLabel=axisValueLabel,cbParams.marker=markupStyleCreator.makeTooltipMarker("item",(0,format.Lz)(cbParams.color),renderMode);var seriesTooltipResult=(0,dataFormat.f)(series.formatTooltip(dataIndex,!0,null)),frag=seriesTooltipResult.frag;if(frag){var valueFormatter=buildTooltipModel([series],globalTooltipModel).get("valueFormatter");axisSectionMarkup.blocks.push(valueFormatter?(0,util.extend)({valueFormatter},frag):frag)}seriesTooltipResult.text&&markupTextArrLegacy.push(seriesTooltipResult.text),cbParamsList.push(cbParams)}}))}}))})),articleMarkup.blocks.reverse(),markupTextArrLegacy.reverse();var positionExpr=e.position,orderMode=singleTooltipModel.get("order"),builtMarkupText=(0,tooltipMarkup.BY)(articleMarkup,markupStyleCreator,renderMode,orderMode,ecModel.get("useUTC"),singleTooltipModel.get("textStyle"));builtMarkupText&&markupTextArrLegacy.unshift(builtMarkupText);var blockBreak="richText"===renderMode?"\n\n":"<br/>",allMarkupText=markupTextArrLegacy.join(blockBreak);this._showOrMove(singleTooltipModel,(function(){this._updateContentNotChangedOnAxis(dataByCoordSys,cbParamsList)?this._updatePosition(singleTooltipModel,positionExpr,point[0],point[1],this._tooltipContent,cbParamsList):this._showTooltipContent(singleTooltipModel,allMarkupText,cbParamsList,Math.random()+"",point[0],point[1],positionExpr,null,markupStyleCreator)}))},TooltipView.prototype._showSeriesItemTooltip=function(e,dispatcher,dispatchAction){var ecModel=this._ecModel,ecData=(0,innerStore.A)(dispatcher),seriesIndex=ecData.seriesIndex,seriesModel=ecModel.getSeriesByIndex(seriesIndex),dataModel=ecData.dataModel||seriesModel,dataIndex=ecData.dataIndex,dataType=ecData.dataType,data=dataModel.getData(dataType),renderMode=this._renderMode,positionDefault=e.positionDefault,tooltipModel=buildTooltipModel([data.getItemModel(dataIndex),dataModel,seriesModel&&(seriesModel.coordinateSystem||{}).model],this._tooltipModel,positionDefault?{position:positionDefault}:null),tooltipTrigger=tooltipModel.get("trigger");if(null==tooltipTrigger||"item"===tooltipTrigger){var params=dataModel.getDataParams(dataIndex,dataType),markupStyleCreator=new tooltipMarkup.iv;params.marker=markupStyleCreator.makeTooltipMarker("item",(0,format.Lz)(params.color),renderMode);var seriesTooltipResult=(0,dataFormat.f)(dataModel.formatTooltip(dataIndex,!1,dataType)),orderMode=tooltipModel.get("order"),valueFormatter=tooltipModel.get("valueFormatter"),frag=seriesTooltipResult.frag,markupText=frag?(0,tooltipMarkup.BY)(valueFormatter?(0,util.extend)({valueFormatter},frag):frag,markupStyleCreator,renderMode,orderMode,ecModel.get("useUTC"),tooltipModel.get("textStyle")):seriesTooltipResult.text,asyncTicket="item_"+dataModel.name+"_"+dataIndex;this._showOrMove(tooltipModel,(function(){this._showTooltipContent(tooltipModel,markupText,params,asyncTicket,e.offsetX,e.offsetY,e.position,e.target,markupStyleCreator)})),dispatchAction({type:"showTip",dataIndexInside:dataIndex,dataIndex:data.getRawIndex(dataIndex),seriesIndex,from:this.uid})}},TooltipView.prototype._showComponentItemTooltip=function(e,el,dispatchAction){var ecData=(0,innerStore.A)(el),tooltipOpt=ecData.tooltipConfig.option||{};if((0,util.isString)(tooltipOpt)){tooltipOpt={content:tooltipOpt,formatter:tooltipOpt}}var tooltipModelCascade=[tooltipOpt],cmpt=this._ecModel.getComponent(ecData.componentMainType,ecData.componentIndex);cmpt&&tooltipModelCascade.push(cmpt),tooltipModelCascade.push({formatter:tooltipOpt.content});var positionDefault=e.positionDefault,subTooltipModel=buildTooltipModel(tooltipModelCascade,this._tooltipModel,positionDefault?{position:positionDefault}:null),defaultHtml=subTooltipModel.get("content"),asyncTicket=Math.random()+"",markupStyleCreator=new tooltipMarkup.iv;this._showOrMove(subTooltipModel,(function(){var formatterParams=(0,util.clone)(subTooltipModel.get("formatterParams")||{});this._showTooltipContent(subTooltipModel,defaultHtml,formatterParams,asyncTicket,e.offsetX,e.offsetY,e.position,el,markupStyleCreator)})),dispatchAction({type:"showTip",from:this.uid})},TooltipView.prototype._showTooltipContent=function(tooltipModel,defaultHtml,params,asyncTicket,x,y,positionExpr,el,markupStyleCreator){if(this._ticket="",tooltipModel.get("showContent")&&tooltipModel.get("show")){var tooltipContent=this._tooltipContent;tooltipContent.setEnterable(tooltipModel.get("enterable"));var formatter=tooltipModel.get("formatter");positionExpr=positionExpr||tooltipModel.get("position");var html=defaultHtml,nearPointColor=this._getNearestPoint([x,y],params,tooltipModel.get("trigger"),tooltipModel.get("borderColor")).color;if(formatter)if((0,util.isString)(formatter)){var useUTC=tooltipModel.ecModel.get("useUTC"),params0=(0,util.isArray)(params)?params[0]:params;html=formatter,params0&&params0.axisType&&params0.axisType.indexOf("time")>=0&&(html=(0,time.WU)(params0.axisValue,html,useUTC)),html=(0,format.kF)(html,params,!0)}else if((0,util.isFunction)(formatter)){var callback=(0,util.bind)((function(cbTicket,html){cbTicket===this._ticket&&(tooltipContent.setContent(html,markupStyleCreator,tooltipModel,nearPointColor,positionExpr),this._updatePosition(tooltipModel,positionExpr,x,y,tooltipContent,params,el))}),this);this._ticket=asyncTicket,html=formatter(params,asyncTicket,callback)}else html=formatter;tooltipContent.setContent(html,markupStyleCreator,tooltipModel,nearPointColor,positionExpr),tooltipContent.show(tooltipModel,nearPointColor),this._updatePosition(tooltipModel,positionExpr,x,y,tooltipContent,params,el)}},TooltipView.prototype._getNearestPoint=function(point,tooltipDataParams,trigger,borderColor){return"axis"===trigger||(0,util.isArray)(tooltipDataParams)?{color:borderColor||("html"===this._renderMode?"#fff":"none")}:(0,util.isArray)(tooltipDataParams)?void 0:{color:borderColor||tooltipDataParams.color||tooltipDataParams.borderColor}},TooltipView.prototype._updatePosition=function(tooltipModel,positionExpr,x,y,content,params,el){var viewWidth=this._api.getWidth(),viewHeight=this._api.getHeight();positionExpr=positionExpr||tooltipModel.get("position");var contentSize=content.getSize(),align=tooltipModel.get("align"),vAlign=tooltipModel.get("verticalAlign"),rect=el&&el.getBoundingRect().clone();if(el&&rect.applyTransform(el.transform),(0,util.isFunction)(positionExpr)&&(positionExpr=positionExpr([x,y],params,content.el,rect,{viewSize:[viewWidth,viewHeight],contentSize:contentSize.slice()})),(0,util.isArray)(positionExpr))x=(0,number.GM)(positionExpr[0],viewWidth),y=(0,number.GM)(positionExpr[1],viewHeight);else if((0,util.isObject)(positionExpr)){var boxLayoutPosition=positionExpr;boxLayoutPosition.width=contentSize[0],boxLayoutPosition.height=contentSize[1];var layoutRect=(0,layout.ME)(boxLayoutPosition,{width:viewWidth,height:viewHeight});x=layoutRect.x,y=layoutRect.y,align=null,vAlign=null}else if((0,util.isString)(positionExpr)&&el){var pos=function calcTooltipPosition(position,rect,contentSize,borderWidth){var domWidth=contentSize[0],domHeight=contentSize[1],offset=Math.ceil(Math.SQRT2*borderWidth)+8,x=0,y=0,rectWidth=rect.width,rectHeight=rect.height;switch(position){case"inside":x=rect.x+rectWidth/2-domWidth/2,y=rect.y+rectHeight/2-domHeight/2;break;case"top":x=rect.x+rectWidth/2-domWidth/2,y=rect.y-domHeight-offset;break;case"bottom":x=rect.x+rectWidth/2-domWidth/2,y=rect.y+rectHeight+offset;break;case"left":x=rect.x-domWidth-offset,y=rect.y+rectHeight/2-domHeight/2;break;case"right":x=rect.x+rectWidth+offset,y=rect.y+rectHeight/2-domHeight/2}return[x,y]}(positionExpr,rect,contentSize,tooltipModel.get("borderWidth"));x=pos[0],y=pos[1]}else{pos=function refixTooltipPosition(x,y,content,viewWidth,viewHeight,gapH,gapV){var size=content.getSize(),width=size[0],height=size[1];null!=gapH&&(x+width+gapH+2>viewWidth?x-=width+gapH:x+=gapH);null!=gapV&&(y+height+gapV>viewHeight?y-=height+gapV:y+=gapV);return[x,y]}(x,y,content,viewWidth,viewHeight,align?null:20,vAlign?null:20);x=pos[0],y=pos[1]}if(align&&(x-=isCenterAlign(align)?contentSize[0]/2:"right"===align?contentSize[0]:0),vAlign&&(y-=isCenterAlign(vAlign)?contentSize[1]/2:"bottom"===vAlign?contentSize[1]:0),shouldTooltipConfine(tooltipModel)){pos=function confineTooltipPosition(x,y,content,viewWidth,viewHeight){var size=content.getSize(),width=size[0],height=size[1];return x=Math.min(x+width,viewWidth)-width,y=Math.min(y+height,viewHeight)-height,x=Math.max(x,0),y=Math.max(y,0),[x,y]}(x,y,content,viewWidth,viewHeight);x=pos[0],y=pos[1]}content.moveTo(x,y)},TooltipView.prototype._updateContentNotChangedOnAxis=function(dataByCoordSys,cbParamsList){var lastCoordSys=this._lastDataByCoordSys,lastCbParamsList=this._cbParamsList,contentNotChanged=!!lastCoordSys&&lastCoordSys.length===dataByCoordSys.length;return contentNotChanged&&(0,util.each)(lastCoordSys,(function(lastItemCoordSys,indexCoordSys){var lastDataByAxis=lastItemCoordSys.dataByAxis||[],thisDataByAxis=(dataByCoordSys[indexCoordSys]||{}).dataByAxis||[];(contentNotChanged=contentNotChanged&&lastDataByAxis.length===thisDataByAxis.length)&&(0,util.each)(lastDataByAxis,(function(lastItem,indexAxis){var thisItem=thisDataByAxis[indexAxis]||{},lastIndices=lastItem.seriesDataIndices||[],newIndices=thisItem.seriesDataIndices||[];(contentNotChanged=contentNotChanged&&lastItem.value===thisItem.value&&lastItem.axisType===thisItem.axisType&&lastItem.axisId===thisItem.axisId&&lastIndices.length===newIndices.length)&&(0,util.each)(lastIndices,(function(lastIdxItem,j){var newIdxItem=newIndices[j];contentNotChanged=contentNotChanged&&lastIdxItem.seriesIndex===newIdxItem.seriesIndex&&lastIdxItem.dataIndex===newIdxItem.dataIndex})),lastCbParamsList&&(0,util.each)(lastItem.seriesDataIndices,(function(idxItem){var seriesIdx=idxItem.seriesIndex,cbParams=cbParamsList[seriesIdx],lastCbParams=lastCbParamsList[seriesIdx];cbParams&&lastCbParams&&lastCbParams.data!==cbParams.data&&(contentNotChanged=!1)}))}))})),this._lastDataByCoordSys=dataByCoordSys,this._cbParamsList=cbParamsList,!!contentNotChanged},TooltipView.prototype._hide=function(dispatchAction){this._lastDataByCoordSys=null,dispatchAction({type:"hideTip",from:this.uid})},TooltipView.prototype.dispose=function(ecModel,api){!env.Z.node&&api.getDom()&&((0,throttle.ZH)(this,"_updatePosition"),this._tooltipContent.dispose(),unregister("itemTooltip",api))},TooltipView.type="tooltip",TooltipView}(Component.Z);function buildTooltipModel(modelCascade,globalTooltipModel,defaultTooltipOption){var resultModel,ecModel=globalTooltipModel.ecModel;defaultTooltipOption?(resultModel=new Model.Z(defaultTooltipOption,ecModel,ecModel),resultModel=new Model.Z(globalTooltipModel.option,resultModel,ecModel)):resultModel=globalTooltipModel;for(var i=modelCascade.length-1;i>=0;i--){var tooltipOpt=modelCascade[i];tooltipOpt&&(tooltipOpt instanceof Model.Z&&(tooltipOpt=tooltipOpt.get("tooltip",!0)),(0,util.isString)(tooltipOpt)&&(tooltipOpt={formatter:tooltipOpt}),tooltipOpt&&(resultModel=new Model.Z(tooltipOpt,resultModel,ecModel)))}return resultModel}function TooltipView_makeDispatchAction(payload,api){return payload.dispatchAction||(0,util.bind)(api.dispatchAction,api)}function isCenterAlign(align){return"center"===align||"middle"===align}const tooltip_TooltipView=TooltipView;var DEFAULT_TOOLBOX_BTNS=["rect","polygon","keep","clear"];function brushPreprocessor(option,isNew){var brushComponents=(0,util_model.kF)(option?option.brush:[]);if(brushComponents.length){var brushComponentSpecifiedBtns=[];util.each(brushComponents,(function(brushOpt){var tbs=brushOpt.hasOwnProperty("toolbox")?brushOpt.toolbox:[];tbs instanceof Array&&(brushComponentSpecifiedBtns=brushComponentSpecifiedBtns.concat(tbs))}));var toolbox=option&&option.toolbox;util.isArray(toolbox)&&(toolbox=toolbox[0]),toolbox||(toolbox={feature:{}},option.toolbox=[toolbox]);var toolboxFeature=toolbox.feature||(toolbox.feature={}),toolboxBrush=toolboxFeature.brush||(toolboxFeature.brush={}),brushTypes=toolboxBrush.type||(toolboxBrush.type=[]);brushTypes.push.apply(brushTypes,brushComponentSpecifiedBtns),function removeDuplicate(arr){var map={};util.each(arr,(function(val){map[val]=1})),arr.length=0,util.each(map,(function(flag,val){arr.push(val)}))}(brushTypes),isNew&&!brushTypes.length&&brushTypes.push.apply(brushTypes,DEFAULT_TOOLBOX_BTNS)}}var visual_helper=__webpack_require__("./node_modules/echarts/lib/visual/helper.js"),visualSolution_each=util.each;function hasKeys(obj){if(obj)for(var name_1 in obj)if(obj.hasOwnProperty(name_1))return!0}function createVisualMappings(option,stateList,supplementVisualOption){var visualMappings={};return visualSolution_each(stateList,(function(state){var mappings=visualMappings[state]=function createMappings(){var Creater=function(){};return Creater.prototype.__hidden=Creater.prototype,new Creater}();visualSolution_each(option[state],(function(visualData,visualType){if(VisualMapping.Z.isValidType(visualType)){var mappingOption={type:visualType,visual:visualData};supplementVisualOption&&supplementVisualOption(mappingOption,state),mappings[visualType]=new VisualMapping.Z(mappingOption),"opacity"===visualType&&((mappingOption=util.clone(mappingOption)).type="colorAlpha",mappings.__hidden.__alphaForOpacity=new VisualMapping.Z(mappingOption))}}))})),visualMappings}function replaceVisualOption(thisOption,newOption,keys){var has;util.each(keys,(function(key){newOption.hasOwnProperty(key)&&hasKeys(newOption[key])&&(has=!0)})),has&&util.each(keys,(function(key){newOption.hasOwnProperty(key)&&hasKeys(newOption[key])?thisOption[key]=util.clone(newOption[key]):delete thisOption[key]}))}var polygon=__webpack_require__("./node_modules/zrender/lib/contain/polygon.js");var selector={lineX:getLineSelectors(0),lineY:getLineSelectors(1),rect:{point:function(itemLayout,selectors,area){return itemLayout&&area.boundingRect.contain(itemLayout[0],itemLayout[1])},rect:function(itemLayout,selectors,area){return itemLayout&&area.boundingRect.intersect(itemLayout)}},polygon:{point:function(itemLayout,selectors,area){return itemLayout&&area.boundingRect.contain(itemLayout[0],itemLayout[1])&&polygon.X(area.range,itemLayout[0],itemLayout[1])},rect:function(itemLayout,selectors,area){var points=area.range;if(!itemLayout||points.length<=1)return!1;var x=itemLayout.x,y=itemLayout.y,width=itemLayout.width,height=itemLayout.height,p=points[0];return!!(polygon.X(points,x,y)||polygon.X(points,x+width,y)||polygon.X(points,x,y+height)||polygon.X(points,x+width,y+height)||BoundingRect.Z.create(itemLayout).contain(p[0],p[1])||(0,graphic.linePolygonIntersect)(x,y,x+width,y,points)||(0,graphic.linePolygonIntersect)(x,y,x,y+height,points)||(0,graphic.linePolygonIntersect)(x+width,y,x+width,y+height,points)||(0,graphic.linePolygonIntersect)(x,y+height,x+width,y+height,points))||void 0}}};function getLineSelectors(xyIndex){var xy=["x","y"],wh=["width","height"];return{point:function(itemLayout,selectors,area){if(itemLayout){var range=area.range;return inLineRange(itemLayout[xyIndex],range)}},rect:function(itemLayout,selectors,area){if(itemLayout){var range=area.range,layoutRange=[itemLayout[xy[xyIndex]],itemLayout[xy[xyIndex]]+itemLayout[wh[xyIndex]]];return layoutRange[1]<layoutRange[0]&&layoutRange.reverse(),inLineRange(layoutRange[0],range)||inLineRange(layoutRange[1],range)||inLineRange(range[0],layoutRange)||inLineRange(range[1],layoutRange)}}}}function inLineRange(p,range){return range[0]<=p&&p<=range[1]}var STATE_LIST=["inBrush","outOfBrush"],DISPATCH_METHOD="__ecBrushSelect",DISPATCH_FLAG="__ecInBrushSelectEvent";function layoutCovers(ecModel){ecModel.eachComponent({mainType:"brush"},(function(brushModel){(brushModel.brushTargetManager=new helper_BrushTargetManager(brushModel.option,ecModel)).setInputRanges(brushModel.areas,ecModel)}))}function brushVisual(ecModel,api,payload){var throttleType,throttleDelay,brushSelected=[];ecModel.eachComponent({mainType:"brush"},(function(brushModel){payload&&"takeGlobalCursor"===payload.type&&brushModel.setBrushOption("brush"===payload.key?payload.brushOption:{brushType:!1})})),layoutCovers(ecModel),ecModel.eachComponent({mainType:"brush"},(function(brushModel,brushIndex){var thisBrushSelected={brushId:brushModel.id,brushIndex,brushName:brushModel.name,areas:util.clone(brushModel.areas),selected:[]};brushSelected.push(thisBrushSelected);var brushOption=brushModel.option,brushLink=brushOption.brushLink,linkedSeriesMap=[],selectedDataIndexForLink=[],rangeInfoBySeries=[],hasBrushExists=!1;brushIndex||(throttleType=brushOption.throttleType,throttleDelay=brushOption.throttleDelay);var areas=util.map(brushModel.areas,(function(area){var builder=boundingRectBuilders[area.brushType],selectableArea=util.defaults({boundingRect:builder?builder(area):void 0},area);return selectableArea.selectors=function makeBrushCommonSelectorForSeries(area){var brushType=area.brushType,selectors={point:function(itemLayout){return selector[brushType].point(itemLayout,selectors,area)},rect:function(itemLayout){return selector[brushType].rect(itemLayout,selectors,area)}};return selectors}(selectableArea),selectableArea})),visualMappings=createVisualMappings(brushModel.option,STATE_LIST,(function(mappingOption){mappingOption.mappingMethod="fixed"}));function linkOthers(seriesIndex){return"all"===brushLink||!!linkedSeriesMap[seriesIndex]}function brushed(rangeInfoList){return!!rangeInfoList.length}util.isArray(brushLink)&&util.each(brushLink,(function(seriesIndex){linkedSeriesMap[seriesIndex]=1})),ecModel.eachSeries((function(seriesModel,seriesIndex){var rangeInfoList=rangeInfoBySeries[seriesIndex]=[];"parallel"===seriesModel.subType?function stepAParallel(seriesModel,seriesIndex){var coordSys=seriesModel.coordinateSystem;hasBrushExists=hasBrushExists||coordSys.hasAxisBrushed(),linkOthers(seriesIndex)&&coordSys.eachActiveState(seriesModel.getData(),(function(activeState,dataIndex){"active"===activeState&&(selectedDataIndexForLink[dataIndex]=1)}))}(seriesModel,seriesIndex):function stepAOthers(seriesModel,seriesIndex,rangeInfoList){if(!seriesModel.brushSelector||function brushModelNotControll(brushModel,seriesIndex){var seriesIndices=brushModel.option.seriesIndex;return null!=seriesIndices&&"all"!==seriesIndices&&(util.isArray(seriesIndices)?util.indexOf(seriesIndices,seriesIndex)<0:seriesIndex!==seriesIndices)}(brushModel,seriesIndex))return;if(util.each(areas,(function(area){brushModel.brushTargetManager.controlSeries(area,seriesModel,ecModel)&&rangeInfoList.push(area),hasBrushExists=hasBrushExists||brushed(rangeInfoList)})),linkOthers(seriesIndex)&&brushed(rangeInfoList)){var data_1=seriesModel.getData();data_1.each((function(dataIndex){checkInRange(seriesModel,rangeInfoList,data_1,dataIndex)&&(selectedDataIndexForLink[dataIndex]=1)}))}}(seriesModel,seriesIndex,rangeInfoList)})),ecModel.eachSeries((function(seriesModel,seriesIndex){var seriesBrushSelected={seriesId:seriesModel.id,seriesIndex,seriesName:seriesModel.name,dataIndex:[]};thisBrushSelected.selected.push(seriesBrushSelected);var rangeInfoList=rangeInfoBySeries[seriesIndex],data=seriesModel.getData(),getValueState=linkOthers(seriesIndex)?function(dataIndex){return selectedDataIndexForLink[dataIndex]?(seriesBrushSelected.dataIndex.push(data.getRawIndex(dataIndex)),"inBrush"):"outOfBrush"}:function(dataIndex){return checkInRange(seriesModel,rangeInfoList,data,dataIndex)?(seriesBrushSelected.dataIndex.push(data.getRawIndex(dataIndex)),"inBrush"):"outOfBrush"};(linkOthers(seriesIndex)?hasBrushExists:brushed(rangeInfoList))&&function applyVisual(stateList,visualMappings,data,getValueState,scope,dimension){var dataIndex,visualTypesMap={};function getVisual(key){return(0,visual_helper.Or)(data,dataIndex,key)}function setVisual(key,value){(0,visual_helper.LZ)(data,dataIndex,key,value)}function eachItem(valueOrIndex,index){dataIndex=null==dimension?valueOrIndex:index;var rawDataItem=data.getRawDataItem(dataIndex);if(!rawDataItem||!1!==rawDataItem.visualMap)for(var valueState=getValueState.call(scope,valueOrIndex),mappings=visualMappings[valueState],visualTypes=visualTypesMap[valueState],i=0,len=visualTypes.length;i<len;i++){var type=visualTypes[i];mappings[type]&&mappings[type].applyVisual(valueOrIndex,getVisual,setVisual)}}util.each(stateList,(function(state){var visualTypes=VisualMapping.Z.prepareVisualTypes(visualMappings[state]);visualTypesMap[state]=visualTypes})),null==dimension?data.each(eachItem):data.each([dimension],eachItem)}(STATE_LIST,visualMappings,data,getValueState)}))})),function dispatchAction(api,throttleType,throttleDelay,brushSelected,payload){if(!payload)return;var zr=api.getZr();if(zr[DISPATCH_FLAG])return;zr[DISPATCH_METHOD]||(zr[DISPATCH_METHOD]=doDispatch);var fn=throttle.T9(zr,DISPATCH_METHOD,throttleDelay,throttleType);fn(api,brushSelected)}(api,throttleType,throttleDelay,brushSelected,payload)}function doDispatch(api,brushSelected){if(!api.isDisposed()){var zr=api.getZr();zr[DISPATCH_FLAG]=!0,api.dispatchAction({type:"brushSelect",batch:brushSelected}),zr[DISPATCH_FLAG]=!1}}function checkInRange(seriesModel,rangeInfoList,data,dataIndex){for(var i=0,len=rangeInfoList.length;i<len;i++){var area=rangeInfoList[i];if(seriesModel.brushSelector(dataIndex,data,area.selectors,area))return!0}}var boundingRectBuilders={rect:function(area){return getBoundingRectFromMinMax(area.range)},polygon:function(area){for(var minMax,range=area.range,i=0,len=range.length;i<len;i++){minMax=minMax||[[1/0,-1/0],[1/0,-1/0]];var rg=range[i];rg[0]<minMax[0][0]&&(minMax[0][0]=rg[0]),rg[0]>minMax[0][1]&&(minMax[0][1]=rg[0]),rg[1]<minMax[1][0]&&(minMax[1][0]=rg[1]),rg[1]>minMax[1][1]&&(minMax[1][1]=rg[1])}return minMax&&getBoundingRectFromMinMax(minMax)}};function getBoundingRectFromMinMax(minMax){return new BoundingRect.Z(minMax[0][0],minMax[1][0],minMax[0][1]-minMax[0][0],minMax[1][1]-minMax[1][0])}const brush_BrushView=function(_super){function BrushView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=BrushView.type,_this}return(0,tslib_es6.ZT)(BrushView,_super),BrushView.prototype.init=function(ecModel,api){this.ecModel=ecModel,this.api=api,this.model,(this._brushController=new helper_BrushController(api.getZr())).on("brush",util.bind(this._onBrush,this)).mount()},BrushView.prototype.render=function(brushModel,ecModel,api,payload){this.model=brushModel,this._updateController(brushModel,ecModel,api,payload)},BrushView.prototype.updateTransform=function(brushModel,ecModel,api,payload){layoutCovers(ecModel),this._updateController(brushModel,ecModel,api,payload)},BrushView.prototype.updateVisual=function(brushModel,ecModel,api,payload){this.updateTransform(brushModel,ecModel,api,payload)},BrushView.prototype.updateView=function(brushModel,ecModel,api,payload){this._updateController(brushModel,ecModel,api,payload)},BrushView.prototype._updateController=function(brushModel,ecModel,api,payload){(!payload||payload.$from!==brushModel.id)&&this._brushController.setPanels(brushModel.brushTargetManager.makePanelOpts(api)).enableBrush(brushModel.brushOption).updateCovers(brushModel.areas.slice())},BrushView.prototype.dispose=function(){this._brushController.dispose()},BrushView.prototype._onBrush=function(eventParam){var modelId=this.model.id,areas=this.model.brushTargetManager.setOutputRanges(eventParam.areas,this.ecModel);(!eventParam.isEnd||eventParam.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:modelId,areas:util.clone(areas),$from:modelId}),eventParam.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:modelId,areas:util.clone(areas),$from:modelId})},BrushView.type="brush",BrushView}(Component.Z);function generateBrushOption(option,brushOption){return util.merge({brushType:option.brushType,brushMode:option.brushMode,transformable:option.transformable,brushStyle:new Model.Z(option.brushStyle).getItemStyle(),removeOnClick:option.removeOnClick,z:option.z},brushOption,!0)}const brush_BrushModel=function(_super){function BrushModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=BrushModel.type,_this.areas=[],_this.brushOption={},_this}return(0,tslib_es6.ZT)(BrushModel,_super),BrushModel.prototype.optionUpdated=function(newOption,isInit){var thisOption=this.option;!isInit&&replaceVisualOption(thisOption,newOption,["inBrush","outOfBrush"]);var inBrush=thisOption.inBrush=thisOption.inBrush||{};thisOption.outOfBrush=thisOption.outOfBrush||{color:"#ddd"},inBrush.hasOwnProperty("liftZ")||(inBrush.liftZ=5)},BrushModel.prototype.setAreas=function(areas){areas&&(this.areas=util.map(areas,(function(area){return generateBrushOption(this.option,area)}),this))},BrushModel.prototype.setBrushOption=function(brushOption){this.brushOption=generateBrushOption(this.option,brushOption),this.brushType=this.brushOption.brushType},BrushModel.type="brush",BrushModel.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],BrushModel.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},BrushModel}(model_Component.Z);var Brush_ICON_TYPES=["rect","polygon","lineX","lineY","keep","clear"];const Brush=function(_super){function BrushFeature(){return null!==_super&&_super.apply(this,arguments)||this}return(0,tslib_es6.ZT)(BrushFeature,_super),BrushFeature.prototype.render=function(featureModel,ecModel,api){var brushType,brushMode,isBrushed;ecModel.eachComponent({mainType:"brush"},(function(brushModel){brushType=brushModel.brushType,brushMode=brushModel.brushOption.brushMode||"single",isBrushed=isBrushed||!!brushModel.areas.length})),this._brushType=brushType,this._brushMode=brushMode,util.each(featureModel.get("type",!0),(function(type){featureModel.setIconStatus(type,("keep"===type?"multiple"===brushMode:"clear"===type?isBrushed:type===brushType)?"emphasis":"normal")}))},BrushFeature.prototype.updateView=function(featureModel,ecModel,api){this.render(featureModel,ecModel,api)},BrushFeature.prototype.getIcons=function(){var model=this.model,availableIcons=model.get("icon",!0),icons={};return util.each(model.get("type",!0),(function(type){availableIcons[type]&&(icons[type]=availableIcons[type])})),icons},BrushFeature.prototype.onclick=function(ecModel,api,type){var brushType=this._brushType,brushMode=this._brushMode;"clear"===type?(api.dispatchAction({type:"axisAreaSelect",intervals:[]}),api.dispatchAction({type:"brush",command:"clear",areas:[]})):api.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:"keep"===type?brushType:brushType!==type&&type,brushMode:"keep"===type?"multiple"===brushMode?"single":"multiple":brushMode}})},BrushFeature.getDefaultOption=function(ecModel){return{show:!0,type:Brush_ICON_TYPES.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:ecModel.getLocaleModel().get(["toolbox","brush","title"])}},BrushFeature}(ToolboxFeature);var TitleModel=function(_super){function TitleModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=TitleModel.type,_this.layoutMode={type:"box",ignoreSize:!0},_this}return(0,tslib_es6.ZT)(TitleModel,_super),TitleModel.type="title",TitleModel.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},TitleModel}(model_Component.Z),TitleView=function(_super){function TitleView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=TitleView.type,_this}return(0,tslib_es6.ZT)(TitleView,_super),TitleView.prototype.render=function(titleModel,ecModel,api){if(this.group.removeAll(),titleModel.get("show")){var group=this.group,textStyleModel=titleModel.getModel("textStyle"),subtextStyleModel=titleModel.getModel("subtextStyle"),textAlign=titleModel.get("textAlign"),textVerticalAlign=util.retrieve2(titleModel.get("textBaseline"),titleModel.get("textVerticalAlign")),textEl=new Text.ZP({style:(0,labelStyle.Lr)(textStyleModel,{text:titleModel.get("text"),fill:textStyleModel.getTextColor()},{disableBox:!0}),z2:10}),textRect=textEl.getBoundingRect(),subText=titleModel.get("subtext"),subTextEl=new Text.ZP({style:(0,labelStyle.Lr)(subtextStyleModel,{text:subText,fill:subtextStyleModel.getTextColor(),y:textRect.height+titleModel.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),link=titleModel.get("link"),sublink=titleModel.get("sublink"),triggerEvent=titleModel.get("triggerEvent",!0);textEl.silent=!link&&!triggerEvent,subTextEl.silent=!sublink&&!triggerEvent,link&&textEl.on("click",(function(){(0,format.MI)(link,"_"+titleModel.get("target"))})),sublink&&subTextEl.on("click",(function(){(0,format.MI)(sublink,"_"+titleModel.get("subtarget"))})),(0,innerStore.A)(textEl).eventData=(0,innerStore.A)(subTextEl).eventData=triggerEvent?{componentType:"title",componentIndex:titleModel.componentIndex}:null,group.add(textEl),subText&&group.add(subTextEl);var groupRect=group.getBoundingRect(),layoutOption=titleModel.getBoxLayoutParams();layoutOption.width=groupRect.width,layoutOption.height=groupRect.height;var layoutRect=(0,layout.ME)(layoutOption,{width:api.getWidth(),height:api.getHeight()},titleModel.get("padding"));textAlign||("middle"===(textAlign=titleModel.get("left")||titleModel.get("right"))&&(textAlign="center"),"right"===textAlign?layoutRect.x+=layoutRect.width:"center"===textAlign&&(layoutRect.x+=layoutRect.width/2)),textVerticalAlign||("center"===(textVerticalAlign=titleModel.get("top")||titleModel.get("bottom"))&&(textVerticalAlign="middle"),"bottom"===textVerticalAlign?layoutRect.y+=layoutRect.height:"middle"===textVerticalAlign&&(layoutRect.y+=layoutRect.height/2),textVerticalAlign=textVerticalAlign||"top"),group.x=layoutRect.x,group.y=layoutRect.y,group.markRedraw();var alignStyle={align:textAlign,verticalAlign:textVerticalAlign};textEl.setStyle(alignStyle),subTextEl.setStyle(alignStyle),groupRect=group.getBoundingRect();var padding=layoutRect.margin,style=titleModel.getItemStyle(["color","opacity"]);style.fill=titleModel.get("backgroundColor");var rect=new Rect.Z({shape:{x:groupRect.x-padding[3],y:groupRect.y-padding[0],width:groupRect.width+padding[1]+padding[3],height:groupRect.height+padding[0]+padding[2],r:titleModel.get("borderRadius")},style,subPixelOptimize:!0,silent:!0});group.add(rect)}},TitleView.type="title",TitleView}(Component.Z);var TimelineModel=function(_super){function TimelineModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=TimelineModel.type,_this.layoutMode="box",_this}return(0,tslib_es6.ZT)(TimelineModel,_super),TimelineModel.prototype.init=function(option,parentModel,ecModel){this.mergeDefaultAndTheme(option,ecModel),this._initData()},TimelineModel.prototype.mergeOption=function(option){_super.prototype.mergeOption.apply(this,arguments),this._initData()},TimelineModel.prototype.setCurrentIndex=function(currentIndex){null==currentIndex&&(currentIndex=this.option.currentIndex);var count=this._data.count();this.option.loop?currentIndex=(currentIndex%count+count)%count:(currentIndex>=count&&(currentIndex=count-1),currentIndex<0&&(currentIndex=0)),this.option.currentIndex=currentIndex},TimelineModel.prototype.getCurrentIndex=function(){return this.option.currentIndex},TimelineModel.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},TimelineModel.prototype.setPlayState=function(state){this.option.autoPlay=!!state},TimelineModel.prototype.getPlayState=function(){return!!this.option.autoPlay},TimelineModel.prototype._initData=function(){var processedDataArr,thisOption=this.option,dataArr=thisOption.data||[],axisType=thisOption.axisType,names=this._names=[];"category"===axisType?(processedDataArr=[],(0,util.each)(dataArr,(function(item,index){var newItem,value=(0,util_model.U5)((0,util_model.C4)(item),"");(0,util.isObject)(item)?(newItem=(0,util.clone)(item)).value=index:newItem=index,processedDataArr.push(newItem),names.push(value)}))):processedDataArr=dataArr;var dimType={category:"ordinal",time:"time",value:"number"}[axisType]||"number";(this._data=new SeriesData.Z([{name:"value",type:dimType}],this)).initData(processedDataArr,names)},TimelineModel.prototype.getData=function(){return this._data},TimelineModel.prototype.getCategories=function(){if("category"===this.get("axisType"))return this._names.slice()},TimelineModel.type="timeline",TimelineModel.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},TimelineModel}(model_Component.Z);const timeline_TimelineModel=TimelineModel;var SliderTimelineModel=function(_super){function SliderTimelineModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=SliderTimelineModel.type,_this}return(0,tslib_es6.ZT)(SliderTimelineModel,_super),SliderTimelineModel.type="timeline.slider",SliderTimelineModel.defaultOption=(0,component.ZL)(timeline_TimelineModel.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),SliderTimelineModel}(timeline_TimelineModel);(0,util.mixin)(SliderTimelineModel,dataFormat.X.prototype);const timeline_SliderTimelineModel=SliderTimelineModel;const timeline_TimelineView=function(_super){function TimelineView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=TimelineView.type,_this}return(0,tslib_es6.ZT)(TimelineView,_super),TimelineView.type="timeline",TimelineView}(Component.Z);const timeline_TimelineAxis=function(_super){function TimelineAxis(dim,scale,coordExtent,axisType){var _this=_super.call(this,dim,scale,coordExtent)||this;return _this.type=axisType||"value",_this}return(0,tslib_es6.ZT)(TimelineAxis,_super),TimelineAxis.prototype.getLabelModel=function(){return this.model.getModel("label")},TimelineAxis.prototype.isHorizontal=function(){return"horizontal"===this.model.get("orient")},TimelineAxis}(Axis.Z);var Ordinal=__webpack_require__("./node_modules/echarts/lib/scale/Ordinal.js"),Time=__webpack_require__("./node_modules/echarts/lib/scale/Time.js"),SliderTimelineView_PI=Math.PI,labelDataIndexStore=(0,util_model.Yf)(),SliderTimelineView=function(_super){function SliderTimelineView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=SliderTimelineView.type,_this}return(0,tslib_es6.ZT)(SliderTimelineView,_super),SliderTimelineView.prototype.init=function(ecModel,api){this.api=api},SliderTimelineView.prototype.render=function(timelineModel,ecModel,api){if(this.model=timelineModel,this.api=api,this.ecModel=ecModel,this.group.removeAll(),timelineModel.get("show",!0)){var layoutInfo_1=this._layout(timelineModel,api),mainGroup_1=this._createGroup("_mainGroup"),labelGroup=this._createGroup("_labelGroup"),axis_1=this._axis=this._createAxis(layoutInfo_1,timelineModel);timelineModel.formatTooltip=function(dataIndex){var name=axis_1.scale.getLabel({value:dataIndex});return(0,tooltipMarkup.TX)("nameValue",{noName:!0,value:name})},(0,util.each)(["AxisLine","AxisTick","Control","CurrentPointer"],(function(name){this["_render"+name](layoutInfo_1,mainGroup_1,axis_1,timelineModel)}),this),this._renderAxisLabel(layoutInfo_1,labelGroup,axis_1,timelineModel),this._position(layoutInfo_1,timelineModel)}this._doPlayStop(),this._updateTicksStatus()},SliderTimelineView.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},SliderTimelineView.prototype.dispose=function(){this._clearTimer()},SliderTimelineView.prototype._layout=function(timelineModel,api){var parsedLabelPos,playPosition,prevBtnPosition,nextBtnPosition,labelPosOpt=timelineModel.get(["label","position"]),orient=timelineModel.get("orient"),viewRect=function SliderTimelineView_getViewRect(model,api){return layout.ME(model.getBoxLayoutParams(),{width:api.getWidth(),height:api.getHeight()},model.get("padding"))}(timelineModel,api),labelAlignMap={horizontal:"center",vertical:(parsedLabelPos=null==labelPosOpt||"auto"===labelPosOpt?"horizontal"===orient?viewRect.y+viewRect.height/2<api.getHeight()/2?"-":"+":viewRect.x+viewRect.width/2<api.getWidth()/2?"+":"-":(0,util.isString)(labelPosOpt)?{horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[orient][labelPosOpt]:labelPosOpt)>=0||"+"===parsedLabelPos?"left":"right"},labelBaselineMap={horizontal:parsedLabelPos>=0||"+"===parsedLabelPos?"top":"bottom",vertical:"middle"},rotationMap={horizontal:0,vertical:SliderTimelineView_PI/2},mainLength="vertical"===orient?viewRect.height:viewRect.width,controlModel=timelineModel.getModel("controlStyle"),showControl=controlModel.get("show",!0),controlSize=showControl?controlModel.get("itemSize"):0,controlGap=showControl?controlModel.get("itemGap"):0,sizePlusGap=controlSize+controlGap,labelRotation=timelineModel.get(["label","rotate"])||0;labelRotation=labelRotation*SliderTimelineView_PI/180;var controlPosition=controlModel.get("position",!0),showPlayBtn=showControl&&controlModel.get("showPlayBtn",!0),showPrevBtn=showControl&&controlModel.get("showPrevBtn",!0),showNextBtn=showControl&&controlModel.get("showNextBtn",!0),xLeft=0,xRight=mainLength;"left"===controlPosition||"bottom"===controlPosition?(showPlayBtn&&(playPosition=[0,0],xLeft+=sizePlusGap),showPrevBtn&&(prevBtnPosition=[xLeft,0],xLeft+=sizePlusGap),showNextBtn&&(nextBtnPosition=[xRight-controlSize,0],xRight-=sizePlusGap)):(showPlayBtn&&(playPosition=[xRight-controlSize,0],xRight-=sizePlusGap),showPrevBtn&&(prevBtnPosition=[0,0],xLeft+=sizePlusGap),showNextBtn&&(nextBtnPosition=[xRight-controlSize,0],xRight-=sizePlusGap));var axisExtent=[xLeft,xRight];return timelineModel.get("inverse")&&axisExtent.reverse(),{viewRect,mainLength,orient,rotation:rotationMap[orient],labelRotation,labelPosOpt:parsedLabelPos,labelAlign:timelineModel.get(["label","align"])||labelAlignMap[orient],labelBaseline:timelineModel.get(["label","verticalAlign"])||timelineModel.get(["label","baseline"])||labelBaselineMap[orient],playPosition,prevBtnPosition,nextBtnPosition,axisExtent,controlSize,controlGap}},SliderTimelineView.prototype._position=function(layoutInfo,timelineModel){var mainGroup=this._mainGroup,labelGroup=this._labelGroup,viewRect=layoutInfo.viewRect;if("vertical"===layoutInfo.orient){var m=matrix.create(),rotateOriginX=viewRect.x,rotateOriginY=viewRect.y+viewRect.height;matrix.translate(m,m,[-rotateOriginX,-rotateOriginY]),matrix.rotate(m,m,-SliderTimelineView_PI/2),matrix.translate(m,m,[rotateOriginX,rotateOriginY]),(viewRect=viewRect.clone()).applyTransform(m)}var viewBound=getBound(viewRect),mainBound=getBound(mainGroup.getBoundingRect()),labelBound=getBound(labelGroup.getBoundingRect()),mainPosition=[mainGroup.x,mainGroup.y],labelsPosition=[labelGroup.x,labelGroup.y];labelsPosition[0]=mainPosition[0]=viewBound[0][0];var mainBoundIdx,labelPosOpt=layoutInfo.labelPosOpt;null==labelPosOpt||(0,util.isString)(labelPosOpt)?(toBound(mainPosition,mainBound,viewBound,1,mainBoundIdx="+"===labelPosOpt?0:1),toBound(labelsPosition,labelBound,viewBound,1,1-mainBoundIdx)):(toBound(mainPosition,mainBound,viewBound,1,mainBoundIdx=labelPosOpt>=0?0:1),labelsPosition[1]=mainPosition[1]+labelPosOpt);function setOrigin(targetGroup){targetGroup.originX=viewBound[0][0]-targetGroup.x,targetGroup.originY=viewBound[1][0]-targetGroup.y}function getBound(rect){return[[rect.x,rect.x+rect.width],[rect.y,rect.y+rect.height]]}function toBound(fromPos,from,to,dimIdx,boundIdx){fromPos[dimIdx]+=to[dimIdx][boundIdx]-from[dimIdx][boundIdx]}mainGroup.setPosition(mainPosition),labelGroup.setPosition(labelsPosition),mainGroup.rotation=labelGroup.rotation=layoutInfo.rotation,setOrigin(mainGroup),setOrigin(labelGroup)},SliderTimelineView.prototype._createAxis=function(layoutInfo,timelineModel){var data=timelineModel.getData(),axisType=timelineModel.get("axisType"),scale=function createScaleByModel(model,axisType){if(axisType=axisType||model.get("type"),axisType)switch(axisType){case"category":return new Ordinal.Z({ordinalMeta:model.getCategories(),extent:[1/0,-1/0]});case"time":return new Time.Z({locale:model.ecModel.getLocaleModel(),useUTC:model.ecModel.get("useUTC")});default:return new Interval.Z}}(timelineModel,axisType);scale.getTicks=function(){return data.mapArray(["value"],(function(value){return{value}}))};var dataExtent=data.getDataExtent("value");scale.setExtent(dataExtent[0],dataExtent[1]),scale.calcNiceTicks();var axis=new timeline_TimelineAxis("value",scale,layoutInfo.axisExtent,axisType);return axis.model=timelineModel,axis},SliderTimelineView.prototype._createGroup=function(key){var newGroup=this[key]=new Group.Z;return this.group.add(newGroup),newGroup},SliderTimelineView.prototype._renderAxisLine=function(layoutInfo,group,axis,timelineModel){var axisExtent=axis.getExtent();if(timelineModel.get(["lineStyle","show"])){var line=new Line.Z({shape:{x1:axisExtent[0],y1:0,x2:axisExtent[1],y2:0},style:(0,util.extend)({lineCap:"round"},timelineModel.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});group.add(line);var progressLine=this._progressLine=new Line.Z({shape:{x1:axisExtent[0],x2:this._currentPointer?this._currentPointer.x:axisExtent[0],y1:0,y2:0},style:(0,util.defaults)({lineCap:"round",lineWidth:line.style.lineWidth},timelineModel.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});group.add(progressLine)}},SliderTimelineView.prototype._renderAxisTick=function(layoutInfo,group,axis,timelineModel){var _this=this,data=timelineModel.getData(),ticks=axis.scale.getTicks();this._tickSymbols=[],(0,util.each)(ticks,(function(tick){var tickCoord=axis.dataToCoord(tick.value),itemModel=data.getItemModel(tick.value),itemStyleModel=itemModel.getModel("itemStyle"),hoverStyleModel=itemModel.getModel(["emphasis","itemStyle"]),progressStyleModel=itemModel.getModel(["progress","itemStyle"]),symbolOpt={x:tickCoord,y:0,onclick:(0,util.bind)(_this._changeTimeline,_this,tick.value)},el=giveSymbol(itemModel,itemStyleModel,group,symbolOpt);el.ensureState("emphasis").style=hoverStyleModel.getItemStyle(),el.ensureState("progress").style=progressStyleModel.getItemStyle(),(0,states.vF)(el);var ecData=(0,innerStore.A)(el);itemModel.get("tooltip")?(ecData.dataIndex=tick.value,ecData.dataModel=timelineModel):ecData.dataIndex=ecData.dataModel=null,_this._tickSymbols.push(el)}))},SliderTimelineView.prototype._renderAxisLabel=function(layoutInfo,group,axis,timelineModel){var _this=this;if(axis.getLabelModel().get("show")){var data=timelineModel.getData(),labels=axis.getViewLabels();this._tickLabels=[],(0,util.each)(labels,(function(labelItem){var dataIndex=labelItem.tickValue,itemModel=data.getItemModel(dataIndex),normalLabelModel=itemModel.getModel("label"),hoverLabelModel=itemModel.getModel(["emphasis","label"]),progressLabelModel=itemModel.getModel(["progress","label"]),tickCoord=axis.dataToCoord(labelItem.tickValue),textEl=new Text.ZP({x:tickCoord,y:0,rotation:layoutInfo.labelRotation-layoutInfo.rotation,onclick:(0,util.bind)(_this._changeTimeline,_this,dataIndex),silent:!1,style:(0,labelStyle.Lr)(normalLabelModel,{text:labelItem.formattedLabel,align:layoutInfo.labelAlign,verticalAlign:layoutInfo.labelBaseline})});textEl.ensureState("emphasis").style=(0,labelStyle.Lr)(hoverLabelModel),textEl.ensureState("progress").style=(0,labelStyle.Lr)(progressLabelModel),group.add(textEl),(0,states.vF)(textEl),labelDataIndexStore(textEl).dataIndex=dataIndex,_this._tickLabels.push(textEl)}))}},SliderTimelineView.prototype._renderControl=function(layoutInfo,group,axis,timelineModel){var controlSize=layoutInfo.controlSize,rotation=layoutInfo.rotation,itemStyle=timelineModel.getModel("controlStyle").getItemStyle(),hoverStyle=timelineModel.getModel(["emphasis","controlStyle"]).getItemStyle(),playState=timelineModel.getPlayState(),inverse=timelineModel.get("inverse",!0);function makeBtn(position,iconName,onclick,willRotate){if(position){var iconSize=(0,contain_text.GM)((0,util.retrieve2)(timelineModel.get(["controlStyle",iconName+"BtnSize"]),controlSize),controlSize),btn=function makeControlIcon(timelineModel,objPath,rect,opts){var style=opts.style,icon=graphic.createIcon(timelineModel.get(["controlStyle",objPath]),opts||{},new BoundingRect.Z(rect[0],rect[1],rect[2],rect[3]));style&&icon.setStyle(style);return icon}(timelineModel,iconName+"Icon",[0,-iconSize/2,iconSize,iconSize],{x:position[0],y:position[1],originX:controlSize/2,originY:0,rotation:willRotate?-rotation:0,rectHover:!0,style:itemStyle,onclick});btn.ensureState("emphasis").style=hoverStyle,group.add(btn),(0,states.vF)(btn)}}makeBtn(layoutInfo.nextBtnPosition,"next",(0,util.bind)(this._changeTimeline,this,inverse?"-":"+")),makeBtn(layoutInfo.prevBtnPosition,"prev",(0,util.bind)(this._changeTimeline,this,inverse?"+":"-")),makeBtn(layoutInfo.playPosition,playState?"stop":"play",(0,util.bind)(this._handlePlayClick,this,!playState),!0)},SliderTimelineView.prototype._renderCurrentPointer=function(layoutInfo,group,axis,timelineModel){var data=timelineModel.getData(),currentIndex=timelineModel.getCurrentIndex(),pointerModel=data.getItemModel(currentIndex).getModel("checkpointStyle"),me=this,callback={onCreate:function(pointer){pointer.draggable=!0,pointer.drift=(0,util.bind)(me._handlePointerDrag,me),pointer.ondragend=(0,util.bind)(me._handlePointerDragend,me),pointerMoveTo(pointer,me._progressLine,currentIndex,axis,timelineModel,!0)},onUpdate:function(pointer){pointerMoveTo(pointer,me._progressLine,currentIndex,axis,timelineModel)}};this._currentPointer=giveSymbol(pointerModel,pointerModel,this._mainGroup,{},this._currentPointer,callback)},SliderTimelineView.prototype._handlePlayClick=function(nextState){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:nextState,from:this.uid})},SliderTimelineView.prototype._handlePointerDrag=function(dx,dy,e){this._clearTimer(),this._pointerChangeTimeline([e.offsetX,e.offsetY])},SliderTimelineView.prototype._handlePointerDragend=function(e){this._pointerChangeTimeline([e.offsetX,e.offsetY],!0)},SliderTimelineView.prototype._pointerChangeTimeline=function(mousePos,trigger){var toCoord=this._toAxisCoord(mousePos)[0],axis=this._axis,axisExtent=number.dt(axis.getExtent().slice());toCoord>axisExtent[1]&&(toCoord=axisExtent[1]),toCoord<axisExtent[0]&&(toCoord=axisExtent[0]),this._currentPointer.x=toCoord,this._currentPointer.markRedraw();var progressLine=this._progressLine;progressLine&&(progressLine.shape.x2=toCoord,progressLine.dirty());var targetDataIndex=this._findNearestTick(toCoord),timelineModel=this.model;(trigger||targetDataIndex!==timelineModel.getCurrentIndex()&&timelineModel.get("realtime"))&&this._changeTimeline(targetDataIndex)},SliderTimelineView.prototype._doPlayStop=function(){var _this=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout((function(){var timelineModel=_this.model;_this._changeTimeline(timelineModel.getCurrentIndex()+(timelineModel.get("rewind",!0)?-1:1))}),this.model.get("playInterval")))},SliderTimelineView.prototype._toAxisCoord=function(vertex){var trans=this._mainGroup.getLocalTransform();return graphic.applyTransform(vertex,trans,!0)},SliderTimelineView.prototype._findNearestTick=function(axisCoord){var targetDataIndex,data=this.model.getData(),dist=1/0,axis=this._axis;return data.each(["value"],(function(value,dataIndex){var coord=axis.dataToCoord(value),d=Math.abs(coord-axisCoord);d<dist&&(dist=d,targetDataIndex=dataIndex)})),targetDataIndex},SliderTimelineView.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},SliderTimelineView.prototype._changeTimeline=function(nextIndex){var currentIndex=this.model.getCurrentIndex();"+"===nextIndex?nextIndex=currentIndex+1:"-"===nextIndex&&(nextIndex=currentIndex-1),this.api.dispatchAction({type:"timelineChange",currentIndex:nextIndex,from:this.uid})},SliderTimelineView.prototype._updateTicksStatus=function(){var currentIndex=this.model.getCurrentIndex(),tickSymbols=this._tickSymbols,tickLabels=this._tickLabels;if(tickSymbols)for(var i=0;i<tickSymbols.length;i++)tickSymbols&&tickSymbols[i]&&tickSymbols[i].toggleState("progress",i<currentIndex);if(tickLabels)for(i=0;i<tickLabels.length;i++)tickLabels&&tickLabels[i]&&tickLabels[i].toggleState("progress",labelDataIndexStore(tickLabels[i]).dataIndex<=currentIndex)},SliderTimelineView.type="timeline.slider",SliderTimelineView}(timeline_TimelineView);function giveSymbol(hostModel,itemStyleModel,group,opt,symbol,callback){var color=itemStyleModel.get("color");if(symbol)symbol.setColor(color),group.add(symbol),callback&&callback.onUpdate(symbol);else{var symbolType=hostModel.get("symbol");(symbol=(0,util_symbol.th)(symbolType,-1,-1,2,2,color)).setStyle("strokeNoScale",!0),group.add(symbol),callback&&callback.onCreate(symbol)}var itemStyle=itemStyleModel.getItemStyle(["color"]);symbol.setStyle(itemStyle),opt=(0,util.merge)({rectHover:!0,z2:100},opt,!0);var symbolSize=(0,util_symbol.zp)(hostModel.get("symbolSize"));opt.scaleX=symbolSize[0]/2,opt.scaleY=symbolSize[1]/2;var symbolOffset=(0,util_symbol.Cq)(hostModel.get("symbolOffset"),symbolSize);symbolOffset&&(opt.x=(opt.x||0)+symbolOffset[0],opt.y=(opt.y||0)+symbolOffset[1]);var symbolRotate=hostModel.get("symbolRotate");return opt.rotation=(symbolRotate||0)*Math.PI/180||0,symbol.attr(opt),symbol.updateTransform(),symbol}function pointerMoveTo(pointer,progressLine,dataIndex,axis,timelineModel,noAnimation){if(!pointer.dragging){var pointerModel=timelineModel.getModel("checkpointStyle"),toCoord=axis.dataToCoord(timelineModel.getData().get("value",dataIndex));if(noAnimation||!pointerModel.get("animation",!0))pointer.attr({x:toCoord,y:0}),progressLine&&progressLine.attr({shape:{x2:toCoord}});else{var animationCfg={duration:pointerModel.get("animationDuration",!0),easing:pointerModel.get("animationEasing",!0)};pointer.stopAnimation(null,!0),pointer.animateTo({x:toCoord,y:0},animationCfg),progressLine&&progressLine.animateTo({shape:{x2:toCoord}},animationCfg)}}}const timeline_SliderTimelineView=SliderTimelineView;function timelinePreprocessor(option){var timelineOpt=option&&option.timeline;util.isArray(timelineOpt)||(timelineOpt=timelineOpt?[timelineOpt]:[]),util.each(timelineOpt,(function(opt){opt&&function compatibleEC2(opt){var type=opt.type,ec2Types={number:"value",time:"time"};ec2Types[type]&&(opt.axisType=ec2Types[type],delete opt.type);if(transferItem(opt),has(opt,"controlPosition")){var controlStyle=opt.controlStyle||(opt.controlStyle={});has(controlStyle,"position")||(controlStyle.position=opt.controlPosition),"none"!==controlStyle.position||has(controlStyle,"show")||(controlStyle.show=!1,delete controlStyle.position),delete opt.controlPosition}util.each(opt.data||[],(function(dataItem){util.isObject(dataItem)&&!util.isArray(dataItem)&&(!has(dataItem,"value")&&has(dataItem,"name")&&(dataItem.value=dataItem.name),transferItem(dataItem))}))}(opt)}))}function transferItem(opt){var itemStyle=opt.itemStyle||(opt.itemStyle={}),itemStyleEmphasis=itemStyle.emphasis||(itemStyle.emphasis={}),label=opt.label||opt.label||{},labelNormal=label.normal||(label.normal={}),excludeLabelAttr={normal:1,emphasis:1};util.each(label,(function(value,name){excludeLabelAttr[name]||has(labelNormal,name)||(labelNormal[name]=value)})),itemStyleEmphasis.label&&!has(label,"emphasis")&&(label.emphasis=itemStyleEmphasis.label,delete itemStyleEmphasis.label)}function has(obj,attr){return obj.hasOwnProperty(attr)}function checkMarkerInSeries(seriesOpts,markerType){if(!seriesOpts)return!1;for(var seriesOptArr=(0,util.isArray)(seriesOpts)?seriesOpts:[seriesOpts],idx=0;idx<seriesOptArr.length;idx++)if(seriesOptArr[idx]&&seriesOptArr[idx][markerType])return!0;return!1}function fillLabel(opt){(0,util_model.Cc)(opt,"label",["show"])}var MarkerModel_inner=(0,util_model.Yf)(),MarkerModel=function(_super){function MarkerModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=MarkerModel.type,_this.createdBySelf=!1,_this}return(0,tslib_es6.ZT)(MarkerModel,_super),MarkerModel.prototype.init=function(option,parentModel,ecModel){this.mergeDefaultAndTheme(option,ecModel),this._mergeOption(option,ecModel,!1,!0)},MarkerModel.prototype.isAnimationEnabled=function(){if(env.Z.node)return!1;var hostSeries=this.__hostSeries;return this.getShallow("animation")&&hostSeries&&hostSeries.isAnimationEnabled()},MarkerModel.prototype.mergeOption=function(newOpt,ecModel){this._mergeOption(newOpt,ecModel,!1,!1)},MarkerModel.prototype._mergeOption=function(newOpt,ecModel,createdBySelf,isInit){var componentType=this.mainType;createdBySelf||ecModel.eachSeries((function(seriesModel){var markerOpt=seriesModel.get(this.mainType,!0),markerModel=MarkerModel_inner(seriesModel)[componentType];markerOpt&&markerOpt.data?(markerModel?markerModel._mergeOption(markerOpt,ecModel,!0):(isInit&&fillLabel(markerOpt),util.each(markerOpt.data,(function(item){item instanceof Array?(fillLabel(item[0]),fillLabel(item[1])):fillLabel(item)})),markerModel=this.createMarkerModelFromSeries(markerOpt,this,ecModel),util.extend(markerModel,{mainType:this.mainType,seriesIndex:seriesModel.seriesIndex,name:seriesModel.name,createdBySelf:!0}),markerModel.__hostSeries=seriesModel),MarkerModel_inner(seriesModel)[componentType]=markerModel):MarkerModel_inner(seriesModel)[componentType]=null}),this)},MarkerModel.prototype.formatTooltip=function(dataIndex,multipleSeries,dataType){var data=this.getData(),value=this.getRawValue(dataIndex),itemName=data.getName(dataIndex);return(0,tooltipMarkup.TX)("section",{header:this.name,blocks:[(0,tooltipMarkup.TX)("nameValue",{name:itemName,value,noName:!itemName,noValue:null==value})]})},MarkerModel.prototype.getData=function(){return this._data},MarkerModel.prototype.setData=function(data){this._data=data},MarkerModel.getMarkerModelFromSeries=function(seriesModel,componentType){return MarkerModel_inner(seriesModel)[componentType]},MarkerModel.type="marker",MarkerModel.dependencies=["series","grid","polar","geo"],MarkerModel}(model_Component.Z);util.mixin(MarkerModel,dataFormat.X.prototype);const marker_MarkerModel=MarkerModel;const marker_MarkPointModel=function(_super){function MarkPointModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=MarkPointModel.type,_this}return(0,tslib_es6.ZT)(MarkPointModel,_super),MarkPointModel.prototype.createMarkerModelFromSeries=function(markerOpt,masterMarkerModel,ecModel){return new MarkPointModel(markerOpt,masterMarkerModel,ecModel)},MarkPointModel.type="markPoint",MarkPointModel.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},MarkPointModel}(marker_MarkerModel);var dataValueHelper=__webpack_require__("./node_modules/echarts/lib/data/helper/dataValueHelper.js");function hasXOrY(item){return!(isNaN(parseFloat(item.x))&&isNaN(parseFloat(item.y)))}function markerTypeCalculatorWithExtent(markerType,data,otherDataDim,targetDataDim,otherCoordIndex,targetCoordIndex){var coordArr=[],calcDataDim=(0,dataStackHelper.M)(data,targetDataDim)?data.getCalculationInfo("stackResultDimension"):targetDataDim,value=numCalculate(data,calcDataDim,markerType),dataIndex=data.indicesOfNearest(calcDataDim,value)[0];coordArr[otherCoordIndex]=data.get(otherDataDim,dataIndex),coordArr[targetCoordIndex]=data.get(calcDataDim,dataIndex);var coordArrValue=data.get(targetDataDim,dataIndex),precision=number.p8(data.get(targetDataDim,dataIndex));return(precision=Math.min(precision,20))>=0&&(coordArr[targetCoordIndex]=+coordArr[targetCoordIndex].toFixed(precision)),[coordArr,coordArrValue]}var markerTypeCalculator={min:(0,util.curry)(markerTypeCalculatorWithExtent,"min"),max:(0,util.curry)(markerTypeCalculatorWithExtent,"max"),average:(0,util.curry)(markerTypeCalculatorWithExtent,"average"),median:(0,util.curry)(markerTypeCalculatorWithExtent,"median")};function dataTransform(seriesModel,item){if(item){var data=seriesModel.getData(),coordSys=seriesModel.coordinateSystem,dims=coordSys&&coordSys.dimensions;if(!function hasXAndY(item){return!isNaN(parseFloat(item.x))&&!isNaN(parseFloat(item.y))}(item)&&!(0,util.isArray)(item.coord)&&(0,util.isArray)(dims)){var axisInfo=markerHelper_getAxisInfo(item,data,coordSys,seriesModel);if((item=(0,util.clone)(item)).type&&markerTypeCalculator[item.type]&&axisInfo.baseAxis&&axisInfo.valueAxis){var otherCoordIndex=(0,util.indexOf)(dims,axisInfo.baseAxis.dim),targetCoordIndex=(0,util.indexOf)(dims,axisInfo.valueAxis.dim),coordInfo=markerTypeCalculator[item.type](data,axisInfo.baseDataDim,axisInfo.valueDataDim,otherCoordIndex,targetCoordIndex);item.coord=coordInfo[0],item.value=coordInfo[1]}else item.coord=[null!=item.xAxis?item.xAxis:item.radiusAxis,null!=item.yAxis?item.yAxis:item.angleAxis]}if(null!=item.coord&&(0,util.isArray)(dims))for(var coord=item.coord,i=0;i<2;i++)markerTypeCalculator[coord[i]]&&(coord[i]=numCalculate(data,data.mapDimension(dims[i]),coord[i]));else item.coord=[];return item}}function markerHelper_getAxisInfo(item,data,coordSys,seriesModel){var ret={};return null!=item.valueIndex||null!=item.valueDim?(ret.valueDataDim=null!=item.valueIndex?data.getDimension(item.valueIndex):item.valueDim,ret.valueAxis=coordSys.getAxis(function dataDimToCoordDim(seriesModel,dataDim){var dimItem=seriesModel.getData().getDimensionInfo(dataDim);return dimItem&&dimItem.coordDim}(seriesModel,ret.valueDataDim)),ret.baseAxis=coordSys.getOtherAxis(ret.valueAxis),ret.baseDataDim=data.mapDimension(ret.baseAxis.dim)):(ret.baseAxis=seriesModel.getBaseAxis(),ret.valueAxis=coordSys.getOtherAxis(ret.baseAxis),ret.baseDataDim=data.mapDimension(ret.baseAxis.dim),ret.valueDataDim=data.mapDimension(ret.valueAxis.dim)),ret}function markerHelper_dataFilter(coordSys,item){return!(coordSys&&coordSys.containData&&item.coord&&!hasXOrY(item))||coordSys.containData(item.coord)}function createMarkerDimValueGetter(inCoordSys,dims){return inCoordSys?function(item,dimName,dataIndex,dimIndex){var rawVal=dimIndex<2?item.coord&&item.coord[dimIndex]:item.value;return(0,dataValueHelper.yQ)(rawVal,dims[dimIndex])}:function(item,dimName,dataIndex,dimIndex){return(0,dataValueHelper.yQ)(item.value,dims[dimIndex])}}function numCalculate(data,valueDataDim,type){if("average"===type){var sum_1=0,count_1=0;return data.each(valueDataDim,(function(val,idx){isNaN(val)||(sum_1+=val,count_1++)})),sum_1/count_1}return"median"===type?data.getMedian(valueDataDim):data.getDataExtent(valueDataDim)["max"===type?1:0]}var MarkerView_inner=(0,util_model.Yf)();const marker_MarkerView=function(_super){function MarkerView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=MarkerView.type,_this}return(0,tslib_es6.ZT)(MarkerView,_super),MarkerView.prototype.init=function(){this.markerGroupMap=(0,util.createHashMap)()},MarkerView.prototype.render=function(markerModel,ecModel,api){var _this=this,markerGroupMap=this.markerGroupMap;markerGroupMap.each((function(item){MarkerView_inner(item).keep=!1})),ecModel.eachSeries((function(seriesModel){var markerModel=marker_MarkerModel.getMarkerModelFromSeries(seriesModel,_this.type);markerModel&&_this.renderSeries(seriesModel,markerModel,ecModel,api)})),markerGroupMap.each((function(item){!MarkerView_inner(item).keep&&_this.group.remove(item.group)}))},MarkerView.prototype.markKeep=function(drawGroup){MarkerView_inner(drawGroup).keep=!0},MarkerView.prototype.toggleBlurSeries=function(seriesModelList,isBlur){var _this=this;(0,util.each)(seriesModelList,(function(seriesModel){var markerModel=marker_MarkerModel.getMarkerModelFromSeries(seriesModel,_this.type);markerModel&&markerModel.getData().eachItemGraphicEl((function(el){el&&(isBlur?(0,states.SX)(el):(0,states.VP)(el))}))}))},MarkerView.type="marker",MarkerView}(Component.Z);function updateMarkerLayout(mpData,seriesModel,api){var coordSys=seriesModel.coordinateSystem;mpData.each((function(idx){var point,itemModel=mpData.getItemModel(idx),xPx=number.GM(itemModel.get("x"),api.getWidth()),yPx=number.GM(itemModel.get("y"),api.getHeight());if(isNaN(xPx)||isNaN(yPx)){if(seriesModel.getMarkerPosition)point=seriesModel.getMarkerPosition(mpData.getValues(mpData.dimensions,idx));else if(coordSys){var x=mpData.get(coordSys.dimensions[0],idx),y=mpData.get(coordSys.dimensions[1],idx);point=coordSys.dataToPoint([x,y])}}else point=[xPx,yPx];isNaN(xPx)||(point[0]=xPx),isNaN(yPx)||(point[1]=yPx),mpData.setItemLayout(idx,point)}))}const marker_MarkPointView=function(_super){function MarkPointView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=MarkPointView.type,_this}return(0,tslib_es6.ZT)(MarkPointView,_super),MarkPointView.prototype.updateTransform=function(markPointModel,ecModel,api){ecModel.eachSeries((function(seriesModel){var mpModel=marker_MarkerModel.getMarkerModelFromSeries(seriesModel,"markPoint");mpModel&&(updateMarkerLayout(mpModel.getData(),seriesModel,api),this.markerGroupMap.get(seriesModel.id).updateLayout())}),this)},MarkPointView.prototype.renderSeries=function(seriesModel,mpModel,ecModel,api){var coordSys=seriesModel.coordinateSystem,seriesId=seriesModel.id,seriesData=seriesModel.getData(),symbolDrawMap=this.markerGroupMap,symbolDraw=symbolDrawMap.get(seriesId)||symbolDrawMap.set(seriesId,new helper_SymbolDraw),mpData=function createData(coordSys,seriesModel,mpModel){var coordDimsInfos;coordDimsInfos=coordSys?(0,util.map)(coordSys&&coordSys.dimensions,(function(coordDim){var info=seriesModel.getData().getDimensionInfo(seriesModel.getData().mapDimension(coordDim))||{};return(0,util.extend)((0,util.extend)({},info),{name:coordDim,ordinalMeta:null})})):[{name:"value",type:"float"}];var mpData=new SeriesData.Z(coordDimsInfos,mpModel),dataOpt=(0,util.map)(mpModel.get("data"),(0,util.curry)(dataTransform,seriesModel));coordSys&&(dataOpt=(0,util.filter)(dataOpt,(0,util.curry)(markerHelper_dataFilter,coordSys)));var dimValueGetter=createMarkerDimValueGetter(!!coordSys,coordDimsInfos);return mpData.initData(dataOpt,null,dimValueGetter),mpData}(coordSys,seriesModel,mpModel);mpModel.setData(mpData),updateMarkerLayout(mpModel.getData(),seriesModel,api),mpData.each((function(idx){var itemModel=mpData.getItemModel(idx),symbol=itemModel.getShallow("symbol"),symbolSize=itemModel.getShallow("symbolSize"),symbolRotate=itemModel.getShallow("symbolRotate"),symbolOffset=itemModel.getShallow("symbolOffset"),symbolKeepAspect=itemModel.getShallow("symbolKeepAspect");if((0,util.isFunction)(symbol)||(0,util.isFunction)(symbolSize)||(0,util.isFunction)(symbolRotate)||(0,util.isFunction)(symbolOffset)){var rawIdx=mpModel.getRawValue(idx),dataParams=mpModel.getDataParams(idx);(0,util.isFunction)(symbol)&&(symbol=symbol(rawIdx,dataParams)),(0,util.isFunction)(symbolSize)&&(symbolSize=symbolSize(rawIdx,dataParams)),(0,util.isFunction)(symbolRotate)&&(symbolRotate=symbolRotate(rawIdx,dataParams)),(0,util.isFunction)(symbolOffset)&&(symbolOffset=symbolOffset(rawIdx,dataParams))}var style=itemModel.getModel("itemStyle").getItemStyle(),color=(0,visual_helper.UL)(seriesData,"color");style.fill||(style.fill=color),mpData.setItemVisual(idx,{symbol,symbolSize,symbolRotate,symbolOffset,symbolKeepAspect,style})})),symbolDraw.updateData(mpData),this.group.add(symbolDraw.group),mpData.eachItemGraphicEl((function(el){el.traverse((function(child){(0,innerStore.A)(child).dataModel=mpModel}))})),this.markKeep(symbolDraw),symbolDraw.group.silent=mpModel.get("silent")||seriesModel.get("silent")},MarkPointView.type="markPoint",MarkPointView}(marker_MarkerView);const marker_MarkLineModel=function(_super){function MarkLineModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=MarkLineModel.type,_this}return(0,tslib_es6.ZT)(MarkLineModel,_super),MarkLineModel.prototype.createMarkerModelFromSeries=function(markerOpt,masterMarkerModel,ecModel){return new MarkLineModel(markerOpt,masterMarkerModel,ecModel)},MarkLineModel.type="markLine",MarkLineModel.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},MarkLineModel}(marker_MarkerModel);var MarkLineView_inner=(0,util_model.Yf)(),markLineTransform=function(seriesModel,coordSys,mlModel,item){var itemArray,data=seriesModel.getData();if((0,util.isArray)(item))itemArray=item;else{var mlType=item.type;if("min"===mlType||"max"===mlType||"average"===mlType||"median"===mlType||null!=item.xAxis||null!=item.yAxis){var valueAxis=void 0,value=void 0;if(null!=item.yAxis||null!=item.xAxis)valueAxis=coordSys.getAxis(null!=item.yAxis?"y":"x"),value=(0,util.retrieve)(item.yAxis,item.xAxis);else{var axisInfo=markerHelper_getAxisInfo(item,data,coordSys,seriesModel);valueAxis=axisInfo.valueAxis,value=numCalculate(data,(0,dataStackHelper.IR)(data,axisInfo.valueDataDim),mlType)}var valueIndex="x"===valueAxis.dim?0:1,baseIndex=1-valueIndex,mlFrom=(0,util.clone)(item),mlTo={coord:[]};mlFrom.type=null,mlFrom.coord=[],mlFrom.coord[baseIndex]=-1/0,mlTo.coord[baseIndex]=1/0;var precision=mlModel.get("precision");precision>=0&&(0,util.isNumber)(value)&&(value=+value.toFixed(Math.min(precision,20))),mlFrom.coord[valueIndex]=mlTo.coord[valueIndex]=value,itemArray=[mlFrom,mlTo,{type:mlType,valueIndex:item.valueIndex,value}]}else itemArray=[]}var normalizedItem=[dataTransform(seriesModel,itemArray[0]),dataTransform(seriesModel,itemArray[1]),(0,util.extend)({},itemArray[2])];return normalizedItem[2].type=normalizedItem[2].type||null,(0,util.merge)(normalizedItem[2],normalizedItem[0]),(0,util.merge)(normalizedItem[2],normalizedItem[1]),normalizedItem};function isInfinity(val){return!isNaN(val)&&!isFinite(val)}function ifMarkLineHasOnlyDim(dimIndex,fromCoord,toCoord,coordSys){var otherDimIndex=1-dimIndex,dimName=coordSys.dimensions[dimIndex];return isInfinity(fromCoord[otherDimIndex])&&isInfinity(toCoord[otherDimIndex])&&fromCoord[dimIndex]===toCoord[dimIndex]&&coordSys.getAxis(dimName).containData(fromCoord[dimIndex])}function markLineFilter(coordSys,item){if("cartesian2d"===coordSys.type){var fromCoord=item[0].coord,toCoord=item[1].coord;if(fromCoord&&toCoord&&(ifMarkLineHasOnlyDim(1,fromCoord,toCoord,coordSys)||ifMarkLineHasOnlyDim(0,fromCoord,toCoord,coordSys)))return!0}return markerHelper_dataFilter(coordSys,item[0])&&markerHelper_dataFilter(coordSys,item[1])}function updateSingleMarkerEndLayout(data,idx,isFrom,seriesModel,api){var point,coordSys=seriesModel.coordinateSystem,itemModel=data.getItemModel(idx),xPx=number.GM(itemModel.get("x"),api.getWidth()),yPx=number.GM(itemModel.get("y"),api.getHeight());if(isNaN(xPx)||isNaN(yPx)){if(seriesModel.getMarkerPosition)point=seriesModel.getMarkerPosition(data.getValues(data.dimensions,idx));else{var dims=coordSys.dimensions,x=data.get(dims[0],idx),y=data.get(dims[1],idx);point=coordSys.dataToPoint([x,y])}if((0,CoordinateSystem.H)(coordSys,"cartesian2d")){var xAxis=coordSys.getAxis("x"),yAxis=coordSys.getAxis("y");dims=coordSys.dimensions;isInfinity(data.get(dims[0],idx))?point[0]=xAxis.toGlobalCoord(xAxis.getExtent()[isFrom?0:1]):isInfinity(data.get(dims[1],idx))&&(point[1]=yAxis.toGlobalCoord(yAxis.getExtent()[isFrom?0:1]))}isNaN(xPx)||(point[0]=xPx),isNaN(yPx)||(point[1]=yPx)}else point=[xPx,yPx];data.setItemLayout(idx,point)}const marker_MarkLineView=function(_super){function MarkLineView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=MarkLineView.type,_this}return(0,tslib_es6.ZT)(MarkLineView,_super),MarkLineView.prototype.updateTransform=function(markLineModel,ecModel,api){ecModel.eachSeries((function(seriesModel){var mlModel=marker_MarkerModel.getMarkerModelFromSeries(seriesModel,"markLine");if(mlModel){var mlData_1=mlModel.getData(),fromData_1=MarkLineView_inner(mlModel).from,toData_1=MarkLineView_inner(mlModel).to;fromData_1.each((function(idx){updateSingleMarkerEndLayout(fromData_1,idx,!0,seriesModel,api),updateSingleMarkerEndLayout(toData_1,idx,!1,seriesModel,api)})),mlData_1.each((function(idx){mlData_1.setItemLayout(idx,[fromData_1.getItemLayout(idx),toData_1.getItemLayout(idx)])})),this.markerGroupMap.get(seriesModel.id).updateLayout()}}),this)},MarkLineView.prototype.renderSeries=function(seriesModel,mlModel,ecModel,api){var coordSys=seriesModel.coordinateSystem,seriesId=seriesModel.id,seriesData=seriesModel.getData(),lineDrawMap=this.markerGroupMap,lineDraw=lineDrawMap.get(seriesId)||lineDrawMap.set(seriesId,new helper_LineDraw);this.group.add(lineDraw.group);var mlData=function createList(coordSys,seriesModel,mlModel){var coordDimsInfos;coordDimsInfos=coordSys?(0,util.map)(coordSys&&coordSys.dimensions,(function(coordDim){var info=seriesModel.getData().getDimensionInfo(seriesModel.getData().mapDimension(coordDim))||{};return(0,util.extend)((0,util.extend)({},info),{name:coordDim,ordinalMeta:null})})):[{name:"value",type:"float"}];var fromData=new SeriesData.Z(coordDimsInfos,mlModel),toData=new SeriesData.Z(coordDimsInfos,mlModel),lineData=new SeriesData.Z([],mlModel),optData=(0,util.map)(mlModel.get("data"),(0,util.curry)(markLineTransform,seriesModel,coordSys,mlModel));coordSys&&(optData=(0,util.filter)(optData,(0,util.curry)(markLineFilter,coordSys)));var dimValueGetter=createMarkerDimValueGetter(!!coordSys,coordDimsInfos);return fromData.initData((0,util.map)(optData,(function(item){return item[0]})),null,dimValueGetter),toData.initData((0,util.map)(optData,(function(item){return item[1]})),null,dimValueGetter),lineData.initData((0,util.map)(optData,(function(item){return item[2]}))),lineData.hasItemOption=!0,{from:fromData,to:toData,line:lineData}}(coordSys,seriesModel,mlModel),fromData=mlData.from,toData=mlData.to,lineData=mlData.line;MarkLineView_inner(mlModel).from=fromData,MarkLineView_inner(mlModel).to=toData,mlModel.setData(lineData);var symbolType=mlModel.get("symbol"),symbolSize=mlModel.get("symbolSize"),symbolRotate=mlModel.get("symbolRotate"),symbolOffset=mlModel.get("symbolOffset");function updateDataVisualAndLayout(data,idx,isFrom){var itemModel=data.getItemModel(idx);updateSingleMarkerEndLayout(data,idx,isFrom,seriesModel,api);var style=itemModel.getModel("itemStyle").getItemStyle();null==style.fill&&(style.fill=(0,visual_helper.UL)(seriesData,"color")),data.setItemVisual(idx,{symbolKeepAspect:itemModel.get("symbolKeepAspect"),symbolOffset:(0,util.retrieve2)(itemModel.get("symbolOffset",!0),symbolOffset[isFrom?0:1]),symbolRotate:(0,util.retrieve2)(itemModel.get("symbolRotate",!0),symbolRotate[isFrom?0:1]),symbolSize:(0,util.retrieve2)(itemModel.get("symbolSize"),symbolSize[isFrom?0:1]),symbol:(0,util.retrieve2)(itemModel.get("symbol",!0),symbolType[isFrom?0:1]),style})}(0,util.isArray)(symbolType)||(symbolType=[symbolType,symbolType]),(0,util.isArray)(symbolSize)||(symbolSize=[symbolSize,symbolSize]),(0,util.isArray)(symbolRotate)||(symbolRotate=[symbolRotate,symbolRotate]),(0,util.isArray)(symbolOffset)||(symbolOffset=[symbolOffset,symbolOffset]),mlData.from.each((function(idx){updateDataVisualAndLayout(fromData,idx,!0),updateDataVisualAndLayout(toData,idx,!1)})),lineData.each((function(idx){var lineStyle=lineData.getItemModel(idx).getModel("lineStyle").getLineStyle();lineData.setItemLayout(idx,[fromData.getItemLayout(idx),toData.getItemLayout(idx)]),null==lineStyle.stroke&&(lineStyle.stroke=fromData.getItemVisual(idx,"style").fill),lineData.setItemVisual(idx,{fromSymbolKeepAspect:fromData.getItemVisual(idx,"symbolKeepAspect"),fromSymbolOffset:fromData.getItemVisual(idx,"symbolOffset"),fromSymbolRotate:fromData.getItemVisual(idx,"symbolRotate"),fromSymbolSize:fromData.getItemVisual(idx,"symbolSize"),fromSymbol:fromData.getItemVisual(idx,"symbol"),toSymbolKeepAspect:toData.getItemVisual(idx,"symbolKeepAspect"),toSymbolOffset:toData.getItemVisual(idx,"symbolOffset"),toSymbolRotate:toData.getItemVisual(idx,"symbolRotate"),toSymbolSize:toData.getItemVisual(idx,"symbolSize"),toSymbol:toData.getItemVisual(idx,"symbol"),style:lineStyle})})),lineDraw.updateData(lineData),mlData.line.eachItemGraphicEl((function(el){(0,innerStore.A)(el).dataModel=mlModel,el.traverse((function(child){(0,innerStore.A)(child).dataModel=mlModel}))})),this.markKeep(lineDraw),lineDraw.group.silent=mlModel.get("silent")||seriesModel.get("silent")},MarkLineView.type="markLine",MarkLineView}(marker_MarkerView);const marker_MarkAreaModel=function(_super){function MarkAreaModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=MarkAreaModel.type,_this}return(0,tslib_es6.ZT)(MarkAreaModel,_super),MarkAreaModel.prototype.createMarkerModelFromSeries=function(markerOpt,masterMarkerModel,ecModel){return new MarkAreaModel(markerOpt,masterMarkerModel,ecModel)},MarkAreaModel.type="markArea",MarkAreaModel.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},MarkAreaModel}(marker_MarkerModel);var MarkAreaView_inner=(0,util_model.Yf)(),markAreaTransform=function(seriesModel,coordSys,maModel,item){var item0=item[0],item1=item[1];if(item0&&item1){var lt=dataTransform(seriesModel,item0),rb=dataTransform(seriesModel,item1),ltCoord=lt.coord,rbCoord=rb.coord;ltCoord[0]=(0,util.retrieve)(ltCoord[0],-1/0),ltCoord[1]=(0,util.retrieve)(ltCoord[1],-1/0),rbCoord[0]=(0,util.retrieve)(rbCoord[0],1/0),rbCoord[1]=(0,util.retrieve)(rbCoord[1],1/0);var result=(0,util.mergeAll)([{},lt,rb]);return result.coord=[lt.coord,rb.coord],result.x0=lt.x,result.y0=lt.y,result.x1=rb.x,result.y1=rb.y,result}};function MarkAreaView_isInfinity(val){return!isNaN(val)&&!isFinite(val)}function ifMarkAreaHasOnlyDim(dimIndex,fromCoord,toCoord,coordSys){var otherDimIndex=1-dimIndex;return MarkAreaView_isInfinity(fromCoord[otherDimIndex])&&MarkAreaView_isInfinity(toCoord[otherDimIndex])}function markAreaFilter(coordSys,item){var fromCoord=item.coord[0],toCoord=item.coord[1],item0={coord:fromCoord,x:item.x0,y:item.y0},item1={coord:toCoord,x:item.x1,y:item.y1};return(0,CoordinateSystem.H)(coordSys,"cartesian2d")?!(!fromCoord||!toCoord||!ifMarkAreaHasOnlyDim(1,fromCoord,toCoord)&&!ifMarkAreaHasOnlyDim(0,fromCoord,toCoord))||function zoneFilter(coordSys,item1,item2){return!(coordSys&&coordSys.containZone&&item1.coord&&item2.coord&&!hasXOrY(item1)&&!hasXOrY(item2))||coordSys.containZone(item1.coord,item2.coord)}(coordSys,item0,item1):markerHelper_dataFilter(coordSys,item0)||markerHelper_dataFilter(coordSys,item1)}function getSingleMarkerEndPoint(data,idx,dims,seriesModel,api){var point,coordSys=seriesModel.coordinateSystem,itemModel=data.getItemModel(idx),xPx=number.GM(itemModel.get(dims[0]),api.getWidth()),yPx=number.GM(itemModel.get(dims[1]),api.getHeight());if(isNaN(xPx)||isNaN(yPx)){if(seriesModel.getMarkerPosition){var pointValue0=data.getValues(["x0","y0"],idx),pointValue1=data.getValues(["x1","y1"],idx),clampPointValue0=coordSys.clampData(pointValue0),clampPointValue1=coordSys.clampData(pointValue1),pointValue=[];"x0"===dims[0]?pointValue[0]=clampPointValue0[0]>clampPointValue1[0]?pointValue1[0]:pointValue0[0]:pointValue[0]=clampPointValue0[0]>clampPointValue1[0]?pointValue0[0]:pointValue1[0],"y0"===dims[1]?pointValue[1]=clampPointValue0[1]>clampPointValue1[1]?pointValue1[1]:pointValue0[1]:pointValue[1]=clampPointValue0[1]>clampPointValue1[1]?pointValue0[1]:pointValue1[1],point=seriesModel.getMarkerPosition(pointValue,dims,!0)}else{var pt=[x=data.get(dims[0],idx),y=data.get(dims[1],idx)];coordSys.clampData&&coordSys.clampData(pt,pt),point=coordSys.dataToPoint(pt,!0)}if((0,CoordinateSystem.H)(coordSys,"cartesian2d")){var xAxis=coordSys.getAxis("x"),yAxis=coordSys.getAxis("y"),x=data.get(dims[0],idx),y=data.get(dims[1],idx);MarkAreaView_isInfinity(x)?point[0]=xAxis.toGlobalCoord(xAxis.getExtent()["x0"===dims[0]?0:1]):MarkAreaView_isInfinity(y)&&(point[1]=yAxis.toGlobalCoord(yAxis.getExtent()["y0"===dims[1]?0:1]))}isNaN(xPx)||(point[0]=xPx),isNaN(yPx)||(point[1]=yPx)}else point=[xPx,yPx];return point}var dimPermutations=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],MarkAreaView=function(_super){function MarkAreaView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=MarkAreaView.type,_this}return(0,tslib_es6.ZT)(MarkAreaView,_super),MarkAreaView.prototype.updateTransform=function(markAreaModel,ecModel,api){ecModel.eachSeries((function(seriesModel){var maModel=marker_MarkerModel.getMarkerModelFromSeries(seriesModel,"markArea");if(maModel){var areaData_1=maModel.getData();areaData_1.each((function(idx){var points=(0,util.map)(dimPermutations,(function(dim){return getSingleMarkerEndPoint(areaData_1,idx,dim,seriesModel,api)}));areaData_1.setItemLayout(idx,points),areaData_1.getItemGraphicEl(idx).setShape("points",points)}))}}),this)},MarkAreaView.prototype.renderSeries=function(seriesModel,maModel,ecModel,api){var coordSys=seriesModel.coordinateSystem,seriesId=seriesModel.id,seriesData=seriesModel.getData(),areaGroupMap=this.markerGroupMap,polygonGroup=areaGroupMap.get(seriesId)||areaGroupMap.set(seriesId,{group:new Group.Z});this.group.add(polygonGroup.group),this.markKeep(polygonGroup);var areaData=function MarkAreaView_createList(coordSys,seriesModel,maModel){var areaData,dataDims,dims=["x0","y0","x1","y1"];if(coordSys){var coordDimsInfos_1=(0,util.map)(coordSys&&coordSys.dimensions,(function(coordDim){var data=seriesModel.getData(),info=data.getDimensionInfo(data.mapDimension(coordDim))||{};return(0,util.extend)((0,util.extend)({},info),{name:coordDim,ordinalMeta:null})}));dataDims=(0,util.map)(dims,(function(dim,idx){return{name:dim,type:coordDimsInfos_1[idx%2].type}})),areaData=new SeriesData.Z(dataDims,maModel)}else dataDims=[{name:"value",type:"float"}],areaData=new SeriesData.Z(dataDims,maModel);var optData=(0,util.map)(maModel.get("data"),(0,util.curry)(markAreaTransform,seriesModel,coordSys,maModel));coordSys&&(optData=(0,util.filter)(optData,(0,util.curry)(markAreaFilter,coordSys)));var dimValueGetter=coordSys?function(item,dimName,dataIndex,dimIndex){var rawVal=item.coord[Math.floor(dimIndex/2)][dimIndex%2];return(0,dataValueHelper.yQ)(rawVal,dataDims[dimIndex])}:function(item,dimName,dataIndex,dimIndex){return(0,dataValueHelper.yQ)(item.value,dataDims[dimIndex])};return areaData.initData(optData,null,dimValueGetter),areaData.hasItemOption=!0,areaData}(coordSys,seriesModel,maModel);maModel.setData(areaData),areaData.each((function(idx){var points=(0,util.map)(dimPermutations,(function(dim){return getSingleMarkerEndPoint(areaData,idx,dim,seriesModel,api)})),xAxisScale=coordSys.getAxis("x").scale,yAxisScale=coordSys.getAxis("y").scale,xAxisExtent=xAxisScale.getExtent(),yAxisExtent=yAxisScale.getExtent(),xPointExtent=[xAxisScale.parse(areaData.get("x0",idx)),xAxisScale.parse(areaData.get("x1",idx))],yPointExtent=[yAxisScale.parse(areaData.get("y0",idx)),yAxisScale.parse(areaData.get("y1",idx))];number.dt(xPointExtent),number.dt(yPointExtent);var allClipped=!!(xAxisExtent[0]>xPointExtent[1]||xAxisExtent[1]<xPointExtent[0]||yAxisExtent[0]>yPointExtent[1]||yAxisExtent[1]<yPointExtent[0]);areaData.setItemLayout(idx,{points,allClipped});var style=areaData.getItemModel(idx).getModel("itemStyle").getItemStyle(),color=(0,visual_helper.UL)(seriesData,"color");style.fill||(style.fill=color,(0,util.isString)(style.fill)&&(style.fill=tool_color.modifyAlpha(style.fill,.4))),style.stroke||(style.stroke=color),areaData.setItemVisual(idx,"style",style)})),areaData.diff(MarkAreaView_inner(polygonGroup).data).add((function(idx){var layout=areaData.getItemLayout(idx);if(!layout.allClipped){var polygon=new Polygon.Z({shape:{points:layout.points}});areaData.setItemGraphicEl(idx,polygon),polygonGroup.group.add(polygon)}})).update((function(newIdx,oldIdx){var polygon=MarkAreaView_inner(polygonGroup).data.getItemGraphicEl(oldIdx),layout=areaData.getItemLayout(newIdx);layout.allClipped?polygon&&polygonGroup.group.remove(polygon):(polygon?basicTransition.D(polygon,{shape:{points:layout.points}},maModel,newIdx):polygon=new Polygon.Z({shape:{points:layout.points}}),areaData.setItemGraphicEl(newIdx,polygon),polygonGroup.group.add(polygon))})).remove((function(idx){var polygon=MarkAreaView_inner(polygonGroup).data.getItemGraphicEl(idx);polygonGroup.group.remove(polygon)})).execute(),areaData.eachItemGraphicEl((function(polygon,idx){var itemModel=areaData.getItemModel(idx),style=areaData.getItemVisual(idx,"style");polygon.useStyle(areaData.getItemVisual(idx,"style")),(0,labelStyle.ni)(polygon,(0,labelStyle.k3)(itemModel),{labelFetcher:maModel,labelDataIndex:idx,defaultText:areaData.getName(idx)||"",inheritColor:(0,util.isString)(style.fill)?tool_color.modifyAlpha(style.fill,1):"#000"}),(0,states.WO)(polygon,itemModel),(0,states.k5)(polygon,null,null,itemModel.get(["emphasis","disabled"])),(0,innerStore.A)(polygon).dataModel=maModel})),MarkAreaView_inner(polygonGroup).data=areaData,polygonGroup.group.silent=maModel.get("silent")||seriesModel.get("silent")},MarkAreaView.type="markArea",MarkAreaView}(marker_MarkerView);const marker_MarkAreaView=MarkAreaView;var LegendModel=function(_super){function LegendModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=LegendModel.type,_this.layoutMode={type:"box",ignoreSize:!0},_this}return(0,tslib_es6.ZT)(LegendModel,_super),LegendModel.prototype.init=function(option,parentModel,ecModel){this.mergeDefaultAndTheme(option,ecModel),option.selected=option.selected||{},this._updateSelector(option)},LegendModel.prototype.mergeOption=function(option,ecModel){_super.prototype.mergeOption.call(this,option,ecModel),this._updateSelector(option)},LegendModel.prototype._updateSelector=function(option){var selector=option.selector,ecModel=this.ecModel;!0===selector&&(selector=option.selector=["all","inverse"]),util.isArray(selector)&&util.each(selector,(function(item,index){util.isString(item)&&(item={type:item}),selector[index]=util.merge(item,function(ecModel,type){return"all"===type?{type:"all",title:ecModel.getLocaleModel().get(["legend","selector","all"])}:"inverse"===type?{type:"inverse",title:ecModel.getLocaleModel().get(["legend","selector","inverse"])}:void 0}(ecModel,item.type))}))},LegendModel.prototype.optionUpdated=function(){this._updateData(this.ecModel);var legendData=this._data;if(legendData[0]&&"single"===this.get("selectedMode")){for(var hasSelected=!1,i=0;i<legendData.length;i++){var name_1=legendData[i].get("name");if(this.isSelected(name_1)){this.select(name_1),hasSelected=!0;break}}!hasSelected&&this.select(legendData[0].get("name"))}},LegendModel.prototype._updateData=function(ecModel){var potentialData=[],availableNames=[];ecModel.eachRawSeries((function(seriesModel){var isPotential,seriesName=seriesModel.name;if(availableNames.push(seriesName),seriesModel.legendVisualProvider){var names=seriesModel.legendVisualProvider.getAllNames();ecModel.isSeriesFiltered(seriesModel)||(availableNames=availableNames.concat(names)),names.length?potentialData=potentialData.concat(names):isPotential=!0}else isPotential=!0;isPotential&&(0,util_model.yu)(seriesModel)&&potentialData.push(seriesModel.name)})),this._availableNames=availableNames;var rawData=this.get("data")||potentialData,legendNameMap=util.createHashMap(),legendData=util.map(rawData,(function(dataItem){return(util.isString(dataItem)||util.isNumber(dataItem))&&(dataItem={name:dataItem}),legendNameMap.get(dataItem.name)?null:(legendNameMap.set(dataItem.name,!0),new Model.Z(dataItem,this,this.ecModel))}),this);this._data=util.filter(legendData,(function(item){return!!item}))},LegendModel.prototype.getData=function(){return this._data},LegendModel.prototype.select=function(name){var selected=this.option.selected;if("single"===this.get("selectedMode")){var data=this._data;util.each(data,(function(dataItem){selected[dataItem.get("name")]=!1}))}selected[name]=!0},LegendModel.prototype.unSelect=function(name){"single"!==this.get("selectedMode")&&(this.option.selected[name]=!1)},LegendModel.prototype.toggleSelected=function(name){var selected=this.option.selected;selected.hasOwnProperty(name)||(selected[name]=!0),this[selected[name]?"unSelect":"select"](name)},LegendModel.prototype.allSelect=function(){var data=this._data,selected=this.option.selected;util.each(data,(function(dataItem){selected[dataItem.get("name",!0)]=!0}))},LegendModel.prototype.inverseSelect=function(){var data=this._data,selected=this.option.selected;util.each(data,(function(dataItem){var name=dataItem.get("name",!0);selected.hasOwnProperty(name)||(selected[name]=!0),selected[name]=!selected[name]}))},LegendModel.prototype.isSelected=function(name){var selected=this.option.selected;return!(selected.hasOwnProperty(name)&&!selected[name])&&util.indexOf(this._availableNames,name)>=0},LegendModel.prototype.getOrient=function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},LegendModel.type="legend.plain",LegendModel.dependencies=["series"],LegendModel.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},LegendModel}(model_Component.Z);const legend_LegendModel=LegendModel;var curry=util.curry,LegendView_each=util.each,LegendView_Group=Group.Z,LegendView=function(_super){function LegendView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=LegendView.type,_this.newlineDisabled=!1,_this}return(0,tslib_es6.ZT)(LegendView,_super),LegendView.prototype.init=function(){this.group.add(this._contentGroup=new LegendView_Group),this.group.add(this._selectorGroup=new LegendView_Group),this._isFirstRender=!0},LegendView.prototype.getContentGroup=function(){return this._contentGroup},LegendView.prototype.getSelectorGroup=function(){return this._selectorGroup},LegendView.prototype.render=function(legendModel,ecModel,api){var isFirstRender=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),legendModel.get("show",!0)){var itemAlign=legendModel.get("align"),orient=legendModel.get("orient");itemAlign&&"auto"!==itemAlign||(itemAlign="right"===legendModel.get("left")&&"vertical"===orient?"right":"left");var selector=legendModel.get("selector",!0),selectorPosition=legendModel.get("selectorPosition",!0);!selector||selectorPosition&&"auto"!==selectorPosition||(selectorPosition="horizontal"===orient?"end":"start"),this.renderInner(itemAlign,legendModel,ecModel,api,selector,orient,selectorPosition);var positionInfo=legendModel.getBoxLayoutParams(),viewportSize={width:api.getWidth(),height:api.getHeight()},padding=legendModel.get("padding"),maxSize=layout.ME(positionInfo,viewportSize,padding),mainRect=this.layoutInner(legendModel,itemAlign,maxSize,isFirstRender,selector,selectorPosition),layoutRect=layout.ME(util.defaults({width:mainRect.width,height:mainRect.height},positionInfo),viewportSize,padding);this.group.x=layoutRect.x-mainRect.x,this.group.y=layoutRect.y-mainRect.y,this.group.markRedraw(),this.group.add(this._backgroundEl=makeBackground(mainRect,legendModel))}},LegendView.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},LegendView.prototype.renderInner=function(itemAlign,legendModel,ecModel,api,selector,orient,selectorPosition){var contentGroup=this.getContentGroup(),legendDrawnMap=util.createHashMap(),selectMode=legendModel.get("selectedMode"),excludeSeriesId=[];ecModel.eachRawSeries((function(seriesModel){!seriesModel.get("legendHoverLink")&&excludeSeriesId.push(seriesModel.id)})),LegendView_each(legendModel.getData(),(function(legendItemModel,dataIndex){var name=legendItemModel.get("name");if(!this.newlineDisabled&&(""===name||"\n"===name)){var g=new LegendView_Group;return g.newline=!0,void contentGroup.add(g)}var seriesModel=ecModel.getSeriesByName(name)[0];if(!legendDrawnMap.get(name)){if(seriesModel){var data=seriesModel.getData(),lineVisualStyle=data.getVisual("legendLineStyle")||{},legendIcon=data.getVisual("legendIcon"),style=data.getVisual("style"),itemGroup=this._createItem(seriesModel,name,dataIndex,legendItemModel,legendModel,itemAlign,lineVisualStyle,style,legendIcon,selectMode,api);itemGroup.on("click",curry(dispatchSelectAction,name,null,api,excludeSeriesId)).on("mouseover",curry(dispatchHighlightAction,seriesModel.name,null,api,excludeSeriesId)).on("mouseout",curry(dispatchDownplayAction,seriesModel.name,null,api,excludeSeriesId)),ecModel.ssr&&itemGroup.eachChild((function(child){var ecData=(0,innerStore.A)(child);ecData.seriesIndex=seriesModel.seriesIndex,ecData.dataIndex=dataIndex,ecData.ssrType="legend"})),legendDrawnMap.set(name,!0)}else ecModel.eachRawSeries((function(seriesModel){if(!legendDrawnMap.get(name)&&seriesModel.legendVisualProvider){var provider=seriesModel.legendVisualProvider;if(!provider.containName(name))return;var idx=provider.indexOfName(name),style=provider.getItemVisual(idx,"style"),legendIcon=provider.getItemVisual(idx,"legendIcon"),colorArr=(0,tool_color.parse)(style.fill);colorArr&&0===colorArr[3]&&(colorArr[3]=.2,style=util.extend(util.extend({},style),{fill:(0,tool_color.stringify)(colorArr,"rgba")}));var itemGroup=this._createItem(seriesModel,name,dataIndex,legendItemModel,legendModel,itemAlign,{},style,legendIcon,selectMode,api);itemGroup.on("click",curry(dispatchSelectAction,null,name,api,excludeSeriesId)).on("mouseover",curry(dispatchHighlightAction,null,name,api,excludeSeriesId)).on("mouseout",curry(dispatchDownplayAction,null,name,api,excludeSeriesId)),ecModel.ssr&&itemGroup.eachChild((function(child){var ecData=(0,innerStore.A)(child);ecData.seriesIndex=seriesModel.seriesIndex,ecData.dataIndex=dataIndex,ecData.ssrType="legend"})),legendDrawnMap.set(name,!0)}}),this);0}}),this),selector&&this._createSelector(selector,legendModel,api,orient,selectorPosition)},LegendView.prototype._createSelector=function(selector,legendModel,api,orient,selectorPosition){var selectorGroup=this.getSelectorGroup();LegendView_each(selector,(function createSelectorButton(selectorItem){var type=selectorItem.type,labelText=new Text.ZP({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){api.dispatchAction({type:"all"===type?"legendAllSelect":"legendInverseSelect"})}});selectorGroup.add(labelText);var labelModel=legendModel.getModel("selectorLabel"),emphasisLabelModel=legendModel.getModel(["emphasis","selectorLabel"]);(0,labelStyle.ni)(labelText,{normal:labelModel,emphasis:emphasisLabelModel},{defaultText:selectorItem.title}),(0,states.vF)(labelText)}))},LegendView.prototype._createItem=function(seriesModel,name,dataIndex,legendItemModel,legendModel,itemAlign,lineVisualStyle,itemVisualStyle,legendIcon,selectMode,api){var drawType=seriesModel.visualDrawType,itemWidth=legendModel.get("itemWidth"),itemHeight=legendModel.get("itemHeight"),isSelected=legendModel.isSelected(name),iconRotate=legendItemModel.get("symbolRotate"),symbolKeepAspect=legendItemModel.get("symbolKeepAspect"),legendIconType=legendItemModel.get("icon"),style=function getLegendStyle(iconType,legendItemModel,lineVisualStyle,itemVisualStyle,drawType,isSelected,api){function handleCommonProps(style,visualStyle){"auto"===style.lineWidth&&(style.lineWidth=visualStyle.lineWidth>0?2:0),LegendView_each(style,(function(propVal,propName){"inherit"===style[propName]&&(style[propName]=visualStyle[propName])}))}var itemStyleModel=legendItemModel.getModel("itemStyle"),itemStyle=itemStyleModel.getItemStyle(),iconBrushType=0===iconType.lastIndexOf("empty",0)?"fill":"stroke",decalStyle=itemStyleModel.getShallow("decal");itemStyle.decal=decalStyle&&"inherit"!==decalStyle?(0,util_decal.I)(decalStyle,api):itemVisualStyle.decal,"inherit"===itemStyle.fill&&(itemStyle.fill=itemVisualStyle[drawType]);"inherit"===itemStyle.stroke&&(itemStyle.stroke=itemVisualStyle[iconBrushType]);"inherit"===itemStyle.opacity&&(itemStyle.opacity=("fill"===drawType?itemVisualStyle:lineVisualStyle).opacity);handleCommonProps(itemStyle,itemVisualStyle);var legendLineModel=legendItemModel.getModel("lineStyle"),lineStyle=legendLineModel.getLineStyle();if(handleCommonProps(lineStyle,lineVisualStyle),"auto"===itemStyle.fill&&(itemStyle.fill=itemVisualStyle.fill),"auto"===itemStyle.stroke&&(itemStyle.stroke=itemVisualStyle.fill),"auto"===lineStyle.stroke&&(lineStyle.stroke=itemVisualStyle.fill),!isSelected){var borderWidth=legendItemModel.get("inactiveBorderWidth"),visualHasBorder=itemStyle[iconBrushType];itemStyle.lineWidth="auto"===borderWidth?itemVisualStyle.lineWidth>0&&visualHasBorder?2:0:itemStyle.lineWidth,itemStyle.fill=legendItemModel.get("inactiveColor"),itemStyle.stroke=legendItemModel.get("inactiveBorderColor"),lineStyle.stroke=legendLineModel.get("inactiveColor"),lineStyle.lineWidth=legendLineModel.get("inactiveWidth")}return{itemStyle,lineStyle}}(legendIcon=legendIconType||legendIcon||"roundRect",legendItemModel,lineVisualStyle,itemVisualStyle,drawType,isSelected,api),itemGroup=new LegendView_Group,textStyleModel=legendItemModel.getModel("textStyle");if(!util.isFunction(seriesModel.getLegendIcon)||legendIconType&&"inherit"!==legendIconType){var rotate="inherit"===legendIconType&&seriesModel.getData().getVisual("symbol")?"inherit"===iconRotate?seriesModel.getData().getVisual("symbolRotate"):iconRotate:0;itemGroup.add(function getDefaultLegendIcon(opt){var symboType=opt.icon||"roundRect",icon=(0,util_symbol.th)(symboType,0,0,opt.itemWidth,opt.itemHeight,opt.itemStyle.fill,opt.symbolKeepAspect);icon.setStyle(opt.itemStyle),icon.rotation=(opt.iconRotate||0)*Math.PI/180,icon.setOrigin([opt.itemWidth/2,opt.itemHeight/2]),symboType.indexOf("empty")>-1&&(icon.style.stroke=icon.style.fill,icon.style.fill="#fff",icon.style.lineWidth=2);return icon}({itemWidth,itemHeight,icon:legendIcon,iconRotate:rotate,itemStyle:style.itemStyle,lineStyle:style.lineStyle,symbolKeepAspect}))}else itemGroup.add(seriesModel.getLegendIcon({itemWidth,itemHeight,icon:legendIcon,iconRotate,itemStyle:style.itemStyle,lineStyle:style.lineStyle,symbolKeepAspect}));var textX="left"===itemAlign?itemWidth+5:-5,textAlign=itemAlign,formatter=legendModel.get("formatter"),content=name;util.isString(formatter)&&formatter?content=formatter.replace("{name}",null!=name?name:""):util.isFunction(formatter)&&(content=formatter(name));var textColor=isSelected?textStyleModel.getTextColor():legendItemModel.get("inactiveColor");itemGroup.add(new Text.ZP({style:(0,labelStyle.Lr)(textStyleModel,{text:content,x:textX,y:itemHeight/2,fill:textColor,align:textAlign,verticalAlign:"middle"},{inheritColor:textColor})}));var hitRect=new Rect.Z({shape:itemGroup.getBoundingRect(),style:{fill:"transparent"}}),tooltipModel=legendItemModel.getModel("tooltip");return tooltipModel.get("show")&&graphic.setTooltipConfig({el:hitRect,componentModel:legendModel,itemName:name,itemTooltipOption:tooltipModel.option}),itemGroup.add(hitRect),itemGroup.eachChild((function(child){child.silent=!0})),hitRect.silent=!selectMode,this.getContentGroup().add(itemGroup),(0,states.vF)(itemGroup),itemGroup.__legendDataIndex=dataIndex,itemGroup},LegendView.prototype.layoutInner=function(legendModel,itemAlign,maxSize,isFirstRender,selector,selectorPosition){var contentGroup=this.getContentGroup(),selectorGroup=this.getSelectorGroup();layout.BZ(legendModel.get("orient"),contentGroup,legendModel.get("itemGap"),maxSize.width,maxSize.height);var contentRect=contentGroup.getBoundingRect(),contentPos=[-contentRect.x,-contentRect.y];if(selectorGroup.markRedraw(),contentGroup.markRedraw(),selector){layout.BZ("horizontal",selectorGroup,legendModel.get("selectorItemGap",!0));var selectorRect=selectorGroup.getBoundingRect(),selectorPos=[-selectorRect.x,-selectorRect.y],selectorButtonGap=legendModel.get("selectorButtonGap",!0),orientIdx=legendModel.getOrient().index,wh=0===orientIdx?"width":"height",hw=0===orientIdx?"height":"width",yx=0===orientIdx?"y":"x";"end"===selectorPosition?selectorPos[orientIdx]+=contentRect[wh]+selectorButtonGap:contentPos[orientIdx]+=selectorRect[wh]+selectorButtonGap,selectorPos[1-orientIdx]+=contentRect[hw]/2-selectorRect[hw]/2,selectorGroup.x=selectorPos[0],selectorGroup.y=selectorPos[1],contentGroup.x=contentPos[0],contentGroup.y=contentPos[1];var mainRect={x:0,y:0};return mainRect[wh]=contentRect[wh]+selectorButtonGap+selectorRect[wh],mainRect[hw]=Math.max(contentRect[hw],selectorRect[hw]),mainRect[yx]=Math.min(0,selectorRect[yx]+selectorPos[1-orientIdx]),mainRect}return contentGroup.x=contentPos[0],contentGroup.y=contentPos[1],this.group.getBoundingRect()},LegendView.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},LegendView.type="legend.plain",LegendView}(Component.Z);function dispatchSelectAction(seriesName,dataName,api,excludeSeriesId){dispatchDownplayAction(seriesName,dataName,api,excludeSeriesId),api.dispatchAction({type:"legendToggleSelect",name:null!=seriesName?seriesName:dataName}),dispatchHighlightAction(seriesName,dataName,api,excludeSeriesId)}function isUseHoverLayer(api){for(var emphasisState,list=api.getZr().storage.getDisplayList(),i=0,len=list.length;i<len&&!(emphasisState=list[i].states.emphasis);)i++;return emphasisState&&emphasisState.hoverLayer}function dispatchHighlightAction(seriesName,dataName,api,excludeSeriesId){isUseHoverLayer(api)||api.dispatchAction({type:"highlight",seriesName,name:dataName,excludeSeriesId})}function dispatchDownplayAction(seriesName,dataName,api,excludeSeriesId){isUseHoverLayer(api)||api.dispatchAction({type:"downplay",seriesName,name:dataName,excludeSeriesId})}const legend_LegendView=LegendView;function legendFilter(ecModel){var legendModels=ecModel.findComponents({mainType:"legend"});legendModels&&legendModels.length&&ecModel.filterSeries((function(series){for(var i=0;i<legendModels.length;i++)if(!legendModels[i].isSelected(series.name))return!1;return!0}))}function legendSelectActionHandler(methodName,payload,ecModel){var isSelected,selectedMap={},isToggleSelect="toggleSelected"===methodName;return ecModel.eachComponent("legend",(function(legendModel){isToggleSelect&&null!=isSelected?legendModel[isSelected?"select":"unSelect"](payload.name):"allSelect"===methodName||"inverseSelect"===methodName?legendModel[methodName]():(legendModel[methodName](payload.name),isSelected=legendModel.isSelected(payload.name));var legendData=legendModel.getData();(0,util.each)(legendData,(function(model){var name=model.get("name");if("\n"!==name&&""!==name){var isItemSelected=legendModel.isSelected(name);selectedMap.hasOwnProperty(name)?selectedMap[name]=selectedMap[name]&&isItemSelected:selectedMap[name]=isItemSelected}}))})),"allSelect"===methodName||"inverseSelect"===methodName?{selected:selectedMap}:{name:payload.name,selected:selectedMap}}function installLegendPlain_install(registers){registers.registerComponentModel(legend_LegendModel),registers.registerComponentView(legend_LegendView),registers.registerProcessor(registers.PRIORITY.PROCESSOR.SERIES_FILTER,legendFilter),registers.registerSubTypeDefaulter("legend",(function(){return"plain"})),function installLegendAction(registers){registers.registerAction("legendToggleSelect","legendselectchanged",(0,util.curry)(legendSelectActionHandler,"toggleSelected")),registers.registerAction("legendAllSelect","legendselectall",(0,util.curry)(legendSelectActionHandler,"allSelect")),registers.registerAction("legendInverseSelect","legendinverseselect",(0,util.curry)(legendSelectActionHandler,"inverseSelect")),registers.registerAction("legendSelect","legendselected",(0,util.curry)(legendSelectActionHandler,"select")),registers.registerAction("legendUnSelect","legendunselected",(0,util.curry)(legendSelectActionHandler,"unSelect"))}(registers)}function ScrollableLegendModel_mergeAndNormalizeLayoutParams(legendModel,target,raw){var ignoreSize=[1,1];ignoreSize[legendModel.getOrient().index]=0,(0,layout.dt)(target,raw,{type:"box",ignoreSize:!!ignoreSize})}const legend_ScrollableLegendModel=function(_super){function ScrollableLegendModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=ScrollableLegendModel.type,_this}return(0,tslib_es6.ZT)(ScrollableLegendModel,_super),ScrollableLegendModel.prototype.setScrollDataIndex=function(scrollDataIndex){this.option.scrollDataIndex=scrollDataIndex},ScrollableLegendModel.prototype.init=function(option,parentModel,ecModel){var inputPositionParams=(0,layout.tE)(option);_super.prototype.init.call(this,option,parentModel,ecModel),ScrollableLegendModel_mergeAndNormalizeLayoutParams(this,option,inputPositionParams)},ScrollableLegendModel.prototype.mergeOption=function(option,ecModel){_super.prototype.mergeOption.call(this,option,ecModel),ScrollableLegendModel_mergeAndNormalizeLayoutParams(this,this.option,option)},ScrollableLegendModel.type="legend.scroll",ScrollableLegendModel.defaultOption=(0,component.ZL)(legend_LegendModel.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),ScrollableLegendModel}(legend_LegendModel);var ScrollableLegendView_Group=Group.Z,ScrollableLegendView_WH=["width","height"],ScrollableLegendView_XY=["x","y"],ScrollableLegendView=function(_super){function ScrollableLegendView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=ScrollableLegendView.type,_this.newlineDisabled=!0,_this._currentIndex=0,_this}return(0,tslib_es6.ZT)(ScrollableLegendView,_super),ScrollableLegendView.prototype.init=function(){_super.prototype.init.call(this),this.group.add(this._containerGroup=new ScrollableLegendView_Group),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new ScrollableLegendView_Group)},ScrollableLegendView.prototype.resetInner=function(){_super.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},ScrollableLegendView.prototype.renderInner=function(itemAlign,legendModel,ecModel,api,selector,orient,selectorPosition){var self=this;_super.prototype.renderInner.call(this,itemAlign,legendModel,ecModel,api,selector,orient,selectorPosition);var controllerGroup=this._controllerGroup,pageIconSize=legendModel.get("pageIconSize",!0),pageIconSizeArr=util.isArray(pageIconSize)?pageIconSize:[pageIconSize,pageIconSize];createPageButton("pagePrev",0);var pageTextStyleModel=legendModel.getModel("pageTextStyle");function createPageButton(name,iconIdx){var pageDataIndexName=name+"DataIndex",icon=graphic.createIcon(legendModel.get("pageIcons",!0)[legendModel.getOrient().name][iconIdx],{onclick:util.bind(self._pageGo,self,pageDataIndexName,legendModel,api)},{x:-pageIconSizeArr[0]/2,y:-pageIconSizeArr[1]/2,width:pageIconSizeArr[0],height:pageIconSizeArr[1]});icon.name=name,controllerGroup.add(icon)}controllerGroup.add(new Text.ZP({name:"pageText",style:{text:"xx/xx",fill:pageTextStyleModel.getTextColor(),font:pageTextStyleModel.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),createPageButton("pageNext",1)},ScrollableLegendView.prototype.layoutInner=function(legendModel,itemAlign,maxSize,isFirstRender,selector,selectorPosition){var selectorGroup=this.getSelectorGroup(),orientIdx=legendModel.getOrient().index,wh=ScrollableLegendView_WH[orientIdx],xy=ScrollableLegendView_XY[orientIdx],hw=ScrollableLegendView_WH[1-orientIdx],yx=ScrollableLegendView_XY[1-orientIdx];selector&&layout.BZ("horizontal",selectorGroup,legendModel.get("selectorItemGap",!0));var selectorButtonGap=legendModel.get("selectorButtonGap",!0),selectorRect=selectorGroup.getBoundingRect(),selectorPos=[-selectorRect.x,-selectorRect.y],processMaxSize=util.clone(maxSize);selector&&(processMaxSize[wh]=maxSize[wh]-selectorRect[wh]-selectorButtonGap);var mainRect=this._layoutContentAndController(legendModel,isFirstRender,processMaxSize,orientIdx,wh,hw,yx,xy);if(selector){if("end"===selectorPosition)selectorPos[orientIdx]+=mainRect[wh]+selectorButtonGap;else{var offset=selectorRect[wh]+selectorButtonGap;selectorPos[orientIdx]-=offset,mainRect[xy]-=offset}mainRect[wh]+=selectorRect[wh]+selectorButtonGap,selectorPos[1-orientIdx]+=mainRect[yx]+mainRect[hw]/2-selectorRect[hw]/2,mainRect[hw]=Math.max(mainRect[hw],selectorRect[hw]),mainRect[yx]=Math.min(mainRect[yx],selectorRect[yx]+selectorPos[1-orientIdx]),selectorGroup.x=selectorPos[0],selectorGroup.y=selectorPos[1],selectorGroup.markRedraw()}return mainRect},ScrollableLegendView.prototype._layoutContentAndController=function(legendModel,isFirstRender,maxSize,orientIdx,wh,hw,yx,xy){var contentGroup=this.getContentGroup(),containerGroup=this._containerGroup,controllerGroup=this._controllerGroup;layout.BZ(legendModel.get("orient"),contentGroup,legendModel.get("itemGap"),orientIdx?maxSize.width:null,orientIdx?null:maxSize.height),layout.BZ("horizontal",controllerGroup,legendModel.get("pageButtonItemGap",!0));var contentRect=contentGroup.getBoundingRect(),controllerRect=controllerGroup.getBoundingRect(),showController=this._showController=contentRect[wh]>maxSize[wh],contentPos=[-contentRect.x,-contentRect.y];isFirstRender||(contentPos[orientIdx]=contentGroup[xy]);var containerPos=[0,0],controllerPos=[-controllerRect.x,-controllerRect.y],pageButtonGap=util.retrieve2(legendModel.get("pageButtonGap",!0),legendModel.get("itemGap",!0));showController&&("end"===legendModel.get("pageButtonPosition",!0)?controllerPos[orientIdx]+=maxSize[wh]-controllerRect[wh]:containerPos[orientIdx]+=controllerRect[wh]+pageButtonGap);controllerPos[1-orientIdx]+=contentRect[hw]/2-controllerRect[hw]/2,contentGroup.setPosition(contentPos),containerGroup.setPosition(containerPos),controllerGroup.setPosition(controllerPos);var mainRect={x:0,y:0};if(mainRect[wh]=showController?maxSize[wh]:contentRect[wh],mainRect[hw]=Math.max(contentRect[hw],controllerRect[hw]),mainRect[yx]=Math.min(0,controllerRect[yx]+controllerPos[1-orientIdx]),containerGroup.__rectSize=maxSize[wh],showController){var clipShape={x:0,y:0};clipShape[wh]=Math.max(maxSize[wh]-controllerRect[wh]-pageButtonGap,0),clipShape[hw]=mainRect[hw],containerGroup.setClipPath(new Rect.Z({shape:clipShape})),containerGroup.__rectSize=clipShape[wh]}else controllerGroup.eachChild((function(child){child.attr({invisible:!0,silent:!0})}));var pageInfo=this._getPageInfo(legendModel);return null!=pageInfo.pageIndex&&basicTransition.D(contentGroup,{x:pageInfo.contentPosition[0],y:pageInfo.contentPosition[1]},showController?legendModel:null),this._updatePageInfoView(legendModel,pageInfo),mainRect},ScrollableLegendView.prototype._pageGo=function(to,legendModel,api){var scrollDataIndex=this._getPageInfo(legendModel)[to];null!=scrollDataIndex&&api.dispatchAction({type:"legendScroll",scrollDataIndex,legendId:legendModel.id})},ScrollableLegendView.prototype._updatePageInfoView=function(legendModel,pageInfo){var controllerGroup=this._controllerGroup;util.each(["pagePrev","pageNext"],(function(name){var canJump=null!=pageInfo[name+"DataIndex"],icon=controllerGroup.childOfName(name);icon&&(icon.setStyle("fill",canJump?legendModel.get("pageIconColor",!0):legendModel.get("pageIconInactiveColor",!0)),icon.cursor=canJump?"pointer":"default")}));var pageText=controllerGroup.childOfName("pageText"),pageFormatter=legendModel.get("pageFormatter"),pageIndex=pageInfo.pageIndex,current=null!=pageIndex?pageIndex+1:0,total=pageInfo.pageCount;pageText&&pageFormatter&&pageText.setStyle("text",util.isString(pageFormatter)?pageFormatter.replace("{current}",null==current?"":current+"").replace("{total}",null==total?"":total+""):pageFormatter({current,total}))},ScrollableLegendView.prototype._getPageInfo=function(legendModel){var scrollDataIndex=legendModel.get("scrollDataIndex",!0),contentGroup=this.getContentGroup(),containerRectSize=this._containerGroup.__rectSize,orientIdx=legendModel.getOrient().index,wh=ScrollableLegendView_WH[orientIdx],xy=ScrollableLegendView_XY[orientIdx],targetItemIndex=this._findTargetItemIndex(scrollDataIndex),children=contentGroup.children(),targetItem=children[targetItemIndex],itemCount=children.length,pCount=itemCount?1:0,result={contentPosition:[contentGroup.x,contentGroup.y],pageCount:pCount,pageIndex:pCount-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!targetItem)return result;var targetItemInfo=getItemInfo(targetItem);result.contentPosition[orientIdx]=-targetItemInfo.s;for(var i=targetItemIndex+1,winStartItemInfo=targetItemInfo,winEndItemInfo=targetItemInfo,currItemInfo=null;i<=itemCount;++i)(!(currItemInfo=getItemInfo(children[i]))&&winEndItemInfo.e>winStartItemInfo.s+containerRectSize||currItemInfo&&!intersect(currItemInfo,winStartItemInfo.s))&&(winStartItemInfo=winEndItemInfo.i>winStartItemInfo.i?winEndItemInfo:currItemInfo)&&(null==result.pageNextDataIndex&&(result.pageNextDataIndex=winStartItemInfo.i),++result.pageCount),winEndItemInfo=currItemInfo;for(i=targetItemIndex-1,winStartItemInfo=targetItemInfo,winEndItemInfo=targetItemInfo,currItemInfo=null;i>=-1;--i)(currItemInfo=getItemInfo(children[i]))&&intersect(winEndItemInfo,currItemInfo.s)||!(winStartItemInfo.i<winEndItemInfo.i)||(winEndItemInfo=winStartItemInfo,null==result.pagePrevDataIndex&&(result.pagePrevDataIndex=winStartItemInfo.i),++result.pageCount,++result.pageIndex),winStartItemInfo=currItemInfo;return result;function getItemInfo(el){if(el){var itemRect=el.getBoundingRect(),start=itemRect[xy]+el[xy];return{s:start,e:start+itemRect[wh],i:el.__legendDataIndex}}}function intersect(itemInfo,winStart){return itemInfo.e>=winStart&&itemInfo.s<=winStart+containerRectSize}},ScrollableLegendView.prototype._findTargetItemIndex=function(targetDataIndex){return this._showController?(this.getContentGroup().eachChild((function(child,idx){var legendDataIdx=child.__legendDataIndex;null==defaultIndex&&null!=legendDataIdx&&(defaultIndex=idx),legendDataIdx===targetDataIndex&&(index=idx)})),null!=index?index:defaultIndex):0;var index,defaultIndex},ScrollableLegendView.type="legend.scroll",ScrollableLegendView}(legend_LegendView);const legend_ScrollableLegendView=ScrollableLegendView;function installLegendScroll_install(registers){(0,extension.D)(installLegendPlain_install),registers.registerComponentModel(legend_ScrollableLegendModel),registers.registerComponentView(legend_ScrollableLegendView),function installScrollableLegendAction(registers){registers.registerAction("legendScroll","legendscroll",(function(payload,ecModel){var scrollDataIndex=payload.scrollDataIndex;null!=scrollDataIndex&&ecModel.eachComponent({mainType:"legend",subType:"scroll",query:payload},(function(legendModel){legendModel.setScrollDataIndex(scrollDataIndex)}))}))}(registers)}const dataZoom_InsideZoomModel=function(_super){function InsideZoomModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=InsideZoomModel.type,_this}return(0,tslib_es6.ZT)(InsideZoomModel,_super),InsideZoomModel.type="dataZoom.inside",InsideZoomModel.defaultOption=(0,component.ZL)(dataZoom_DataZoomModel.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),InsideZoomModel}(dataZoom_DataZoomModel);var roams_inner=(0,util_model.Yf)();function disposeCoordSysRecord(coordSysRecordMap,coordSysRecord){if(coordSysRecord){coordSysRecordMap.removeKey(coordSysRecord.model.uid);var controller=coordSysRecord.controller;controller&&controller.dispose()}}function roams_dispatchAction(api,batch){api.isDisposed()||api.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch})}function containsPoint(coordSysModel,e,x,y){return coordSysModel.coordinateSystem.containPoint([x,y])}function installDataZoomRoamProcessor(registers){registers.registerProcessor(registers.PRIORITY.PROCESSOR.FILTER,(function(ecModel,api){var apiInner=roams_inner(api),coordSysRecordMap=apiInner.coordSysRecordMap||(apiInner.coordSysRecordMap=(0,util.createHashMap)());coordSysRecordMap.each((function(coordSysRecord){coordSysRecord.dataZoomInfoMap=null})),ecModel.eachComponent({mainType:"dataZoom",subType:"inside"},(function(dataZoomModel){var dzReferCoordSysWrap=collectReferCoordSysModelInfo(dataZoomModel);(0,util.each)(dzReferCoordSysWrap.infoList,(function(dzCoordSysInfo){var coordSysUid=dzCoordSysInfo.model.uid,coordSysRecord=coordSysRecordMap.get(coordSysUid)||coordSysRecordMap.set(coordSysUid,function createCoordSysRecord(api,coordSysModel){var coordSysRecord={model:coordSysModel,containsPoint:(0,util.curry)(containsPoint,coordSysModel),dispatchAction:(0,util.curry)(roams_dispatchAction,api),dataZoomInfoMap:null,controller:null},controller=coordSysRecord.controller=new RoamController.Z(api.getZr());return(0,util.each)(["pan","zoom","scrollMove"],(function(eventName){controller.on(eventName,(function(event){var batch=[];coordSysRecord.dataZoomInfoMap.each((function(dzInfo){if(event.isAvailableBehavior(dzInfo.model.option)){var method=(dzInfo.getRange||{})[eventName],range=method&&method(dzInfo.dzReferCoordSysInfo,coordSysRecord.model.mainType,coordSysRecord.controller,event);!dzInfo.model.get("disabled",!0)&&range&&batch.push({dataZoomId:dzInfo.model.id,start:range[0],end:range[1]})}})),batch.length&&coordSysRecord.dispatchAction(batch)}))})),coordSysRecord}(api,dzCoordSysInfo.model));(coordSysRecord.dataZoomInfoMap||(coordSysRecord.dataZoomInfoMap=(0,util.createHashMap)())).set(dataZoomModel.uid,{dzReferCoordSysInfo:dzCoordSysInfo,model:dataZoomModel,getRange:null})}))})),coordSysRecordMap.each((function(coordSysRecord){var firstDzInfo,controller=coordSysRecord.controller,dataZoomInfoMap=coordSysRecord.dataZoomInfoMap;if(dataZoomInfoMap){var firstDzKey=dataZoomInfoMap.keys()[0];null!=firstDzKey&&(firstDzInfo=dataZoomInfoMap.get(firstDzKey))}if(firstDzInfo){var controllerParams=function mergeControllerParams(dataZoomInfoMap){var controlType,typePriority={type_true:2,type_move:1,type_false:0,type_undefined:-1},preventDefaultMouseMove=!0;return dataZoomInfoMap.each((function(dataZoomInfo){var dataZoomModel=dataZoomInfo.model,oneType=!dataZoomModel.get("disabled",!0)&&(!dataZoomModel.get("zoomLock",!0)||"move");typePriority["type_"+oneType]>typePriority["type_"+controlType]&&(controlType=oneType),preventDefaultMouseMove=preventDefaultMouseMove&&dataZoomModel.get("preventDefaultMouseMove",!0)})),{controlType,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!preventDefaultMouseMove}}}(dataZoomInfoMap);controller.enable(controllerParams.controlType,controllerParams.opt),controller.setPointerChecker(coordSysRecord.containsPoint),throttle.T9(coordSysRecord,"dispatchAction",firstDzInfo.model.get("throttle",!0),"fixRate")}else disposeCoordSysRecord(coordSysRecordMap,coordSysRecord)}))}))}var InsideZoomView=function(_super){function InsideZoomView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type="dataZoom.inside",_this}return(0,tslib_es6.ZT)(InsideZoomView,_super),InsideZoomView.prototype.render=function(dataZoomModel,ecModel,api){_super.prototype.render.apply(this,arguments),dataZoomModel.noTarget()?this._clear():(this.range=dataZoomModel.getPercentRange(),function setViewInfoToCoordSysRecord(api,dataZoomModel,getRange){roams_inner(api).coordSysRecordMap.each((function(coordSysRecord){var dzInfo=coordSysRecord.dataZoomInfoMap.get(dataZoomModel.uid);dzInfo&&(dzInfo.getRange=getRange)}))}(api,dataZoomModel,{pan:(0,util.bind)(getRangeHandlers.pan,this),zoom:(0,util.bind)(getRangeHandlers.zoom,this),scrollMove:(0,util.bind)(getRangeHandlers.scrollMove,this)}))},InsideZoomView.prototype.dispose=function(){this._clear(),_super.prototype.dispose.apply(this,arguments)},InsideZoomView.prototype._clear=function(){!function disposeCoordSysRecordIfNeeded(api,dataZoomModel){for(var coordSysRecordMap=roams_inner(api).coordSysRecordMap,coordSysKeyArr=coordSysRecordMap.keys(),i=0;i<coordSysKeyArr.length;i++){var coordSysKey=coordSysKeyArr[i],coordSysRecord=coordSysRecordMap.get(coordSysKey),dataZoomInfoMap=coordSysRecord.dataZoomInfoMap;if(dataZoomInfoMap){var dzUid=dataZoomModel.uid;dataZoomInfoMap.get(dzUid)&&(dataZoomInfoMap.removeKey(dzUid),dataZoomInfoMap.keys().length||disposeCoordSysRecord(coordSysRecordMap,coordSysRecord))}}}(this.api,this.dataZoomModel),this.range=null},InsideZoomView.type="dataZoom.inside",InsideZoomView}(dataZoom_DataZoomView),getRangeHandlers={zoom:function(coordSysInfo,coordSysMainType,controller,e){var lastRange=this.range,range=lastRange.slice(),axisModel=coordSysInfo.axisModels[0];if(axisModel){var directionInfo=getDirectionInfo[coordSysMainType](null,[e.originX,e.originY],axisModel,controller,coordSysInfo),percentPoint=(directionInfo.signal>0?directionInfo.pixelStart+directionInfo.pixelLength-directionInfo.pixel:directionInfo.pixel-directionInfo.pixelStart)/directionInfo.pixelLength*(range[1]-range[0])+range[0],scale=Math.max(1/e.scale,0);range[0]=(range[0]-percentPoint)*scale+percentPoint,range[1]=(range[1]-percentPoint)*scale+percentPoint;var minMaxSpan=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();return sliderMove(0,range,[0,100],0,minMaxSpan.minSpan,minMaxSpan.maxSpan),this.range=range,lastRange[0]!==range[0]||lastRange[1]!==range[1]?range:void 0}},pan:makeMover((function(range,axisModel,coordSysInfo,coordSysMainType,controller,e){var directionInfo=getDirectionInfo[coordSysMainType]([e.oldX,e.oldY],[e.newX,e.newY],axisModel,controller,coordSysInfo);return directionInfo.signal*(range[1]-range[0])*directionInfo.pixel/directionInfo.pixelLength})),scrollMove:makeMover((function(range,axisModel,coordSysInfo,coordSysMainType,controller,e){return getDirectionInfo[coordSysMainType]([0,0],[e.scrollDelta,e.scrollDelta],axisModel,controller,coordSysInfo).signal*(range[1]-range[0])*e.scrollDelta}))};function makeMover(getPercentDelta){return function(coordSysInfo,coordSysMainType,controller,e){var lastRange=this.range,range=lastRange.slice(),axisModel=coordSysInfo.axisModels[0];if(axisModel)return sliderMove(getPercentDelta(range,axisModel,coordSysInfo,coordSysMainType,controller,e),range,[0,100],"all"),this.range=range,lastRange[0]!==range[0]||lastRange[1]!==range[1]?range:void 0}}var getDirectionInfo={grid:function(oldPoint,newPoint,axisModel,controller,coordSysInfo){var axis=axisModel.axis,ret={},rect=coordSysInfo.model.coordinateSystem.getRect();return oldPoint=oldPoint||[0,0],"x"===axis.dim?(ret.pixel=newPoint[0]-oldPoint[0],ret.pixelLength=rect.width,ret.pixelStart=rect.x,ret.signal=axis.inverse?1:-1):(ret.pixel=newPoint[1]-oldPoint[1],ret.pixelLength=rect.height,ret.pixelStart=rect.y,ret.signal=axis.inverse?-1:1),ret},polar:function(oldPoint,newPoint,axisModel,controller,coordSysInfo){var axis=axisModel.axis,ret={},polar=coordSysInfo.model.coordinateSystem,radiusExtent=polar.getRadiusAxis().getExtent(),angleExtent=polar.getAngleAxis().getExtent();return oldPoint=oldPoint?polar.pointToCoord(oldPoint):[0,0],newPoint=polar.pointToCoord(newPoint),"radiusAxis"===axisModel.mainType?(ret.pixel=newPoint[0]-oldPoint[0],ret.pixelLength=radiusExtent[1]-radiusExtent[0],ret.pixelStart=radiusExtent[0],ret.signal=axis.inverse?1:-1):(ret.pixel=newPoint[1]-oldPoint[1],ret.pixelLength=angleExtent[1]-angleExtent[0],ret.pixelStart=angleExtent[0],ret.signal=axis.inverse?-1:1),ret},singleAxis:function(oldPoint,newPoint,axisModel,controller,coordSysInfo){var axis=axisModel.axis,rect=coordSysInfo.model.coordinateSystem.getRect(),ret={};return oldPoint=oldPoint||[0,0],"horizontal"===axis.orient?(ret.pixel=newPoint[0]-oldPoint[0],ret.pixelLength=rect.width,ret.pixelStart=rect.x,ret.signal=axis.inverse?1:-1):(ret.pixel=newPoint[1]-oldPoint[1],ret.pixelLength=rect.height,ret.pixelStart=rect.y,ret.signal=axis.inverse?-1:1),ret}};const dataZoom_InsideZoomView=InsideZoomView;function installDataZoomInside_install(registers){installCommon(registers),registers.registerComponentModel(dataZoom_InsideZoomModel),registers.registerComponentView(dataZoom_InsideZoomView),installDataZoomRoamProcessor(registers)}const dataZoom_SliderZoomModel=function(_super){function SliderZoomModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=SliderZoomModel.type,_this}return(0,tslib_es6.ZT)(SliderZoomModel,_super),SliderZoomModel.type="dataZoom.slider",SliderZoomModel.layoutMode="box",SliderZoomModel.defaultOption=(0,component.ZL)(dataZoom_DataZoomModel.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),SliderZoomModel}(dataZoom_DataZoomModel);var SliderZoomView_Rect=Rect.Z,SHOW_DATA_SHADOW_SERIES_TYPE=["line","bar","candlestick","scatter"],REALTIME_ANIMATION_CONFIG={easing:"cubicOut",duration:100,delay:0},SliderZoomView=function(_super){function SliderZoomView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=SliderZoomView.type,_this._displayables={},_this}return(0,tslib_es6.ZT)(SliderZoomView,_super),SliderZoomView.prototype.init=function(ecModel,api){this.api=api,this._onBrush=(0,util.bind)(this._onBrush,this),this._onBrushEnd=(0,util.bind)(this._onBrushEnd,this)},SliderZoomView.prototype.render=function(dataZoomModel,ecModel,api,payload){if(_super.prototype.render.apply(this,arguments),throttle.T9(this,"_dispatchZoomAction",dataZoomModel.get("throttle"),"fixRate"),this._orient=dataZoomModel.getOrient(),!1!==dataZoomModel.get("show")){if(dataZoomModel.noTarget())return this._clear(),void this.group.removeAll();payload&&"dataZoom"===payload.type&&payload.from===this.uid||this._buildView(),this._updateView()}else this.group.removeAll()},SliderZoomView.prototype.dispose=function(){this._clear(),_super.prototype.dispose.apply(this,arguments)},SliderZoomView.prototype._clear=function(){throttle.ZH(this,"_dispatchZoomAction");var zr=this.api.getZr();zr.off("mousemove",this._onBrush),zr.off("mouseup",this._onBrushEnd)},SliderZoomView.prototype._buildView=function(){var thisGroup=this.group;thisGroup.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var barGroup=this._displayables.sliderGroup=new Group.Z;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),thisGroup.add(barGroup),this._positionGroup()},SliderZoomView.prototype._resetLocation=function(){var dataZoomModel=this.dataZoomModel,api=this.api,moveHandleSize=dataZoomModel.get("brushSelect")?7:0,coordRect=this._findCoordRect(),ecSize={width:api.getWidth(),height:api.getHeight()},positionInfo="horizontal"===this._orient?{right:ecSize.width-coordRect.x-coordRect.width,top:ecSize.height-30-7-moveHandleSize,width:coordRect.width,height:30}:{right:7,top:coordRect.y,width:30,height:coordRect.height},layoutParams=layout.tE(dataZoomModel.option);(0,util.each)(["right","top","width","height"],(function(name){"ph"===layoutParams[name]&&(layoutParams[name]=positionInfo[name])}));var layoutRect=layout.ME(layoutParams,ecSize);this._location={x:layoutRect.x,y:layoutRect.y},this._size=[layoutRect.width,layoutRect.height],"vertical"===this._orient&&this._size.reverse()},SliderZoomView.prototype._positionGroup=function(){var thisGroup=this.group,location=this._location,orient=this._orient,targetAxisModel=this.dataZoomModel.getFirstTargetAxisModel(),inverse=targetAxisModel&&targetAxisModel.get("inverse"),sliderGroup=this._displayables.sliderGroup,otherAxisInverse=(this._dataShadowInfo||{}).otherAxisInverse;sliderGroup.attr("horizontal"!==orient||inverse?"horizontal"===orient&&inverse?{scaleY:otherAxisInverse?1:-1,scaleX:-1}:"vertical"!==orient||inverse?{scaleY:otherAxisInverse?-1:1,scaleX:-1,rotation:Math.PI/2}:{scaleY:otherAxisInverse?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:otherAxisInverse?1:-1,scaleX:1});var rect=thisGroup.getBoundingRect([sliderGroup]);thisGroup.x=location.x-rect.x,thisGroup.y=location.y-rect.y,thisGroup.markRedraw()},SliderZoomView.prototype._getViewExtent=function(){return[0,this._size[0]]},SliderZoomView.prototype._renderBackground=function(){var dataZoomModel=this.dataZoomModel,size=this._size,barGroup=this._displayables.sliderGroup,brushSelect=dataZoomModel.get("brushSelect");barGroup.add(new SliderZoomView_Rect({silent:!0,shape:{x:0,y:0,width:size[0],height:size[1]},style:{fill:dataZoomModel.get("backgroundColor")},z2:-40}));var clickPanel=new SliderZoomView_Rect({shape:{x:0,y:0,width:size[0],height:size[1]},style:{fill:"transparent"},z2:0,onclick:(0,util.bind)(this._onClickPanel,this)}),zr=this.api.getZr();brushSelect?(clickPanel.on("mousedown",this._onBrushStart,this),clickPanel.cursor="crosshair",zr.on("mousemove",this._onBrush),zr.on("mouseup",this._onBrushEnd)):(zr.off("mousemove",this._onBrush),zr.off("mouseup",this._onBrushEnd)),barGroup.add(clickPanel)},SliderZoomView.prototype._renderDataShadow=function(){var info=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],info){var size=this._size,oldSize=this._shadowSize||[],seriesModel=info.series,data=seriesModel.getRawData(),candlestickDim=seriesModel.getShadowDim&&seriesModel.getShadowDim(),otherDim=candlestickDim&&data.getDimensionInfo(candlestickDim)?seriesModel.getShadowDim():info.otherDim;if(null!=otherDim){var polygonPts=this._shadowPolygonPts,polylinePts=this._shadowPolylinePts;if(data!==this._shadowData||otherDim!==this._shadowDim||size[0]!==oldSize[0]||size[1]!==oldSize[1]){var otherDataExtent_1=data.getDataExtent(otherDim),otherOffset=.3*(otherDataExtent_1[1]-otherDataExtent_1[0]);otherDataExtent_1=[otherDataExtent_1[0]-otherOffset,otherDataExtent_1[1]+otherOffset];var lastIsEmpty_1,otherShadowExtent_1=[0,size[1]],thisShadowExtent=[0,size[0]],areaPoints_1=[[size[0],0],[0,0]],linePoints_1=[],step_1=thisShadowExtent[1]/(data.count()-1),thisCoord_1=0,stride_1=Math.round(data.count()/size[0]);data.each([otherDim],(function(value,index){if(stride_1>0&&index%stride_1)thisCoord_1+=step_1;else{var isEmpty=null==value||isNaN(value)||""===value,otherCoord=isEmpty?0:(0,number.NU)(value,otherDataExtent_1,otherShadowExtent_1,!0);isEmpty&&!lastIsEmpty_1&&index?(areaPoints_1.push([areaPoints_1[areaPoints_1.length-1][0],0]),linePoints_1.push([linePoints_1[linePoints_1.length-1][0],0])):!isEmpty&&lastIsEmpty_1&&(areaPoints_1.push([thisCoord_1,0]),linePoints_1.push([thisCoord_1,0])),areaPoints_1.push([thisCoord_1,otherCoord]),linePoints_1.push([thisCoord_1,otherCoord]),thisCoord_1+=step_1,lastIsEmpty_1=isEmpty}})),polygonPts=this._shadowPolygonPts=areaPoints_1,polylinePts=this._shadowPolylinePts=linePoints_1}this._shadowData=data,this._shadowDim=otherDim,this._shadowSize=[size[0],size[1]];for(var dataZoomModel=this.dataZoomModel,i=0;i<3;i++){var group=createDataShadowGroup(1===i);this._displayables.sliderGroup.add(group),this._displayables.dataShadowSegs.push(group)}}}function createDataShadowGroup(isSelectedArea){var model=dataZoomModel.getModel(isSelectedArea?"selectedDataBackground":"dataBackground"),group=new Group.Z,polygon=new Polygon.Z({shape:{points:polygonPts},segmentIgnoreThreshold:1,style:model.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),polyline=new shape_Polyline.Z({shape:{points:polylinePts},segmentIgnoreThreshold:1,style:model.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return group.add(polygon),group.add(polyline),group}},SliderZoomView.prototype._prepareDataShadowInfo=function(){var dataZoomModel=this.dataZoomModel,showDataShadow=dataZoomModel.get("showDataShadow");if(!1!==showDataShadow){var result,ecModel=this.ecModel;return dataZoomModel.eachTargetAxis((function(axisDim,axisIndex){var seriesModels=dataZoomModel.getAxisProxy(axisDim,axisIndex).getTargetSeriesModels();(0,util.each)(seriesModels,(function(seriesModel){if(!(result||!0!==showDataShadow&&(0,util.indexOf)(SHOW_DATA_SHADOW_SERIES_TYPE,seriesModel.get("type"))<0)){var otherAxisInverse,thisAxis=ecModel.getComponent(getAxisMainType(axisDim),axisIndex).axis,otherDim=function getOtherDim(thisDim){return{x:"y",y:"x",radius:"angle",angle:"radius"}[thisDim]}(axisDim),coordSys=seriesModel.coordinateSystem;null!=otherDim&&coordSys.getOtherAxis&&(otherAxisInverse=coordSys.getOtherAxis(thisAxis).inverse),otherDim=seriesModel.getData().mapDimension(otherDim),result={thisAxis,series:seriesModel,thisDim:axisDim,otherDim,otherAxisInverse}}}),this)}),this),result}},SliderZoomView.prototype._renderHandle=function(){var thisGroup=this.group,displayables=this._displayables,handles=displayables.handles=[null,null],handleLabels=displayables.handleLabels=[null,null],sliderGroup=this._displayables.sliderGroup,size=this._size,dataZoomModel=this.dataZoomModel,api=this.api,borderRadius=dataZoomModel.get("borderRadius")||0,brushSelect=dataZoomModel.get("brushSelect"),filler=displayables.filler=new SliderZoomView_Rect({silent:brushSelect,style:{fill:dataZoomModel.get("fillerColor")},textConfig:{position:"inside"}});sliderGroup.add(filler),sliderGroup.add(new SliderZoomView_Rect({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:size[0],height:size[1],r:borderRadius},style:{stroke:dataZoomModel.get("dataBackgroundColor")||dataZoomModel.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}})),(0,util.each)([0,1],(function(handleIndex){var iconStr=dataZoomModel.get("handleIcon");!util_symbol.Pw[iconStr]&&iconStr.indexOf("path://")<0&&iconStr.indexOf("image://")<0&&(iconStr="path://"+iconStr);var path=(0,util_symbol.th)(iconStr,-1,0,2,2,null,!0);path.attr({cursor:getCursor(this._orient),draggable:!0,drift:(0,util.bind)(this._onDragMove,this,handleIndex),ondragend:(0,util.bind)(this._onDragEnd,this),onmouseover:(0,util.bind)(this._showDataInfo,this,!0),onmouseout:(0,util.bind)(this._showDataInfo,this,!1),z2:5});var bRect=path.getBoundingRect(),handleSize=dataZoomModel.get("handleSize");this._handleHeight=(0,number.GM)(handleSize,this._size[1]),this._handleWidth=bRect.width/bRect.height*this._handleHeight,path.setStyle(dataZoomModel.getModel("handleStyle").getItemStyle()),path.style.strokeNoScale=!0,path.rectHover=!0,path.ensureState("emphasis").style=dataZoomModel.getModel(["emphasis","handleStyle"]).getItemStyle(),(0,states.vF)(path);var handleColor=dataZoomModel.get("handleColor");null!=handleColor&&(path.style.fill=handleColor),sliderGroup.add(handles[handleIndex]=path);var textStyleModel=dataZoomModel.getModel("textStyle");thisGroup.add(handleLabels[handleIndex]=new Text.ZP({silent:!0,invisible:!0,style:(0,labelStyle.Lr)(textStyleModel,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:textStyleModel.getTextColor(),font:textStyleModel.getFont()}),z2:10}))}),this);var actualMoveZone=filler;if(brushSelect){var moveHandleHeight=(0,number.GM)(dataZoomModel.get("moveHandleSize"),size[1]),moveHandle_1=displayables.moveHandle=new Rect.Z({style:dataZoomModel.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:size[1]-.5,height:moveHandleHeight}}),iconSize=.8*moveHandleHeight,moveHandleIcon=displayables.moveHandleIcon=(0,util_symbol.th)(dataZoomModel.get("moveHandleIcon"),-iconSize/2,-iconSize/2,iconSize,iconSize,"#fff",!0);moveHandleIcon.silent=!0,moveHandleIcon.y=size[1]+moveHandleHeight/2-.5,moveHandle_1.ensureState("emphasis").style=dataZoomModel.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var moveZoneExpandSize=Math.min(size[1]/2,Math.max(moveHandleHeight,10));(actualMoveZone=displayables.moveZone=new Rect.Z({invisible:!0,shape:{y:size[1]-moveZoneExpandSize,height:moveHandleHeight+moveZoneExpandSize}})).on("mouseover",(function(){api.enterEmphasis(moveHandle_1)})).on("mouseout",(function(){api.leaveEmphasis(moveHandle_1)})),sliderGroup.add(moveHandle_1),sliderGroup.add(moveHandleIcon),sliderGroup.add(actualMoveZone)}actualMoveZone.attr({draggable:!0,cursor:getCursor(this._orient),drift:(0,util.bind)(this._onDragMove,this,"all"),ondragstart:(0,util.bind)(this._showDataInfo,this,!0),ondragend:(0,util.bind)(this._onDragEnd,this),onmouseover:(0,util.bind)(this._showDataInfo,this,!0),onmouseout:(0,util.bind)(this._showDataInfo,this,!1)})},SliderZoomView.prototype._resetInterval=function(){var range=this._range=this.dataZoomModel.getPercentRange(),viewExtent=this._getViewExtent();this._handleEnds=[(0,number.NU)(range[0],[0,100],viewExtent,!0),(0,number.NU)(range[1],[0,100],viewExtent,!0)]},SliderZoomView.prototype._updateInterval=function(handleIndex,delta){var dataZoomModel=this.dataZoomModel,handleEnds=this._handleEnds,viewExtend=this._getViewExtent(),minMaxSpan=dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan(),percentExtent=[0,100];sliderMove(delta,handleEnds,viewExtend,dataZoomModel.get("zoomLock")?"all":handleIndex,null!=minMaxSpan.minSpan?(0,number.NU)(minMaxSpan.minSpan,percentExtent,viewExtend,!0):null,null!=minMaxSpan.maxSpan?(0,number.NU)(minMaxSpan.maxSpan,percentExtent,viewExtend,!0):null);var lastRange=this._range,range=this._range=(0,number.dt)([(0,number.NU)(handleEnds[0],viewExtend,percentExtent,!0),(0,number.NU)(handleEnds[1],viewExtend,percentExtent,!0)]);return!lastRange||lastRange[0]!==range[0]||lastRange[1]!==range[1]},SliderZoomView.prototype._updateView=function(nonRealtime){var displaybles=this._displayables,handleEnds=this._handleEnds,handleInterval=(0,number.dt)(handleEnds.slice()),size=this._size;(0,util.each)([0,1],(function(handleIndex){var handle=displaybles.handles[handleIndex],handleHeight=this._handleHeight;handle.attr({scaleX:handleHeight/2,scaleY:handleHeight/2,x:handleEnds[handleIndex]+(handleIndex?-1:1),y:size[1]/2-handleHeight/2})}),this),displaybles.filler.setShape({x:handleInterval[0],y:0,width:handleInterval[1]-handleInterval[0],height:size[1]});var viewExtent={x:handleInterval[0],width:handleInterval[1]-handleInterval[0]};displaybles.moveHandle&&(displaybles.moveHandle.setShape(viewExtent),displaybles.moveZone.setShape(viewExtent),displaybles.moveZone.getBoundingRect(),displaybles.moveHandleIcon&&displaybles.moveHandleIcon.attr("x",viewExtent.x+viewExtent.width/2));for(var dataShadowSegs=displaybles.dataShadowSegs,segIntervals=[0,handleInterval[0],handleInterval[1],size[0]],i=0;i<dataShadowSegs.length;i++){var segGroup=dataShadowSegs[i],clipPath=segGroup.getClipPath();clipPath||(clipPath=new Rect.Z,segGroup.setClipPath(clipPath)),clipPath.setShape({x:segIntervals[i],y:0,width:segIntervals[i+1]-segIntervals[i],height:size[1]})}this._updateDataInfo(nonRealtime)},SliderZoomView.prototype._updateDataInfo=function(nonRealtime){var dataZoomModel=this.dataZoomModel,displaybles=this._displayables,handleLabels=displaybles.handleLabels,orient=this._orient,labelTexts=["",""];if(dataZoomModel.get("showDetail")){var axisProxy=dataZoomModel.findRepresentativeAxisProxy();if(axisProxy){var axis=axisProxy.getAxisModel().axis,range=this._range,dataInterval=nonRealtime?axisProxy.calculateDataWindow({start:range[0],end:range[1]}).valueWindow:axisProxy.getDataValueWindow();labelTexts=[this._formatLabel(dataInterval[0],axis),this._formatLabel(dataInterval[1],axis)]}}var orderedHandleEnds=(0,number.dt)(this._handleEnds.slice());function setLabel(handleIndex){var barTransform=graphic.getTransform(displaybles.handles[handleIndex].parent,this.group),direction=graphic.transformDirection(0===handleIndex?"right":"left",barTransform),offset=this._handleWidth/2+5,textPoint=graphic.applyTransform([orderedHandleEnds[handleIndex]+(0===handleIndex?-offset:offset),this._size[1]/2],barTransform);handleLabels[handleIndex].setStyle({x:textPoint[0],y:textPoint[1],verticalAlign:"horizontal"===orient?"middle":direction,align:"horizontal"===orient?direction:"center",text:labelTexts[handleIndex]})}setLabel.call(this,0),setLabel.call(this,1)},SliderZoomView.prototype._formatLabel=function(value,axis){var dataZoomModel=this.dataZoomModel,labelFormatter=dataZoomModel.get("labelFormatter"),labelPrecision=dataZoomModel.get("labelPrecision");null!=labelPrecision&&"auto"!==labelPrecision||(labelPrecision=axis.getPixelPrecision());var valueStr=null==value||isNaN(value)?"":"category"===axis.type||"time"===axis.type?axis.scale.getLabel({value:Math.round(value)}):value.toFixed(Math.min(labelPrecision,20));return(0,util.isFunction)(labelFormatter)?labelFormatter(value,valueStr):(0,util.isString)(labelFormatter)?labelFormatter.replace("{value}",valueStr):valueStr},SliderZoomView.prototype._showDataInfo=function(showOrHide){showOrHide=this._dragging||showOrHide;var displayables=this._displayables,handleLabels=displayables.handleLabels;handleLabels[0].attr("invisible",!showOrHide),handleLabels[1].attr("invisible",!showOrHide),displayables.moveHandle&&this.api[showOrHide?"enterEmphasis":"leaveEmphasis"](displayables.moveHandle,1)},SliderZoomView.prototype._onDragMove=function(handleIndex,dx,dy,event){this._dragging=!0,core_event.sT(event.event);var barTransform=this._displayables.sliderGroup.getLocalTransform(),vertex=graphic.applyTransform([dx,dy],barTransform,!0),changed=this._updateInterval(handleIndex,vertex[0]),realtime=this.dataZoomModel.get("realtime");this._updateView(!realtime),changed&&realtime&&this._dispatchZoomAction(!0)},SliderZoomView.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1),!this.dataZoomModel.get("realtime")&&this._dispatchZoomAction(!1)},SliderZoomView.prototype._onClickPanel=function(e){var size=this._size,localPoint=this._displayables.sliderGroup.transformCoordToLocal(e.offsetX,e.offsetY);if(!(localPoint[0]<0||localPoint[0]>size[0]||localPoint[1]<0||localPoint[1]>size[1])){var handleEnds=this._handleEnds,center=(handleEnds[0]+handleEnds[1])/2,changed=this._updateInterval("all",localPoint[0]-center);this._updateView(),changed&&this._dispatchZoomAction(!1)}},SliderZoomView.prototype._onBrushStart=function(e){var x=e.offsetX,y=e.offsetY;this._brushStart=new Point.Z(x,y),this._brushing=!0,this._brushStartTime=+new Date},SliderZoomView.prototype._onBrushEnd=function(e){if(this._brushing){var brushRect=this._displayables.brushRect;if(this._brushing=!1,brushRect){brushRect.attr("ignore",!0);var brushShape=brushRect.shape;if(!(+new Date-this._brushStartTime<200&&Math.abs(brushShape.width)<5)){var viewExtend=this._getViewExtent(),percentExtent=[0,100];this._range=(0,number.dt)([(0,number.NU)(brushShape.x,viewExtend,percentExtent,!0),(0,number.NU)(brushShape.x+brushShape.width,viewExtend,percentExtent,!0)]),this._handleEnds=[brushShape.x,brushShape.x+brushShape.width],this._updateView(),this._dispatchZoomAction(!1)}}}},SliderZoomView.prototype._onBrush=function(e){this._brushing&&(core_event.sT(e.event),this._updateBrushRect(e.offsetX,e.offsetY))},SliderZoomView.prototype._updateBrushRect=function(mouseX,mouseY){var displayables=this._displayables,dataZoomModel=this.dataZoomModel,brushRect=displayables.brushRect;brushRect||(brushRect=displayables.brushRect=new SliderZoomView_Rect({silent:!0,style:dataZoomModel.getModel("brushStyle").getItemStyle()}),displayables.sliderGroup.add(brushRect)),brushRect.attr("ignore",!1);var brushStart=this._brushStart,sliderGroup=this._displayables.sliderGroup,endPoint=sliderGroup.transformCoordToLocal(mouseX,mouseY),startPoint=sliderGroup.transformCoordToLocal(brushStart.x,brushStart.y),size=this._size;endPoint[0]=Math.max(Math.min(size[0],endPoint[0]),0),brushRect.setShape({x:startPoint[0],y:0,width:endPoint[0]-startPoint[0],height:size[1]})},SliderZoomView.prototype._dispatchZoomAction=function(realtime){var range=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:realtime?REALTIME_ANIMATION_CONFIG:null,start:range[0],end:range[1]})},SliderZoomView.prototype._findCoordRect=function(){var rect,coordSysInfoList=collectReferCoordSysModelInfo(this.dataZoomModel).infoList;if(!rect&&coordSysInfoList.length){var coordSys=coordSysInfoList[0].model.coordinateSystem;rect=coordSys.getRect&&coordSys.getRect()}if(!rect){var width=this.api.getWidth(),height=this.api.getHeight();rect={x:.2*width,y:.2*height,width:.6*width,height:.6*height}}return rect},SliderZoomView.type="dataZoom.slider",SliderZoomView}(dataZoom_DataZoomView);function getCursor(orient){return"vertical"===orient?"ns-resize":"ew-resize"}const dataZoom_SliderZoomView=SliderZoomView;function installDataZoomSlider_install(registers){registers.registerComponentModel(dataZoom_SliderZoomModel),registers.registerComponentView(dataZoom_SliderZoomView),installCommon(registers)}var visualDefault={get:function(visualType,key,isCategory){var value=util.clone((visualDefault_defaultOption[visualType]||{})[key]);return isCategory&&util.isArray(value)?value[value.length-1]:value}},visualDefault_defaultOption={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}};const visual_visualDefault=visualDefault;var mapVisual=VisualMapping.Z.mapVisual,eachVisual=VisualMapping.Z.eachVisual,isArray=util.isArray,VisualMapModel_each=util.each,VisualMapModel_asc=number.dt,linearMap=number.NU;const visualMap_VisualMapModel=function(_super){function VisualMapModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=VisualMapModel.type,_this.stateList=["inRange","outOfRange"],_this.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],_this.layoutMode={type:"box",ignoreSize:!0},_this.dataBound=[-1/0,1/0],_this.targetVisuals={},_this.controllerVisuals={},_this}return(0,tslib_es6.ZT)(VisualMapModel,_super),VisualMapModel.prototype.init=function(option,parentModel,ecModel){this.mergeDefaultAndTheme(option,ecModel)},VisualMapModel.prototype.optionUpdated=function(newOption,isInit){var thisOption=this.option;!isInit&&replaceVisualOption(thisOption,newOption,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},VisualMapModel.prototype.resetVisual=function(supplementVisualOption){var stateList=this.stateList;supplementVisualOption=util.bind(supplementVisualOption,this),this.controllerVisuals=createVisualMappings(this.option.controller,stateList,supplementVisualOption),this.targetVisuals=createVisualMappings(this.option.target,stateList,supplementVisualOption)},VisualMapModel.prototype.getItemSymbol=function(){return null},VisualMapModel.prototype.getTargetSeriesIndices=function(){var optionSeriesIndex=this.option.seriesIndex,seriesIndices=[];return null==optionSeriesIndex||"all"===optionSeriesIndex?this.ecModel.eachSeries((function(seriesModel,index){seriesIndices.push(index)})):seriesIndices=util_model.kF(optionSeriesIndex),seriesIndices},VisualMapModel.prototype.eachTargetSeries=function(callback,context){util.each(this.getTargetSeriesIndices(),(function(seriesIndex){var seriesModel=this.ecModel.getSeriesByIndex(seriesIndex);seriesModel&&callback.call(context,seriesModel)}),this)},VisualMapModel.prototype.isTargetSeries=function(seriesModel){var is=!1;return this.eachTargetSeries((function(model){model===seriesModel&&(is=!0)})),is},VisualMapModel.prototype.formatValueText=function(value,isCategory,edgeSymbols){var isMinMax,option=this.option,precision=option.precision,dataBound=this.dataBound,formatter=option.formatter;edgeSymbols=edgeSymbols||["<",">"],util.isArray(value)&&(value=value.slice(),isMinMax=!0);var textValue=isCategory?value:isMinMax?[toFixed(value[0]),toFixed(value[1])]:toFixed(value);return util.isString(formatter)?formatter.replace("{value}",isMinMax?textValue[0]:textValue).replace("{value2}",isMinMax?textValue[1]:textValue):util.isFunction(formatter)?isMinMax?formatter(value[0],value[1]):formatter(value):isMinMax?value[0]===dataBound[0]?edgeSymbols[0]+" "+textValue[1]:value[1]===dataBound[1]?edgeSymbols[1]+" "+textValue[0]:textValue[0]+" - "+textValue[1]:textValue;function toFixed(val){return val===dataBound[0]?"min":val===dataBound[1]?"max":(+val).toFixed(Math.min(precision,20))}},VisualMapModel.prototype.resetExtent=function(){var thisOption=this.option,extent=VisualMapModel_asc([thisOption.min,thisOption.max]);this._dataExtent=extent},VisualMapModel.prototype.getDataDimensionIndex=function(data){var optDim=this.option.dimension;if(null!=optDim)return data.getDimensionIndex(optDim);for(var dimNames=data.dimensions,i=dimNames.length-1;i>=0;i--){var dimName=dimNames[i],dimInfo=data.getDimensionInfo(dimName);if(!dimInfo.isCalculationCoord)return dimInfo.storeDimIndex}},VisualMapModel.prototype.getExtent=function(){return this._dataExtent.slice()},VisualMapModel.prototype.completeVisualOption=function(){var ecModel=this.ecModel,thisOption=this.option,base={inRange:thisOption.inRange,outOfRange:thisOption.outOfRange},target=thisOption.target||(thisOption.target={}),controller=thisOption.controller||(thisOption.controller={});util.merge(target,base),util.merge(controller,base);var isCategory=this.isCategory();function completeSingle(base){isArray(thisOption.color)&&!base.inRange&&(base.inRange={color:thisOption.color.slice().reverse()}),base.inRange=base.inRange||{color:ecModel.get("gradientColor")}}completeSingle.call(this,target),completeSingle.call(this,controller),function completeInactive(base,stateExist,stateAbsent){var optExist=base[stateExist],optAbsent=base[stateAbsent];optExist&&!optAbsent&&(optAbsent=base[stateAbsent]={},VisualMapModel_each(optExist,(function(visualData,visualType){if(VisualMapping.Z.isValidType(visualType)){var defa=visual_visualDefault.get(visualType,"inactive",isCategory);null!=defa&&(optAbsent[visualType]=defa,"color"!==visualType||optAbsent.hasOwnProperty("opacity")||optAbsent.hasOwnProperty("colorAlpha")||(optAbsent.opacity=[0,0]))}})))}.call(this,target,"inRange","outOfRange"),function completeController(controller){var symbolExists=(controller.inRange||{}).symbol||(controller.outOfRange||{}).symbol,symbolSizeExists=(controller.inRange||{}).symbolSize||(controller.outOfRange||{}).symbolSize,inactiveColor=this.get("inactiveColor"),defaultSymbol=this.getItemSymbol()||"roundRect";VisualMapModel_each(this.stateList,(function(state){var itemSize=this.itemSize,visuals=controller[state];visuals||(visuals=controller[state]={color:isCategory?inactiveColor:[inactiveColor]}),null==visuals.symbol&&(visuals.symbol=symbolExists&&util.clone(symbolExists)||(isCategory?defaultSymbol:[defaultSymbol])),null==visuals.symbolSize&&(visuals.symbolSize=symbolSizeExists&&util.clone(symbolSizeExists)||(isCategory?itemSize[0]:[itemSize[0],itemSize[0]])),visuals.symbol=mapVisual(visuals.symbol,(function(symbol){return"none"===symbol?defaultSymbol:symbol}));var symbolSize=visuals.symbolSize;if(null!=symbolSize){var max_1=-1/0;eachVisual(symbolSize,(function(value){value>max_1&&(max_1=value)})),visuals.symbolSize=mapVisual(symbolSize,(function(value){return linearMap(value,[0,max_1],[0,itemSize[0]],!0)}))}}),this)}.call(this,controller)},VisualMapModel.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},VisualMapModel.prototype.isCategory=function(){return!!this.option.categories},VisualMapModel.prototype.setSelected=function(selected){},VisualMapModel.prototype.getSelected=function(){return null},VisualMapModel.prototype.getValueState=function(value){return null},VisualMapModel.prototype.getVisualMeta=function(getColorVisual){return null},VisualMapModel.type="visualMap",VisualMapModel.dependencies=["series"],VisualMapModel.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},VisualMapModel}(model_Component.Z);var DEFAULT_BAR_BOUND=[20,140],ContinuousModel=function(_super){function ContinuousModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=ContinuousModel.type,_this}return(0,tslib_es6.ZT)(ContinuousModel,_super),ContinuousModel.prototype.optionUpdated=function(newOption,isInit){_super.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual((function(mappingOption){mappingOption.mappingMethod="linear",mappingOption.dataExtent=this.getExtent()})),this._resetRange()},ContinuousModel.prototype.resetItemSize=function(){_super.prototype.resetItemSize.apply(this,arguments);var itemSize=this.itemSize;(null==itemSize[0]||isNaN(itemSize[0]))&&(itemSize[0]=DEFAULT_BAR_BOUND[0]),(null==itemSize[1]||isNaN(itemSize[1]))&&(itemSize[1]=DEFAULT_BAR_BOUND[1])},ContinuousModel.prototype._resetRange=function(){var dataExtent=this.getExtent(),range=this.option.range;!range||range.auto?(dataExtent.auto=1,this.option.range=dataExtent):util.isArray(range)&&(range[0]>range[1]&&range.reverse(),range[0]=Math.max(range[0],dataExtent[0]),range[1]=Math.min(range[1],dataExtent[1]))},ContinuousModel.prototype.completeVisualOption=function(){_super.prototype.completeVisualOption.apply(this,arguments),util.each(this.stateList,(function(state){var symbolSize=this.option.controller[state].symbolSize;symbolSize&&symbolSize[0]!==symbolSize[1]&&(symbolSize[0]=symbolSize[1]/3)}),this)},ContinuousModel.prototype.setSelected=function(selected){this.option.range=selected.slice(),this._resetRange()},ContinuousModel.prototype.getSelected=function(){var dataExtent=this.getExtent(),dataInterval=number.dt((this.get("range")||[]).slice());return dataInterval[0]>dataExtent[1]&&(dataInterval[0]=dataExtent[1]),dataInterval[1]>dataExtent[1]&&(dataInterval[1]=dataExtent[1]),dataInterval[0]<dataExtent[0]&&(dataInterval[0]=dataExtent[0]),dataInterval[1]<dataExtent[0]&&(dataInterval[1]=dataExtent[0]),dataInterval},ContinuousModel.prototype.getValueState=function(value){var range=this.option.range,dataExtent=this.getExtent();return(range[0]<=dataExtent[0]||range[0]<=value)&&(range[1]>=dataExtent[1]||value<=range[1])?"inRange":"outOfRange"},ContinuousModel.prototype.findTargetDataIndices=function(range){var result=[];return this.eachTargetSeries((function(seriesModel){var dataIndices=[],data=seriesModel.getData();data.each(this.getDataDimensionIndex(data),(function(value,dataIndex){range[0]<=value&&value<=range[1]&&dataIndices.push(dataIndex)}),this),result.push({seriesId:seriesModel.id,dataIndex:dataIndices})}),this),result},ContinuousModel.prototype.getVisualMeta=function(getColorVisual){var oVals=getColorStopValues(this,"outOfRange",this.getExtent()),iVals=getColorStopValues(this,"inRange",this.option.range.slice()),stops=[];function setStop(value,valueState){stops.push({value,color:getColorVisual(value,valueState)})}for(var iIdx=0,oIdx=0,iLen=iVals.length,oLen=oVals.length;oIdx<oLen&&(!iVals.length||oVals[oIdx]<=iVals[0]);oIdx++)oVals[oIdx]<iVals[iIdx]&&setStop(oVals[oIdx],"outOfRange");for(var first=1;iIdx<iLen;iIdx++,first=0)first&&stops.length&&setStop(iVals[iIdx],"outOfRange"),setStop(iVals[iIdx],"inRange");for(first=1;oIdx<oLen;oIdx++)(!iVals.length||iVals[iVals.length-1]<oVals[oIdx])&&(first&&(stops.length&&setStop(stops[stops.length-1].value,"outOfRange"),first=0),setStop(oVals[oIdx],"outOfRange"));var stopsLen=stops.length;return{stops,outerColors:[stopsLen?stops[0].color:"transparent",stopsLen?stops[stopsLen-1].color:"transparent"]}},ContinuousModel.type="visualMap.continuous",ContinuousModel.defaultOption=(0,component.ZL)(visualMap_VisualMapModel.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),ContinuousModel}(visualMap_VisualMapModel);function getColorStopValues(visualMapModel,valueState,dataExtent){if(dataExtent[0]===dataExtent[1])return dataExtent.slice();for(var step=(dataExtent[1]-dataExtent[0])/200,value=dataExtent[0],stopValues=[],i=0;i<=200&&value<dataExtent[1];i++)stopValues.push(value),value+=step;return stopValues.push(dataExtent[1]),stopValues}const visualMap_ContinuousModel=ContinuousModel;const visualMap_VisualMapView=function(_super){function VisualMapView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=VisualMapView.type,_this.autoPositionValues={left:1,right:1,top:1,bottom:1},_this}return(0,tslib_es6.ZT)(VisualMapView,_super),VisualMapView.prototype.init=function(ecModel,api){this.ecModel=ecModel,this.api=api},VisualMapView.prototype.render=function(visualMapModel,ecModel,api,payload){this.visualMapModel=visualMapModel,!1!==visualMapModel.get("show")?this.doRender(visualMapModel,ecModel,api,payload):this.group.removeAll()},VisualMapView.prototype.renderBackground=function(group){var visualMapModel=this.visualMapModel,padding=format.MY(visualMapModel.get("padding")||0),rect=group.getBoundingRect();group.add(new Rect.Z({z2:-1,silent:!0,shape:{x:rect.x-padding[3],y:rect.y-padding[0],width:rect.width+padding[3]+padding[1],height:rect.height+padding[0]+padding[2]},style:{fill:visualMapModel.get("backgroundColor"),stroke:visualMapModel.get("borderColor"),lineWidth:visualMapModel.get("borderWidth")}}))},VisualMapView.prototype.getControllerVisual=function(targetValue,visualCluster,opts){var forceState=(opts=opts||{}).forceState,visualMapModel=this.visualMapModel,visualObj={};if("color"===visualCluster){var defaultColor=visualMapModel.get("contentColor");visualObj.color=defaultColor}function getter(key){return visualObj[key]}function setter(key,value){visualObj[key]=value}var mappings=visualMapModel.controllerVisuals[forceState||visualMapModel.getValueState(targetValue)],visualTypes=VisualMapping.Z.prepareVisualTypes(mappings);return util.each(visualTypes,(function(type){var visualMapping=mappings[type];opts.convertOpacityToAlpha&&"opacity"===type&&(type="colorAlpha",visualMapping=mappings.__alphaForOpacity),VisualMapping.Z.dependsOn(type,visualCluster)&&visualMapping&&visualMapping.applyVisual(targetValue,getter,setter)})),visualObj[visualCluster]},VisualMapView.prototype.positionGroup=function(group){var model=this.visualMapModel,api=this.api;layout.p$(group,model.getBoxLayoutParams(),{width:api.getWidth(),height:api.getHeight()})},VisualMapView.prototype.doRender=function(visualMapModel,ecModel,api,payload){},VisualMapView.type="visualMap",VisualMapView}(Component.Z);var paramsSet=[["left","right","width"],["top","bottom","height"]];function getItemAlign(visualMapModel,api,itemSize){var modelOption=visualMapModel.option,itemAlign=modelOption.align;if(null!=itemAlign&&"auto"!==itemAlign)return itemAlign;for(var ecSize={width:api.getWidth(),height:api.getHeight()},realIndex="horizontal"===modelOption.orient?1:0,reals=paramsSet[realIndex],fakeValue=[0,null,10],layoutInput={},i=0;i<3;i++)layoutInput[paramsSet[1-realIndex][i]]=fakeValue[i],layoutInput[reals[i]]=2===i?itemSize[0]:modelOption[reals[i]];var rParam=[["x","width",3],["y","height",0]][realIndex],rect=(0,layout.ME)(layoutInput,ecSize,modelOption.padding);return reals[(rect.margin[rParam[2]]||0)+rect[rParam[0]]+.5*rect[rParam[1]]<.5*ecSize[rParam[1]]?0:1]}function makeHighDownBatch(batch,visualMapModel){return util.each(batch||[],(function(batchItem){null!=batchItem.dataIndex&&(batchItem.dataIndexInside=batchItem.dataIndex,batchItem.dataIndex=null),batchItem.highlightKey="visualMap"+(visualMapModel?visualMapModel.componentIndex:"")})),batch}var ContinuousView_linearMap=number.NU,ContinuousView_each=util.each,ContinuousView_mathMin=Math.min,ContinuousView_mathMax=Math.max;function createPolygon(points,cursor,onDrift,onDragEnd){return new Polygon.Z({shape:{points},draggable:!!onDrift,cursor,drift:onDrift,onmousemove:function(e){core_event.sT(e.event)},ondragend:onDragEnd})}function useHoverLinkOnHandle(visualMapModel){var hoverLinkOnHandle=visualMapModel.get("hoverLinkOnHandle");return!!(null==hoverLinkOnHandle?visualMapModel.get("realtime"):hoverLinkOnHandle)}function ContinuousView_getCursor(orient){return"vertical"===orient?"ns-resize":"ew-resize"}const visualMap_ContinuousView=function(_super){function ContinuousView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=ContinuousView.type,_this._shapes={},_this._dataInterval=[],_this._handleEnds=[],_this._hoverLinkDataIndices=[],_this}return(0,tslib_es6.ZT)(ContinuousView,_super),ContinuousView.prototype.init=function(ecModel,api){_super.prototype.init.call(this,ecModel,api),this._hoverLinkFromSeriesMouseOver=util.bind(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=util.bind(this._hideIndicator,this)},ContinuousView.prototype.doRender=function(visualMapModel,ecModel,api,payload){payload&&"selectDataRange"===payload.type&&payload.from===this.uid||this._buildView()},ContinuousView.prototype._buildView=function(){this.group.removeAll();var visualMapModel=this.visualMapModel,thisGroup=this.group;this._orient=visualMapModel.get("orient"),this._useHandle=visualMapModel.get("calculable"),this._resetInterval(),this._renderBar(thisGroup);var dataRangeText=visualMapModel.get("text");this._renderEndsText(thisGroup,dataRangeText,0),this._renderEndsText(thisGroup,dataRangeText,1),this._updateView(!0),this.renderBackground(thisGroup),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(thisGroup)},ContinuousView.prototype._renderEndsText=function(group,dataRangeText,endsIndex){if(dataRangeText){var text=dataRangeText[1-endsIndex];text=null!=text?text+"":"";var visualMapModel=this.visualMapModel,textGap=visualMapModel.get("textGap"),itemSize=visualMapModel.itemSize,barGroup=this._shapes.mainGroup,position=this._applyTransform([itemSize[0]/2,0===endsIndex?-textGap:itemSize[1]+textGap],barGroup),align=this._applyTransform(0===endsIndex?"bottom":"top",barGroup),orient=this._orient,textStyleModel=this.visualMapModel.textStyleModel;this.group.add(new Text.ZP({style:(0,labelStyle.Lr)(textStyleModel,{x:position[0],y:position[1],verticalAlign:"horizontal"===orient?"middle":align,align:"horizontal"===orient?align:"center",text})}))}},ContinuousView.prototype._renderBar=function(targetGroup){var visualMapModel=this.visualMapModel,shapes=this._shapes,itemSize=visualMapModel.itemSize,orient=this._orient,useHandle=this._useHandle,itemAlign=getItemAlign(visualMapModel,this.api,itemSize),mainGroup=shapes.mainGroup=this._createBarGroup(itemAlign),gradientBarGroup=new Group.Z;mainGroup.add(gradientBarGroup),gradientBarGroup.add(shapes.outOfRange=createPolygon()),gradientBarGroup.add(shapes.inRange=createPolygon(null,useHandle?ContinuousView_getCursor(this._orient):null,util.bind(this._dragHandle,this,"all",!1),util.bind(this._dragHandle,this,"all",!0))),gradientBarGroup.setClipPath(new Rect.Z({shape:{x:0,y:0,width:itemSize[0],height:itemSize[1],r:3}}));var textRect=visualMapModel.textStyleModel.getTextRect("国"),textSize=ContinuousView_mathMax(textRect.width,textRect.height);useHandle&&(shapes.handleThumbs=[],shapes.handleLabels=[],shapes.handleLabelPoints=[],this._createHandle(visualMapModel,mainGroup,0,itemSize,textSize,orient),this._createHandle(visualMapModel,mainGroup,1,itemSize,textSize,orient)),this._createIndicator(visualMapModel,mainGroup,itemSize,textSize,orient),targetGroup.add(mainGroup)},ContinuousView.prototype._createHandle=function(visualMapModel,mainGroup,handleIndex,itemSize,textSize,orient){var onDrift=util.bind(this._dragHandle,this,handleIndex,!1),onDragEnd=util.bind(this._dragHandle,this,handleIndex,!0),handleSize=(0,contain_text.GM)(visualMapModel.get("handleSize"),itemSize[0]),handleThumb=(0,util_symbol.th)(visualMapModel.get("handleIcon"),-handleSize/2,-handleSize/2,handleSize,handleSize,null,!0),cursor=ContinuousView_getCursor(this._orient);handleThumb.attr({cursor,draggable:!0,drift:onDrift,ondragend:onDragEnd,onmousemove:function(e){core_event.sT(e.event)}}),handleThumb.x=itemSize[0]/2,handleThumb.useStyle(visualMapModel.getModel("handleStyle").getItemStyle()),handleThumb.setStyle({strokeNoScale:!0,strokeFirst:!0}),handleThumb.style.lineWidth*=2,handleThumb.ensureState("emphasis").style=visualMapModel.getModel(["emphasis","handleStyle"]).getItemStyle(),(0,states.Nj)(handleThumb,!0),mainGroup.add(handleThumb);var textStyleModel=this.visualMapModel.textStyleModel,handleLabel=new Text.ZP({cursor,draggable:!0,drift:onDrift,onmousemove:function(e){core_event.sT(e.event)},ondragend:onDragEnd,style:(0,labelStyle.Lr)(textStyleModel,{x:0,y:0,text:""})});handleLabel.ensureState("blur").style={opacity:.1},handleLabel.stateTransition={duration:200},this.group.add(handleLabel);var handleLabelPoint=[handleSize,0],shapes=this._shapes;shapes.handleThumbs[handleIndex]=handleThumb,shapes.handleLabelPoints[handleIndex]=handleLabelPoint,shapes.handleLabels[handleIndex]=handleLabel},ContinuousView.prototype._createIndicator=function(visualMapModel,mainGroup,itemSize,textSize,orient){var scale=(0,contain_text.GM)(visualMapModel.get("indicatorSize"),itemSize[0]),indicator=(0,util_symbol.th)(visualMapModel.get("indicatorIcon"),-scale/2,-scale/2,scale,scale,null,!0);indicator.attr({cursor:"move",invisible:!0,silent:!0,x:itemSize[0]/2});var indicatorStyle=visualMapModel.getModel("indicatorStyle").getItemStyle();if(indicator instanceof graphic_Image.ZP){var pathStyle=indicator.style;indicator.useStyle(util.extend({image:pathStyle.image,x:pathStyle.x,y:pathStyle.y,width:pathStyle.width,height:pathStyle.height},indicatorStyle))}else indicator.useStyle(indicatorStyle);mainGroup.add(indicator);var textStyleModel=this.visualMapModel.textStyleModel,indicatorLabel=new Text.ZP({silent:!0,invisible:!0,style:(0,labelStyle.Lr)(textStyleModel,{x:0,y:0,text:""})});this.group.add(indicatorLabel);var indicatorLabelPoint=[("horizontal"===orient?textSize/2:6)+itemSize[0]/2,0],shapes=this._shapes;shapes.indicator=indicator,shapes.indicatorLabel=indicatorLabel,shapes.indicatorLabelPoint=indicatorLabelPoint,this._firstShowIndicator=!0},ContinuousView.prototype._dragHandle=function(handleIndex,isEnd,dx,dy){if(this._useHandle){if(this._dragging=!isEnd,!isEnd){var vertex=this._applyTransform([dx,dy],this._shapes.mainGroup,!0);this._updateInterval(handleIndex,vertex[1]),this._hideIndicator(),this._updateView()}isEnd===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),isEnd?!this._hovering&&this._clearHoverLinkToSeries():useHoverLinkOnHandle(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[handleIndex],!1)}},ContinuousView.prototype._resetInterval=function(){var visualMapModel=this.visualMapModel,dataInterval=this._dataInterval=visualMapModel.getSelected(),dataExtent=visualMapModel.getExtent(),sizeExtent=[0,visualMapModel.itemSize[1]];this._handleEnds=[ContinuousView_linearMap(dataInterval[0],dataExtent,sizeExtent,!0),ContinuousView_linearMap(dataInterval[1],dataExtent,sizeExtent,!0)]},ContinuousView.prototype._updateInterval=function(handleIndex,delta){delta=delta||0;var visualMapModel=this.visualMapModel,handleEnds=this._handleEnds,sizeExtent=[0,visualMapModel.itemSize[1]];sliderMove(delta,handleEnds,sizeExtent,handleIndex,0);var dataExtent=visualMapModel.getExtent();this._dataInterval=[ContinuousView_linearMap(handleEnds[0],sizeExtent,dataExtent,!0),ContinuousView_linearMap(handleEnds[1],sizeExtent,dataExtent,!0)]},ContinuousView.prototype._updateView=function(forSketch){var visualMapModel=this.visualMapModel,dataExtent=visualMapModel.getExtent(),shapes=this._shapes,outOfRangeHandleEnds=[0,visualMapModel.itemSize[1]],inRangeHandleEnds=forSketch?outOfRangeHandleEnds:this._handleEnds,visualInRange=this._createBarVisual(this._dataInterval,dataExtent,inRangeHandleEnds,"inRange"),visualOutOfRange=this._createBarVisual(dataExtent,dataExtent,outOfRangeHandleEnds,"outOfRange");shapes.inRange.setStyle({fill:visualInRange.barColor}).setShape("points",visualInRange.barPoints),shapes.outOfRange.setStyle({fill:visualOutOfRange.barColor}).setShape("points",visualOutOfRange.barPoints),this._updateHandle(inRangeHandleEnds,visualInRange)},ContinuousView.prototype._createBarVisual=function(dataInterval,dataExtent,handleEnds,forceState){var opts={forceState,convertOpacityToAlpha:!0},colorStops=this._makeColorGradient(dataInterval,opts),symbolSizes=[this.getControllerVisual(dataInterval[0],"symbolSize",opts),this.getControllerVisual(dataInterval[1],"symbolSize",opts)],barPoints=this._createBarPoints(handleEnds,symbolSizes);return{barColor:new LinearGradient.Z(0,0,0,1,colorStops),barPoints,handlesColor:[colorStops[0].color,colorStops[colorStops.length-1].color]}},ContinuousView.prototype._makeColorGradient=function(dataInterval,opts){var colorStops=[],step=(dataInterval[1]-dataInterval[0])/100;colorStops.push({color:this.getControllerVisual(dataInterval[0],"color",opts),offset:0});for(var i=1;i<100;i++){var currValue=dataInterval[0]+step*i;if(currValue>dataInterval[1])break;colorStops.push({color:this.getControllerVisual(currValue,"color",opts),offset:i/100})}return colorStops.push({color:this.getControllerVisual(dataInterval[1],"color",opts),offset:1}),colorStops},ContinuousView.prototype._createBarPoints=function(handleEnds,symbolSizes){var itemSize=this.visualMapModel.itemSize;return[[itemSize[0]-symbolSizes[0],handleEnds[0]],[itemSize[0],handleEnds[0]],[itemSize[0],handleEnds[1]],[itemSize[0]-symbolSizes[1],handleEnds[1]]]},ContinuousView.prototype._createBarGroup=function(itemAlign){var orient=this._orient,inverse=this.visualMapModel.get("inverse");return new Group.Z("horizontal"!==orient||inverse?"horizontal"===orient&&inverse?{scaleX:"bottom"===itemAlign?-1:1,rotation:-Math.PI/2}:"vertical"!==orient||inverse?{scaleX:"left"===itemAlign?1:-1}:{scaleX:"left"===itemAlign?1:-1,scaleY:-1}:{scaleX:"bottom"===itemAlign?1:-1,rotation:Math.PI/2})},ContinuousView.prototype._updateHandle=function(handleEnds,visualInRange){if(this._useHandle){var shapes=this._shapes,visualMapModel=this.visualMapModel,handleThumbs=shapes.handleThumbs,handleLabels=shapes.handleLabels,itemSize=visualMapModel.itemSize,dataExtent=visualMapModel.getExtent();ContinuousView_each([0,1],(function(handleIndex){var handleThumb=handleThumbs[handleIndex];handleThumb.setStyle("fill",visualInRange.handlesColor[handleIndex]),handleThumb.y=handleEnds[handleIndex];var val=ContinuousView_linearMap(handleEnds[handleIndex],[0,itemSize[1]],dataExtent,!0),symbolSize=this.getControllerVisual(val,"symbolSize");handleThumb.scaleX=handleThumb.scaleY=symbolSize/itemSize[0],handleThumb.x=itemSize[0]-symbolSize/2;var textPoint=graphic.applyTransform(shapes.handleLabelPoints[handleIndex],graphic.getTransform(handleThumb,this.group));handleLabels[handleIndex].setStyle({x:textPoint[0],y:textPoint[1],text:visualMapModel.formatValueText(this._dataInterval[handleIndex]),verticalAlign:"middle",align:"vertical"===this._orient?this._applyTransform("left",shapes.mainGroup):"center"})}),this)}},ContinuousView.prototype._showIndicator=function(cursorValue,textValue,rangeSymbol,halfHoverLinkSize){var visualMapModel=this.visualMapModel,dataExtent=visualMapModel.getExtent(),itemSize=visualMapModel.itemSize,sizeExtent=[0,itemSize[1]],shapes=this._shapes,indicator=shapes.indicator;if(indicator){indicator.attr("invisible",!1);var color=this.getControllerVisual(cursorValue,"color",{convertOpacityToAlpha:!0}),symbolSize=this.getControllerVisual(cursorValue,"symbolSize"),y=ContinuousView_linearMap(cursorValue,dataExtent,sizeExtent,!0),x=itemSize[0]-symbolSize/2,oldIndicatorPos={x:indicator.x,y:indicator.y};indicator.y=y,indicator.x=x;var textPoint=graphic.applyTransform(shapes.indicatorLabelPoint,graphic.getTransform(indicator,this.group)),indicatorLabel=shapes.indicatorLabel;indicatorLabel.attr("invisible",!1);var align=this._applyTransform("left",shapes.mainGroup),isHorizontal="horizontal"===this._orient;indicatorLabel.setStyle({text:(rangeSymbol||"")+visualMapModel.formatValueText(textValue),verticalAlign:isHorizontal?align:"middle",align:isHorizontal?"center":align});var indicatorNewProps={x,y,style:{fill:color}},labelNewProps={style:{x:textPoint[0],y:textPoint[1]}};if(visualMapModel.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var animationCfg={duration:100,easing:"cubicInOut",additive:!0};indicator.x=oldIndicatorPos.x,indicator.y=oldIndicatorPos.y,indicator.animateTo(indicatorNewProps,animationCfg),indicatorLabel.animateTo(labelNewProps,animationCfg)}else indicator.attr(indicatorNewProps),indicatorLabel.attr(labelNewProps);this._firstShowIndicator=!1;var handleLabels=this._shapes.handleLabels;if(handleLabels)for(var i=0;i<handleLabels.length;i++)this.api.enterBlur(handleLabels[i])}},ContinuousView.prototype._enableHoverLinkToSeries=function(){var self=this;this._shapes.mainGroup.on("mousemove",(function(e){if(self._hovering=!0,!self._dragging){var itemSize=self.visualMapModel.itemSize,pos=self._applyTransform([e.offsetX,e.offsetY],self._shapes.mainGroup,!0,!0);pos[1]=ContinuousView_mathMin(ContinuousView_mathMax(0,pos[1]),itemSize[1]),self._doHoverLinkToSeries(pos[1],0<=pos[0]&&pos[0]<=itemSize[0])}})).on("mouseout",(function(){self._hovering=!1,!self._dragging&&self._clearHoverLinkToSeries()}))},ContinuousView.prototype._enableHoverLinkFromSeries=function(){var zr=this.api.getZr();this.visualMapModel.option.hoverLink?(zr.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),zr.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},ContinuousView.prototype._doHoverLinkToSeries=function(cursorPos,hoverOnBar){var visualMapModel=this.visualMapModel,itemSize=visualMapModel.itemSize;if(visualMapModel.option.hoverLink){var sizeExtent=[0,itemSize[1]],dataExtent=visualMapModel.getExtent();cursorPos=ContinuousView_mathMin(ContinuousView_mathMax(sizeExtent[0],cursorPos),sizeExtent[1]);var halfHoverLinkSize=function getHalfHoverLinkSize(visualMapModel,dataExtent,sizeExtent){var halfHoverLinkSize=6,hoverLinkDataSize=visualMapModel.get("hoverLinkDataSize");hoverLinkDataSize&&(halfHoverLinkSize=ContinuousView_linearMap(hoverLinkDataSize,dataExtent,sizeExtent,!0)/2);return halfHoverLinkSize}(visualMapModel,dataExtent,sizeExtent),hoverRange=[cursorPos-halfHoverLinkSize,cursorPos+halfHoverLinkSize],cursorValue=ContinuousView_linearMap(cursorPos,sizeExtent,dataExtent,!0),valueRange=[ContinuousView_linearMap(hoverRange[0],sizeExtent,dataExtent,!0),ContinuousView_linearMap(hoverRange[1],sizeExtent,dataExtent,!0)];hoverRange[0]<sizeExtent[0]&&(valueRange[0]=-1/0),hoverRange[1]>sizeExtent[1]&&(valueRange[1]=1/0),hoverOnBar&&(valueRange[0]===-1/0?this._showIndicator(cursorValue,valueRange[1],"< ",halfHoverLinkSize):valueRange[1]===1/0?this._showIndicator(cursorValue,valueRange[0],"> ",halfHoverLinkSize):this._showIndicator(cursorValue,cursorValue,"≈ ",halfHoverLinkSize));var oldBatch=this._hoverLinkDataIndices,newBatch=[];(hoverOnBar||useHoverLinkOnHandle(visualMapModel))&&(newBatch=this._hoverLinkDataIndices=visualMapModel.findTargetDataIndices(valueRange));var resultBatches=util_model.XI(oldBatch,newBatch);this._dispatchHighDown("downplay",makeHighDownBatch(resultBatches[0],visualMapModel)),this._dispatchHighDown("highlight",makeHighDownBatch(resultBatches[1],visualMapModel))}},ContinuousView.prototype._hoverLinkFromSeriesMouseOver=function(e){var ecData;if((0,util_event.o)(e.target,(function(target){var currECData=(0,innerStore.A)(target);if(null!=currECData.dataIndex)return ecData=currECData,!0}),!0),ecData){var dataModel=this.ecModel.getSeriesByIndex(ecData.seriesIndex),visualMapModel=this.visualMapModel;if(visualMapModel.isTargetSeries(dataModel)){var data=dataModel.getData(ecData.dataType),value=data.getStore().get(visualMapModel.getDataDimensionIndex(data),ecData.dataIndex);isNaN(value)||this._showIndicator(value,value)}}},ContinuousView.prototype._hideIndicator=function(){var shapes=this._shapes;shapes.indicator&&shapes.indicator.attr("invisible",!0),shapes.indicatorLabel&&shapes.indicatorLabel.attr("invisible",!0);var handleLabels=this._shapes.handleLabels;if(handleLabels)for(var i=0;i<handleLabels.length;i++)this.api.leaveBlur(handleLabels[i])},ContinuousView.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var indices=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",makeHighDownBatch(indices,this.visualMapModel)),indices.length=0},ContinuousView.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var zr=this.api.getZr();zr.off("mouseover",this._hoverLinkFromSeriesMouseOver),zr.off("mouseout",this._hideIndicator)},ContinuousView.prototype._applyTransform=function(vertex,element,inverse,global){var transform=graphic.getTransform(element,global?null:this.group);return util.isArray(vertex)?graphic.applyTransform(vertex,transform,inverse):graphic.transformDirection(vertex,transform,inverse)},ContinuousView.prototype._dispatchHighDown=function(type,batch){batch&&batch.length&&this.api.dispatchAction({type,batch})},ContinuousView.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},ContinuousView.type="visualMap.continuous",ContinuousView}(visualMap_VisualMapView);var visualMapActionInfo={type:"selectDataRange",event:"dataRangeSelected",update:"update"},visualMapActionHander=function(payload,ecModel){ecModel.eachComponent({mainType:"visualMap",query:payload},(function(model){model.setSelected(payload.selected)}))},visualMapEncodingHandlers=[{createOnAllSeries:!0,reset:function(seriesModel,ecModel){var resetDefines=[];return ecModel.eachComponent("visualMap",(function(visualMapModel){var pipelineContext=seriesModel.pipelineContext;!visualMapModel.isTargetSeries(seriesModel)||pipelineContext&&pipelineContext.large||resetDefines.push(function incrementalApplyVisual(stateList,visualMappings,getValueState,dim){var visualTypesMap={};return util.each(stateList,(function(state){var visualTypes=VisualMapping.Z.prepareVisualTypes(visualMappings[state]);visualTypesMap[state]=visualTypes})),{progress:function progress(params,data){var dimIndex,dataIndex;function getVisual(key){return(0,visual_helper.Or)(data,dataIndex,key)}function setVisual(key,value){(0,visual_helper.LZ)(data,dataIndex,key,value)}null!=dim&&(dimIndex=data.getDimensionIndex(dim));for(var store=data.getStore();null!=(dataIndex=params.next());){var rawDataItem=data.getRawDataItem(dataIndex);if(!rawDataItem||!1!==rawDataItem.visualMap)for(var value=null!=dim?store.get(dimIndex,dataIndex):dataIndex,valueState=getValueState(value),mappings=visualMappings[valueState],visualTypes=visualTypesMap[valueState],i=0,len=visualTypes.length;i<len;i++){var type=visualTypes[i];mappings[type]&&mappings[type].applyVisual(value,getVisual,setVisual)}}}}}(visualMapModel.stateList,visualMapModel.targetVisuals,util.bind(visualMapModel.getValueState,visualMapModel),visualMapModel.getDataDimensionIndex(seriesModel.getData())))})),resetDefines}},{createOnAllSeries:!0,reset:function(seriesModel,ecModel){var data=seriesModel.getData(),visualMetaList=[];ecModel.eachComponent("visualMap",(function(visualMapModel){if(visualMapModel.isTargetSeries(seriesModel)){var visualMeta=visualMapModel.getVisualMeta(util.bind(getColorVisual,null,seriesModel,visualMapModel))||{stops:[],outerColors:[]},dimIdx=visualMapModel.getDataDimensionIndex(data);dimIdx>=0&&(visualMeta.dimension=dimIdx,visualMetaList.push(visualMeta))}})),seriesModel.getData().setVisual("visualMeta",visualMetaList)}}];function getColorVisual(seriesModel,visualMapModel,value,valueState){for(var mappings=visualMapModel.targetVisuals[valueState],visualTypes=VisualMapping.Z.prepareVisualTypes(mappings),resultVisual={color:(0,visual_helper.UL)(seriesModel.getData(),"color")},i=0,len=visualTypes.length;i<len;i++){var type=visualTypes[i],mapping=mappings["opacity"===type?"__alphaForOpacity":type];mapping&&mapping.applyVisual(value,getVisual,setVisual)}return resultVisual.color;function getVisual(key){return resultVisual[key]}function setVisual(key,value){resultVisual[key]=value}}var preprocessor_each=util.each;function visualMapPreprocessor(option){var visualMap=option&&option.visualMap;util.isArray(visualMap)||(visualMap=visualMap?[visualMap]:[]),preprocessor_each(visualMap,(function(opt){if(opt){preprocessor_has(opt,"splitList")&&!preprocessor_has(opt,"pieces")&&(opt.pieces=opt.splitList,delete opt.splitList);var pieces=opt.pieces;pieces&&util.isArray(pieces)&&preprocessor_each(pieces,(function(piece){util.isObject(piece)&&(preprocessor_has(piece,"start")&&!preprocessor_has(piece,"min")&&(piece.min=piece.start),preprocessor_has(piece,"end")&&!preprocessor_has(piece,"max")&&(piece.max=piece.end))}))}}))}function preprocessor_has(obj,name){return obj&&obj.hasOwnProperty&&obj.hasOwnProperty(name)}var installCommon_installed=!1;function installCommon_installCommon(registers){installCommon_installed||(installCommon_installed=!0,registers.registerSubTypeDefaulter("visualMap",(function(option){return option.categories||(option.pieces?option.pieces.length>0:option.splitNumber>0)&&!option.calculable?"piecewise":"continuous"})),registers.registerAction(visualMapActionInfo,visualMapActionHander),(0,util.each)(visualMapEncodingHandlers,(function(handler){registers.registerVisual(registers.PRIORITY.VISUAL.COMPONENT,handler)})),registers.registerPreprocessor(visualMapPreprocessor))}function installVisualMapContinuous_install(registers){registers.registerComponentModel(visualMap_ContinuousModel),registers.registerComponentView(visualMap_ContinuousView),installCommon_installCommon(registers)}var PiecewiseModel=function(_super){function PiecewiseModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=PiecewiseModel.type,_this._pieceList=[],_this}return(0,tslib_es6.ZT)(PiecewiseModel,_super),PiecewiseModel.prototype.optionUpdated=function(newOption,isInit){_super.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var mode=this._mode=this._determineMode();this._pieceList=[],resetMethods[this._mode].call(this,this._pieceList),this._resetSelected(newOption,isInit);var categories=this.option.categories;this.resetVisual((function(mappingOption,state){"categories"===mode?(mappingOption.mappingMethod="category",mappingOption.categories=util.clone(categories)):(mappingOption.dataExtent=this.getExtent(),mappingOption.mappingMethod="piecewise",mappingOption.pieceList=util.map(this._pieceList,(function(piece){return piece=util.clone(piece),"inRange"!==state&&(piece.visual=null),piece})))}))},PiecewiseModel.prototype.completeVisualOption=function(){var option=this.option,visualTypesInPieces={},visualTypes=VisualMapping.Z.listVisualTypes(),isCategory=this.isCategory();function has(obj,state,visualType){return obj&&obj[state]&&obj[state].hasOwnProperty(visualType)}util.each(option.pieces,(function(piece){util.each(visualTypes,(function(visualType){piece.hasOwnProperty(visualType)&&(visualTypesInPieces[visualType]=1)}))})),util.each(visualTypesInPieces,(function(v,visualType){var exists=!1;util.each(this.stateList,(function(state){exists=exists||has(option,state,visualType)||has(option.target,state,visualType)}),this),!exists&&util.each(this.stateList,(function(state){(option[state]||(option[state]={}))[visualType]=visual_visualDefault.get(visualType,"inRange"===state?"active":"inactive",isCategory)}))}),this),_super.prototype.completeVisualOption.apply(this,arguments)},PiecewiseModel.prototype._resetSelected=function(newOption,isInit){var thisOption=this.option,pieceList=this._pieceList,selected=(isInit?thisOption:newOption).selected||{};if(thisOption.selected=selected,util.each(pieceList,(function(piece,index){var key=this.getSelectedMapKey(piece);selected.hasOwnProperty(key)||(selected[key]=!0)}),this),"single"===thisOption.selectedMode){var hasSel_1=!1;util.each(pieceList,(function(piece,index){var key=this.getSelectedMapKey(piece);selected[key]&&(hasSel_1?selected[key]=!1:hasSel_1=!0)}),this)}},PiecewiseModel.prototype.getItemSymbol=function(){return this.get("itemSymbol")},PiecewiseModel.prototype.getSelectedMapKey=function(piece){return"categories"===this._mode?piece.value+"":piece.index+""},PiecewiseModel.prototype.getPieceList=function(){return this._pieceList},PiecewiseModel.prototype._determineMode=function(){var option=this.option;return option.pieces&&option.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},PiecewiseModel.prototype.setSelected=function(selected){this.option.selected=util.clone(selected)},PiecewiseModel.prototype.getValueState=function(value){var index=VisualMapping.Z.findPieceIndex(value,this._pieceList);return null!=index&&this.option.selected[this.getSelectedMapKey(this._pieceList[index])]?"inRange":"outOfRange"},PiecewiseModel.prototype.findTargetDataIndices=function(pieceIndex){var result=[],pieceList=this._pieceList;return this.eachTargetSeries((function(seriesModel){var dataIndices=[],data=seriesModel.getData();data.each(this.getDataDimensionIndex(data),(function(value,dataIndex){VisualMapping.Z.findPieceIndex(value,pieceList)===pieceIndex&&dataIndices.push(dataIndex)}),this),result.push({seriesId:seriesModel.id,dataIndex:dataIndices})}),this),result},PiecewiseModel.prototype.getRepresentValue=function(piece){var representValue;if(this.isCategory())representValue=piece.value;else if(null!=piece.value)representValue=piece.value;else{var pieceInterval=piece.interval||[];representValue=pieceInterval[0]===-1/0&&pieceInterval[1]===1/0?0:(pieceInterval[0]+pieceInterval[1])/2}return representValue},PiecewiseModel.prototype.getVisualMeta=function(getColorVisual){if(!this.isCategory()){var stops=[],outerColors=["",""],visualMapModel=this,pieceList=this._pieceList.slice();if(pieceList.length){var edge=pieceList[0].interval[0];edge!==-1/0&&pieceList.unshift({interval:[-1/0,edge]}),(edge=pieceList[pieceList.length-1].interval[1])!==1/0&&pieceList.push({interval:[edge,1/0]})}else pieceList.push({interval:[-1/0,1/0]});var curr=-1/0;return util.each(pieceList,(function(piece){var interval=piece.interval;interval&&(interval[0]>curr&&setStop([curr,interval[0]],"outOfRange"),setStop(interval.slice()),curr=interval[1])}),this),{stops,outerColors}}function setStop(interval,valueState){var representValue=visualMapModel.getRepresentValue({interval});valueState||(valueState=visualMapModel.getValueState(representValue));var color=getColorVisual(representValue,valueState);interval[0]===-1/0?outerColors[0]=color:interval[1]===1/0?outerColors[1]=color:stops.push({value:interval[0],color},{value:interval[1],color})}},PiecewiseModel.type="visualMap.piecewise",PiecewiseModel.defaultOption=(0,component.ZL)(visualMap_VisualMapModel.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),PiecewiseModel}(visualMap_VisualMapModel),resetMethods={splitNumber:function(outPieceList){var thisOption=this.option,precision=Math.min(thisOption.precision,20),dataExtent=this.getExtent(),splitNumber=thisOption.splitNumber;splitNumber=Math.max(parseInt(splitNumber,10),1),thisOption.splitNumber=splitNumber;for(var splitStep=(dataExtent[1]-dataExtent[0])/splitNumber;+splitStep.toFixed(precision)!==splitStep&&precision<5;)precision++;thisOption.precision=precision,splitStep=+splitStep.toFixed(precision),thisOption.minOpen&&outPieceList.push({interval:[-1/0,dataExtent[0]],close:[0,0]});for(var index=0,curr=dataExtent[0];index<splitNumber;curr+=splitStep,index++){var max=index===splitNumber-1?dataExtent[1]:curr+splitStep;outPieceList.push({interval:[curr,max],close:[1,1]})}thisOption.maxOpen&&outPieceList.push({interval:[dataExtent[1],1/0],close:[0,0]}),(0,number.nR)(outPieceList),util.each(outPieceList,(function(piece,index){piece.index=index,piece.text=this.formatValueText(piece.interval)}),this)},categories:function(outPieceList){var thisOption=this.option;util.each(thisOption.categories,(function(cate){outPieceList.push({text:this.formatValueText(cate,!0),value:cate})}),this),normalizeReverse(thisOption,outPieceList)},pieces:function(outPieceList){var thisOption=this.option;util.each(thisOption.pieces,(function(pieceListItem,index){util.isObject(pieceListItem)||(pieceListItem={value:pieceListItem});var item={text:"",index};if(null!=pieceListItem.label&&(item.text=pieceListItem.label),pieceListItem.hasOwnProperty("value")){var value=item.value=pieceListItem.value;item.interval=[value,value],item.close=[1,1]}else{for(var interval=item.interval=[],close_1=item.close=[0,0],closeList=[1,0,1],infinityList=[-1/0,1/0],useMinMax=[],lg=0;lg<2;lg++){for(var names=[["gte","gt","min"],["lte","lt","max"]][lg],i=0;i<3&&null==interval[lg];i++)interval[lg]=pieceListItem[names[i]],close_1[lg]=closeList[i],useMinMax[lg]=2===i;null==interval[lg]&&(interval[lg]=infinityList[lg])}useMinMax[0]&&interval[1]===1/0&&(close_1[0]=0),useMinMax[1]&&interval[0]===-1/0&&(close_1[1]=0),interval[0]===interval[1]&&close_1[0]&&close_1[1]&&(item.value=interval[0])}item.visual=VisualMapping.Z.retrieveVisuals(pieceListItem),outPieceList.push(item)}),this),normalizeReverse(thisOption,outPieceList),(0,number.nR)(outPieceList),util.each(outPieceList,(function(piece){var close=piece.close,edgeSymbols=[["<","≤"][close[1]],[">","≥"][close[0]]];piece.text=piece.text||this.formatValueText(null!=piece.value?piece.value:piece.interval,!1,edgeSymbols)}),this)}};function normalizeReverse(thisOption,pieceList){var inverse=thisOption.inverse;("vertical"===thisOption.orient?!inverse:inverse)&&pieceList.reverse()}const visualMap_PiecewiseModel=PiecewiseModel;const PiecewiseView=function(_super){function PiecewiseVisualMapView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=PiecewiseVisualMapView.type,_this}return(0,tslib_es6.ZT)(PiecewiseVisualMapView,_super),PiecewiseVisualMapView.prototype.doRender=function(){var thisGroup=this.group;thisGroup.removeAll();var visualMapModel=this.visualMapModel,textGap=visualMapModel.get("textGap"),textStyleModel=visualMapModel.textStyleModel,textFont=textStyleModel.getFont(),textFill=textStyleModel.getTextColor(),itemAlign=this._getItemAlign(),itemSize=visualMapModel.itemSize,viewData=this._getViewData(),endsText=viewData.endsText,showLabel=util.retrieve(visualMapModel.get("showLabel",!0),!endsText);endsText&&this._renderEndsText(thisGroup,endsText[0],itemSize,showLabel,itemAlign),util.each(viewData.viewPieceList,(function(item){var piece=item.piece,itemGroup=new Group.Z;itemGroup.onclick=util.bind(this._onItemClick,this,piece),this._enableHoverLink(itemGroup,item.indexInModelPieceList);var representValue=visualMapModel.getRepresentValue(piece);if(this._createItemSymbol(itemGroup,representValue,[0,0,itemSize[0],itemSize[1]]),showLabel){var visualState=this.visualMapModel.getValueState(representValue);itemGroup.add(new Text.ZP({style:{x:"right"===itemAlign?-textGap:itemSize[0]+textGap,y:itemSize[1]/2,text:piece.text,verticalAlign:"middle",align:itemAlign,font:textFont,fill:textFill,opacity:"outOfRange"===visualState?.5:1}}))}thisGroup.add(itemGroup)}),this),endsText&&this._renderEndsText(thisGroup,endsText[1],itemSize,showLabel,itemAlign),layout.BZ(visualMapModel.get("orient"),thisGroup,visualMapModel.get("itemGap")),this.renderBackground(thisGroup),this.positionGroup(thisGroup)},PiecewiseVisualMapView.prototype._enableHoverLink=function(itemGroup,pieceIndex){var _this=this;itemGroup.on("mouseover",(function(){return onHoverLink("highlight")})).on("mouseout",(function(){return onHoverLink("downplay")}));var onHoverLink=function(method){var visualMapModel=_this.visualMapModel;visualMapModel.option.hoverLink&&_this.api.dispatchAction({type:method,batch:makeHighDownBatch(visualMapModel.findTargetDataIndices(pieceIndex),visualMapModel)})}},PiecewiseVisualMapView.prototype._getItemAlign=function(){var visualMapModel=this.visualMapModel,modelOption=visualMapModel.option;if("vertical"===modelOption.orient)return getItemAlign(visualMapModel,this.api,visualMapModel.itemSize);var align=modelOption.align;return align&&"auto"!==align||(align="left"),align},PiecewiseVisualMapView.prototype._renderEndsText=function(group,text,itemSize,showLabel,itemAlign){if(text){var itemGroup=new Group.Z,textStyleModel=this.visualMapModel.textStyleModel;itemGroup.add(new Text.ZP({style:(0,labelStyle.Lr)(textStyleModel,{x:showLabel?"right"===itemAlign?itemSize[0]:0:itemSize[0]/2,y:itemSize[1]/2,verticalAlign:"middle",align:showLabel?itemAlign:"center",text})})),group.add(itemGroup)}},PiecewiseVisualMapView.prototype._getViewData=function(){var visualMapModel=this.visualMapModel,viewPieceList=util.map(visualMapModel.getPieceList(),(function(piece,index){return{piece,indexInModelPieceList:index}})),endsText=visualMapModel.get("text"),orient=visualMapModel.get("orient"),inverse=visualMapModel.get("inverse");return("horizontal"===orient?inverse:!inverse)?viewPieceList.reverse():endsText&&(endsText=endsText.slice().reverse()),{viewPieceList,endsText}},PiecewiseVisualMapView.prototype._createItemSymbol=function(group,representValue,shapeParam){group.add((0,util_symbol.th)(this.getControllerVisual(representValue,"symbol"),shapeParam[0],shapeParam[1],shapeParam[2],shapeParam[3],this.getControllerVisual(representValue,"color")))},PiecewiseVisualMapView.prototype._onItemClick=function(piece){var visualMapModel=this.visualMapModel,option=visualMapModel.option,selectedMode=option.selectedMode;if(selectedMode){var selected=util.clone(option.selected),newKey=visualMapModel.getSelectedMapKey(piece);"single"===selectedMode||!0===selectedMode?(selected[newKey]=!0,util.each(selected,(function(o,key){selected[key]=key===newKey}))):selected[newKey]=!selected[newKey],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected})}},PiecewiseVisualMapView.type="visualMap.piecewise",PiecewiseVisualMapView}(visualMap_VisualMapView);function installVisualMapPiecewise_install(registers){registers.registerComponentModel(visualMap_PiecewiseModel),registers.registerComponentView(PiecewiseView),installCommon_installCommon(registers)}var palette=__webpack_require__("./node_modules/echarts/lib/model/mixin/palette.js"),DEFAULT_OPTION={label:{enabled:!0},decal:{show:!1}},aria_inner=(0,util_model.Yf)(),decalPaletteScope={};function ariaVisual(ecModel,api){var ariaModel=ecModel.getModel("aria");if(ariaModel.get("enabled")){var defaultOption=util.clone(DEFAULT_OPTION);util.merge(defaultOption.label,ecModel.getLocaleModel().get("aria"),!1),util.merge(ariaModel.option,defaultOption,!1),function setDecal(){if(ariaModel.getModel("decal").get("show")){var paletteScopeGroupByType_1=util.createHashMap();ecModel.eachSeries((function(seriesModel){if(!seriesModel.isColorBySeries()){var decalScope=paletteScopeGroupByType_1.get(seriesModel.type);decalScope||(decalScope={},paletteScopeGroupByType_1.set(seriesModel.type,decalScope)),aria_inner(seriesModel).scope=decalScope}})),ecModel.eachRawSeries((function(seriesModel){if(!ecModel.isSeriesFiltered(seriesModel))if(util.isFunction(seriesModel.enableAriaDecal))seriesModel.enableAriaDecal();else{var data=seriesModel.getData();if(seriesModel.isColorBySeries()){var paletteDecal=(0,palette.i)(seriesModel.ecModel,seriesModel.name,decalPaletteScope,ecModel.getSeriesCount()),specifiedDecal=data.getVisual("decal");data.setVisual("decal",mergeDecal(specifiedDecal,paletteDecal))}else{var dataAll_1=seriesModel.getRawData(),idxMap_1={},decalScope_1=aria_inner(seriesModel).scope;data.each((function(idx){var rawIdx=data.getRawIndex(idx);idxMap_1[rawIdx]=idx}));var dataCount_1=dataAll_1.count();dataAll_1.each((function(rawIdx){var idx=idxMap_1[rawIdx],name=dataAll_1.getName(rawIdx)||rawIdx+"",paletteDecal=(0,palette.i)(seriesModel.ecModel,name,decalScope_1,dataCount_1),specifiedDecal=data.getItemVisual(idx,"decal");data.setItemVisual(idx,"decal",mergeDecal(specifiedDecal,paletteDecal))}))}}function mergeDecal(specifiedDecal,paletteDecal){var resultDecal=specifiedDecal?util.extend(util.extend({},paletteDecal),specifiedDecal):paletteDecal;return resultDecal.dirty=!0,resultDecal}}))}}(),function setLabel(){var labelLocale=ecModel.getLocaleModel().get("aria"),labelModel=ariaModel.getModel("label");if(labelModel.option=util.defaults(labelModel.option,labelLocale),!labelModel.get("enabled"))return;var dom=api.getZr().dom;if(labelModel.get("description"))return void dom.setAttribute("aria-label",labelModel.get("description"));var ariaLabel,seriesCnt=ecModel.getSeriesCount(),maxDataCnt=labelModel.get(["data","maxCount"])||10,maxSeriesCnt=labelModel.get(["series","maxCount"])||10,displaySeriesCnt=Math.min(seriesCnt,maxSeriesCnt);if(seriesCnt<1)return;var title=function getTitle(){var title=ecModel.get("title");title&&title.length&&(title=title[0]);return title&&title.text}();ariaLabel=title?replace(labelModel.get(["general","withTitle"]),{title}):labelModel.get(["general","withoutTitle"]);var seriesLabels_1=[];ariaLabel+=replace(seriesCnt>1?labelModel.get(["series","multiple","prefix"]):labelModel.get(["series","single","prefix"]),{seriesCount:seriesCnt}),ecModel.eachSeries((function(seriesModel,idx){if(idx<displaySeriesCnt){var seriesLabel=void 0,withName=seriesModel.get("name")?"withName":"withoutName";seriesLabel=replace(seriesLabel=seriesCnt>1?labelModel.get(["series","multiple",withName]):labelModel.get(["series","single",withName]),{seriesId:seriesModel.seriesIndex,seriesName:seriesModel.get("name"),seriesType:(type=seriesModel.subType,typeNames=ecModel.getLocaleModel().get(["series","typeNames"]),typeNames[type]||typeNames.chart)});var data=seriesModel.getData();if(data.count()>maxDataCnt)seriesLabel+=replace(labelModel.get(["data","partialData"]),{displayCnt:maxDataCnt});else seriesLabel+=labelModel.get(["data","allData"]);for(var middleSeparator_1=labelModel.get(["data","separator","middle"]),endSeparator_1=labelModel.get(["data","separator","end"]),dataLabels=[],i=0;i<data.count();i++)if(i<maxDataCnt){var name_1=data.getName(i),value=data.getValues(i),dataLabel=labelModel.get(["data",name_1?"withName":"withoutName"]);dataLabels.push(replace(dataLabel,{name:name_1,value:value.join(middleSeparator_1)}))}seriesLabel+=dataLabels.join(middleSeparator_1)+endSeparator_1,seriesLabels_1.push(seriesLabel)}var type,typeNames}));var separatorModel=labelModel.getModel(["series","multiple","separator"]),middleSeparator=separatorModel.get("middle"),endSeparator=separatorModel.get("end");ariaLabel+=seriesLabels_1.join(middleSeparator)+endSeparator,dom.setAttribute("aria-label",ariaLabel)}()}function replace(str,keyValues){if(!util.isString(str))return str;var result=str;return util.each(keyValues,(function(value,key){result=result.replace(new RegExp("\\{\\s*"+key+"\\s*\\}","g"),value)})),result}}function ariaPreprocessor(option){if(option&&option.aria){var aria=option.aria;null!=aria.show&&(aria.enabled=aria.show),aria.label=aria.label||{},util.each(["description","general","series","data"],(function(name){null!=aria[name]&&(aria.label[name]=aria[name])}))}}var RELATIONAL_EXPRESSION_OP_ALIAS_MAP={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},RegExpEvaluator=function(){function RegExpEvaluator(rVal){if(null==(this._condVal=(0,util.isString)(rVal)?new RegExp(rVal):(0,util.isRegExp)(rVal)?rVal:null)){0,(0,log._y)("")}}return RegExpEvaluator.prototype.evaluate=function(lVal){var type=typeof lVal;return(0,util.isString)(type)?this._condVal.test(lVal):!!(0,util.isNumber)(type)&&this._condVal.test(lVal+"")},RegExpEvaluator}(),ConstConditionInternal=function(){function ConstConditionInternal(){}return ConstConditionInternal.prototype.evaluate=function(){return this.value},ConstConditionInternal}(),AndConditionInternal=function(){function AndConditionInternal(){}return AndConditionInternal.prototype.evaluate=function(){for(var children=this.children,i=0;i<children.length;i++)if(!children[i].evaluate())return!1;return!0},AndConditionInternal}(),OrConditionInternal=function(){function OrConditionInternal(){}return OrConditionInternal.prototype.evaluate=function(){for(var children=this.children,i=0;i<children.length;i++)if(children[i].evaluate())return!0;return!1},OrConditionInternal}(),NotConditionInternal=function(){function NotConditionInternal(){}return NotConditionInternal.prototype.evaluate=function(){return!this.child.evaluate()},NotConditionInternal}(),RelationalConditionInternal=function(){function RelationalConditionInternal(){}return RelationalConditionInternal.prototype.evaluate=function(){for(var needParse=!!this.valueParser,tarValRaw=(0,this.getValue)(this.valueGetterParam),tarValParsed=needParse?this.valueParser(tarValRaw):null,i=0;i<this.subCondList.length;i++)if(!this.subCondList[i].evaluate(needParse?tarValParsed:tarValRaw))return!1;return!0},RelationalConditionInternal}();function parseOption(exprOption,getters){if(!0===exprOption||!1===exprOption){var cond=new ConstConditionInternal;return cond.value=exprOption,cond}return isObjectNotArray(exprOption)||(0,log._y)(""),exprOption.and?parseAndOrOption("and",exprOption,getters):exprOption.or?parseAndOrOption("or",exprOption,getters):exprOption.not?function parseNotOption(exprOption,getters){var subOption=exprOption.not,errMsg="";0;isObjectNotArray(subOption)||(0,log._y)(errMsg);var cond=new NotConditionInternal;cond.child=parseOption(subOption,getters),cond.child||(0,log._y)(errMsg);return cond}(exprOption,getters):function parseRelationalOption(exprOption,getters){for(var errMsg="",valueGetterParam=getters.prepareGetValue(exprOption),subCondList=[],exprKeys=(0,util.keys)(exprOption),parserName=exprOption.parser,valueParser=parserName?(0,dataValueHelper.o2)(parserName):null,i=0;i<exprKeys.length;i++){var keyRaw=exprKeys[i];if("parser"!==keyRaw&&!getters.valueGetterAttrMap.get(keyRaw)){var op=(0,util.hasOwn)(RELATIONAL_EXPRESSION_OP_ALIAS_MAP,keyRaw)?RELATIONAL_EXPRESSION_OP_ALIAS_MAP[keyRaw]:keyRaw,condValueRaw=exprOption[keyRaw],condValueParsed=valueParser?valueParser(condValueRaw):condValueRaw,evaluator=(0,dataValueHelper.tR)(op,condValueParsed)||"reg"===op&&new RegExpEvaluator(condValueParsed);evaluator||(0,log._y)(errMsg),subCondList.push(evaluator)}}subCondList.length||(0,log._y)(errMsg);var cond=new RelationalConditionInternal;return cond.valueGetterParam=valueGetterParam,cond.valueParser=valueParser,cond.getValue=getters.getValue,cond.subCondList=subCondList,cond}(exprOption,getters)}function parseAndOrOption(op,exprOption,getters){var subOptionArr=exprOption[op];(0,util.isArray)(subOptionArr)||(0,log._y)(""),subOptionArr.length||(0,log._y)("");var cond="and"===op?new AndConditionInternal:new OrConditionInternal;return cond.children=(0,util.map)(subOptionArr,(function(subOption){return parseOption(subOption,getters)})),cond.children.length||(0,log._y)(""),cond}function isObjectNotArray(val){return(0,util.isObject)(val)&&!(0,util.isArrayLike)(val)}var ConditionalExpressionParsed=function(){function ConditionalExpressionParsed(exprOption,getters){this._cond=parseOption(exprOption,getters)}return ConditionalExpressionParsed.prototype.evaluate=function(){return this._cond.evaluate()},ConditionalExpressionParsed}();var filterTransform={type:"echarts:filter",transform:function(params){for(var rawItem,upstream=params.upstream,condition=function parseConditionalExpression(exprOption,getters){return new ConditionalExpressionParsed(exprOption,getters)}(params.config,{valueGetterAttrMap:(0,util.createHashMap)({dimension:!0}),prepareGetValue:function(exprOption){var dimLoose=exprOption.dimension;(0,util.hasOwn)(exprOption,"dimension")||(0,log._y)("");var dimInfo=upstream.getDimensionInfo(dimLoose);return dimInfo||(0,log._y)(""),{dimIdx:dimInfo.index}},getValue:function(param){return upstream.retrieveValueFromItem(rawItem,param.dimIdx)}}),resultData=[],i=0,len=upstream.count();i<len;i++)rawItem=upstream.getRawDataItem(i),condition.evaluate()&&resultData.push(rawItem);return{data:resultData}}};var sortTransform={type:"echarts:sort",transform:function(params){var upstream=params.upstream,config=params.config,orderExprList=(0,util_model.kF)(config);orderExprList.length||(0,log._y)("");var orderDefList=[];(0,util.each)(orderExprList,(function(orderExpr){var dimLoose=orderExpr.dimension,order=orderExpr.order,parserName=orderExpr.parser,incomparable=orderExpr.incomparable;if(null==dimLoose&&(0,log._y)(""),"asc"!==order&&"desc"!==order&&(0,log._y)(""),incomparable&&"min"!==incomparable&&"max"!==incomparable){0,(0,log._y)("")}if("asc"!==order&&"desc"!==order){0,(0,log._y)("")}var dimInfo=upstream.getDimensionInfo(dimLoose);dimInfo||(0,log._y)("");var parser=parserName?(0,dataValueHelper.o2)(parserName):null;parserName&&!parser&&(0,log._y)(""),orderDefList.push({dimIdx:dimInfo.index,parser,comparator:new dataValueHelper.ID(order,incomparable)})}));var sourceFormat=upstream.sourceFormat;sourceFormat!==types.XD&&sourceFormat!==types.qb&&(0,log._y)("");for(var resultData=[],i=0,len=upstream.count();i<len;i++)resultData.push(upstream.getRawDataItem(i));return resultData.sort((function(item0,item1){for(var i=0;i<orderDefList.length;i++){var orderDef=orderDefList[i],val0=upstream.retrieveValueFromItem(item0,orderDef.dimIdx),val1=upstream.retrieveValueFromItem(item1,orderDef.dimIdx);orderDef.parser&&(val0=orderDef.parser(val0),val1=orderDef.parser(val1));var result=orderDef.comparator.evaluate(val0,val1);if(0!==result)return result}return 0})),{data:resultData}}};var dataset_install=__webpack_require__("./node_modules/echarts/lib/component/dataset/install.js"),tool_path=__webpack_require__("./node_modules/zrender/lib/tool/path.js"),CMD=PathProxy.Z.CMD;function aroundEqual(a,b){return Math.abs(a-b)<1e-5}function pathToBezierCurves(path){var currentSubpath,x1,y1,x2,y2,data=path.data,len=path.len(),bezierArrayGroups=[],xi=0,yi=0,x0=0,y0=0;function createNewSubpath(x,y){currentSubpath&&currentSubpath.length>2&&bezierArrayGroups.push(currentSubpath),currentSubpath=[x,y]}function addLine(x0,y0,x1,y1){aroundEqual(x0,x1)&&aroundEqual(y0,y1)||currentSubpath.push(x0,y0,x1,y1,x1,y1)}function addArc(startAngle,endAngle,cx,cy,rx,ry){var delta=Math.abs(endAngle-startAngle),len=4*Math.tan(delta/4)/3,dir=endAngle<startAngle?-1:1,c1=Math.cos(startAngle),s1=Math.sin(startAngle),c2=Math.cos(endAngle),s2=Math.sin(endAngle),x1=c1*rx+cx,y1=s1*ry+cy,x4=c2*rx+cx,y4=s2*ry+cy,hx=rx*len*dir,hy=ry*len*dir;currentSubpath.push(x1-hx*s1,y1+hy*c1,x4+hx*s2,y4-hy*c2,x4,y4)}for(var i=0;i<len;){var cmd=data[i++],isFirst=1===i;switch(isFirst&&(x0=xi=data[i],y0=yi=data[i+1],cmd!==CMD.L&&cmd!==CMD.C&&cmd!==CMD.Q||(currentSubpath=[x0,y0])),cmd){case CMD.M:xi=x0=data[i++],yi=y0=data[i++],createNewSubpath(x0,y0);break;case CMD.L:addLine(xi,yi,x1=data[i++],y1=data[i++]),xi=x1,yi=y1;break;case CMD.C:currentSubpath.push(data[i++],data[i++],data[i++],data[i++],xi=data[i++],yi=data[i++]);break;case CMD.Q:x1=data[i++],y1=data[i++],x2=data[i++],y2=data[i++],currentSubpath.push(xi+2/3*(x1-xi),yi+2/3*(y1-yi),x2+2/3*(x1-x2),y2+2/3*(y1-y2),x2,y2),xi=x2,yi=y2;break;case CMD.A:var cx=data[i++],cy=data[i++],rx=data[i++],ry=data[i++],startAngle=data[i++],endAngle=data[i++]+startAngle;i+=1;var anticlockwise=!data[i++];x1=Math.cos(startAngle)*rx+cx,y1=Math.sin(startAngle)*ry+cy,isFirst?createNewSubpath(x0=x1,y0=y1):addLine(xi,yi,x1,y1),xi=Math.cos(endAngle)*rx+cx,yi=Math.sin(endAngle)*ry+cy;for(var step=(anticlockwise?-1:1)*Math.PI/2,angle=startAngle;anticlockwise?angle>endAngle:angle<endAngle;angle+=step){addArc(angle,anticlockwise?Math.max(angle+step,endAngle):Math.min(angle+step,endAngle),cx,cy,rx,ry)}break;case CMD.R:x0=xi=data[i++],y0=yi=data[i++],x1=x0+data[i++],y1=y0+data[i++],createNewSubpath(x1,y0),addLine(x1,y0,x1,y1),addLine(x1,y1,x0,y1),addLine(x0,y1,x0,y0),addLine(x0,y0,x1,y0);break;case CMD.Z:currentSubpath&&addLine(xi,yi,x0,y0),xi=x0,yi=y0}}return currentSubpath&&currentSubpath.length>2&&bezierArrayGroups.push(currentSubpath),bezierArrayGroups}function adpativeBezier(x0,y0,x1,y1,x2,y2,x3,y3,out,scale){if(aroundEqual(x0,x1)&&aroundEqual(y0,y1)&&aroundEqual(x2,x3)&&aroundEqual(y2,y3))out.push(x3,y3);else{var PIXEL_DISTANCE=2/scale,PIXEL_DISTANCE_SQR=PIXEL_DISTANCE*PIXEL_DISTANCE,dx=x3-x0,dy=y3-y0,d=Math.sqrt(dx*dx+dy*dy);dx/=d,dy/=d;var dx1=x1-x0,dy1=y1-y0,dx2=x2-x3,dy2=y2-y3,cp1LenSqr=dx1*dx1+dy1*dy1,cp2LenSqr=dx2*dx2+dy2*dy2;if(cp1LenSqr<PIXEL_DISTANCE_SQR&&cp2LenSqr<PIXEL_DISTANCE_SQR)out.push(x3,y3);else{var projLen1=dx*dx1+dy*dy1,projLen2=-dx*dx2-dy*dy2;if(cp1LenSqr-projLen1*projLen1<PIXEL_DISTANCE_SQR&&projLen1>=0&&cp2LenSqr-projLen2*projLen2<PIXEL_DISTANCE_SQR&&projLen2>=0)out.push(x3,y3);else{var tmpSegX=[],tmpSegY=[];(0,curve.Vz)(x0,x1,x2,x3,.5,tmpSegX),(0,curve.Vz)(y0,y1,y2,y3,.5,tmpSegY),adpativeBezier(tmpSegX[0],tmpSegY[0],tmpSegX[1],tmpSegY[1],tmpSegX[2],tmpSegY[2],tmpSegX[3],tmpSegY[3],out,scale),adpativeBezier(tmpSegX[4],tmpSegY[4],tmpSegX[5],tmpSegY[5],tmpSegX[6],tmpSegY[6],tmpSegX[7],tmpSegY[7],out,scale)}}}}function getDividingGrids(dimSize,rowDim,count){var rowSize=dimSize[rowDim],columnSize=dimSize[1-rowDim],ratio=Math.abs(rowSize/columnSize),rowCount=Math.ceil(Math.sqrt(ratio*count)),columnCount=Math.floor(count/rowCount);0===columnCount&&(columnCount=1,rowCount=count);for(var grids=[],i=0;i<rowCount;i++)grids.push(columnCount);var remained=count-rowCount*columnCount;if(remained>0)for(i=0;i<remained;i++)grids[i%rowCount]+=1;return grids}function divideSector(sectorShape,count,outShapes){for(var r0=sectorShape.r0,r=sectorShape.r,startAngle=sectorShape.startAngle,endAngle=sectorShape.endAngle,angle=Math.abs(endAngle-startAngle),arcLen=angle*r,deltaR=r-r0,isAngleRow=arcLen>Math.abs(deltaR),grids=getDividingGrids([arcLen,deltaR],isAngleRow?0:1,count),rowSize=(isAngleRow?angle:deltaR)/grids.length,row=0;row<grids.length;row++)for(var columnSize=(isAngleRow?deltaR:angle)/grids[row],column=0;column<grids[row];column++){var newShape={};isAngleRow?(newShape.startAngle=startAngle+rowSize*row,newShape.endAngle=startAngle+rowSize*(row+1),newShape.r0=r0+columnSize*column,newShape.r=r0+columnSize*(column+1)):(newShape.startAngle=startAngle+columnSize*column,newShape.endAngle=startAngle+columnSize*(column+1),newShape.r0=r0+rowSize*row,newShape.r=r0+rowSize*(row+1)),newShape.clockwise=sectorShape.clockwise,newShape.cx=sectorShape.cx,newShape.cy=sectorShape.cy,outShapes.push(newShape)}}function crossProduct2d(x1,y1,x2,y2){return x1*y2-x2*y1}function lineLineIntersect(a1x,a1y,a2x,a2y,b1x,b1y,b2x,b2y){var mx=a2x-a1x,my=a2y-a1y,nx=b2x-b1x,ny=b2y-b1y,nmCrossProduct=crossProduct2d(nx,ny,mx,my);if(Math.abs(nmCrossProduct)<1e-6)return null;var p=crossProduct2d(a1x-b1x,a1y-b1y,nx,ny)/nmCrossProduct;return p<0||p>1?null:new Point.Z(p*mx+a1x,p*my+a1y)}function projPtOnLine(pt,lineA,lineB){var dir=new Point.Z;Point.Z.sub(dir,lineB,lineA),dir.normalize();var dir2=new Point.Z;return Point.Z.sub(dir2,pt,lineA),dir2.dot(dir)}function addToPoly(poly,pt){var last=poly[poly.length-1];last&&last[0]===pt[0]&&last[1]===pt[1]||poly.push(pt)}function binaryDividePolygon(polygonShape){var points=polygonShape.points,min=[],max=[];(0,bbox.zk)(points,min,max);var boundingRect=new BoundingRect.Z(min[0],min[1],max[0]-min[0],max[1]-min[1]),width=boundingRect.width,height=boundingRect.height,x=boundingRect.x,y=boundingRect.y,pt0=new Point.Z,pt1=new Point.Z;return width>height?(pt0.x=pt1.x=x+width/2,pt0.y=y,pt1.y=y+height):(pt0.y=pt1.y=y+height/2,pt0.x=x,pt1.x=x+width),function splitPolygonByLine(points,lineA,lineB){for(var len=points.length,intersections=[],i=0;i<len;i++){var p0=points[i],p1=points[(i+1)%len],intersectionPt=lineLineIntersect(p0[0],p0[1],p1[0],p1[1],lineA.x,lineA.y,lineB.x,lineB.y);intersectionPt&&intersections.push({projPt:projPtOnLine(intersectionPt,lineA,lineB),pt:intersectionPt,idx:i})}if(intersections.length<2)return[{points},{points}];intersections.sort((function(a,b){return a.projPt-b.projPt}));var splitPt0=intersections[0],splitPt1=intersections[intersections.length-1];if(splitPt1.idx<splitPt0.idx){var tmp=splitPt0;splitPt0=splitPt1,splitPt1=tmp}var splitPt0Arr=[splitPt0.pt.x,splitPt0.pt.y],splitPt1Arr=[splitPt1.pt.x,splitPt1.pt.y],newPolyA=[splitPt0Arr],newPolyB=[splitPt1Arr];for(i=splitPt0.idx+1;i<=splitPt1.idx;i++)addToPoly(newPolyA,points[i].slice());for(addToPoly(newPolyA,splitPt1Arr),addToPoly(newPolyA,splitPt0Arr),i=splitPt1.idx+1;i<=splitPt0.idx+len;i++)addToPoly(newPolyB,points[i%len].slice());return addToPoly(newPolyB,splitPt0Arr),addToPoly(newPolyB,splitPt1Arr),[{points:newPolyA},{points:newPolyB}]}(points,pt0,pt1)}function binaryDivideRecursive(divider,shape,count,out){if(1===count)out.push(shape);else{var mid=Math.floor(count/2),sub=divider(shape);binaryDivideRecursive(divider,sub[0],mid,out),binaryDivideRecursive(divider,sub[1],count-mid,out)}return out}function split(path,count){var OutShapeCtor,outShapes=[],shape=path.shape;switch(path.type){case"rect":!function divideRect(rectShape,count,outShapes){for(var width=rectShape.width,height=rectShape.height,isHorizontalRow=width>height,grids=getDividingGrids([width,height],isHorizontalRow?0:1,count),rowSizeDim=isHorizontalRow?"width":"height",columnSizeDim=isHorizontalRow?"height":"width",rowDim=isHorizontalRow?"x":"y",columnDim=isHorizontalRow?"y":"x",rowSize=rectShape[rowSizeDim]/grids.length,row=0;row<grids.length;row++)for(var columnSize=rectShape[columnSizeDim]/grids[row],column=0;column<grids[row];column++){var newShape={};newShape[rowDim]=row*rowSize,newShape[columnDim]=column*columnSize,newShape[rowSizeDim]=rowSize,newShape[columnSizeDim]=columnSize,newShape.x+=rectShape.x,newShape.y+=rectShape.y,outShapes.push(newShape)}}(shape,count,outShapes),OutShapeCtor=Rect.Z;break;case"sector":divideSector(shape,count,outShapes),OutShapeCtor=Sector.C;break;case"circle":divideSector({r0:0,r:shape.r,startAngle:0,endAngle:2*Math.PI,cx:shape.cx,cy:shape.cy},count,outShapes),OutShapeCtor=Sector.C;break;default:var m=path.getComputedTransform(),scale=m?Math.sqrt(Math.max(m[0]*m[0]+m[1]*m[1],m[2]*m[2]+m[3]*m[3])):1,polygons=(0,util.map)(function pathToPolygons(path,scale){var bezierArrayGroups=pathToBezierCurves(path),polygons=[];scale=scale||1;for(var i=0;i<bezierArrayGroups.length;i++){var beziers=bezierArrayGroups[i],polygon=[],x0=beziers[0],y0=beziers[1];polygon.push(x0,y0);for(var k=2;k<beziers.length;){var x1=beziers[k++],y1=beziers[k++],x2=beziers[k++],y2=beziers[k++],x3=beziers[k++],y3=beziers[k++];adpativeBezier(x0,y0,x1,y1,x2,y2,x3,y3,polygon,scale),x0=x3,y0=y3}polygons.push(polygon)}return polygons}(path.getUpdatedPathProxy(),scale),(function(poly){return function polygonConvert(points){for(var out=[],i=0;i<points.length;)out.push([points[i++],points[i++]]);return out}(poly)})),polygonCount=polygons.length;if(0===polygonCount)binaryDivideRecursive(binaryDividePolygon,{points:polygons[0]},count,outShapes);else if(polygonCount===count)for(var i=0;i<polygonCount;i++)outShapes.push({points:polygons[i]});else{var totalArea_1=0,items=(0,util.map)(polygons,(function(poly){var min=[],max=[];(0,bbox.zk)(poly,min,max);var area=(max[1]-min[1])*(max[0]-min[0]);return totalArea_1+=area,{poly,area}}));items.sort((function(a,b){return b.area-a.area}));var left=count;for(i=0;i<polygonCount;i++){var item=items[i];if(left<=0)break;var selfCount=i===polygonCount-1?left:Math.ceil(item.area/totalArea_1*count);selfCount<0||(binaryDivideRecursive(binaryDividePolygon,{points:item.poly},selfCount,outShapes),left-=selfCount)}}OutShapeCtor=Polygon.Z}if(!OutShapeCtor)return function dividePath_clone(path,count){for(var paths=[],i=0;i<count;i++)paths.push((0,tool_path.U5)(path));return paths}(path,count);var source,target,out=[];for(i=0;i<outShapes.length;i++){var subPath=new OutShapeCtor;subPath.setShape(outShapes[i]),source=path,(target=subPath).setStyle(source.style),target.z=source.z,target.z2=source.z2,target.zlevel=source.zlevel,out.push(subPath)}return out}function alignSubpath(subpath1,subpath2){var len1=subpath1.length,len2=subpath2.length;if(len1===len2)return[subpath1,subpath2];for(var tmpSegX=[],tmpSegY=[],shorterPath=len1<len2?subpath1:subpath2,shorterLen=Math.min(len1,len2),diff=Math.abs(len2-len1)/6,shorterBezierCount=(shorterLen-2)/6,eachCurveSubDivCount=Math.ceil(diff/shorterBezierCount)+1,newSubpath=[shorterPath[0],shorterPath[1]],remained=diff,i=2;i<shorterLen;){var x0=shorterPath[i-2],y0=shorterPath[i-1],x1=shorterPath[i++],y1=shorterPath[i++],x2=shorterPath[i++],y2=shorterPath[i++],x3=shorterPath[i++],y3=shorterPath[i++];if(remained<=0)newSubpath.push(x1,y1,x2,y2,x3,y3);else{for(var actualSubDivCount=Math.min(remained,eachCurveSubDivCount-1)+1,k=1;k<=actualSubDivCount;k++){var p=k/actualSubDivCount;(0,curve.Vz)(x0,x1,x2,x3,p,tmpSegX),(0,curve.Vz)(y0,y1,y2,y3,p,tmpSegY),x0=tmpSegX[3],y0=tmpSegY[3],newSubpath.push(tmpSegX[1],tmpSegY[1],tmpSegX[2],tmpSegY[2],x0,y0),x1=tmpSegX[5],y1=tmpSegY[5],x2=tmpSegX[6],y2=tmpSegY[6]}remained-=actualSubDivCount-1}}return shorterPath===subpath1?[newSubpath,subpath2]:[subpath1,newSubpath]}function createSubpath(lastSubpathSubpath,otherSubpath){for(var len=lastSubpathSubpath.length,lastX=lastSubpathSubpath[len-2],lastY=lastSubpathSubpath[len-1],newSubpath=[],i=0;i<otherSubpath.length;)newSubpath[i++]=lastX,newSubpath[i++]=lastY;return newSubpath}function centroid(array){for(var signedArea=0,cx=0,cy=0,len=array.length,i=0,j=len-2;i<len;j=i,i+=2){var x0=array[j],y0=array[j+1],x1=array[i],y1=array[i+1],a=x0*y1-x1*y0;signedArea+=a,cx+=(x0+x1)*a,cy+=(y0+y1)*a}return 0===signedArea?[array[0]||0,array[1]||0]:[cx/signedArea/3,cy/signedArea/3,signedArea]}function findBestRingOffset(fromSubBeziers,toSubBeziers,fromCp,toCp){for(var bezierCount=(fromSubBeziers.length-2)/6,bestScore=1/0,bestOffset=0,len=fromSubBeziers.length,len2=len-2,offset=0;offset<bezierCount;offset++){for(var cursorOffset=6*offset,score=0,k=0;k<len;k+=2){var idx=0===k?cursorOffset:(cursorOffset+k-2)%len2+2,x0=fromSubBeziers[idx]-fromCp[0],y0=fromSubBeziers[idx+1]-fromCp[1],dx=toSubBeziers[k]-toCp[0]-x0,dy=toSubBeziers[k+1]-toCp[1]-y0;score+=dx*dx+dy*dy}score<bestScore&&(bestScore=score,bestOffset=offset)}return bestOffset}function reverse(array){for(var newArr=[],len=array.length,i=0;i<len;i+=2)newArr[i]=array[len-i-2],newArr[i+1]=array[len-i-1];return newArr}function isCombineMorphing(path){return path.__isCombineMorphing}var SAVED_METHOD_PREFIX="__mOriginal_";function saveAndModifyMethod(obj,methodName,modifiers){var savedMethodName=SAVED_METHOD_PREFIX+methodName,originalMethod=obj[savedMethodName]||obj[methodName];obj[savedMethodName]||(obj[savedMethodName]=obj[methodName]);var replace=modifiers.replace,after=modifiers.after,before=modifiers.before;obj[methodName]=function(){var res,args=arguments;return before&&before.apply(this,args),res=replace?replace.apply(this,args):originalMethod.apply(this,args),after&&after.apply(this,args),res}}function restoreMethod(obj,methodName){var savedMethodName=SAVED_METHOD_PREFIX+methodName;obj[savedMethodName]&&(obj[methodName]=obj[savedMethodName],obj[savedMethodName]=null)}function applyTransformOnBeziers(bezierCurves,mm){for(var i=0;i<bezierCurves.length;i++)for(var subBeziers=bezierCurves[i],k=0;k<subBeziers.length;){var x=subBeziers[k],y=subBeziers[k+1];subBeziers[k++]=mm[0]*x+mm[2]*y+mm[4],subBeziers[k++]=mm[1]*x+mm[3]*y+mm[5]}}function prepareMorphPath(fromPath,toPath){var fromPathProxy=fromPath.getUpdatedPathProxy(),toPathProxy=toPath.getUpdatedPathProxy(),_a=function alignBezierCurves(array1,array2){for(var _a,lastSubpath1,lastSubpath2,newArray1=[],newArray2=[],i=0;i<Math.max(array1.length,array2.length);i++){var subpath1=array1[i],subpath2=array2[i],newSubpath1=void 0,newSubpath2=void 0;subpath1?subpath2?(lastSubpath1=newSubpath1=(_a=alignSubpath(subpath1,subpath2))[0],lastSubpath2=newSubpath2=_a[1]):(newSubpath2=createSubpath(lastSubpath2||subpath1,subpath1),newSubpath1=subpath1):(newSubpath1=createSubpath(lastSubpath1||subpath2,subpath2),newSubpath2=subpath2),newArray1.push(newSubpath1),newArray2.push(newSubpath2)}return[newArray1,newArray2]}(pathToBezierCurves(fromPathProxy),pathToBezierCurves(toPathProxy)),fromBezierCurves=_a[0],toBezierCurves=_a[1],fromPathTransform=fromPath.getComputedTransform(),toPathTransform=toPath.getComputedTransform();fromPathTransform&&applyTransformOnBeziers(fromBezierCurves,fromPathTransform),toPathTransform&&applyTransformOnBeziers(toBezierCurves,toPathTransform),saveAndModifyMethod(toPath,"updateTransform",{replace:function updateIdentityTransform(){this.transform=null}}),toPath.transform=null;var morphingData=function findBestMorphingRotation(fromArr,toArr,searchAngleIteration,searchAngleRange){for(var fromNeedsReverse,result=[],i=0;i<fromArr.length;i++){var fromSubpathBezier=fromArr[i],toSubpathBezier=toArr[i],fromCp=centroid(fromSubpathBezier),toCp=centroid(toSubpathBezier);null==fromNeedsReverse&&(fromNeedsReverse=fromCp[2]<0!=toCp[2]<0);var newFromSubpathBezier=[],newToSubpathBezier=[],bestAngle=0,bestScore=1/0,tmpArr=[],len=fromSubpathBezier.length;fromNeedsReverse&&(fromSubpathBezier=reverse(fromSubpathBezier));for(var offset=6*findBestRingOffset(fromSubpathBezier,toSubpathBezier,fromCp,toCp),len2=len-2,k=0;k<len2;k+=2){var idx=(offset+k)%len2+2;newFromSubpathBezier[k+2]=fromSubpathBezier[idx]-fromCp[0],newFromSubpathBezier[k+3]=fromSubpathBezier[idx+1]-fromCp[1]}if(newFromSubpathBezier[0]=fromSubpathBezier[offset]-fromCp[0],newFromSubpathBezier[1]=fromSubpathBezier[offset+1]-fromCp[1],searchAngleIteration>0)for(var step=searchAngleRange/searchAngleIteration,angle=-searchAngleRange/2;angle<=searchAngleRange/2;angle+=step){var sa=Math.sin(angle),ca=Math.cos(angle),score=0;for(k=0;k<fromSubpathBezier.length;k+=2){var x0=newFromSubpathBezier[k],y0=newFromSubpathBezier[k+1],x1=toSubpathBezier[k]-toCp[0],y1=toSubpathBezier[k+1]-toCp[1],newX1=x1*ca-y1*sa,newY1=x1*sa+y1*ca;tmpArr[k]=newX1,tmpArr[k+1]=newY1;var dx=newX1-x0,dy=newY1-y0;score+=dx*dx+dy*dy}if(score<bestScore){bestScore=score,bestAngle=angle;for(var m=0;m<tmpArr.length;m++)newToSubpathBezier[m]=tmpArr[m]}}else for(var i_1=0;i_1<len;i_1+=2)newToSubpathBezier[i_1]=toSubpathBezier[i_1]-toCp[0],newToSubpathBezier[i_1+1]=toSubpathBezier[i_1+1]-toCp[1];result.push({from:newFromSubpathBezier,to:newToSubpathBezier,fromCp,toCp,rotation:-bestAngle})}return result}(fromBezierCurves,toBezierCurves,10,Math.PI),tmpArr=[];saveAndModifyMethod(toPath,"buildPath",{replace:function(path){for(var t=toPath.__morphT,onet=1-t,newCp=[],i=0;i<morphingData.length;i++){var item=morphingData[i],from=item.from,to=item.to,angle=item.rotation*t,fromCp=item.fromCp,toCp=item.toCp,sa=Math.sin(angle),ca=Math.cos(angle);(0,vector.lerp)(newCp,fromCp,toCp,t);for(var m=0;m<from.length;m+=2){var x0_1=from[m],y0_1=from[m+1],x=x0_1*onet+(x1=to[m])*t,y=y0_1*onet+(y1=to[m+1])*t;tmpArr[m]=x*ca-y*sa+newCp[0],tmpArr[m+1]=x*sa+y*ca+newCp[1]}var x0=tmpArr[0],y0=tmpArr[1];path.moveTo(x0,y0);for(m=2;m<from.length;){var x1=tmpArr[m++],y1=tmpArr[m++],x2=tmpArr[m++],y2=tmpArr[m++],x3=tmpArr[m++],y3=tmpArr[m++];x0===x1&&y0===y1&&x2===x3&&y2===y3?path.lineTo(x3,y3):path.bezierCurveTo(x1,y1,x2,y2,x3,y3),x0=x3,y0=y3}}}})}function morphPath(fromPath,toPath,animationOpts){if(!fromPath||!toPath)return toPath;var oldDone=animationOpts.done,oldDuring=animationOpts.during;return prepareMorphPath(fromPath,toPath),toPath.__morphT=0,toPath.animateTo({__morphT:1},(0,util.defaults)({during:function(p){toPath.dirtyShape(),oldDuring&&oldDuring(p)},done:function(){!function restoreToPath(){restoreMethod(toPath,"buildPath"),restoreMethod(toPath,"updateTransform"),toPath.__morphT=-1,toPath.createPathProxy(),toPath.dirtyShape()}(),oldDone&&oldDone()}},animationOpts)),toPath}function hilbert(x,y,minX,minY,maxX,maxY){x=maxX===minX?0:Math.round(32767*(x-minX)/(maxX-minX)),y=maxY===minY?0:Math.round(32767*(y-minY)/(maxY-minY));for(var tmp,d=0,s=32768;s>0;s/=2){var rx=0,ry=0;(x&s)>0&&(rx=1),(y&s)>0&&(ry=1),d+=s*s*(3*rx^ry),0===ry&&(1===rx&&(x=s-1-x,y=s-1-y),tmp=x,x=y,y=tmp)}return d}function sortPaths(pathList){var xMin=1/0,yMin=1/0,xMax=-1/0,yMax=-1/0,cps=(0,util.map)(pathList,(function(path){var rect=path.getBoundingRect(),m=path.getComputedTransform(),x=rect.x+rect.width/2+(m?m[4]:0),y=rect.y+rect.height/2+(m?m[5]:0);return xMin=Math.min(x,xMin),yMin=Math.min(y,yMin),xMax=Math.max(x,xMax),yMax=Math.max(y,yMax),[x,y]}));return(0,util.map)(cps,(function(cp,idx){return{cp,z:hilbert(cp[0],cp[1],xMin,yMin,xMax,yMax),path:pathList[idx]}})).sort((function(a,b){return a.z-b.z})).map((function(item){return item.path}))}function defaultDividePath(param){return split(param.path,param.count)}function isMultiple(elements){return(0,util.isArray)(elements[0])}function prepareMorphBatches(one,many){for(var batches=[],batchCount=one.length,i=0;i<batchCount;i++)batches.push({one:one[i],many:[]});for(i=0;i<many.length;i++){var len=many[i].length,k=void 0;for(k=0;k<len;k++)batches[k%batchCount].many.push(many[i][k])}var off=0;for(i=batchCount-1;i>=0;i--)if(!batches[i].many.length){var moveFrom=batches[off].many;if(moveFrom.length<=1){if(!off)return batches;off=0}len=moveFrom.length;var mid=Math.ceil(len/2);batches[i].many=moveFrom.slice(mid,len),batches[off].many=moveFrom.slice(0,mid),off++}return batches}var pathDividers={clone:function(params){for(var ret=[],approxOpacity=1-Math.pow(1-params.path.style.opacity,1/params.count),i=0;i<params.count;i++){var cloned=(0,tool_path.U5)(params.path);cloned.setStyle("opacity",approxOpacity),ret.push(cloned)}return ret},split:null};function applyMorphAnimation(from,to,divideShape,seriesModel,dataIndex,animateOtherProps){if(from.length&&to.length){var updateAnimationCfg=(0,basicTransition.ke)("update",seriesModel,dataIndex);if(updateAnimationCfg&&updateAnimationCfg.duration>0){var many,one,animationDelay=seriesModel.getModel("universalTransition").get("delay"),animationCfg=Object.assign({setToFinal:!0},updateAnimationCfg);isMultiple(from)&&(many=from,one=to),isMultiple(to)&&(many=to,one=from);for(var fromIsMany=many?many===from:from.length>to.length,morphBatches=many?prepareMorphBatches(one,many):prepareMorphBatches(fromIsMany?to:from,[fromIsMany?from:to]),animateCount=0,i=0;i<morphBatches.length;i++)animateCount+=morphBatches[i].many.length;var animateIndex=0;for(i=0;i<morphBatches.length;i++)morphOneBatch(morphBatches[i],fromIsMany,animateIndex,animateCount),animateIndex+=morphBatches[i].many.length}}function morphOneBatch(batch,fromIsMany,animateIndex,animateCount,forceManyOne){var batchMany=batch.many,batchOne=batch.one;if(1!==batchMany.length||forceManyOne)for(var separateAnimationCfg=(0,util.defaults)({dividePath:pathDividers[divideShape],individualDelay:animationDelay&&function(idx,count,fromPath,toPath){return animationDelay(idx+animateIndex,animateCount)}},animationCfg),_a=fromIsMany?function combineMorph(fromList,toPath,animationOpts){var fromPathList=[];!function addFromPath(fromList){for(var i=0;i<fromList.length;i++){var from=fromList[i];isCombineMorphing(from)?addFromPath(from.childrenRef()):from instanceof Path.ZP&&fromPathList.push(from)}}(fromList);var separateCount=fromPathList.length;if(!separateCount)return{fromIndividuals:[],toIndividuals:[],count:0};var toSubPathList=(animationOpts.dividePath||defaultDividePath)({path:toPath,count:separateCount});if(toSubPathList.length!==separateCount)return console.error("Invalid morphing: unmatched splitted path"),{fromIndividuals:[],toIndividuals:[],count:0};fromPathList=sortPaths(fromPathList),toSubPathList=sortPaths(toSubPathList);for(var oldDone=animationOpts.done,oldDuring=animationOpts.during,individualDelay=animationOpts.individualDelay,identityTransform=new Transformable.ZP,i=0;i<separateCount;i++){var from=fromPathList[i],to=toSubPathList[i];to.parent=toPath,to.copyTransform(identityTransform),individualDelay||prepareMorphPath(from,to)}function addToSubPathListToZr(zr){for(var i=0;i<toSubPathList.length;i++)toSubPathList[i].addSelfToZr(zr)}function restoreToPath(){toPath.__isCombineMorphing=!1,toPath.__morphT=-1,toPath.childrenRef=null,restoreMethod(toPath,"addSelfToZr"),restoreMethod(toPath,"removeSelfFromZr")}toPath.__isCombineMorphing=!0,toPath.childrenRef=function(){return toSubPathList},saveAndModifyMethod(toPath,"addSelfToZr",{after:function(zr){addToSubPathListToZr(zr)}}),saveAndModifyMethod(toPath,"removeSelfFromZr",{after:function(zr){for(var i=0;i<toSubPathList.length;i++)toSubPathList[i].removeSelfFromZr(zr)}});var toLen=toSubPathList.length;if(individualDelay){var animating_1=toLen,eachDone=function(){0==--animating_1&&(restoreToPath(),oldDone&&oldDone())};for(i=0;i<toLen;i++){var indivdualAnimationOpts=individualDelay?(0,util.defaults)({delay:(animationOpts.delay||0)+individualDelay(i,toLen,fromPathList[i],toSubPathList[i]),done:eachDone},animationOpts):animationOpts;morphPath(fromPathList[i],toSubPathList[i],indivdualAnimationOpts)}}else toPath.__morphT=0,toPath.animateTo({__morphT:1},(0,util.defaults)({during:function(p){for(var i=0;i<toLen;i++){var child=toSubPathList[i];child.__morphT=toPath.__morphT,child.dirtyShape()}oldDuring&&oldDuring(p)},done:function(){restoreToPath();for(var i=0;i<fromList.length;i++)restoreMethod(fromList[i],"updateTransform");oldDone&&oldDone()}},animationOpts));return toPath.__zr&&addToSubPathListToZr(toPath.__zr),{fromIndividuals:fromPathList,toIndividuals:toSubPathList,count:toLen}}(batchMany,batchOne,separateAnimationCfg):function separateMorph(fromPath,toPathList,animationOpts){var toLen=toPathList.length,fromPathList=[],dividePath=animationOpts.dividePath||defaultDividePath;if(isCombineMorphing(fromPath)){!function addFromPath(fromList){for(var i=0;i<fromList.length;i++){var from=fromList[i];isCombineMorphing(from)?addFromPath(from.childrenRef()):from instanceof Path.ZP&&fromPathList.push(from)}}(fromPath.childrenRef());var fromLen=fromPathList.length;if(fromLen<toLen)for(var k=0,i=fromLen;i<toLen;i++)fromPathList.push((0,tool_path.U5)(fromPathList[k++%fromLen]));fromPathList.length=toLen}else{fromPathList=dividePath({path:fromPath,count:toLen});var fromPathTransform=fromPath.getComputedTransform();for(i=0;i<fromPathList.length;i++)fromPathList[i].setLocalTransform(fromPathTransform);if(fromPathList.length!==toLen)return console.error("Invalid morphing: unmatched splitted path"),{fromIndividuals:[],toIndividuals:[],count:0}}fromPathList=sortPaths(fromPathList),toPathList=sortPaths(toPathList);var individualDelay=animationOpts.individualDelay;for(i=0;i<toLen;i++){var indivdualAnimationOpts=individualDelay?(0,util.defaults)({delay:(animationOpts.delay||0)+individualDelay(i,toLen,fromPathList[i],toPathList[i])},animationOpts):animationOpts;morphPath(fromPathList[i],toPathList[i],indivdualAnimationOpts)}return{fromIndividuals:fromPathList,toIndividuals:toPathList,count:toPathList.length}}(batchOne,batchMany,separateAnimationCfg),fromIndividuals=_a.fromIndividuals,toIndividuals=_a.toIndividuals,count=fromIndividuals.length,k=0;k<count;k++){individualAnimationCfg=animationDelay?(0,util.defaults)({delay:animationDelay(k,count)},animationCfg):animationCfg;animateOtherProps(fromIndividuals[k],toIndividuals[k],fromIsMany?batchMany[k]:batch.one,fromIsMany?batch.one:batchMany[k],individualAnimationCfg)}else{var individualAnimationCfg,batchFrom=fromIsMany?batchMany[0]:batchOne,batchTo=fromIsMany?batchOne:batchMany[0];if(isCombineMorphing(batchFrom))morphOneBatch({many:[batchFrom],one:batchTo},!0,animateIndex,animateCount,!0);else morphPath(batchFrom,batchTo,individualAnimationCfg=animationDelay?(0,util.defaults)({delay:animationDelay(animateIndex,animateCount)},animationCfg):animationCfg),animateOtherProps(batchFrom,batchTo,batchFrom,batchTo,individualAnimationCfg)}}}function getPathList(elements){if(!elements)return[];if((0,util.isArray)(elements)){for(var pathList_1=[],i=0;i<elements.length;i++)pathList_1.push(getPathList(elements[i]));return pathList_1}var pathList=[];return elements.traverse((function(el){el instanceof Path.ZP&&!el.disableMorphing&&!el.invisible&&!el.ignore&&pathList.push(el)})),pathList}var DATA_COUNT_THRESHOLD=1e4,TRANSITION_NONE=0,TRANSITION_P2C=1,TRANSITION_C2P=2,getUniversalTransitionGlobalStore=(0,util_model.Yf)();function getGroupId(data,dataIndex,dataGroupId,isChild){var groupIdDim=function getDimension(data,visualDimension){for(var dimensions=data.dimensions,i=0;i<dimensions.length;i++){var dimInfo=data.getDimensionInfo(dimensions[i]);if(dimInfo&&0===dimInfo.otherDims[visualDimension])return dimensions[i]}}(data,isChild?"itemChildGroupId":"itemGroupId");if(groupIdDim){var groupId=function getValueByDimension(data,dataIndex,dimension){var dimInfo=data.getDimensionInfo(dimension),dimOrdinalMeta=dimInfo&&dimInfo.ordinalMeta;if(dimInfo){var value=data.get(dimInfo.name,dataIndex);return dimOrdinalMeta&&dimOrdinalMeta.categories[value]||value+""}}(data,dataIndex,groupIdDim);return groupId}var rawDataItem=data.getRawDataItem(dataIndex),property=isChild?"childGroupId":"groupId";return rawDataItem&&rawDataItem[property]?rawDataItem[property]+"":isChild?void 0:dataGroupId||data.getId(dataIndex)}function flattenDataDiffItems(list){var items=[];return(0,util.each)(list,(function(seriesInfo){var data=seriesInfo.data,dataGroupId=seriesInfo.dataGroupId;if(!(data.count()>DATA_COUNT_THRESHOLD))for(var indices=data.getIndices(),dataIndex=0;dataIndex<indices.length;dataIndex++)items.push({data,groupId:getGroupId(data,dataIndex,dataGroupId,!1),childGroupId:getGroupId(data,dataIndex,dataGroupId,!0),divide:seriesInfo.divide,dataIndex})})),items}function fadeInElement(newEl,newSeries,newIndex){newEl.traverse((function(el){el instanceof Path.ZP&&(0,basicTransition.KZ)(el,{style:{opacity:0}},newSeries,{dataIndex:newIndex,isFrom:!0})}))}function universalTransition_removeEl(el){if(el.parent){var computedTransform=el.getComputedTransform();el.setLocalTransform(computedTransform),el.parent.remove(el)}}function stopAnimation(el){el.stopAnimation(),el.isGroup&&el.traverse((function(child){child.stopAnimation()}))}function transitionBetween(oldList,newList,api){var oldDiffItems=flattenDataDiffItems(oldList),newDiffItems=flattenDataDiffItems(newList);function updateMorphingPathProps(from,to,rawFrom,rawTo,animationCfg){(rawFrom||from)&&to.animateFrom({style:rawFrom&&rawFrom!==from?(0,util.extend)((0,util.extend)({},rawFrom.style),from.style):from.style},animationCfg)}var hasMorphAnimation=!1,direction=TRANSITION_NONE,oldGroupIds=(0,util.createHashMap)(),oldChildGroupIds=(0,util.createHashMap)();oldDiffItems.forEach((function(item){item.groupId&&oldGroupIds.set(item.groupId,!0),item.childGroupId&&oldChildGroupIds.set(item.childGroupId,!0)}));for(var i=0;i<newDiffItems.length;i++){var newGroupId=newDiffItems[i].groupId;if(oldChildGroupIds.get(newGroupId)){direction=TRANSITION_P2C;break}var newChildGroupId=newDiffItems[i].childGroupId;if(newChildGroupId&&oldGroupIds.get(newChildGroupId)){direction=TRANSITION_C2P;break}}function createKeyGetter(isOld,onlyGetId){return function(diffItem){var data=diffItem.data,dataIndex=diffItem.dataIndex;return onlyGetId?data.getId(dataIndex):isOld?direction===TRANSITION_P2C?diffItem.childGroupId:diffItem.groupId:direction===TRANSITION_C2P?diffItem.childGroupId:diffItem.groupId}}var useId=function isAllIdSame(oldDiffItems,newDiffItems){var len=oldDiffItems.length;if(len!==newDiffItems.length)return!1;for(var i=0;i<len;i++){var oldItem=oldDiffItems[i],newItem=newDiffItems[i];if(oldItem.data.getId(oldItem.dataIndex)!==newItem.data.getId(newItem.dataIndex))return!1}return!0}(oldDiffItems,newDiffItems),isElementStillInChart={};if(!useId)for(i=0;i<newDiffItems.length;i++){var newItem=newDiffItems[i],el=newItem.data.getItemGraphicEl(newItem.dataIndex);el&&(isElementStillInChart[el.id]=!0)}function updateOneToOne(newIndex,oldIndex){var oldItem=oldDiffItems[oldIndex],newItem=newDiffItems[newIndex],newSeries=newItem.data.hostModel,oldEl=oldItem.data.getItemGraphicEl(oldItem.dataIndex),newEl=newItem.data.getItemGraphicEl(newItem.dataIndex);oldEl!==newEl?oldEl&&isElementStillInChart[oldEl.id]||newEl&&(stopAnimation(newEl),oldEl?(stopAnimation(oldEl),universalTransition_removeEl(oldEl),hasMorphAnimation=!0,applyMorphAnimation(getPathList(oldEl),getPathList(newEl),newItem.divide,newSeries,newIndex,updateMorphingPathProps)):fadeInElement(newEl,newSeries,newIndex)):newEl&&function animateElementStyles(el,dataIndex,seriesModel){var animationConfig=(0,basicTransition.ke)("update",seriesModel,dataIndex);animationConfig&&el.traverse((function(child){if(child instanceof Displayable.ZP){var oldStyle=(0,basicTransition._W)(child);oldStyle&&child.animateFrom({style:oldStyle},animationConfig)}}))}(newEl,newItem.dataIndex,newSeries)}new DataDiffer.Z(oldDiffItems,newDiffItems,createKeyGetter(!0,useId),createKeyGetter(!1,useId),null,"multiple").update(updateOneToOne).updateManyToOne((function(newIndex,oldIndices){var newItem=newDiffItems[newIndex],newData=newItem.data,newSeries=newData.hostModel,newEl=newData.getItemGraphicEl(newItem.dataIndex),oldElsList=(0,util.filter)((0,util.map)(oldIndices,(function(idx){return oldDiffItems[idx].data.getItemGraphicEl(oldDiffItems[idx].dataIndex)})),(function(oldEl){return oldEl&&oldEl!==newEl&&!isElementStillInChart[oldEl.id]}));newEl&&(stopAnimation(newEl),oldElsList.length?((0,util.each)(oldElsList,(function(oldEl){stopAnimation(oldEl),universalTransition_removeEl(oldEl)})),hasMorphAnimation=!0,applyMorphAnimation(getPathList(oldElsList),getPathList(newEl),newItem.divide,newSeries,newIndex,updateMorphingPathProps)):fadeInElement(newEl,newSeries,newItem.dataIndex))})).updateOneToMany((function(newIndices,oldIndex){var oldItem=oldDiffItems[oldIndex],oldEl=oldItem.data.getItemGraphicEl(oldItem.dataIndex);if(!oldEl||!isElementStillInChart[oldEl.id]){var newElsList=(0,util.filter)((0,util.map)(newIndices,(function(idx){return newDiffItems[idx].data.getItemGraphicEl(newDiffItems[idx].dataIndex)})),(function(el){return el&&el!==oldEl})),newSeris=newDiffItems[newIndices[0]].data.hostModel;newElsList.length&&((0,util.each)(newElsList,(function(newEl){return stopAnimation(newEl)})),oldEl?(stopAnimation(oldEl),universalTransition_removeEl(oldEl),hasMorphAnimation=!0,applyMorphAnimation(getPathList(oldEl),getPathList(newElsList),oldItem.divide,newSeris,newIndices[0],updateMorphingPathProps)):(0,util.each)(newElsList,(function(newEl){return fadeInElement(newEl,newSeris,newIndices[0])})))}})).updateManyToMany((function(newIndices,oldIndices){new DataDiffer.Z(oldIndices,newIndices,(function(rawIdx){return oldDiffItems[rawIdx].data.getId(oldDiffItems[rawIdx].dataIndex)}),(function(rawIdx){return newDiffItems[rawIdx].data.getId(newDiffItems[rawIdx].dataIndex)})).update((function(newIndex,oldIndex){updateOneToOne(newIndices[newIndex],oldIndices[oldIndex])})).execute()})).execute(),hasMorphAnimation&&(0,util.each)(newList,(function(_a){var seriesModel=_a.data.hostModel,view=seriesModel&&api.getViewOfSeriesModel(seriesModel),animationCfg=(0,basicTransition.ke)("update",seriesModel,0);view&&seriesModel.isAnimationEnabled()&&animationCfg&&animationCfg.duration>0&&view.group.traverse((function(el){el instanceof Path.ZP&&!el.animators.length&&el.animateFrom({style:{opacity:0}},animationCfg)}))}))}function getSeriesTransitionKey(series){var seriesKey=series.getModel("universalTransition").get("seriesKey");return seriesKey||series.id}function convertArraySeriesKeyToString(seriesKey){return(0,util.isArray)(seriesKey)?seriesKey.sort().join(","):seriesKey}function getDivideShapeFromData(data){if(data.hostModel)return data.hostModel.getModel("universalTransition").get("divideShape")}function querySeries(series,finder){for(var i=0;i<series.length;i++){if(null!=finder.seriesIndex&&finder.seriesIndex===series[i].seriesIndex||null!=finder.seriesId&&finder.seriesId===series[i].id)return i}}var installLabelLayout=__webpack_require__("./node_modules/echarts/lib/label/installLabelLayout.js");(0,extension.D)([installCanvasRenderer.N]),(0,extension.D)([function install(registers){registers.registerPainter("svg",Painter)}]),(0,extension.D)([function install_install(registers){registers.registerChartView(line_LineView),registers.registerSeriesModel(LineSeries),registers.registerLayout(pointsLayout("line",!0)),registers.registerVisual({seriesType:"line",reset:function(seriesModel){var data=seriesModel.getData(),lineStyle=seriesModel.getModel("lineStyle").getLineStyle();lineStyle&&!lineStyle.stroke&&(lineStyle.stroke=data.getVisual("style").fill),data.setVisual("legendLineStyle",lineStyle)}}),registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC,(0,dataSample.Z)("line"))},bar_install.N,function pie_install_install(registers){registers.registerChartView(pie_PieView),registers.registerSeriesModel(PieSeries),(0,dataSelectAction.y)("pie",registers.registerAction),registers.registerLayout((0,util.curry)(pieLayout,"pie")),registers.registerProcessor(dataFilter("pie")),registers.registerProcessor(function negativeDataFilter(seriesType){return{seriesType,reset:function(seriesModel,ecModel){var data=seriesModel.getData();data.filterSelf((function(idx){var valueDim=data.mapDimension("value"),curValue=data.get(valueDim,idx);return!((0,util.isNumber)(curValue)&&!isNaN(curValue)&&curValue<0)}))}}}("pie"))},function scatter_install_install(registers){(0,extension.D)(installSimple_install),registers.registerSeriesModel(ScatterSeries),registers.registerChartView(scatter_ScatterView),registers.registerLayout(pointsLayout("scatter"))},function chart_radar_install_install(registers){(0,extension.D)(radar_install_install),registers.registerChartView(radar_RadarView),registers.registerSeriesModel(RadarSeries),registers.registerLayout(radarLayout),registers.registerProcessor(dataFilter("radar")),registers.registerPreprocessor(radarBackwardCompat)},map_install.N,function tree_install_install(registers){registers.registerChartView(tree_TreeView),registers.registerSeriesModel(TreeSeries),registers.registerLayout(treeLayout),registers.registerVisual(treeVisual),function installTreeAction(registers){registers.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},(function(payload,ecModel){ecModel.eachComponent({mainType:"series",subType:"tree",query:payload},(function(seriesModel){var dataIndex=payload.dataIndex,node=seriesModel.getData().tree.getNodeByDataIndex(dataIndex);node.isExpand=!node.isExpand}))})),registers.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},(function(payload,ecModel,api){ecModel.eachComponent({mainType:"series",subType:"tree",query:payload},(function(seriesModel){var coordSys=seriesModel.coordinateSystem,res=(0,action_roamHelper.A)(coordSys,payload,void 0,api);seriesModel.setCenter&&seriesModel.setCenter(res.center),seriesModel.setZoom&&seriesModel.setZoom(res.zoom)}))}))}(registers)},treemap_install.N,function graph_install_install(registers){registers.registerChartView(graph_GraphView),registers.registerSeriesModel(GraphSeries),registers.registerProcessor(categoryFilter),registers.registerVisual(categoryVisual),registers.registerVisual(graphEdgeVisual),registers.registerLayout(graphSimpleLayout),registers.registerLayout(registers.PRIORITY.VISUAL.POST_CHART_LAYOUT,graphCircularLayout),registers.registerLayout(graphForceLayout),registers.registerCoordinateSystem("graphView",{dimensions:View.Z.dimensions,create:createViewCoordSys}),registers.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},util.noop),registers.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},util.noop),registers.registerAction(actionInfo,(function(payload,ecModel,api){ecModel.eachComponent({mainType:"series",query:payload},(function(seriesModel){var coordSys=seriesModel.coordinateSystem,res=(0,action_roamHelper.A)(coordSys,payload,void 0,api);seriesModel.setCenter&&seriesModel.setCenter(res.center),seriesModel.setZoom&&seriesModel.setZoom(res.zoom)}))}))},function gauge_install_install(registers){registers.registerChartView(gauge_GaugeView),registers.registerSeriesModel(GaugeSeries)},function funnel_install_install(registers){registers.registerChartView(funnel_FunnelView),registers.registerSeriesModel(FunnelSeries),registers.registerLayout(funnelLayout),registers.registerProcessor(dataFilter("funnel"))},function chart_parallel_install_install(registers){(0,extension.D)(parallel_install_install),registers.registerChartView(parallel_ParallelView),registers.registerSeriesModel(ParallelSeries),registers.registerVisual(registers.PRIORITY.VISUAL.BRUSH,parallel_parallelVisual)},function sankey_install_install(registers){registers.registerChartView(sankey_SankeyView),registers.registerSeriesModel(SankeySeries),registers.registerLayout(sankeyLayout),registers.registerVisual(sankeyVisual),registers.registerAction({type:"dragNode",event:"dragnode",update:"update"},(function(payload,ecModel){ecModel.eachComponent({mainType:"series",subType:"sankey",query:payload},(function(seriesModel){seriesModel.setNodePosition(payload.dataIndex,[payload.localX,payload.localY])}))}))},function boxplot_install_install(registers){registers.registerSeriesModel(BoxplotSeries),registers.registerChartView(boxplot_BoxplotView),registers.registerLayout(boxplotLayout),registers.registerTransform(boxplotTransform)},function candlestick_install_install(registers){registers.registerChartView(candlestick_CandlestickView),registers.registerSeriesModel(CandlestickSeries),registers.registerPreprocessor(candlestickPreprocessor),registers.registerVisual(candlestick_candlestickVisual),registers.registerLayout(candlestick_candlestickLayout)},function effectScatter_install_install(registers){registers.registerChartView(effectScatter_EffectScatterView),registers.registerSeriesModel(EffectScatterSeries),registers.registerLayout(pointsLayout("effectScatter"))},function lines_install_install(registers){registers.registerChartView(lines_LinesView),registers.registerSeriesModel(LinesSeries),registers.registerLayout(lines_linesLayout),registers.registerVisual(lines_linesVisual)},heatmap_install.N,function installPictorialBar_install(registers){registers.registerChartView(bar_PictorialBarView),registers.registerSeriesModel(PictorialBarSeries),registers.registerLayout(registers.PRIORITY.VISUAL.LAYOUT,(0,util.curry)(barGrid.bK,"pictorialBar")),registers.registerLayout(registers.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,(0,barGrid.Bk)("pictorialBar"))},function themeRiver_install_install(registers){registers.registerChartView(themeRiver_ThemeRiverView),registers.registerSeriesModel(ThemeRiverSeries),registers.registerLayout(themeRiverLayout),registers.registerProcessor(dataFilter("themeRiver"))},function sunburst_install_install(registers){registers.registerChartView(sunburst_SunburstView),registers.registerSeriesModel(SunburstSeries),registers.registerLayout((0,util.curry)(sunburstLayout,"sunburst")),registers.registerProcessor((0,util.curry)(dataFilter,"sunburst")),registers.registerVisual(sunburstVisual),function installSunburstAction(registers){registers.registerAction({type:ROOT_TO_NODE_ACTION,update:"updateView"},(function(payload,ecModel){ecModel.eachComponent({mainType:"series",subType:"sunburst",query:payload},(function handleRootToNode(model,index){var targetInfo=(0,treeHelper.d1)(payload,[ROOT_TO_NODE_ACTION],model);if(targetInfo){var originViewRoot=model.getViewRoot();originViewRoot&&(payload.direction=(0,treeHelper.Gx)(originViewRoot,targetInfo.node)?"rollUp":"drillDown"),model.resetViewRoot(targetInfo.node)}}))})),registers.registerAction({type:HIGHLIGHT_ACTION,update:"none"},(function(payload,ecModel,api){payload=(0,util.extend)({},payload),ecModel.eachComponent({mainType:"series",subType:"sunburst",query:payload},(function handleHighlight(model){var targetInfo=(0,treeHelper.d1)(payload,[HIGHLIGHT_ACTION],model);targetInfo&&(payload.dataIndex=targetInfo.node.dataIndex)})),api.dispatchAction((0,util.extend)(payload,{type:"highlight"}))})),registers.registerAction({type:UNHIGHLIGHT_ACTION,update:"updateView"},(function(payload,ecModel,api){payload=(0,util.extend)({},payload),api.dispatchAction((0,util.extend)(payload,{type:"downplay"}))}))}(registers)},function custom_install_install(registers){registers.registerChartView(CustomView),registers.registerSeriesModel(CustomSeries)}]),(0,extension.D)((function grid_install_install(registers){(0,extension.D)(installSimple_install),(0,extension.D)(axisPointer_install_install)})),(0,extension.D)((function polar_install_install(registers){(0,extension.D)(axisPointer_install_install),axis_AxisView.registerAxisPointerClass("PolarAxisPointer",axisPointer_PolarAxisPointer),registers.registerCoordinateSystem("polar",polar_polarCreator),registers.registerComponentModel(polar_PolarModel),registers.registerComponentView(PolarView),axisModelCreator(registers,"angle",AngleAxisModel,angleAxisExtraOption),axisModelCreator(registers,"radius",RadiusAxisModel,radiusAxisExtraOption),registers.registerComponentView(axis_AngleAxisView),registers.registerComponentView(axis_RadiusAxisView),registers.registerLayout((0,util.curry)(barPolar,"bar"))})),(0,extension.D)(geo_install.N),(0,extension.D)((function singleAxis_install_install(registers){(0,extension.D)(axisPointer_install_install),axis_AxisView.registerAxisPointerClass("SingleAxisPointer",axisPointer_SingleAxisPointer),registers.registerComponentView(SingleView),registers.registerComponentView(axis_SingleAxisView),registers.registerComponentModel(single_AxisModel),axisModelCreator(registers,"single",single_AxisModel,single_AxisModel.defaultOption),registers.registerCoordinateSystem("single",single_singleCreator)})),(0,extension.D)(parallel_install_install),(0,extension.D)((function calendar_install_install(registers){registers.registerComponentModel(calendar_CalendarModel),registers.registerComponentView(calendar_CalendarView),registers.registerCoordinateSystem("calendar",calendar_Calendar)})),(0,extension.D)((function graphic_install_install(registers){registers.registerComponentModel(GraphicComponentModel),registers.registerComponentView(GraphicComponentView),registers.registerPreprocessor((function(option){var graphicOption=option.graphic;(0,util.isArray)(graphicOption)?graphicOption[0]&&graphicOption[0].elements?option.graphic=[option.graphic[0]]:option.graphic=[{elements:graphicOption}]:graphicOption&&!graphicOption.elements&&(option.graphic=[{elements:[graphicOption]}])}))})),(0,extension.D)((function toolbox_install_install(registers){registers.registerComponentModel(toolbox_ToolboxModel),registers.registerComponentView(toolbox_ToolboxView),registerFeature("saveAsImage",feature_SaveAsImage),registerFeature("magicType",feature_MagicType),registerFeature("dataView",feature_DataView),registerFeature("dataZoom",DataZoom),registerFeature("restore",Restore),(0,extension.D)(installDataZoomSelect_install)})),(0,extension.D)((function tooltip_install_install(registers){(0,extension.D)(axisPointer_install_install),registers.registerComponentModel(tooltip_TooltipModel),registers.registerComponentView(tooltip_TooltipView),registers.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},util.noop),registers.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},util.noop)})),(0,extension.D)(axisPointer_install_install),(0,extension.D)((function brush_install_install(registers){registers.registerComponentView(brush_BrushView),registers.registerComponentModel(brush_BrushModel),registers.registerPreprocessor(brushPreprocessor),registers.registerVisual(registers.PRIORITY.VISUAL.BRUSH,brushVisual),registers.registerAction({type:"brush",event:"brush",update:"updateVisual"},(function(payload,ecModel){ecModel.eachComponent({mainType:"brush",query:payload},(function(brushModel){brushModel.setAreas(payload.areas)}))})),registers.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},util.noop),registers.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},util.noop),registerFeature("brush",Brush)})),(0,extension.D)((function title_install_install(registers){registers.registerComponentModel(TitleModel),registers.registerComponentView(TitleView)})),(0,extension.D)((function timeline_install_install(registers){registers.registerComponentModel(timeline_SliderTimelineModel),registers.registerComponentView(timeline_SliderTimelineView),registers.registerSubTypeDefaulter("timeline",(function(){return"slider"})),function installTimelineAction(registers){registers.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},(function(payload,ecModel,api){var timelineModel=ecModel.getComponent("timeline");return timelineModel&&null!=payload.currentIndex&&(timelineModel.setCurrentIndex(payload.currentIndex),!timelineModel.get("loop",!0)&&timelineModel.isIndexMax()&&timelineModel.getPlayState()&&(timelineModel.setPlayState(!1),api.dispatchAction({type:"timelinePlayChange",playState:!1,from:payload.from}))),ecModel.resetOption("timeline",{replaceMerge:timelineModel.get("replaceMerge",!0)}),(0,util.defaults)({currentIndex:timelineModel.option.currentIndex},payload)})),registers.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},(function(payload,ecModel){var timelineModel=ecModel.getComponent("timeline");timelineModel&&null!=payload.playState&&timelineModel.setPlayState(payload.playState)}))}(registers),registers.registerPreprocessor(timelinePreprocessor)})),(0,extension.D)((function installMarkPoint_install(registers){registers.registerComponentModel(marker_MarkPointModel),registers.registerComponentView(marker_MarkPointView),registers.registerPreprocessor((function(opt){checkMarkerInSeries(opt.series,"markPoint")&&(opt.markPoint=opt.markPoint||{})}))})),(0,extension.D)((function installMarkLine_install(registers){registers.registerComponentModel(marker_MarkLineModel),registers.registerComponentView(marker_MarkLineView),registers.registerPreprocessor((function(opt){checkMarkerInSeries(opt.series,"markLine")&&(opt.markLine=opt.markLine||{})}))})),(0,extension.D)((function installMarkArea_install(registers){registers.registerComponentModel(marker_MarkAreaModel),registers.registerComponentView(marker_MarkAreaView),registers.registerPreprocessor((function(opt){checkMarkerInSeries(opt.series,"markArea")&&(opt.markArea=opt.markArea||{})}))})),(0,extension.D)((function legend_install_install(registers){(0,extension.D)(installLegendPlain_install),(0,extension.D)(installLegendScroll_install)})),(0,extension.D)((function dataZoom_install_install(registers){(0,extension.D)(installDataZoomInside_install),(0,extension.D)(installDataZoomSlider_install)})),(0,extension.D)(installDataZoomInside_install),(0,extension.D)(installDataZoomSlider_install),(0,extension.D)((function visualMap_install_install(registers){(0,extension.D)(installVisualMapContinuous_install),(0,extension.D)(installVisualMapPiecewise_install)})),(0,extension.D)(installVisualMapContinuous_install),(0,extension.D)(installVisualMapPiecewise_install),(0,extension.D)((function aria_install_install(registers){registers.registerPreprocessor(ariaPreprocessor),registers.registerVisual(registers.PRIORITY.VISUAL.ARIA,ariaVisual)})),(0,extension.D)((function transform_install_install(registers){registers.registerTransform(filterTransform),registers.registerTransform(sortTransform)})),(0,extension.D)(dataset_install.N),(0,extension.D)((function installUniversalTransition(registers){registers.registerUpdateLifecycle("series:beforeupdate",(function(ecMOdel,api,params){(0,util.each)((0,util_model.kF)(params.seriesTransition),(function(transOpt){(0,util.each)((0,util_model.kF)(transOpt.to),(function(finder){for(var series=params.updatedSeries,i=0;i<series.length;i++)(null!=finder.seriesIndex&&finder.seriesIndex===series[i].seriesIndex||null!=finder.seriesId&&finder.seriesId===series[i].id)&&(series[i][Series.V]=!0)}))}))})),registers.registerUpdateLifecycle("series:transition",(function(ecModel,api,params){var globalStore=getUniversalTransitionGlobalStore(api);if(globalStore.oldSeries&&params.updatedSeries&&params.optionChanged){var transitionOpt=params.seriesTransition;if(transitionOpt)(0,util.each)((0,util_model.kF)(transitionOpt),(function(opt){!function transitionSeriesFromOpt(transitionOpt,globalStore,params,api){var from=[],to=[];(0,util.each)((0,util_model.kF)(transitionOpt.from),(function(finder){var idx=querySeries(globalStore.oldSeries,finder);idx>=0&&from.push({dataGroupId:globalStore.oldDataGroupIds[idx],data:globalStore.oldData[idx],divide:getDivideShapeFromData(globalStore.oldData[idx]),groupIdDim:finder.dimension})})),(0,util.each)((0,util_model.kF)(transitionOpt.to),(function(finder){var idx=querySeries(params.updatedSeries,finder);if(idx>=0){var data=params.updatedSeries[idx].getData();to.push({dataGroupId:globalStore.oldDataGroupIds[idx],data,divide:getDivideShapeFromData(data),groupIdDim:finder.dimension})}})),from.length>0&&to.length>0&&transitionBetween(from,to,api)}(opt,globalStore,params,api)}));else{var updateBatches_1=function findTransitionSeriesBatches(globalStore,params){var updateBatches=(0,util.createHashMap)(),oldDataMap=(0,util.createHashMap)(),oldDataMapForSplit=(0,util.createHashMap)();return(0,util.each)(globalStore.oldSeries,(function(series,idx){var oldDataGroupId=globalStore.oldDataGroupIds[idx],oldData=globalStore.oldData[idx],transitionKey=getSeriesTransitionKey(series),transitionKeyStr=convertArraySeriesKeyToString(transitionKey);oldDataMap.set(transitionKeyStr,{dataGroupId:oldDataGroupId,data:oldData}),(0,util.isArray)(transitionKey)&&(0,util.each)(transitionKey,(function(key){oldDataMapForSplit.set(key,{key:transitionKeyStr,dataGroupId:oldDataGroupId,data:oldData})}))})),(0,util.each)(params.updatedSeries,(function(series){if(series.isUniversalTransitionEnabled()&&series.isAnimationEnabled()){var newDataGroupId=series.get("dataGroupId"),newData=series.getData(),transitionKey=getSeriesTransitionKey(series),transitionKeyStr=convertArraySeriesKeyToString(transitionKey),oldData=oldDataMap.get(transitionKeyStr);if(oldData)updateBatches.set(transitionKeyStr,{oldSeries:[{dataGroupId:oldData.dataGroupId,divide:getDivideShapeFromData(oldData.data),data:oldData.data}],newSeries:[{dataGroupId:newDataGroupId,divide:getDivideShapeFromData(newData),data:newData}]});else if((0,util.isArray)(transitionKey)){var oldSeries_1=[];(0,util.each)(transitionKey,(function(key){var oldData=oldDataMap.get(key);oldData.data&&oldSeries_1.push({dataGroupId:oldData.dataGroupId,divide:getDivideShapeFromData(oldData.data),data:oldData.data})})),oldSeries_1.length&&updateBatches.set(transitionKeyStr,{oldSeries:oldSeries_1,newSeries:[{dataGroupId:newDataGroupId,data:newData,divide:getDivideShapeFromData(newData)}]})}else{var oldData_1=oldDataMapForSplit.get(transitionKey);if(oldData_1){var batch=updateBatches.get(oldData_1.key);batch||(batch={oldSeries:[{dataGroupId:oldData_1.dataGroupId,data:oldData_1.data,divide:getDivideShapeFromData(oldData_1.data)}],newSeries:[]},updateBatches.set(oldData_1.key,batch)),batch.newSeries.push({dataGroupId:newDataGroupId,data:newData,divide:getDivideShapeFromData(newData)})}}}})),updateBatches}(globalStore,params);(0,util.each)(updateBatches_1.keys(),(function(key){var batch=updateBatches_1.get(key);transitionBetween(batch.oldSeries,batch.newSeries,api)}))}(0,util.each)(params.updatedSeries,(function(series){series[Series.V]&&(series[Series.V]=!1)}))}for(var allSeries=ecModel.getSeries(),savedSeries=globalStore.oldSeries=[],savedDataGroupIds=globalStore.oldDataGroupIds=[],savedData=globalStore.oldData=[],i=0;i<allSeries.length;i++){var data=allSeries[i].getData();data.count()<DATA_COUNT_THRESHOLD&&(savedSeries.push(allSeries[i]),savedDataGroupIds.push(allSeries[i].get("dataGroupId")),savedData.push(data))}}))})),(0,extension.D)(installLabelLayout.T)}}]);