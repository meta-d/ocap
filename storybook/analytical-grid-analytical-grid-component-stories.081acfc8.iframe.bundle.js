(self.webpackChunkocap=self.webpackChunkocap||[]).push([[7237],{"./packages/angular/analytical-grid/analytical-grid.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,":host {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n:host .ngm-card-header .actions {\n  opacity: 0.1;\n  position: relative;\n}\n:host .ngm-card-header .actions .mat-mdc-progress-spinner {\n  position: absolute;\n  right: 0;\n  margin: 5px;\n}\n:host:hover .ngm-card-header .actions {\n  opacity: 1;\n}\n\n.cell-value {\n  white-space: nowrap;\n}\n\n.mdc-data-table__header-cell.ngm-analytical-grid__measure .pivot-column-header-content {\n  flex: 1;\n  text-align: right;\n}\n\n.mdc-data-table__header-cell,\n.mat-mdc-cell {\n  white-space: nowrap;\n}\n\n.mdc-data-table__header-cell.ngm-measure,\n.mat-mdc-cell.ngm-measure {\n  text-align: right;\n}\n\n.ngm-card-content {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  position: relative;\n  overflow: auto;\n}\n\n.cdk-header-row.empty {\n  height: 0;\n  display: none;\n}\n\n.ngm-card-error {\n  height: 100%;\n}\n\n.ngm-analytical-grid__filtering {\n  flex-direction: column;\n  box-sizing: border-box;\n  display: flex;\n  place-content: stretch space-between;\n  align-items: stretch;\n}\n\n.cdk-cell.ngm-analytical-grid__measure {\n  text-align: right;\n  position: relative;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./packages/angular/core/services/csv.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function csvDownload(data,name,delimiter){const items=data,filename=name||"export.csv",d=delimiter||",",header=Array.from(new Set(items.reduce(((r,e)=>[...r,...Object.keys(e)]),[]))),csv=items.map((row=>header.map((fieldName=>JSON.stringify(0===row[fieldName]?0:row[fieldName]||""))).join(d)));csv.unshift(header.join(d));const csvStr=csv.join("\r\n"),blob=new Blob([csvStr],{type:"text/plain;charset=utf-8"}),link=document.createElement("a"),url=URL.createObjectURL(blob);link.href=url,link.download=filename,link.style.display="none",document.body.appendChild(link),link.click(),document.body.removeChild(link)}__webpack_require__.d(__webpack_exports__,{O:()=>csvDownload})},"./packages/angular/core/services/smart-filter-bar.service.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{N:()=>NgmSmartFilterBarService});var _NgmSmartFilterBarService,tslib__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/tslib/tslib.es6.js"),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/core/src/index.ts");let NgmSmartFilterBarService=((_NgmSmartFilterBarService=class NgmSmartFilterBarService extends _metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.QXJ{constructor(parent){super(parent)}ngOnDestroy(){super.onDestroy()}}).ctorParameters=()=>[{type:_NgmSmartFilterBarService,decorators:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.Optional},{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.SkipSelf}]}],_NgmSmartFilterBarService);NgmSmartFilterBarService=(0,tslib__WEBPACK_IMPORTED_MODULE_2__.gn)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.Injectable)(),(0,tslib__WEBPACK_IMPORTED_MODULE_2__.w6)("design:paramtypes",[NgmSmartFilterBarService])],NgmSmartFilterBarService)},"./packages/angular/i18n/zhHans.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{q:()=>ZhHans});const ZhHans={Ngm:{Common:{Add:"添加",Cancel:"取消",Apply:"应用",Reset:"重置",Search:"搜索",Select:"选择",Clear:"清空",Search_Placeholder:"请输入关键词",DisplayBehaviour_Description:"描述",DisplayBehaviour_DescriptionID:"描述 ID",DisplayBehaviour_IDDescription:"ID 描述",DisplayBehaviour_ID:"ID",DisplayBehaviour_Auto:"自动",SelectionType_Single:"单选",SelectionType_Multiple:"多选",Presentation_Flat:"平铺",Presentation_Hierarchy:"层级",HierarchySelectionMode_Individual:"单个",HierarchySelectionMode_SelfDescendants:"自己和后代",HierarchySelectionMode_DescendantsOnly:"只后代",HierarchySelectionMode_SelfChildren:"自己和子代",HierarchySelectionMode_ChildrenOnly:"只子代",Measures:"度量",None:"无",Default:"默认",Hierarchy:"层次结构",DisplayBehaviour:"显示行为",DisplayBehaviour_IDOnly:"编码"},AnalyticalCard:{Screenshot:"截图",DataDownload:"下载数据",Refresh:"刷新",DrillDown:"下钻",DrillLevel:"层级下钻",DrillDimension:"维度下钻",LinkAnalysis:"联动筛选",DataEmpty:"数据为空"},AnalyticalGrid:{DataDownload:"下载数据",SORT:"排序",MOVE:"移动",ASCENDING:"正序",DESCENDGING:"倒序",MOVELEFT:"向左",MOVERIGHT:"向右",Search:"搜索",SelectAll:"选择所有",Pin:"固定"},Controls:{ValueHelp:{Title:"为{{value}}设置过滤器",AvailableMembers:"可选成员",DisplayBehaviour:"展现形式",SelectedMembers:"选中成员",ClearSelection:"清空选择",ShowUnbookedMembers:"显示未分配成员",ShowAllMember:"显示‘所有’成员",ShowOnlyLeaves:"只显示叶子节点",ExcludeSelectedMembers:"排除选中成员",SelectionType:"选择类型",Presentation:"展现形式",HierarchySelectionMode:"层级选择模式",Hierarchy:"层次结构"}},Copilot:{Copilot:"副驾驶",AICopilot:"AI 副驾驶",EnableCopilot:"启用 Copilot",GetYourApiKey:"获取你的 API Key",ProvideOpenaiApiKey:"请提供 Openai API Key?",Provider:"提供商",YourAIPairProgrammer:"你的 AI 配对程序员!",LetYourAIPairProgrammerEdits:"让你的 AI 配对程序员修改一下!",SelectSomeCode:"选择代码，让你的 AI 配对程序员修改一下!",ThinkingHard:"努力思考中...",StopGenerating:"停止生成",ClearMessages:"清空消息",CharacterLength:"字数",Resubmit:"重新提交",Cancel:"取消",Model:"模型",Options:"选项",UseSystemPrompt:"使用系统提示",ExamplesOfPrompts:"提示语示例",APIKey:"API 密钥",APIHost:"API 主机",AskAICopilot:"向 AI 副驾驶询问问题",Prompt:"提示",SendPrompt:"发送提问",Placeholder:"询问副驾驶或输入 / 获取命令",ClearConversation:"清空会话",Ask:"提问",Copy:"复制",Regenerate:"重新生成",Common:"通用",PleaseSelectBusinessRole:"请选择一个业务角色",DefaultBusinessRole:{title:"通用",description:"通用业务角色"},Help:"帮助",NewChat:"新聊天",Update:"更新"},Entity:{SelectEntities:"选择数据集",SemanticModel:"语义模型",Cube:"多维数据集",AnnotatedCube:"增强过的多维数据集",MEASURE:"度量",SELECT_DIMENSION:"选择维度",MeasureFormatting:"度量格式",ShortNumber:"缩写数字",Decimals:"小数位",Unit:"单位",UseUnderlyingUnit:"使用模型单位",DigitsInfo:"数字格式"},EntitySchema:{Parameters:"参数",Measures:"度量",Properties:"属性"},Formula:{Editor:{EditFormula:"编辑公式",Format:"格式化",Help:"帮助"}},Table:{Select:"选择",NoData:"无数据",MatchingFilter:'匹配过滤条件"{{value}}"',firstPageLabel:"第一",itemsPerPageLabel:"每页",lastPageLabel:"最后",nextPageLabel:"下一页",previousPageLabel:"上一页",rangeLabel0:"页 1 共 1",pageLabel:"页",ofLabel:"共"},DatePicker:{Date:"日期",Year:"年",Quarter:"季",Month:"月",Week:"周",Day:"日",From:"从",To:"至"},TimeFilter:{SET_DATE_RANGE:"为 {{property}} 设置时间区间",CURRENT_DATE:"当前日期",SYSTEM_DATE:"系统时间",USER_CURRENT_DATE:"用户当前时间",ADD_TIME_RANGE:"添加时间区间",RANGE:"区间",RANGE_TYPE:"区间类型",RANGE_TYPE_STANDARD:"标准",RANGE_TYPE_OFFSET:"偏移",GRANULARITY:"粒度",YEAR:"年",QUARTER:"季度",MONTH:"月",WEEK:"周",DAY:"日",LOOK_BACK:"回顾",LOOK_AHEAD:"展望",CURRENT_PERIOD:"当前时间",FORMATTER:"格式",OFFSET_DIRECTION:"偏移方向",OFFSET_AMOUNT:"偏移量",SETTINGS_FOR_USERS:"为用户设置",ALLOW_MODIFY_SELECTIONS:"允许查看者修改选择",SELECTION_TYPE:"选择类型",SELECTION_TYPE_MULTIPLE:"多选",SELECTION_TYPE_SINGLE:"单选",TODAY:"当前期间",Year:"年",Quarter:"季度",Month:"月",Week:"周",Day:"日",Today:"今天"},AdvancedSlicer:{TITLE:"高级切片器",CONTEXT:"上下文",OPERATOR:"操作符",ENABLE_OTHER:"汇总其它项",VALUE:"值",VALUE_FROM:"从",VALUE_TO:"至",MEASURE:"度量",MeasureSelectPlaceholder:"选择或新建一个度量",Equal:"等于",NotEqual:"不等于",LessThan:"小于",GreaterThan:"大于",LessEqual:"小于等于",GreaterEqual:"大于等于",Between:"介于",NotBetween:"不介于",TopCount:"前 N 个",BottomCount:"后 N 个",TopPercent:"前百分比的",BottomPercent:"后百分比的",TopSum:"前总数",BottomSum:"后总数"},Property:{PARAMETER:"参数",PARAMETERS:"参数",MEASURE:"度量",MEASURES:"度量",MeasureGroup:"度量组",INDICATORS:"指标",CREATE_PARAMETER:"创建参数",EditParameter:"编辑参数",CALCULATIONS:"计算度量",DIMENSION:"维度",DIMENSIONS:"维度",ADD_DIMENSION:"添加维度",MEMBERS:"成员",HIERARCHY:"层次结构",ADD_PARAMETER_MEMBER:"添加成员",MEASURE_CONTROLS:"度量控制",CREATE_CALCULATION:"创建计算",CREATE_MEASURE_CONTROL:"创建度量控制",REFERENCE_LINE:"参考线",Input:"输入",Select:"选择",Dimensions:"维度",Name:"名称",NameRequired:"名称必输或已存在",Caption:"标签",Value:"值",DefaultValue:"默认值",ValueType:"值类型",DisplayAs:"显示为",Label:"文本字段",Formatter:"格式设置",EditFormula:"编辑公式",UnbookedData:"无成员数据",ZeroSuppression:"清零",PropertyList:"属性列表",DisplayHierarchy:"包含父级层级",CreateParameter:"创建参数",CurrentMember:"当前成员",PreviousNMember:"之前第 N 个成员",NextNMember:"之后第 N 个成员",ParallelMember:"平行成员",AncestorMember:"祖先成员",SelectByMembers:"选择成员",NewCalculationInputControl:"新建计算输入",NthMember:"值 / 第 N 个",IsDefault:"默认",Default:"默认",Auto:"自动","Description and ID":"名称+ID","Description Only":"名称","ID Only":"ID",Description:"描述",Order:"排序",None:"无",Order_ASC:"正序",Order_DESC:"倒序",Dimension:"维度",AvailableMembers:"可用成员",DimensionNotFound:"在数据集‘{{cube}}’中未找到维度‘{{dimension}}’",DIMENSION_MEASURE:"维度/度量",Parameter:"参数","Measure Control":"度量控制",Measure:"度量",Calculation:"计算",Hierarchy:"层次结构",Level:"层级","Measure Group":"度量组",Indicator:"指标",Calendar:"日历","Address.Country":"国家"},MeasureSelect:{EditCalculationMeasure:"编辑计算度量",NewCalculationMeasure:"新建计算度量"},Calculation:{TITLE:"计算编辑器",TYPE:"类型",Name:"名称",NameRequired:"名称必输或已存在",Caption:"标签",FUNCTIONS:"函数",DIMENSION_MEMBERS:"维度成员",CALCULATED_MEMBERS:"计算成员",PARAMETERS:"参数",CALCULATED_MEASURE:"计算公式",RESTRICTED_MEASURE:"受限度量",VARIANCE_MEASURE:"差值度量",AGGREGATION:"聚合",DIMENSION_TO_MEASURE:"维度转度量",MEASURE_CONTROL:"度量控制",PROPERTIES:"属性",OPERATION:"运算",VALUE:"值",AGGREGATION_DIMENSIONS:"聚合维度",ADD_DIMENSION:"添加维度",SELECTION_CONTEXT:"选择上下文",ENABLE_CONSTANT_SELECTION:"启用常量选择",EDIT_FORMULA:"编辑公式",ToggleSidebar:"切换侧边栏",UseConditionalAggregation:"使用条件聚合",ConditionalDimensions:"条件维度",ExcludeConditions:"排除条件",Compare:"比",To:"较",BaseDimension:"基准维度",SetNoDataasZero:"将无数据当作零",CalculateasPercentage:"计算为百分比",DirectDivide:"直接除",AbsoluteBaseValue:"绝对化基值",DivideBy:"除以",CompareValueA:"比 (A)",ToValueB:"较 (B)",Measure:"度量",RestrictiveConditions:"限定条件",ConstantSelectionTootip:"锁定限定条件维度成员,使其不会被用户上下文切片器所覆盖",Dimension:"维度",MeasureSelectOptions:"度量选择选项",ConditionalAggregation:"条件聚合",Unit:"单位",Formulas:"公式",MeasureSelectPlaceholder:"选择或新建一个度量",MeasureIsRequired:"度量必选"},AdvancedFilter:{Title:"组合切片器",AND:"且",OR:"或",GROUP:"组合",Operator:"操作符",Value:"值",Condition:"条件",AddGroup:'"且"组合',OrGroup:'"或"组合',EndGroup:"结束组合",DeleteGroup:"删除组合",Tips:"使用 且/或 创建条件组合"},Selection:{Slicers:"切片器",AdvancedFilter:"组合切片器",CombinationSlicer:"组合切片器",AdvancedSlicer:"高级切片器",DimensionMembers:"维度成员",TimeRanges:"动态时间范围",OnContext:"基于",SLICERS_BAR:{TITLE:"过滤器"},SLICER:{ADVANCED_SLICER:"高级切片器",ADVANCED_FILTER:"组合切片器"},DateFunctions:{SYSTEMTIME:"系统时间",TODAY:"今天"}}}}},"./packages/angular/mock/agent-mock.service.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{ch:()=>MockAgent,fJ:()=>CUBE_SALES_ORDER_NAME,nH:()=>CUBE_SALES_ORDER});var tslib__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/tslib/tslib.es6.js"),_angular_core__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/core/src/index.ts"),_ngneat_falso__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@ngneat/falso/index.esm.js"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Subject.js"),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/of.js");const columns=[{name:"OrderId",label:"订单号",type:"string"},{name:"product",label:"产品",type:"string"},{name:"productCategory",label:"产品类别",type:"string"},{name:"Department",label:"部门",type:"string"},{name:"sales",label:"销售额",type:"number"},{name:"quantity",label:"销售量",type:"number"}],SalesOrder={name:"SalesOrder",label:"销售订单",columns},SalesOrder10s={name:"SalesOrder10s",label:"销售订单10秒",columns},SalesOrder3s={name:"SalesOrder3s",label:"销售订单3秒",columns},CUBE_SALES_ORDER_NAME="SalesOrder",CUBE_SALES_ORDER={name:CUBE_SALES_ORDER_NAME,caption:"销售订单",visible:!0,tables:[{name:"sales_order"}],dimensions:[{name:"Product",caption:"产品",hierarchies:[{name:"",caption:"产品",levels:[{name:"Product",column:"product",captionColumn:"ProductName"}]}]},{name:"Department",caption:"部门",hierarchies:[{name:"",levels:[{name:"Department",column:"department",captionColumn:"DepartmentName"}]}]}],measures:[{name:"Sales",column:"sales",caption:"销售额"},{name:"Cost",column:"cost",caption:"成本"}]};let MockAgent=class MockAgent{constructor(){this.type=_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.buO.Browser,this.error$=new rxjs__WEBPACK_IMPORTED_MODULE_1__.x}selectStatus(){return(0,rxjs__WEBPACK_IMPORTED_MODULE_2__.of)(_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.dJT.ONLINE)}selectError(){return this.error$}error(err){this.error$.next(err)}request(dataSource,options){return new Promise(((resolve,reject)=>{if("get"===options.method){if("schema"===options.url)switch(options.table){case SalesOrder10s.name:return resolve([{schema:"default",tables:[SalesOrder10s]}]);case SalesOrder3s.name:return resolve([{schema:"default",tables:[SalesOrder3s]}]);case SalesOrder.name:return resolve([{schema:"default",tables:[SalesOrder]}]);case"Empty":return resolve([{schema:"default",tables:[{name:"Empty",columns:[]}]}]);default:return'SELECT * FROM "SalesOrder"'===options.statement?resolve([{schema:"default",tables:[SalesOrder]}]):resolve([{schema:"default",tables:[{name:"Inventory",label:"库存",columns:[{name:"product",label:"产品",type:"string"},{name:"productCategory",label:"产品类别",type:"string"},{name:"sales",label:"销售额",type:"number"},{name:"quantity",label:"销售量",type:"number"}]}]}])}}else if("post"===options.method&&"query"===options.url){const results=[];if(options.body?.statement?.includes("AS `memberKey`")){const data=[];return(0,_ngneat_falso__WEBPACK_IMPORTED_MODULE_3__.mJl)({length:3}).forEach((product=>{data.push({memberKey:product,memberCaption:product}),(0,_ngneat_falso__WEBPACK_IMPORTED_MODULE_3__.mJl)({length:3}).filter((product2=>!data.find((item=>item.memberKey===product2)))).forEach((product2=>{data.push({memberKey:product2,memberCaption:product2,parentKey:product}),(0,_ngneat_falso__WEBPACK_IMPORTED_MODULE_3__.mJl)({length:5}).filter((product=>!data.find((item=>item.memberKey===product)))).forEach((product3=>{data.push({memberKey:product3,memberCaption:product3,parentKey:product2})}))}))})),resolve({data,columns:[{name:"memberKey",label:"成员 Key",type:"string"},{name:"parentKey",label:"父级 Key",type:"string"}]})}if(options.body?.statement?.includes('"Department" AS "Department"')){let departmentCode=0;return(0,_ngneat_falso__WEBPACK_IMPORTED_MODULE_3__.T1i)({length:5}).forEach((name=>{departmentCode++;const department1=departmentCode;results.push({Department:department1,DepartmentName:name,quantity:(0,_ngneat_falso__WEBPACK_IMPORTED_MODULE_3__.Qyw)()}),(0,_ngneat_falso__WEBPACK_IMPORTED_MODULE_3__.T1i)({length:5}).forEach((name=>{departmentCode++;const department2=departmentCode;results.push({Department:department2,DepartmentName:name,DepartmentParent:department1,quantity:(0,_ngneat_falso__WEBPACK_IMPORTED_MODULE_3__.Qyw)()}),(0,_ngneat_falso__WEBPACK_IMPORTED_MODULE_3__.T1i)({length:3}).forEach((name=>{departmentCode++;const department3=departmentCode;results.push({Department:department3,DepartmentName:name,DepartmentParent:department2,quantity:(0,_ngneat_falso__WEBPACK_IMPORTED_MODULE_3__.Qyw)()})}))}))})),resolve({data:results,columns:[{name:"Department",label:"部门",type:"string"},{name:"DepartmentName",label:"部门",type:"string"},{name:"DepartmentParent",label:"上级部门",type:"string"}]})}return(0,_ngneat_falso__WEBPACK_IMPORTED_MODULE_3__.ALu)({length:3}).forEach((productCategory=>{const DepartmentParent=(0,_ngneat_falso__WEBPACK_IMPORTED_MODULE_3__.T1i)();(0,_ngneat_falso__WEBPACK_IMPORTED_MODULE_3__.mJl)({length:5}).forEach((product=>{results.push({OrderId:(0,_ngneat_falso__WEBPACK_IMPORTED_MODULE_3__.s8S)(),"[Product]":(0,_ngneat_falso__WEBPACK_IMPORTED_MODULE_3__.s8S)(),"[Product].[MEMBER_CAPTION]":product,productCategory,Department:(0,_ngneat_falso__WEBPACK_IMPORTED_MODULE_3__.T1i)(),DepartmentParent,Sales:(0,_ngneat_falso__WEBPACK_IMPORTED_MODULE_3__.Qyw)(),quantity:(0,_ngneat_falso__WEBPACK_IMPORTED_MODULE_3__.Qyw)()})}))})),options.body?.statement?.includes(SalesOrder10s.name)?void setTimeout((()=>{resolve({data:results,columns})}),1e4):options.body?.statement?.includes(SalesOrder3s.name)?void setTimeout((()=>{resolve({data:results,columns})}),3e3):options.body?.statement?.includes("empty_")?resolve({data:[],columns:[]}):void setTimeout((()=>{resolve({data:results,columns:[{name:"OrderId",label:"订单号",type:"string"},{name:"[Product]",label:"产品",type:"string"},{name:"productCategory",label:"产品类别",type:"string"},{name:"[Department]",label:"部门",type:"string"},{name:"[DepartmentParent]",label:"上级部门",type:"string"}]})}),1e3)}resolve({})}))}};MockAgent=(0,tslib__WEBPACK_IMPORTED_MODULE_4__.gn)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_5__.Injectable)()],MockAgent)},"./packages/angular/mock/translate.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{qX:()=>provideTranslate,zd:()=>zhHansLanguage});var _angular_common_http__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@angular/common/fesm2022/http.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@ngx-translate/core/dist/fesm2022/ngx-translate-core.mjs"),rxjs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/of.js"),_metad_ocap_angular_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/angular/core/i18n/missing-tanslation.ts"),_metad_ocap_angular_i18n__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/angular/i18n/zhHans.ts");const zhHansLanguage="zh-Hans";class CustomTranslateLoader{getTranslation(lang){return console.log(lang),lang===zhHansLanguage?(0,rxjs__WEBPACK_IMPORTED_MODULE_0__.of)(_metad_ocap_angular_i18n__WEBPACK_IMPORTED_MODULE_1__.q):(0,rxjs__WEBPACK_IMPORTED_MODULE_0__.of)(null)}}function provideTranslate(defaultLanguage=zhHansLanguage){return(0,_angular_core__WEBPACK_IMPORTED_MODULE_2__.importProvidersFrom)(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_3__.aw.forRoot({missingTranslationHandler:{provide:_ngx_translate_core__WEBPACK_IMPORTED_MODULE_3__.gC,useClass:_metad_ocap_angular_core__WEBPACK_IMPORTED_MODULE_4__.l},loader:{provide:_ngx_translate_core__WEBPACK_IMPORTED_MODULE_3__.Zw,useClass:CustomTranslateLoader,deps:[_angular_common_http__WEBPACK_IMPORTED_MODULE_5__.eN]},defaultLanguage}))}},"./packages/angular/analytical-grid/analytical-grid.component.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{A1Primary:()=>A1Primary,A2Sticky:()=>A2Sticky,A3StickyGrid:()=>A3StickyGrid,DensityCompact:()=>DensityCompact,DisplayHierarchy:()=>DisplayHierarchy,Error:()=>analytical_grid_component_stories_Error,Loading:()=>Loading,MultipleMeasures:()=>MultipleMeasures,Paging:()=>Paging,PagingCompact:()=>PagingCompact,PagingError:()=>PagingError,ShowToolbar:()=>ShowToolbar,Sortable:()=>Sortable,SwitchTemplate:()=>SwitchTemplate,__namedExportsOrder:()=>__namedExportsOrder,default:()=>analytical_grid_component_stories});var asyncToGenerator=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.js"),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),http=__webpack_require__("./node_modules/@angular/common/fesm2022/http.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),fesm2022_button=__webpack_require__("./node_modules/@angular/material/fesm2022/button.mjs"),animations=__webpack_require__("./node_modules/@angular/platform-browser/fesm2022/animations.mjs"),core_module=__webpack_require__("./packages/angular/core/core.module.ts"),core_service=__webpack_require__("./packages/angular/core/core.service.ts"),types=__webpack_require__("./packages/angular/core/types.ts"),displayDensity=__webpack_require__("./packages/angular/core/directives/displayDensity.ts"),src=__webpack_require__("./packages/core/src/index.ts"),dist=__webpack_require__("./node_modules/@storybook/angular/dist/index.mjs"),translate=__webpack_require__("./packages/angular/mock/translate.ts"),agent_mock_service=__webpack_require__("./packages/angular/mock/agent-mock.service.ts"),classPrivateFieldInitSpec=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/classPrivateFieldInitSpec.js"),classPrivateFieldSet2=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/classPrivateFieldSet2.js");var _NgmAnalyticsBusinessService,analytical_grid_componentngResource=__webpack_require__("./packages/angular/analytical-grid/analytical-grid.component.scss?ngResource"),analytical_grid_componentngResource_default=__webpack_require__.n(analytical_grid_componentngResource),a11y=__webpack_require__("./node_modules/@angular/cdk/fesm2022/a11y.mjs"),coercion=__webpack_require__("./node_modules/@angular/cdk/fesm2022/coercion.mjs"),tree=__webpack_require__("./node_modules/@angular/cdk/fesm2022/tree.mjs"),rxjs_interop=__webpack_require__("./node_modules/@angular/core/fesm2022/rxjs-interop.mjs"),paginator=__webpack_require__("./node_modules/@angular/material/fesm2022/paginator.mjs"),sort=__webpack_require__("./node_modules/@angular/material/fesm2022/sort.mjs"),fesm2022_tree=__webpack_require__("./node_modules/@angular/material/fesm2022/tree.mjs"),csv=__webpack_require__("./packages/angular/core/services/csv.ts"),ngx_translate_core=__webpack_require__("./node_modules/@ngx-translate/core/dist/fesm2022/ngx-translate-core.mjs"),minBy=__webpack_require__("./node_modules/lodash-es/minBy.js"),maxBy=__webpack_require__("./node_modules/lodash-es/maxBy.js"),orderBy=__webpack_require__("./node_modules/lodash-es/orderBy.js"),BehaviorSubject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js"),combineLatest=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/combineLatest.js"),of=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/of.js"),firstValueFrom=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/firstValueFrom.js"),map=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),combineLatestWith=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/combineLatestWith.js"),shareReplay=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/shareReplay.js"),filter=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/filter.js"),withLatestFrom=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/withLatestFrom.js"),debounceTime=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/debounceTime.js"),smart_filter_bar_service=__webpack_require__("./packages/angular/core/services/smart-filter-bar.service.ts");let NgmAnalyticsBusinessService=((_NgmAnalyticsBusinessService=class NgmAnalyticsBusinessService extends src.St3{constructor(dsCoreService,smartFilterbar){super(dsCoreService,smartFilterbar),this.dsCoreService=dsCoreService}ngOnDestroy(){super.onDestroy()}}).ctorParameters=()=>[{type:core_service.q},{type:smart_filter_bar_service.N,decorators:[{type:core.Optional}]}],_NgmAnalyticsBusinessService);NgmAnalyticsBusinessService=(0,tslib_es6.gn)([(0,core.Injectable)(),(0,tslib_es6.w6)("design:paramtypes",[core_service.q,smart_filter_bar_service.N])],NgmAnalyticsBusinessService);var NxChromaticType,ordinal=__webpack_require__("./node_modules/d3-scale/src/ordinal.js"),sequential=__webpack_require__("./node_modules/d3-scale/src/sequential.js"),category10=__webpack_require__("./node_modules/d3-scale-chromatic/src/categorical/category10.js"),Accent=__webpack_require__("./node_modules/d3-scale-chromatic/src/categorical/Accent.js"),Dark2=__webpack_require__("./node_modules/d3-scale-chromatic/src/categorical/Dark2.js"),Paired=__webpack_require__("./node_modules/d3-scale-chromatic/src/categorical/Paired.js"),Pastel1=__webpack_require__("./node_modules/d3-scale-chromatic/src/categorical/Pastel1.js"),Pastel2=__webpack_require__("./node_modules/d3-scale-chromatic/src/categorical/Pastel2.js"),Set1=__webpack_require__("./node_modules/d3-scale-chromatic/src/categorical/Set1.js"),Set2=__webpack_require__("./node_modules/d3-scale-chromatic/src/categorical/Set2.js"),Set3=__webpack_require__("./node_modules/d3-scale-chromatic/src/categorical/Set3.js"),BrBG=__webpack_require__("./node_modules/d3-scale-chromatic/src/diverging/BrBG.js"),PRGn=__webpack_require__("./node_modules/d3-scale-chromatic/src/diverging/PRGn.js"),PiYG=__webpack_require__("./node_modules/d3-scale-chromatic/src/diverging/PiYG.js"),Spectral=__webpack_require__("./node_modules/d3-scale-chromatic/src/diverging/Spectral.js"),RdBu=__webpack_require__("./node_modules/d3-scale-chromatic/src/diverging/RdBu.js"),RdGy=__webpack_require__("./node_modules/d3-scale-chromatic/src/diverging/RdGy.js"),RdYlBu=__webpack_require__("./node_modules/d3-scale-chromatic/src/diverging/RdYlBu.js"),RdYlGn=__webpack_require__("./node_modules/d3-scale-chromatic/src/diverging/RdYlGn.js"),PuOr=__webpack_require__("./node_modules/d3-scale-chromatic/src/diverging/PuOr.js"),Blues=__webpack_require__("./node_modules/d3-scale-chromatic/src/sequential-single/Blues.js"),Greens=__webpack_require__("./node_modules/d3-scale-chromatic/src/sequential-single/Greens.js"),Greys=__webpack_require__("./node_modules/d3-scale-chromatic/src/sequential-single/Greys.js"),Oranges=__webpack_require__("./node_modules/d3-scale-chromatic/src/sequential-single/Oranges.js"),Purples=__webpack_require__("./node_modules/d3-scale-chromatic/src/sequential-single/Purples.js"),Reds=__webpack_require__("./node_modules/d3-scale-chromatic/src/sequential-single/Reds.js"),viridis=__webpack_require__("./node_modules/d3-scale-chromatic/src/sequential-multi/viridis.js"),rainbow=__webpack_require__("./node_modules/d3-scale-chromatic/src/sequential-multi/rainbow.js"),cubehelix=__webpack_require__("./node_modules/d3-scale-chromatic/src/sequential-multi/cubehelix.js"),BuGn=__webpack_require__("./node_modules/d3-scale-chromatic/src/sequential-multi/BuGn.js"),BuPu=__webpack_require__("./node_modules/d3-scale-chromatic/src/sequential-multi/BuPu.js"),GnBu=__webpack_require__("./node_modules/d3-scale-chromatic/src/sequential-multi/GnBu.js"),OrRd=__webpack_require__("./node_modules/d3-scale-chromatic/src/sequential-multi/OrRd.js"),PuBuGn=__webpack_require__("./node_modules/d3-scale-chromatic/src/sequential-multi/PuBuGn.js"),PuBu=__webpack_require__("./node_modules/d3-scale-chromatic/src/sequential-multi/PuBu.js"),PuRd=__webpack_require__("./node_modules/d3-scale-chromatic/src/sequential-multi/PuRd.js"),RdPu=__webpack_require__("./node_modules/d3-scale-chromatic/src/sequential-multi/RdPu.js"),YlGnBu=__webpack_require__("./node_modules/d3-scale-chromatic/src/sequential-multi/YlGnBu.js"),YlGn=__webpack_require__("./node_modules/d3-scale-chromatic/src/sequential-multi/YlGn.js"),YlOrBr=__webpack_require__("./node_modules/d3-scale-chromatic/src/sequential-multi/YlOrBr.js"),YlOrRd=__webpack_require__("./node_modules/d3-scale-chromatic/src/sequential-multi/YlOrRd.js"),sinebow=__webpack_require__("./node_modules/d3-scale-chromatic/src/sequential-multi/sinebow.js");!function(NxChromaticType){NxChromaticType.Single="Single",NxChromaticType.Sequential="Sequential",NxChromaticType.Categorical="Categorical"}(NxChromaticType||(NxChromaticType={}));const CHROMATICS=[{provide:1,useValue:{group:"Categorical",name:"Category10",type:NxChromaticType.Categorical,value:category10.Z},multi:!0},{provide:1,useValue:{group:"Categorical",name:"Accent",type:NxChromaticType.Categorical,value:Accent.Z},multi:!0},{provide:1,useValue:{group:"Categorical",name:"Dark2",type:NxChromaticType.Categorical,value:Dark2.Z},multi:!0},{provide:1,useValue:{group:"Categorical",name:"Paired",type:NxChromaticType.Categorical,value:Paired.Z},multi:!0},{provide:1,useValue:{group:"Categorical",name:"Pastel1",type:NxChromaticType.Categorical,value:Pastel1.Z},multi:!0},{provide:1,useValue:{group:"Categorical",name:"Pastel2",type:NxChromaticType.Categorical,value:Pastel2.Z},multi:!0},{provide:1,useValue:{group:"Categorical",name:"Set1",type:NxChromaticType.Categorical,value:Set1.Z},multi:!0},{provide:1,useValue:{group:"Categorical",name:"Set2",type:NxChromaticType.Categorical,value:Set2.Z},multi:!0},{provide:1,useValue:{group:"Categorical",name:"Set3",type:NxChromaticType.Categorical,value:Set3.Z},multi:!0},{provide:1,useValue:{group:"Diverging",name:"BrBG",type:NxChromaticType.Sequential,value:BrBG.Z},multi:!0},{provide:1,useValue:{group:"Diverging",name:"PRGn",type:NxChromaticType.Sequential,value:PRGn.Z},multi:!0},{provide:1,useValue:{group:"Diverging",name:"PiYG",type:NxChromaticType.Sequential,value:PiYG.Z},multi:!0},{provide:1,useValue:{group:"Diverging",name:"Spectral",type:NxChromaticType.Sequential,value:Spectral.Z},multi:!0},{provide:1,useValue:{group:"Diverging",name:"RdBu",type:NxChromaticType.Sequential,value:RdBu.Z},multi:!0},{provide:1,useValue:{group:"Diverging",name:"RdGy",type:NxChromaticType.Sequential,value:RdGy.Z},multi:!0},{provide:1,useValue:{group:"Diverging",name:"RdYlBu",type:NxChromaticType.Sequential,value:RdYlBu.Z},multi:!0},{provide:1,useValue:{group:"Diverging",name:"RdYlGn",type:NxChromaticType.Sequential,value:RdYlGn.Z},multi:!0},{provide:1,useValue:{group:"Diverging",name:"PuOr",type:NxChromaticType.Sequential,value:PuOr.Z},multi:!0},{provide:1,useValue:{group:"Sequential (Single Hue)",name:"Blues",type:NxChromaticType.Sequential,value:Blues.Z},multi:!0},{provide:1,useValue:{group:"Sequential (Single Hue)",name:"Greens",type:NxChromaticType.Sequential,value:Greens.Z},multi:!0},{provide:1,useValue:{group:"Sequential (Single Hue)",name:"Greys",type:NxChromaticType.Sequential,value:Greys.Z},multi:!0},{provide:1,useValue:{group:"Sequential (Single Hue)",name:"Oranges",type:NxChromaticType.Sequential,value:Oranges.Z},multi:!0},{provide:1,useValue:{group:"Sequential (Single Hue)",name:"Purples",type:NxChromaticType.Sequential,value:Purples.Z},multi:!0},{provide:1,useValue:{group:"Sequential (Single Hue)",name:"Reds",type:NxChromaticType.Sequential,value:Reds.Z},multi:!0},{provide:1,useValue:{group:"Sequential (Multi-Hue)",name:"Viridis",type:NxChromaticType.Sequential,value:viridis.ZP},multi:!0},{provide:1,useValue:{group:"Sequential (Multi-Hue)",name:"Inferno",type:NxChromaticType.Sequential,value:viridis.yy},multi:!0},{provide:1,useValue:{group:"Sequential (Multi-Hue)",name:"Magma",type:NxChromaticType.Sequential,value:viridis.uX},multi:!0},{provide:1,useValue:{group:"Sequential (Multi-Hue)",name:"Plasma",type:NxChromaticType.Sequential,value:viridis.zD},multi:!0},{provide:1,useValue:{group:"Sequential (Multi-Hue)",name:"Warm",type:NxChromaticType.Sequential,value:rainbow.s7},multi:!0},{provide:1,useValue:{group:"Sequential (Multi-Hue)",name:"Cool",type:NxChromaticType.Sequential,value:rainbow.H7},multi:!0},{provide:1,useValue:{group:"Sequential (Multi-Hue)",name:"Cubehelix",type:NxChromaticType.Sequential,value:cubehelix.Z},multi:!0},{provide:1,useValue:{group:"Sequential (Multi-Hue)",name:"BuGn",type:NxChromaticType.Sequential,value:BuGn.Z},multi:!0},{provide:1,useValue:{group:"Sequential (Multi-Hue)",name:"BuPu",type:NxChromaticType.Sequential,value:BuPu.Z},multi:!0},{provide:1,useValue:{group:"Sequential (Multi-Hue)",name:"GnBu",type:NxChromaticType.Sequential,value:GnBu.Z},multi:!0},{provide:1,useValue:{group:"Sequential (Multi-Hue)",name:"OrRd",type:NxChromaticType.Sequential,value:OrRd.Z},multi:!0},{provide:1,useValue:{group:"Sequential (Multi-Hue)",name:"PuBuGn",type:NxChromaticType.Sequential,value:PuBuGn.Z},multi:!0},{provide:1,useValue:{group:"Sequential (Multi-Hue)",name:"PuBu",type:NxChromaticType.Sequential,value:PuBu.Z},multi:!0},{provide:1,useValue:{group:"Sequential (Multi-Hue)",name:"PuRd",type:NxChromaticType.Sequential,value:PuRd.Z},multi:!0},{provide:1,useValue:{group:"Sequential (Multi-Hue)",name:"RdPu",type:NxChromaticType.Sequential,value:RdPu.Z},multi:!0},{provide:1,useValue:{group:"Sequential (Multi-Hue)",name:"YlGnBu",type:NxChromaticType.Sequential,value:YlGnBu.Z},multi:!0},{provide:1,useValue:{group:"Sequential (Multi-Hue)",name:"YlGn",type:NxChromaticType.Sequential,value:YlGn.Z},multi:!0},{provide:1,useValue:{group:"Sequential (Multi-Hue)",name:"YlOrBr",type:NxChromaticType.Sequential,value:YlOrBr.Z},multi:!0},{provide:1,useValue:{group:"Sequential (Multi-Hue)",name:"YlOrRd",type:NxChromaticType.Sequential,value:YlOrRd.Z},multi:!0},{provide:1,useValue:{group:"Cyclical",name:"Rainbow",value:rainbow.ZP},multi:!0},{provide:1,useValue:{group:"Cyclical",name:"Sinebow",value:sinebow.Z},multi:!0}];var table=__webpack_require__("./node_modules/@angular/material/fesm2022/table.mjs");class NgmFlatTableDataSource extends table.by{constructor(){super(...arguments),this.sortingDataAccessor=(data,sortHeaderId)=>{const cell=data[sortHeaderId],value="string"==typeof cell?cell:cell?.value;if((0,coercion.t6)(value)){const numberValue=Number(value);return numberValue<9007199254740991?numberValue:value}return value}}}var INUMBER="INUMBER",IOP1="IOP1",IOP2="IOP2",IOP3="IOP3",IVAR="IVAR",IVARNAME="IVARNAME",IFUNCALL="IFUNCALL",IFUNDEF="IFUNDEF",IEXPR="IEXPR",IEXPREVAL="IEXPREVAL",IMEMBER="IMEMBER",IENDSTATEMENT="IENDSTATEMENT",IARRAY="IARRAY";function Instruction(type,value){this.type=type,this.value=null!=value?value:0}function unaryInstruction(value){return new Instruction(IOP1,value)}function binaryInstruction(value){return new Instruction(IOP2,value)}function ternaryInstruction(value){return new Instruction(IOP3,value)}function simplify(tokens,unaryOps,binaryOps,ternaryOps,values){for(var n1,n2,n3,f,nstack=[],newexpression=[],i=0;i<tokens.length;i++){var item=tokens[i],type=item.type;if(type===INUMBER||type===IVARNAME)Array.isArray(item.value)?nstack.push.apply(nstack,simplify(item.value.map((function(x){return new Instruction(INUMBER,x)})).concat(new Instruction(IARRAY,item.value.length)),unaryOps,binaryOps,ternaryOps,values)):nstack.push(item);else if(type===IVAR&&values.hasOwnProperty(item.value))item=new Instruction(INUMBER,values[item.value]),nstack.push(item);else if(type===IOP2&&nstack.length>1)n2=nstack.pop(),n1=nstack.pop(),f=binaryOps[item.value],item=new Instruction(INUMBER,f(n1.value,n2.value)),nstack.push(item);else if(type===IOP3&&nstack.length>2)n3=nstack.pop(),n2=nstack.pop(),n1=nstack.pop(),"?"===item.value?nstack.push(n1.value?n2.value:n3.value):(f=ternaryOps[item.value],item=new Instruction(INUMBER,f(n1.value,n2.value,n3.value)),nstack.push(item));else if(type===IOP1&&nstack.length>0)n1=nstack.pop(),f=unaryOps[item.value],item=new Instruction(INUMBER,f(n1.value)),nstack.push(item);else if(type===IEXPR){for(;nstack.length>0;)newexpression.push(nstack.shift());newexpression.push(new Instruction(IEXPR,simplify(item.value,unaryOps,binaryOps,ternaryOps,values)))}else if(type===IMEMBER&&nstack.length>0)n1=nstack.pop(),nstack.push(new Instruction(INUMBER,n1.value[item.value]));else{for(;nstack.length>0;)newexpression.push(nstack.shift());newexpression.push(item)}}for(;nstack.length>0;)newexpression.push(nstack.shift());return newexpression}function substitute(tokens,variable,expr){for(var newexpression=[],i=0;i<tokens.length;i++){var item=tokens[i],type=item.type;if(type===IVAR&&item.value===variable)for(var j=0;j<expr.tokens.length;j++){var replitem,expritem=expr.tokens[j];replitem=expritem.type===IOP1?unaryInstruction(expritem.value):expritem.type===IOP2?binaryInstruction(expritem.value):expritem.type===IOP3?ternaryInstruction(expritem.value):new Instruction(expritem.type,expritem.value),newexpression.push(replitem)}else type===IEXPR?newexpression.push(new Instruction(IEXPR,substitute(item.value,variable,expr))):newexpression.push(item)}return newexpression}function evaluate(tokens,expr,values){var n1,n2,n3,f,args,argCount,nstack=[];if(isExpressionEvaluator(tokens))return resolveExpression(tokens,values);for(var numTokens=tokens.length,i=0;i<numTokens;i++){var item=tokens[i],type=item.type;if(type===INUMBER||type===IVARNAME)nstack.push(item.value);else if(type===IOP2)n2=nstack.pop(),n1=nstack.pop(),"and"===item.value?nstack.push(!!n1&&!!evaluate(n2,expr,values)):"or"===item.value?nstack.push(!!n1||!!evaluate(n2,expr,values)):"="===item.value?(f=expr.binaryOps[item.value],nstack.push(f(n1,evaluate(n2,expr,values),values))):(f=expr.binaryOps[item.value],nstack.push(f(resolveExpression(n1,values),resolveExpression(n2,values))));else if(type===IOP3)n3=nstack.pop(),n2=nstack.pop(),n1=nstack.pop(),"?"===item.value?nstack.push(evaluate(n1?n2:n3,expr,values)):(f=expr.ternaryOps[item.value],nstack.push(f(resolveExpression(n1,values),resolveExpression(n2,values),resolveExpression(n3,values))));else if(type===IVAR)if(item.value in expr.functions)nstack.push(expr.functions[item.value]);else if(item.value in expr.unaryOps&&expr.parser.isOperatorEnabled(item.value))nstack.push(expr.unaryOps[item.value]);else{var v=values[item.value];if(void 0===v)throw new Error("undefined variable: "+item.value);nstack.push(v)}else if(type===IOP1)n1=nstack.pop(),f=expr.unaryOps[item.value],nstack.push(f(resolveExpression(n1,values)));else if(type===IFUNCALL){for(argCount=item.value,args=[];argCount-- >0;)args.unshift(resolveExpression(nstack.pop(),values));if(!(f=nstack.pop()).apply||!f.call)throw new Error(f+" is not a function");nstack.push(f.apply(void 0,args))}else if(type===IFUNDEF)nstack.push(function(){for(var n2=nstack.pop(),args=[],argCount=item.value;argCount-- >0;)args.unshift(nstack.pop());var n1=nstack.pop(),f=function(){for(var scope=Object.assign({},values),i=0,len=args.length;i<len;i++)scope[args[i]]=arguments[i];return evaluate(n2,expr,scope)};return Object.defineProperty(f,"name",{value:n1,writable:!1}),values[n1]=f,f}());else if(type===IEXPR)nstack.push(createExpressionEvaluator(item,expr));else if(type===IEXPREVAL)nstack.push(item);else if(type===IMEMBER)n1=nstack.pop(),nstack.push(n1[item.value]);else if(type===IENDSTATEMENT)nstack.pop();else{if(type!==IARRAY)throw new Error("invalid Expression");for(argCount=item.value,args=[];argCount-- >0;)args.unshift(nstack.pop());nstack.push(args)}}if(nstack.length>1)throw new Error("invalid Expression (parity)");return 0===nstack[0]?0:resolveExpression(nstack[0],values)}function createExpressionEvaluator(token,expr,values){return isExpressionEvaluator(token)?token:{type:IEXPREVAL,value:function(scope){return evaluate(token.value,expr,scope)}}}function isExpressionEvaluator(n){return n&&n.type===IEXPREVAL}function resolveExpression(n,values){return isExpressionEvaluator(n)?n.value(values):n}function expressionToString(tokens,toJS){for(var n1,n2,n3,f,args,argCount,nstack=[],i=0;i<tokens.length;i++){var item=tokens[i],type=item.type;if(type===INUMBER)"number"==typeof item.value&&item.value<0?nstack.push("("+item.value+")"):Array.isArray(item.value)?nstack.push("["+item.value.map(escapeValue).join(", ")+"]"):nstack.push(escapeValue(item.value));else if(type===IOP2)n2=nstack.pop(),n1=nstack.pop(),f=item.value,toJS?"^"===f?nstack.push("Math.pow("+n1+", "+n2+")"):"and"===f?nstack.push("(!!"+n1+" && !!"+n2+")"):"or"===f?nstack.push("(!!"+n1+" || !!"+n2+")"):"||"===f?nstack.push("(function(a,b){ return Array.isArray(a) && Array.isArray(b) ? a.concat(b) : String(a) + String(b); }(("+n1+"),("+n2+")))"):"=="===f?nstack.push("("+n1+" === "+n2+")"):"!="===f?nstack.push("("+n1+" !== "+n2+")"):"["===f?nstack.push(n1+"[("+n2+") | 0]"):nstack.push("("+n1+" "+f+" "+n2+")"):"["===f?nstack.push(n1+"["+n2+"]"):nstack.push("("+n1+" "+f+" "+n2+")");else if(type===IOP3){if(n3=nstack.pop(),n2=nstack.pop(),n1=nstack.pop(),"?"!==(f=item.value))throw new Error("invalid Expression");nstack.push("("+n1+" ? "+n2+" : "+n3+")")}else if(type===IVAR||type===IVARNAME)nstack.push(item.value);else if(type===IOP1)n1=nstack.pop(),"-"===(f=item.value)||"+"===f?nstack.push("("+f+n1+")"):toJS?"not"===f?nstack.push("(!"+n1+")"):"!"===f?nstack.push("fac("+n1+")"):nstack.push(f+"("+n1+")"):"!"===f?nstack.push("("+n1+"!)"):nstack.push("("+f+" "+n1+")");else if(type===IFUNCALL){for(argCount=item.value,args=[];argCount-- >0;)args.unshift(nstack.pop());f=nstack.pop(),nstack.push(f+"("+args.join(", ")+")")}else if(type===IFUNDEF){for(n2=nstack.pop(),argCount=item.value,args=[];argCount-- >0;)args.unshift(nstack.pop());n1=nstack.pop(),toJS?nstack.push("("+n1+" = function("+args.join(", ")+") { return "+n2+" })"):nstack.push("("+n1+"("+args.join(", ")+") = "+n2+")")}else if(type===IMEMBER)n1=nstack.pop(),nstack.push(n1+"."+item.value);else if(type===IARRAY){for(argCount=item.value,args=[];argCount-- >0;)args.unshift(nstack.pop());nstack.push("["+args.join(", ")+"]")}else if(type===IEXPR)nstack.push("("+expressionToString(item.value,toJS)+")");else if(type!==IENDSTATEMENT)throw new Error("invalid Expression")}return nstack.length>1&&(nstack=toJS?[nstack.join(",")]:[nstack.join(";")]),String(nstack[0])}function escapeValue(v){return"string"==typeof v?JSON.stringify(v).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"):v}function contains(array,obj){for(var i=0;i<array.length;i++)if(array[i]===obj)return!0;return!1}function getSymbols(tokens,symbols,options){for(var withMembers=!!(options=options||{}).withMembers,prevVar=null,i=0;i<tokens.length;i++){var item=tokens[i];item.type===IVAR||item.type===IVARNAME?withMembers||contains(symbols,item.value)?null!==prevVar?(contains(symbols,prevVar)||symbols.push(prevVar),prevVar=item.value):prevVar=item.value:symbols.push(item.value):item.type===IMEMBER&&withMembers&&null!==prevVar?prevVar+="."+item.value:item.type===IEXPR?getSymbols(item.value,symbols,options):null!==prevVar&&(contains(symbols,prevVar)||symbols.push(prevVar),prevVar=null)}null===prevVar||contains(symbols,prevVar)||symbols.push(prevVar)}function Expression(tokens,parser){this.tokens=tokens,this.parser=parser,this.unaryOps=parser.unaryOps,this.binaryOps=parser.binaryOps,this.ternaryOps=parser.ternaryOps,this.functions=parser.functions}Instruction.prototype.toString=function(){switch(this.type){case INUMBER:case IOP1:case IOP2:case IOP3:case IVAR:case IVARNAME:case IENDSTATEMENT:return this.value;case IFUNCALL:return"CALL "+this.value;case IFUNDEF:return"DEF "+this.value;case IARRAY:return"ARRAY "+this.value;case IMEMBER:return"."+this.value;default:return"Invalid Instruction"}},Expression.prototype.simplify=function(values){return values=values||{},new Expression(simplify(this.tokens,this.unaryOps,this.binaryOps,this.ternaryOps,values),this.parser)},Expression.prototype.substitute=function(variable,expr){return expr instanceof Expression||(expr=this.parser.parse(String(expr))),new Expression(substitute(this.tokens,variable,expr),this.parser)},Expression.prototype.evaluate=function(values){return values=values||{},evaluate(this.tokens,this,values)},Expression.prototype.toString=function(){return expressionToString(this.tokens,!1)},Expression.prototype.symbols=function(options){options=options||{};var vars=[];return getSymbols(this.tokens,vars,options),vars},Expression.prototype.variables=function(options){options=options||{};var vars=[];getSymbols(this.tokens,vars,options);var functions=this.functions;return vars.filter((function(name){return!(name in functions)}))},Expression.prototype.toJSFunction=function(param,variables){var expr=this,f=new Function(param,"with(this.functions) with (this.ternaryOps) with (this.binaryOps) with (this.unaryOps) { return "+expressionToString(this.simplify(variables).tokens,!0)+"; }");return function(){return f.apply(expr,arguments)}};var TOP="TOP",TPAREN="TPAREN";function Token(type,value,index){this.type=type,this.value=value,this.index=index}function TokenStream(parser,expression){this.pos=0,this.current=null,this.unaryOps=parser.unaryOps,this.binaryOps=parser.binaryOps,this.ternaryOps=parser.ternaryOps,this.consts=parser.consts,this.expression=expression,this.savedPosition=0,this.savedCurrent=null,this.options=parser.options,this.parser=parser}Token.prototype.toString=function(){return this.type+": "+this.value},TokenStream.prototype.newToken=function(type,value,pos){return new Token(type,value,null!=pos?pos:this.pos)},TokenStream.prototype.save=function(){this.savedPosition=this.pos,this.savedCurrent=this.current},TokenStream.prototype.restore=function(){this.pos=this.savedPosition,this.current=this.savedCurrent},TokenStream.prototype.next=function(){return this.pos>=this.expression.length?this.newToken("TEOF","EOF"):this.isWhitespace()||this.isComment()?this.next():this.isRadixInteger()||this.isNumber()||this.isOperator()||this.isString()||this.isParen()||this.isBracket()||this.isComma()||this.isSemicolon()||this.isNamedOp()||this.isConst()||this.isName()?this.current:void this.parseError('Unknown character "'+this.expression.charAt(this.pos)+'"')},TokenStream.prototype.isString=function(){var r=!1,startPos=this.pos,quote=this.expression.charAt(startPos);if("'"===quote||'"'===quote)for(var index=this.expression.indexOf(quote,startPos+1);index>=0&&this.pos<this.expression.length;){if(this.pos=index+1,"\\"!==this.expression.charAt(index-1)){var rawString=this.expression.substring(startPos+1,index);this.current=this.newToken("TSTRING",this.unescape(rawString),startPos),r=!0;break}index=this.expression.indexOf(quote,index+1)}return r},TokenStream.prototype.isParen=function(){var c=this.expression.charAt(this.pos);return("("===c||")"===c)&&(this.current=this.newToken(TPAREN,c),this.pos++,!0)},TokenStream.prototype.isBracket=function(){var c=this.expression.charAt(this.pos);return!("["!==c&&"]"!==c||!this.isOperatorEnabled("["))&&(this.current=this.newToken("TBRACKET",c),this.pos++,!0)},TokenStream.prototype.isComma=function(){return","===this.expression.charAt(this.pos)&&(this.current=this.newToken("TCOMMA",","),this.pos++,!0)},TokenStream.prototype.isSemicolon=function(){return";"===this.expression.charAt(this.pos)&&(this.current=this.newToken("TSEMICOLON",";"),this.pos++,!0)},TokenStream.prototype.isConst=function(){for(var startPos=this.pos,i=startPos;i<this.expression.length;i++){var c=this.expression.charAt(i);if(c.toUpperCase()===c.toLowerCase()&&(i===this.pos||"_"!==c&&"."!==c&&(c<"0"||c>"9")))break}if(i>startPos){var str=this.expression.substring(startPos,i);if(str in this.consts)return this.current=this.newToken("TNUMBER",this.consts[str]),this.pos+=str.length,!0}return!1},TokenStream.prototype.isNamedOp=function(){for(var startPos=this.pos,i=startPos;i<this.expression.length;i++){var c=this.expression.charAt(i);if(c.toUpperCase()===c.toLowerCase()&&(i===this.pos||"_"!==c&&(c<"0"||c>"9")))break}if(i>startPos){var str=this.expression.substring(startPos,i);if(this.isOperatorEnabled(str)&&(str in this.binaryOps||str in this.unaryOps||str in this.ternaryOps))return this.current=this.newToken(TOP,str),this.pos+=str.length,!0}return!1},TokenStream.prototype.isName=function(){for(var startPos=this.pos,i=startPos,hasLetter=!1;i<this.expression.length;i++){var c=this.expression.charAt(i);if(c.toUpperCase()===c.toLowerCase()){if(i===this.pos&&("$"===c||"_"===c)){"_"===c&&(hasLetter=!0);continue}if(i===this.pos||!hasLetter||"_"!==c&&(c<"0"||c>"9"))break}else hasLetter=!0}if(hasLetter){var str=this.expression.substring(startPos,i);return this.current=this.newToken("TNAME",str),this.pos+=str.length,!0}return!1},TokenStream.prototype.isWhitespace=function(){for(var r=!1,c=this.expression.charAt(this.pos);!(" "!==c&&"\t"!==c&&"\n"!==c&&"\r"!==c||(r=!0,this.pos++,this.pos>=this.expression.length));)c=this.expression.charAt(this.pos);return r};var codePointPattern=/^[0-9a-f]{4}$/i;function ParserState(parser,tokenStream,options){this.parser=parser,this.tokens=tokenStream,this.current=null,this.nextToken=null,this.next(),this.savedCurrent=null,this.savedNextToken=null,this.allowMemberAccess=!1!==options.allowMemberAccess}TokenStream.prototype.unescape=function(v){var index=v.indexOf("\\");if(index<0)return v;for(var buffer=v.substring(0,index);index>=0;){var c=v.charAt(++index);switch(c){case"'":buffer+="'";break;case'"':buffer+='"';break;case"\\":buffer+="\\";break;case"/":buffer+="/";break;case"b":buffer+="\b";break;case"f":buffer+="\f";break;case"n":buffer+="\n";break;case"r":buffer+="\r";break;case"t":buffer+="\t";break;case"u":var codePoint=v.substring(index+1,index+5);codePointPattern.test(codePoint)||this.parseError("Illegal escape sequence: \\u"+codePoint),buffer+=String.fromCharCode(parseInt(codePoint,16)),index+=4;break;default:throw this.parseError('Illegal escape sequence: "\\'+c+'"')}++index;var backslash=v.indexOf("\\",index);buffer+=v.substring(index,backslash<0?v.length:backslash),index=backslash}return buffer},TokenStream.prototype.isComment=function(){return"/"===this.expression.charAt(this.pos)&&"*"===this.expression.charAt(this.pos+1)&&(this.pos=this.expression.indexOf("*/",this.pos)+2,1===this.pos&&(this.pos=this.expression.length),!0)},TokenStream.prototype.isRadixInteger=function(){var radix,validDigit,pos=this.pos;if(pos>=this.expression.length-2||"0"!==this.expression.charAt(pos))return!1;if(++pos,"x"===this.expression.charAt(pos))radix=16,validDigit=/^[0-9a-f]$/i,++pos;else{if("b"!==this.expression.charAt(pos))return!1;radix=2,validDigit=/^[01]$/i,++pos}for(var valid=!1,startPos=pos;pos<this.expression.length;){var c=this.expression.charAt(pos);if(!validDigit.test(c))break;pos++,valid=!0}return valid&&(this.current=this.newToken("TNUMBER",parseInt(this.expression.substring(startPos,pos),radix)),this.pos=pos),valid},TokenStream.prototype.isNumber=function(){for(var c,valid=!1,pos=this.pos,startPos=pos,resetPos=pos,foundDot=!1,foundDigits=!1;pos<this.expression.length&&((c=this.expression.charAt(pos))>="0"&&c<="9"||!foundDot&&"."===c);)"."===c?foundDot=!0:foundDigits=!0,pos++,valid=foundDigits;if(valid&&(resetPos=pos),"e"===c||"E"===c){pos++;for(var acceptSign=!0,validExponent=!1;pos<this.expression.length;){if(c=this.expression.charAt(pos),!acceptSign||"+"!==c&&"-"!==c){if(!(c>="0"&&c<="9"))break;validExponent=!0,acceptSign=!1}else acceptSign=!1;pos++}validExponent||(pos=resetPos)}return valid?(this.current=this.newToken("TNUMBER",parseFloat(this.expression.substring(startPos,pos))),this.pos=pos):this.pos=resetPos,valid},TokenStream.prototype.isOperator=function(){var startPos=this.pos,c=this.expression.charAt(this.pos);if("+"===c||"-"===c||"*"===c||"/"===c||"%"===c||"^"===c||"?"===c||":"===c||"."===c)this.current=this.newToken(TOP,c);else if("∙"===c||"•"===c)this.current=this.newToken(TOP,"*");else if(">"===c)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(TOP,">="),this.pos++):this.current=this.newToken(TOP,">");else if("<"===c)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(TOP,"<="),this.pos++):this.current=this.newToken(TOP,"<");else if("|"===c){if("|"!==this.expression.charAt(this.pos+1))return!1;this.current=this.newToken(TOP,"||"),this.pos++}else if("="===c)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(TOP,"=="),this.pos++):this.current=this.newToken(TOP,c);else{if("!"!==c)return!1;"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(TOP,"!="),this.pos++):this.current=this.newToken(TOP,c)}return this.pos++,!!this.isOperatorEnabled(this.current.value)||(this.pos=startPos,!1)},TokenStream.prototype.isOperatorEnabled=function(op){return this.parser.isOperatorEnabled(op)},TokenStream.prototype.getCoordinates=function(){var column,line=0,newline=-1;do{line++,column=this.pos-newline,newline=this.expression.indexOf("\n",newline+1)}while(newline>=0&&newline<this.pos);return{line,column}},TokenStream.prototype.parseError=function(msg){var coords=this.getCoordinates();throw new Error("parse error ["+coords.line+":"+coords.column+"]: "+msg)},ParserState.prototype.next=function(){return this.current=this.nextToken,this.nextToken=this.tokens.next()},ParserState.prototype.tokenMatches=function(token,value){return void 0===value||(Array.isArray(value)?contains(value,token.value):"function"==typeof value?value(token):token.value===value)},ParserState.prototype.save=function(){this.savedCurrent=this.current,this.savedNextToken=this.nextToken,this.tokens.save()},ParserState.prototype.restore=function(){this.tokens.restore(),this.current=this.savedCurrent,this.nextToken=this.savedNextToken},ParserState.prototype.accept=function(type,value){return!(this.nextToken.type!==type||!this.tokenMatches(this.nextToken,value))&&(this.next(),!0)},ParserState.prototype.expect=function(type,value){if(!this.accept(type,value)){var coords=this.tokens.getCoordinates();throw new Error("parse error ["+coords.line+":"+coords.column+"]: Expected "+(value||type))}},ParserState.prototype.parseAtom=function(instr){var unaryOps=this.tokens.unaryOps;if(this.accept("TNAME")||this.accept(TOP,(function isPrefixOperator(token){return token.value in unaryOps})))instr.push(new Instruction(IVAR,this.current.value));else if(this.accept("TNUMBER"))instr.push(new Instruction(INUMBER,this.current.value));else if(this.accept("TSTRING"))instr.push(new Instruction(INUMBER,this.current.value));else if(this.accept(TPAREN,"("))this.parseExpression(instr),this.expect(TPAREN,")");else{if(!this.accept("TBRACKET","["))throw new Error("unexpected "+this.nextToken);if(this.accept("TBRACKET","]"))instr.push(new Instruction(IARRAY,0));else{var argCount=this.parseArrayList(instr);instr.push(new Instruction(IARRAY,argCount))}}},ParserState.prototype.parseExpression=function(instr){var exprInstr=[];this.parseUntilEndStatement(instr,exprInstr)||(this.parseVariableAssignmentExpression(exprInstr),this.parseUntilEndStatement(instr,exprInstr)||this.pushExpression(instr,exprInstr))},ParserState.prototype.pushExpression=function(instr,exprInstr){for(var i=0,len=exprInstr.length;i<len;i++)instr.push(exprInstr[i])},ParserState.prototype.parseUntilEndStatement=function(instr,exprInstr){return!!this.accept("TSEMICOLON")&&(!this.nextToken||"TEOF"===this.nextToken.type||this.nextToken.type===TPAREN&&")"===this.nextToken.value||exprInstr.push(new Instruction(IENDSTATEMENT)),"TEOF"!==this.nextToken.type&&this.parseExpression(exprInstr),instr.push(new Instruction(IEXPR,exprInstr)),!0)},ParserState.prototype.parseArrayList=function(instr){for(var argCount=0;!this.accept("TBRACKET","]");)for(this.parseExpression(instr),++argCount;this.accept("TCOMMA");)this.parseExpression(instr),++argCount;return argCount},ParserState.prototype.parseVariableAssignmentExpression=function(instr){for(this.parseConditionalExpression(instr);this.accept(TOP,"=");){var varName=instr.pop(),varValue=[],lastInstrIndex=instr.length-1;if(varName.type!==IFUNCALL){if(varName.type!==IVAR&&varName.type!==IMEMBER)throw new Error("expected variable for assignment");this.parseVariableAssignmentExpression(varValue),instr.push(new Instruction(IVARNAME,varName.value)),instr.push(new Instruction(IEXPR,varValue)),instr.push(binaryInstruction("="))}else{if(!this.tokens.isOperatorEnabled("()="))throw new Error("function definition is not permitted");for(var i=0,len=varName.value+1;i<len;i++){var index=lastInstrIndex-i;instr[index].type===IVAR&&(instr[index]=new Instruction(IVARNAME,instr[index].value))}this.parseVariableAssignmentExpression(varValue),instr.push(new Instruction(IEXPR,varValue)),instr.push(new Instruction(IFUNDEF,varName.value))}}},ParserState.prototype.parseConditionalExpression=function(instr){for(this.parseOrExpression(instr);this.accept(TOP,"?");){var trueBranch=[],falseBranch=[];this.parseConditionalExpression(trueBranch),this.expect(TOP,":"),this.parseConditionalExpression(falseBranch),instr.push(new Instruction(IEXPR,trueBranch)),instr.push(new Instruction(IEXPR,falseBranch)),instr.push(ternaryInstruction("?"))}},ParserState.prototype.parseOrExpression=function(instr){for(this.parseAndExpression(instr);this.accept(TOP,"or");){var falseBranch=[];this.parseAndExpression(falseBranch),instr.push(new Instruction(IEXPR,falseBranch)),instr.push(binaryInstruction("or"))}},ParserState.prototype.parseAndExpression=function(instr){for(this.parseComparison(instr);this.accept(TOP,"and");){var trueBranch=[];this.parseComparison(trueBranch),instr.push(new Instruction(IEXPR,trueBranch)),instr.push(binaryInstruction("and"))}};var COMPARISON_OPERATORS=["==","!=","<","<=",">=",">","in"];ParserState.prototype.parseComparison=function(instr){for(this.parseAddSub(instr);this.accept(TOP,COMPARISON_OPERATORS);){var op=this.current;this.parseAddSub(instr),instr.push(binaryInstruction(op.value))}};var ADD_SUB_OPERATORS=["+","-","||"];ParserState.prototype.parseAddSub=function(instr){for(this.parseTerm(instr);this.accept(TOP,ADD_SUB_OPERATORS);){var op=this.current;this.parseTerm(instr),instr.push(binaryInstruction(op.value))}};var TERM_OPERATORS=["*","/","%"];function add(a,b){return Number(a)+Number(b)}function sub(a,b){return a-b}function mul(a,b){return a*b}function div(a,b){return a/b}function mod(a,b){return a%b}function concat(a,b){return Array.isArray(a)&&Array.isArray(b)?a.concat(b):""+a+b}function equal(a,b){return a===b}function notEqual(a,b){return a!==b}function greaterThan(a,b){return a>b}function lessThan(a,b){return a<b}function greaterThanEqual(a,b){return a>=b}function lessThanEqual(a,b){return a<=b}function andOperator(a,b){return Boolean(a&&b)}function orOperator(a,b){return Boolean(a||b)}function inOperator(a,b){return contains(b,a)}function sinh(a){return(Math.exp(a)-Math.exp(-a))/2}function cosh(a){return(Math.exp(a)+Math.exp(-a))/2}function tanh(a){return a===1/0?1:a===-1/0?-1:(Math.exp(a)-Math.exp(-a))/(Math.exp(a)+Math.exp(-a))}function asinh(a){return a===-1/0?a:Math.log(a+Math.sqrt(a*a+1))}function acosh(a){return Math.log(a+Math.sqrt(a*a-1))}function atanh(a){return Math.log((1+a)/(1-a))/2}function log10(a){return Math.log(a)*Math.LOG10E}function neg(a){return-a}function not(a){return!a}function trunc(a){return a<0?Math.ceil(a):Math.floor(a)}function random(a){return Math.random()*(a||1)}function factorial(a){return gamma(a+1)}ParserState.prototype.parseTerm=function(instr){for(this.parseFactor(instr);this.accept(TOP,TERM_OPERATORS);){var op=this.current;this.parseFactor(instr),instr.push(binaryInstruction(op.value))}},ParserState.prototype.parseFactor=function(instr){var unaryOps=this.tokens.unaryOps;if(this.save(),this.accept(TOP,(function isPrefixOperator(token){return token.value in unaryOps}))){if("-"!==this.current.value&&"+"!==this.current.value){if(this.nextToken.type===TPAREN&&"("===this.nextToken.value)return this.restore(),void this.parseExponential(instr);if("TSEMICOLON"===this.nextToken.type||"TCOMMA"===this.nextToken.type||"TEOF"===this.nextToken.type||this.nextToken.type===TPAREN&&")"===this.nextToken.value)return this.restore(),void this.parseAtom(instr)}var op=this.current;this.parseFactor(instr),instr.push(unaryInstruction(op.value))}else this.parseExponential(instr)},ParserState.prototype.parseExponential=function(instr){for(this.parsePostfixExpression(instr);this.accept(TOP,"^");)this.parseFactor(instr),instr.push(binaryInstruction("^"))},ParserState.prototype.parsePostfixExpression=function(instr){for(this.parseFunctionCall(instr);this.accept(TOP,"!");)instr.push(unaryInstruction("!"))},ParserState.prototype.parseFunctionCall=function(instr){var unaryOps=this.tokens.unaryOps;if(this.accept(TOP,(function isPrefixOperator(token){return token.value in unaryOps}))){var op=this.current;this.parseAtom(instr),instr.push(unaryInstruction(op.value))}else for(this.parseMemberExpression(instr);this.accept(TPAREN,"(");)if(this.accept(TPAREN,")"))instr.push(new Instruction(IFUNCALL,0));else{var argCount=this.parseArgumentList(instr);instr.push(new Instruction(IFUNCALL,argCount))}},ParserState.prototype.parseArgumentList=function(instr){for(var argCount=0;!this.accept(TPAREN,")");)for(this.parseExpression(instr),++argCount;this.accept("TCOMMA");)this.parseExpression(instr),++argCount;return argCount},ParserState.prototype.parseMemberExpression=function(instr){for(this.parseAtom(instr);this.accept(TOP,".")||this.accept("TBRACKET","[");){var op=this.current;if("."===op.value){if(!this.allowMemberAccess)throw new Error('unexpected ".", member access is not permitted');this.expect("TNAME"),instr.push(new Instruction(IMEMBER,this.current.value))}else{if("["!==op.value)throw new Error("unexpected symbol: "+op.value);if(!this.tokens.isOperatorEnabled("["))throw new Error('unexpected "[]", arrays are disabled');this.parseExpression(instr),this.expect("TBRACKET","]"),instr.push(binaryInstruction("["))}}};var GAMMA_G=4.7421875,GAMMA_P=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];function gamma(n){var t,x;if(function isInteger(value){return isFinite(value)&&value===Math.round(value)}(n)){if(n<=0)return isFinite(n)?1/0:NaN;if(n>171)return 1/0;for(var value=n-2,res=n-1;value>1;)res*=value,value--;return 0===res&&(res=1),res}if(n<.5)return Math.PI/(Math.sin(Math.PI*n)*gamma(1-n));if(n>=171.35)return 1/0;if(n>85){var twoN=n*n,threeN=twoN*n,fourN=threeN*n,fiveN=fourN*n;return Math.sqrt(2*Math.PI/n)*Math.pow(n/Math.E,n)*(1+1/(12*n)+1/(288*twoN)-139/(51840*threeN)-571/(2488320*fourN)+163879/(209018880*fiveN)+5246819/(75246796800*fiveN*n))}--n,x=GAMMA_P[0];for(var i=1;i<GAMMA_P.length;++i)x+=GAMMA_P[i]/(n+i);return t=n+GAMMA_G+.5,Math.sqrt(2*Math.PI)*Math.pow(t,n+.5)*Math.exp(-t)*x}function stringOrArrayLength(s){return Array.isArray(s)?s.length:String(s).length}function hypot(){for(var sum=0,larg=0,i=0;i<arguments.length;i++){var div,arg=Math.abs(arguments[i]);larg<arg?(sum=sum*(div=larg/arg)*div+1,larg=arg):sum+=arg>0?(div=arg/larg)*div:arg}return larg===1/0?1/0:larg*Math.sqrt(sum)}function condition(cond,yep,nope){return cond?yep:nope}function roundTo(value,exp){return void 0===exp||0==+exp?Math.round(value):(value=+value,exp=-+exp,isNaN(value)||"number"!=typeof exp||exp%1!=0?NaN:(value=value.toString().split("e"),+((value=(value=Math.round(+(value[0]+"e"+(value[1]?+value[1]-exp:-exp)))).toString().split("e"))[0]+"e"+(value[1]?+value[1]+exp:exp))))}function setVar(name,value,variables){return variables&&(variables[name]=value),value}function arrayIndex(array,index){return array[0|index]}function max(array){return 1===arguments.length&&Array.isArray(array)?Math.max.apply(Math,array):Math.max.apply(Math,arguments)}function min(array){return 1===arguments.length&&Array.isArray(array)?Math.min.apply(Math,array):Math.min.apply(Math,arguments)}function arrayMap(f,a){if("function"!=typeof f)throw new Error("First argument to map is not a function");if(!Array.isArray(a))throw new Error("Second argument to map is not an array");return a.map((function(x,i){return f(x,i)}))}function arrayFold(f,init,a){if("function"!=typeof f)throw new Error("First argument to fold is not a function");if(!Array.isArray(a))throw new Error("Second argument to fold is not an array");return a.reduce((function(acc,x,i){return f(acc,x,i)}),init)}function arrayFilter(f,a){if("function"!=typeof f)throw new Error("First argument to filter is not a function");if(!Array.isArray(a))throw new Error("Second argument to filter is not an array");return a.filter((function(x,i){return f(x,i)}))}function stringOrArrayIndexOf(target,s){if(!Array.isArray(s)&&"string"!=typeof s)throw new Error("Second argument to indexOf is not a string or array");return s.indexOf(target)}function arrayJoin(sep,a){if(!Array.isArray(a))throw new Error("Second argument to join is not an array");return a.join(sep)}function sign(x){return(x>0)-(x<0)||+x}var ONE_THIRD=1/3;function cbrt(x){return x<0?-Math.pow(-x,ONE_THIRD):Math.pow(x,ONE_THIRD)}function expm1(x){return Math.exp(x)-1}function log1p(x){return Math.log(1+x)}function log2(x){return Math.log(x)/Math.LN2}function Parser(options){this.options=options||{},this.unaryOps={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:Math.sinh||sinh,cosh:Math.cosh||cosh,tanh:Math.tanh||tanh,asinh:Math.asinh||asinh,acosh:Math.acosh||acosh,atanh:Math.atanh||atanh,sqrt:Math.sqrt,cbrt:Math.cbrt||cbrt,log:Math.log,log2:Math.log2||log2,ln:Math.log,lg:Math.log10||log10,log10:Math.log10||log10,expm1:Math.expm1||expm1,log1p:Math.log1p||log1p,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:Math.trunc||trunc,"-":neg,"+":Number,exp:Math.exp,not,length:stringOrArrayLength,"!":factorial,sign:Math.sign||sign},this.binaryOps={"+":add,"-":sub,"*":mul,"/":div,"%":mod,"^":Math.pow,"||":concat,"==":equal,"!=":notEqual,">":greaterThan,"<":lessThan,">=":greaterThanEqual,"<=":lessThanEqual,and:andOperator,or:orOperator,in:inOperator,"=":setVar,"[":arrayIndex},this.ternaryOps={"?":condition},this.functions={random,fac:factorial,min,max,hypot:Math.hypot||hypot,pyt:Math.hypot||hypot,pow:Math.pow,atan2:Math.atan2,if:condition,gamma,roundTo,map:arrayMap,fold:arrayFold,filter:arrayFilter,indexOf:stringOrArrayIndexOf,join:arrayJoin},this.consts={E:Math.E,PI:Math.PI,true:!0,false:!1}}Parser.prototype.parse=function(expr){var instr=[],parserState=new ParserState(this,new TokenStream(this,expr),{allowMemberAccess:this.options.allowMemberAccess});return parserState.parseExpression(instr),parserState.expect("TEOF","EOF"),new Expression(instr,this)},Parser.prototype.evaluate=function(expr,variables){return this.parse(expr).evaluate(variables)};var sharedParser=new Parser;Parser.parse=function(expr){return sharedParser.parse(expr)},Parser.evaluate=function(expr,variables){return sharedParser.parse(expr).evaluate(variables)};var optionNameMap={"+":"add","-":"subtract","*":"multiply","/":"divide","%":"remainder","^":"power","!":"factorial","<":"comparison",">":"comparison","<=":"comparison",">=":"comparison","==":"comparison","!=":"comparison","||":"concatenate",and:"logical",or:"logical",not:"logical","?":"conditional",":":"conditional","=":"assignment","[":"array","()=":"fndef"};Parser.prototype.isOperatorEnabled=function(op){var optionName=function getOptionName(op){return optionNameMap.hasOwnProperty(op)?optionNameMap[op]:op}(op),operators=this.options.operators||{};return!(optionName in operators)||!!operators[optionName]};var SemanticStyle;function filterArray(data,filters){return Object.keys(filters).reduce(((data,dimension)=>data.filter((item=>filters[dimension].includes(item[dimension])))),data)}function moveLeft(arr,value){const index=arr.findIndex((item=>item===value));if(index>0){const items=arr.splice(index,1);return arr.splice(index-1,0,...items),[...arr]}return arr}function moveRight(arr,value){const index=arr.findIndex((item=>item===value));if(index>-1){const items=arr.splice(index,1);return arr.splice(index+1,0,...items),[...arr]}return arr}!function(SemanticStyle){SemanticStyle["border-left"]="border-left",SemanticStyle["border-right"]="border-right",SemanticStyle["border-top"]="border-top",SemanticStyle["border-bottom"]="border-bottom",SemanticStyle.color="color",SemanticStyle.background="background"}(SemanticStyle||(SemanticStyle={}));var _AnalyticalGridComponent,_destroyRef,Subject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Subject.js"),distinctUntilChanged=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js"),switchMap=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/switchMap.js"),merge=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/merge.js");class NgmTreeFlatDataSource extends fesm2022_tree.kc{constructor(){super(...arguments),this._paginator=new BehaviorSubject.X(null),this._internalPageChanges=new Subject.x}get paginator(){return this._paginator.value}set paginator(paginator){this._paginator.next(paginator)}connect(collectionViewer){return super.connect(collectionViewer).pipe((0,combineLatestWith.V)(this._paginator.pipe((0,distinctUntilChanged.x)(),(0,switchMap.w)((_paginator=>_paginator?(0,merge.T)(_paginator.page,this._internalPageChanges,_paginator.initialized):(0,of.of)(null))))),(0,map.U)((([data])=>(this.paginator&&this._updatePaginator(data.length),this._pageData(data)))))}_pageData(data){if(!this.paginator)return data;const startIndex=this.paginator.pageIndex*this.paginator.pageSize;return data.slice(startIndex,startIndex+this.paginator.pageSize)}_updatePaginator(filteredDataLength){Promise.resolve().then((()=>{const paginator=this.paginator;if(paginator&&(paginator.length=filteredDataLength,paginator.pageIndex>0)){const lastPageIndex=Math.ceil(paginator.length/paginator.pageSize)-1||0,newPageIndex=Math.min(paginator.pageIndex,lastPageIndex);newPageIndex!==paginator.pageIndex&&(paginator.pageIndex=newPageIndex,this._internalPageChanges.next())}}))}}let AnalyticalGridComponent=(_destroyRef=new WeakMap,_AnalyticalGridComponent=class AnalyticalGridComponent{get disabled(){return this._disabled}set disabled(value){this._disabled=(0,coercion.Ig)(value)}get dataSettings(){return this._dataSettings()}set dataSettings(value){this._dataSettings.set(value)}get options(){return this.options$.value}set options(value){this.options$.next((0,src.ezT)(value))}get slicers(){return this._slicers()}set slicers(value){this._slicers.set(value)}set paginator(v){this._paginator.set(v)}get dimensionFilters(){return this._dimensionFilters$.value}set dimensionFilters(filters){this._dimensionFilters$.next(filters)}get dataSource(){return this.rowTreeProperty()?this.rowDataSource:this.flatDataSource}get pivotColumns(){return this._pivotColumns$.value}set pivotColumns(value){this._pivotColumns$.next(value)}constructor(translateService,cdr,_focusMonitor,elementRef){(0,classPrivateFieldInitSpec.Z)(this,_destroyRef,void 0),this.translateService=translateService,this.cdr=cdr,this._focusMonitor=_focusMonitor,this.elementRef=elementRef,this.AggregationRole=src.uFO,this.C_MEASURES=src.QPo,this.isNil=src.kKJ,this.analyticsService=(0,core.inject)(NgmAnalyticsBusinessService),(0,classPrivateFieldSet2.Z)(_destroyRef,this,(0,core.inject)(core.DestroyRef)),this._disabled=!1,this._dataSettings=(0,core.signal)(null,{equal:src.Xyp}),this.options$=new BehaviorSubject.X(null),this.columns=(0,core.input)({}),this._columns$=(0,rxjs_interop.Dx)(this.columns),this._slicers=(0,core.signal)([],{equal:src.Xyp}),this.columnSelectionChanging=new core.EventEmitter,this.slicersChanging=new core.EventEmitter,this.explain=new core.EventEmitter,this.entityTypeChange=new core.EventEmitter,this._paginator=(0,core.signal)(null),this.matSortActive="",this.selected={prevI:null,prevColumn:null,i:null,column:null},this.virtualScrollItemSize=48,this.flatDataSource=new NgmFlatTableDataSource([]),this.rowRecursiveHierarchy=null,this.rowTreeProperty=(0,core.signal)(null),this.rowUnfold=!1,this.columnUnfold=!1,this._data$=new BehaviorSubject.X([]),this._dimensionFilters$=new BehaviorSubject.X({}),this.filteredData$=(0,combineLatest.a)([this._data$,this._dimensionFilters$]).pipe((0,map.U)((([data,filters])=>filters?filterArray(data,filters):[...data]))),this.treeNodePadding=16,this.rowAxes=[],this.matHeaders=[],this.matRestHeaders=[],this.columnAxes=[],this.matRowColumns=[],this.pivotColumnRowCount=0,this._pivotColumns$=new BehaviorSubject.X([]),this.cellColumns$=new BehaviorSubject.X([]),this.isLoading$=this.analyticsService.loading$,this.error$=this.analyticsService.selectResult().pipe((0,map.U)((result=>result.error))),this.data$=this.analyticsService.selectResult().pipe((0,map.U)((result=>result.data))),this.rowAxes$=this.analyticsService.analytics$.pipe((0,map.U)((analytics=>analytics.rows?.map((column=>({...column,name:column.dimension===src.QPo?(0,src.KbT)(src.QPo):column.property?.name,caption:column.caption||(column.dimension===src.QPo?src.QPo:column.property?.caption??column.name),memberCaption:(0,src.Imp)(column,this.entityType())||(column.dimension===src.QPo?src.og:column.name),displayBehaviour:column.displayBehaviour??src.CXV.descriptionOnly}))).filter((column=>!(0,src.kKJ)(column?.name)))??[])),(0,combineLatestWith.V)(this._columns$),(0,map.U)((([_columns,_columnsOptions])=>_columns.map((column=>this.mergeColumnOptions(column,column.name,_columnsOptions))))),(0,rxjs_interop.sL)(),(0,shareReplay.d)(1)),this.columnAxes$=this.analyticsService.selectResult().pipe((0,filter.h)((({error})=>!error)),(0,withLatestFrom.M)(this.analyticsService.selectEntityType()),(0,map.U)((([{schema},entityType])=>schema.columnAxes?.map((dimension=>{const property=(0,src.kb1)(dimension)?(0,src.ZBB)(entityType,dimension):(0,src.jEU)(entityType,dimension),measureCaption=this.getTranslation("Ngm.Common.Measures",{Default:"Measures"});return{...dimension,caption:(0,src.kb1)(dimension)?measureCaption:property.caption}}))))),this.querySchemaColumns=[],this.querySchemaColumns$=new BehaviorSubject.X([]),this.columnTreeControl=new tree.C2((node=>node.treeLevel),(node=>node.expandable)),this.columnsDataSource=new fesm2022_tree.kc(this.columnTreeControl,new fesm2022_tree.JZ(((node,level)=>({...(0,src.CEd)(node.raw,"label"),expandable:node.raw.childrenCardinality>0,caption:node.caption,treeLevel:level,colspan:node.raw.columns?.length||1})),(node=>node.treeLevel),(node=>node.expandable),(node=>node.children)),[]),this.rowTreeControl=new tree.C2((node=>node.level),(node=>node.expandable)),this.rowDataSource=new NgmTreeFlatDataSource(this.rowTreeControl,new fesm2022_tree.JZ(((node,level)=>({...node.raw??node,expandable:node.children?.length>0,key:node.key,name:node.name,caption:node.caption,level})),(node=>node.level),(node=>node.expandable),(node=>node.children)),[]),this.entityType=(0,core.signal)(null),this.visualMaps={},this.entityTypeSub=this.analyticsService.selectEntityType().pipe((0,rxjs_interop.sL)()).subscribe((entityType=>{this.entityTypeChange.emit(entityType),this.entityType.set(entityType)})),this.refreshSub=this.analyticsService.onAfterServiceInit().pipe((0,rxjs_interop.sL)()).subscribe((()=>{this.refresh()})),this.visualMapSub=this.analyticsService.analytics$.pipe((0,rxjs_interop.sL)()).subscribe({next:analytics=>{this.visualMaps=[...analytics.columns??[],...analytics.rows??[]].reduce(((visualMaps,dimension)=>((0,src.kb1)(dimension)&&(dimension.palette?.name||dimension.palette?.colors?.length)&&(dimension.measure?visualMaps[dimension.measure]=dimension:dimension.members&&dimension.members.filter(src.HD0).forEach((measure=>{visualMaps[measure]={...dimension,measure}}))),visualMaps)),{})}}),this.explainSub=(0,combineLatest.a)([this.analyticsService.dataSettings$,this.analyticsService.selectResult()]).pipe((0,rxjs_interop.sL)()).subscribe((([dataSettings,queryReturn])=>{this.explain.emit([dataSettings,queryReturn])})),this.pivotColumnsSub=this.columnsDataSource.connect({viewChange:(0,of.of)()}).pipe((0,rxjs_interop.sL)()).subscribe((columns=>{const levels=[[]];columns.forEach((pivotCol=>{let isCell,pivotcolspan=0;pivotCol.columns?.length?(levels[1]=levels[1]??[],pivotCol.columns.forEach((subCol=>{let colspan=1;subCol.columns?.length?(levels[2]=levels[2]??[],levels[2].push(...subCol.columns.map((item=>({...item,parent:subCol})))),colspan=subCol.columns.length):subCol.isCell=!0,levels[1].push({...subCol,parent:pivotCol,colspan}),pivotcolspan+=colspan}))):(pivotcolspan=1,isCell=!0),pivotCol.colspan=pivotcolspan,pivotCol.isCell=isCell,pivotCol.isCell&&(pivotCol.measure=pivotCol.name),levels[0].push(pivotCol)})),this.pivotColumns=levels})),this.querySchemaColumnsSub=this.querySchemaColumns$.pipe((0,rxjs_interop.sL)()).subscribe((columns=>{const treeDataNodes=columns.length?(0,src.LC)(columns,{valueProperty:"uniqueName",parentNodeProperty:"parentUniqueName",labelProperty:"caption"}):[];this.columnsDataSource.data=treeDataNodes,this.options?.initialColumnLevel>0&&this.columnTreeControl.dataNodes.forEach((node=>{this.columnTreeControl.getLevel(node)<this.options.initialColumnLevel&&this.columnTreeControl.expand(node)}))})),this.schemaColumnsSub=this.analyticsService.selectResult().pipe((0,filter.h)((({error})=>!error)),(0,debounceTime.b)(100),(0,withLatestFrom.M)(this.analyticsService.analytics$.pipe((0,map.U)((({columns})=>columns))),this.analyticsService.selectEntityType()),(0,combineLatestWith.V)(this._columns$),(0,rxjs_interop.sL)()).subscribe((([[result,_columns,entityType],_columnsOptions])=>{Object.keys(this.visualMaps).forEach((name=>{this.visualMaps[name].maxValue=null,this.visualMaps[name].minValue=null}));const cellColumns=[],querySchemaColumns=result.schema?.columns?.map((item=>{const column=this.characteristicValue(this.mergeColumnOptions(item,item.name,_columnsOptions,_columns,entityType),result.data);return column.columns?.length||cellColumns.push(column),{...result.schema.columnAxes[0],...column,columns:item.columns?.map((item=>{const column=this.characteristicValue(this.mergeColumnOptions(item,item.measure,_columnsOptions,_columns,entityType),result.data);return column.columns?.length||cellColumns.push(column),{...result.schema.columnAxes[1],...column,columns:item.columns?.map((item=>{const column=this.characteristicValue(this.mergeColumnOptions(item,item.measure,_columnsOptions,_columns,entityType),result.data);return column.columns?.length||cellColumns.push(column),{...result.schema.columnAxes[2],...column}}))}}))}}));this.cellColumns$.next(cellColumns),this.querySchemaColumns=querySchemaColumns,this.querySchemaColumns$.next(querySchemaColumns?[...querySchemaColumns]:[])})),this._pivotColumnsSub=this._pivotColumns$.pipe((0,withLatestFrom.M)(this.rowAxes$,this.columnAxes$)).subscribe((([levels,rowAxes,columnAxes])=>{this.rowAxes=rowAxes,this.columnAxes=columnAxes;const pivotColumnNames=levels.map((item=>item.map((column=>column.name))));this.pivotColumnRowCount=pivotColumnNames.length;const rowColumns=rowAxes.map((row=>row.name));this.pivotColumnRowCount>1?(this.matHeaders=(0,src.oA$)([...rowColumns,columnAxes[0].dimension,...pivotColumnNames[0]]),this.matRestHeaders=pivotColumnNames.slice(1).map(((columns,index)=>(0,src.oA$)([columnAxes[index+1].dimension,...columns])))):this.matHeaders=(0,src.oA$)([...rowColumns,...pivotColumnNames[0]]),this.matRowColumns=(0,src.oA$)(rowColumns.length?[...rowColumns,...pivotColumnNames[pivotColumnNames.length-1]]:[columnAxes[columnAxes.length-1].dimension,...pivotColumnNames[pivotColumnNames.length-1]]),this.cdr.detectChanges()})),this.filteredTreeDataSub=this.filteredData$.pipe((0,filter.h)((()=>this.rowRecursiveHierarchy)),(0,withLatestFrom.M)(this.rowAxes$),(0,rxjs_interop.sL)()).subscribe({next:([data,rows])=>{const compositeKeys=rows.map((row=>row.name)).filter((key=>key!==this.rowRecursiveHierarchy.valueProperty));this.rowDataSource.data=(0,src.LC)(data,this.rowRecursiveHierarchy,{compositeKeys}),this.options?.initialRowLevel>0&&this.rowTreeControl.dataNodes.forEach((node=>{this.rowTreeControl.getLevel(node)<this.options.initialRowLevel&&this.rowTreeControl.expand(node)})),this.cdr.detectChanges()}}),this.dataSub=this.analyticsService.selectResult().pipe((0,filter.h)((({error})=>!error)),(0,debounceTime.b)(200),(0,withLatestFrom.M)(this.cellColumns$),(0,rxjs_interop.sL)()).subscribe((([{data,schema},columns])=>{schema?.recursiveHierarchy?(this.rowRecursiveHierarchy=schema.recursiveHierarchy,this.rowTreeProperty.set(schema.rowHierarchy)):(this.rowRecursiveHierarchy=null,this.rowTreeProperty.set(null)),data=data.map((item=>({...item}))),columns.forEach((column=>{data.forEach((row=>{row[column.name]={value:row[column.name],...this.calcCellStyles(column,row),classes:this.calcCellClasses(column,row)}}))})),this._data$.next(data)})),this.filteredFlatDataSub=this.filteredData$.pipe((0,filter.h)((()=>!this.rowRecursiveHierarchy)),(0,rxjs_interop.sL)()).subscribe((data=>{this.flatDataSource.data=data})),this._columnMembers=new Map,this.treeData=(0,rxjs_interop.O4)(this.rowDataSource.connect({viewChange:(0,of.of)({start:0,end:Number.MAX_SAFE_INTEGER})})),this.flatData=(0,rxjs_interop.O4)(this.flatDataSource.connect()),(0,core.effect)((()=>{const slicers=this._slicers();if(this.dataSettings){const dataSettings={...this.dataSettings,selectionVariant:{...this.dataSettings.selectionVariant??{},selectOptions:[...this.dataSettings.selectionVariant?.selectOptions??[]]}};slicers&&dataSettings.selectionVariant.selectOptions.push(...slicers),this.analyticsService.dataSettings=dataSettings}}),{allowSignalWrites:!0}),(0,core.effect)((()=>{this._paginator()?this.rowTreeProperty()?(this.flatDataSource.paginator=null,this.rowDataSource.paginator=this._paginator()):(this.flatDataSource.paginator=this._paginator(),this.rowDataSource.paginator=null):(this.flatDataSource.paginator=null,this.rowDataSource.paginator=null)}),{allowSignalWrites:!0})}focus(origin,options){origin?this._focusMonitor.focusVia(this._getHostElement(),origin,options):this._getHostElement().focus(options)}_getHostElement(){return this.elementRef.nativeElement}ngOnChanges({appearance}){appearance&&(this.appearance?.displayDensity===displayDensity.A.compact?this.virtualScrollItemSize=30:this.appearance?.displayDensity===displayDensity.A.cosy?this.virtualScrollItemSize=36:this.virtualScrollItemSize=48)}ngAfterViewInit(){this.flatDataSource.sort=this.sort,this._focusMonitor.monitor(this.elementRef,!0)}refresh(force){this.analyticsService.refresh(force)}mergeColumnOptions(column,columnName,_columnsOptions,_columns,entityType){const property=(0,src.ZBB)(entityType,columnName);if((0,src.mKs)(property)){const formatting=property.formatting??{};column={...column,formatting:(0,src.kg4)(formatting,column.formatting)}}const originColumn=_columns?.filter(src.kb1).find((item=>item.measure===columnName));originColumn&&(0,src.JHz)(column,originColumn);const options=_columnsOptions?.[column.name];if(options&&((0,src.JHz)(column,options),options.semantic)){(Array.isArray(options.semantic)?options.semantic:[options.semantic]).forEach((_semantic=>{column.cellClasses=(0,src.f0i)(column.cellClasses,function resolveSemanticClasses(semantic,columnName){const classes={},parser=new Parser,styles=semantic.style||"";return Object.keys(semantic.expression).forEach((key=>{const expression=semantic.expression[key].replace(/\{Value\}/g,"__x__"),expr=parser.parse(expression);styles.split(" ").forEach((style=>{classes[style?`ngm-semantic--${key}--${style}`:`ngm-semantic--${key}`]=(rowData,columnKey)=>expr.evaluate({...rowData,__x__:rowData[columnKey]})}))})),classes}(_semantic,column.name))}))}return!column.formatting?.digitsInfo&&(0,src.hj$)(column.formatting?.decimal)&&(column.formatting={...column.formatting,digitsInfo:`0.${column.formatting.decimal}-${column.formatting.decimal}`}),column}characteristicValue(column,data){return!column.columns?.length&&column.measure&&(column.bar||this.visualMaps[column.measure])&&(column.minValue=(0,minBy.Z)(data,column.name)?.[column.name],column.maxValue=(0,maxBy.Z)(data,column.name)?.[column.name],this.visualMaps[column.measure]&&(!(0,src.kKJ)(column.minValue)&&((0,src.kKJ)(this.visualMaps[column.measure].minValue)||column.minValue<this.visualMaps[column.measure].minValue)&&(this.visualMaps[column.measure].minValue=column.minValue),!(0,src.kKJ)(column.maxValue)&&((0,src.kKJ)(this.visualMaps[column.measure].maxValue)||column.maxValue>this.visualMaps[column.measure].maxValue)&&(this.visualMaps[column.measure].maxValue=column.maxValue))),column}isRowSelected(row,i){return this.selected.i===i&&this.selected.rowMembers&&!Object.keys(this.selected.rowMembers).some((name=>this.selected.rowMembers[name]!==row[name]))}isRowCell(element,column,j){return(0,src.kb1)(this.selected.column)?this.selected.rowMembers?.[column.name]===element[column.name]:this.selected.column?.name===column.name}selectRow(i,row){const rowMembers=this.rowAxes.reduce(((acc,column)=>(acc[column.name]=row[column.name],acc)),{});if(this.selected.i===i&&(0,src.Xyp)(rowMembers,this.selected.rowMembers)&&this.selected.prevColumn===this.selected.column.name)this.selected.i=null,this.selected.rowMembers=null,this.selected.column=null,this.selected.columnMembers=null,this.unlinkAnalysis();else{this.selected.prevI=this.selected.i,this.selected.i=i,this.selected.rowMembers=rowMembers;let slicers=[];if((0,src.kb1)(this.selected.column))slicers=[...this.rowAxes.map((column=>({dimension:{dimension:column.dimension,hierarchy:column.hierarchy},members:[{key:row[(0,src.Ex7)(column)],caption:row[column.memberCaption],value:row[(0,src.Ex7)(column)]}]}))),...Object.values(this.selected.columnMembers).filter((0,src.tkI)(src.kb1)).map((column=>({dimension:{dimension:column.dimension,hierarchy:column.hierarchy},members:[column.member]})))];else{const column=this.selected.column;slicers=[{dimension:{dimension:column.dimension,hierarchy:column.hierarchy},members:[{key:row[(0,src.Ex7)(column)],caption:row[column.memberCaption],value:row[(0,src.Ex7)(column)]}]}]}this.onLinkAnalysis(slicers)}}selectCell(column){for(this.selected.prevColumn=this.selected.column?.name,this.selected.column=column,this.selected.columnMembers={};column;)this.selected.columnMembers[column.name]=column,column=column.parent}onClickColumnHeader(event,column){this.options?.selectable&&(event.stopPropagation(),event.preventDefault(),this.selected.column?.name===column.name?(this.selected.column=null,this.columnSelectionChanging.emit({owner:this,newSelection:[]})):(this.selected.column=column,this.columnSelectionChanging.emit({owner:this,newSelection:[this.selected.column]})))}toggleColumnTree(column){const member=this.columnTreeControl.dataNodes.find((item=>item.name===column.name));this.columnTreeControl.toggle(member)}toggleRowUnfold(event){event.stopPropagation(),this.rowUnfold=!this.rowUnfold,this.rowUnfold?this.rowTreeControl.expandAll():this.rowTreeControl.collapseAll()}toggleColumnUnfold(event){event.stopPropagation(),this.columnUnfold=!this.columnUnfold,this.columnUnfold?this.columnTreeControl.expandAll():this.columnTreeControl.collapseAll()}toggleRowTree(event,row){event.preventDefault(),event.stopPropagation(),this.rowTreeControl.toggle(row)}onFilterSelectAll(event,column,members){event.checked?column._selections=members.map((({value})=>value)):column._selections=[]}allFiltering(column,members){return column._selections?.length===members?.length}someFiltering(column,members){return!!(column._selections?.length&&column._selections.length<members?.length)}onFilterApply(column,members){this.allFiltering(column,members)?column.selections=[]:column.selections=[...column._selections],column.selections.length?this.dimensionFilters={...this.dimensionFilters,[column.name]:column.selections}:this.dimensionFilters=(0,src.CEd)(this.dimensionFilters,column.name),this.cdr.detectChanges()}moveLeft(name){this.matHeaders=moveLeft(this.matHeaders,name),this.matRowColumns=moveLeft(this.matRowColumns,name)}moveRight(name){this.matHeaders=moveRight(this.matHeaders,name),this.matRowColumns=moveRight(this.matRowColumns,name)}onColumnMemberSearch(column,text){this._columnMembers.get(column.name).search.next(text)}calcCellClasses(column,row){return Object.entries(column.cellClasses??{}).reduce(((cellClasses,[name,fun])=>{try{cellClasses[name]="string"==typeof fun?fun:fun(row,column.name)}catch(err){}return cellClasses}),{})}calcCellStyles(column,row){const styles={cellStyles:{},barStyles:{}},visualStyles=this.calcHeatmapColor(column,row);return column.bar?(styles.barStyles={...visualStyles},styles.cellStyles={color:visualStyles.color,textAlign:"left"},(0,src.hj$)(row[column.name])&&(row[column.name]>0?column.minValue>0?styles.barStyles.width=(row[column.name]-column.minValue)/(column.maxValue-column.minValue)*100+"%":(styles.barStyles.width=(row[column.name]-0)/(column.maxValue-column.minValue)*100+"%",styles.barStyles.left=(0-column.minValue)/(column.maxValue-column.minValue)*100+"%"):(styles.barStyles.width=(0-row[column.name])/(column.maxValue-column.minValue)*100+"%",styles.barStyles.left=(row[column.name]-column.minValue)/(column.maxValue-column.minValue)*100+"%",styles.barClasses="bar-negative"))):styles.cellStyles={...visualStyles},styles}calcHeatmapColor(column,row){const styles={},visualMap=this.visualMaps[column.measure];if(!(0,src.kKJ)(visualMap)&&(0,src.hj$)(row[column.name])){let backgroundColor=null;if(visualMap.palette.colors?.length){const size=visualMap.palette.colors.length,index=Math.ceil((row[column.name]-visualMap.minValue)/(visualMap.maxValue-visualMap.minValue)*size);backgroundColor=visualMap.palette.colors[0===index?index:index-1]}else{backgroundColor=function getChromaticScale(name,domain,reverse){const colorScheme=CHROMATICS?.find((item=>item.useValue.name===name))?.useValue;if(!colorScheme)throw new Error(`Can't find colorScheme for name '${name}'`);let scaleFun=null;return scaleFun=colorScheme.type===NxChromaticType.Categorical?reverse?(0,ordinal.Z)(Array.from(colorScheme.value).reverse()):(0,ordinal.Z)(colorScheme.value):(0,sequential.ZP)(reverse?t=>colorScheme.value(1-t):colorScheme.value),domain?.length?scaleFun.domain(domain):scaleFun}(visualMap.palette.name,[0,100],visualMap.palette.reverse)(Math.ceil((row[column.name]-visualMap.minValue)/(visualMap.maxValue-visualMap.minValue)*100))}styles["background-color"]=backgroundColor,styles.color=function getContrastYIQ(hexcolor){return hexcolor?(hexcolor.startsWith("rgb(")&&(hexcolor=function rgb2hex(c){return"#"+c.match(/\d+/g).map((x=>(+x).toString(16).padStart(2,"0"))).join("")}(hexcolor)),(299*parseInt(hexcolor.slice(1,3),16)+587*parseInt(hexcolor.slice(3,5),16)+114*parseInt(hexcolor.slice(5,7),16))/1e3>=128?"black":"white"):null}(backgroundColor)}return styles}calcBar(column,row){const styles={};if(column.bar&&(0,src.hj$)(row[column.name])){const percent=Math.ceil((row[column.name]-column.minValue)/(column.maxValue-column.minValue)*100);styles.width=percent+"%"}return styles}toggleColumnOrder(index){const columnLevel=this.columnAxes[index];columnLevel.sortDirection=columnLevel.sortDirection?"asc"===columnLevel.sortDirection?"desc":null:"asc";let querySchemaColumns=this.columnAxes[0].sortDirection?(0,orderBy.Z)(this.querySchemaColumns,"name",this.columnAxes[0].sortDirection):[...this.querySchemaColumns];this.columnAxes[1].sortDirection&&(querySchemaColumns=querySchemaColumns.map((item=>({...item,columns:(0,orderBy.Z)(item.columns,"name",this.columnAxes[1].sortDirection)})))),this.querySchemaColumns$.next(querySchemaColumns)}subscribeColumnMembers(column){if(!this._columnMembers.get(column.name)){const search=new BehaviorSubject.X(null),members=this._data$.pipe((0,combineLatestWith.V)(this._dimensionFilters$.pipe((0,map.U)((filters=>(0,src.CEd)(filters,column.name))))),(0,map.U)((([data,filters])=>(0,src.mNm)(filterArray(data,filters),column.name).map((item=>({key:item[column.name],value:item[column.name],label:item[column.name]?item[column.memberCaption]:"(Blanks)",caption:item[column.name]?item[column.memberCaption]:"(Blanks)"}))))),(0,shareReplay.d)(1));this._columnMembers.set(column.name,{members,filteredMembers:members.pipe((0,combineLatestWith.V)(search),(0,map.U)((([members,text])=>(text=text?.trim().toLowerCase(),text?members.filter((({key,caption})=>caption?.toLowerCase().includes(text.toLowerCase()))):members))),(0,shareReplay.d)(1)),search})}return this._columnMembers.get(column.name).members}subscribeColumnFilteredMembers(column){return this._columnMembers.get(column.name).filteredMembers}downloadData(){var _this=this;return(0,asyncToGenerator.Z)((function*(){const result=yield(0,firstValueFrom.z)(_this.analyticsService.selectResult());(0,csv.O)(result.data,(_this.title||"data")+".csv",",")}))()}copy(selected){const treeData=this.treeData(),flatData=this.flatData();try{let text=null;(0,src.kKJ)(selected.i)||(0,src.kKJ)(selected.j)?selected.column&&(text=(treeData.length?treeData:flatData).map((row=>row[selected.column].value)).join("\r\n")):text=`${(treeData.length?treeData:flatData)[selected.i][selected.j].value}`,text&&navigator.clipboard.writeText(text).catch((()=>{console.error("Unable to copy cell")}))}catch(err){}}onLinkAnalysis(slicers){this.slicersChanging.emit(slicers)}unlinkAnalysis(){this.onLinkAnalysis([])}getTranslation(keyWord,params){let result="";return this.translateService.get(keyWord,params).subscribe((text=>{result=text})),result}get _isStriped(){return this.options?.strip}get _withToolbar(){return this.options?.showToolbar}keyUpEvent(event){event.ctrlKey&&"c"===event.key&&this.copy(this.selected)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this.elementRef)}},_AnalyticalGridComponent.ctorParameters=()=>[{type:ngx_translate_core.sK},{type:core.ChangeDetectorRef},{type:a11y.tE},{type:core.ElementRef}],_AnalyticalGridComponent.propDecorators={title:[{type:core.Input}],dataSettings:[{type:core.Input}],options:[{type:core.Input}],appearance:[{type:core.Input}],styling:[{type:core.Input}],columns:[{type:core.Input,args:[{isSignal:!0,alias:"columns",required:!1,transform:void 0}]}],slicers:[{type:core.Input}],columnSelectionChanging:[{type:core.Output}],slicersChanging:[{type:core.Output}],explain:[{type:core.Output}],entityTypeChange:[{type:core.Output}],paginator:[{type:core.ViewChild,args:[paginator.NW]}],sort:[{type:core.ViewChild,args:[sort.YE]}],_isStriped:[{type:core.HostBinding,args:["class.striped"]}],_withToolbar:[{type:core.HostBinding,args:["class.ngm-with-toolbar"]}],keyUpEvent:[{type:core.HostListener,args:["document:keyup",["$event"]]}]},_AnalyticalGridComponent);AnalyticalGridComponent=(0,tslib_es6.gn)([(0,core.Component)({changeDetection:core.ChangeDetectionStrategy.OnPush,selector:"ngm-analytical-grid",template:'<div *ngIf="options?.showToolbar" class="ngm-card-header flex justify-between items-center" [ngStyle]="styling?.bar">\n  <div>{{ title }}</div>\n\n  <div style="flex: 1; display: flex; place-content: center flex-end; align-items: center;">\n    <ng-content></ng-content>\n  </div>\n\n  <div class="actions flex justify-around items-center">\n\n    <ng-content select="[ngmAction]"></ng-content>\n\n    \x3c!-- data download --\x3e\n    <button mat-icon-button *ngIf="!options?.hideDataDownload" displayDensity="cosy"\n      [matTooltip]=" \'Ngm.AnalyticalGrid.DataDownload\' | translate: {Default: \'Data Download\'} "\n      (click)="downloadData()">\n      <mat-icon fontSet="material-icons-outlined">file_download</mat-icon>\n    </button>\n\n    \x3c!-- Refresh & Loading icon --\x3e\n    <button mat-icon-button class="ngm-analytical-grid__refresh" displayDensity="cosy"\n      [style.opacity]="(isLoading$ | async) ? \'0\' : \'1\'"\n      [style.visibility]="(isLoading$ | async) ? \'hidden\' : \'visible\'"\n      (click)="refresh()">\n      <mat-icon fontSet="material-icons-outlined">refresh</mat-icon>\n    </button>\n    \n    <mat-spinner *ngIf="isLoading$ | async" displayDensity="cosy"\n      [diameter]="20"\n      [strokeWidth]="1"\n    >\n    </mat-spinner>\n  </div>\n</div>\n\n<div class="ngm-card-content">\n  <div *ngIf="error$ | async as error; else content" class="ngm-card-error">\n    <span class="text-2xl font-notoColorEmoji">🐞</span>\n    <span>{{error}}</span>\n  </div>\n\n  <ng-template #content>\n  <table mat-table [class.ngm-table-grid]="options?.grid" [displayDensity]="appearance?.displayDensity"\n    [dataSource]="dataSource"\n    matSort [matSortDisabled]="!options?.sortable"\n    [matSortActive]="matSortActive"\n    [matSortDirection]="matSortDirection"\n    >\n    \x3c!-- rows --\x3e\n    @for (column of rowAxes; track column.name + column.caption; let j = $index; let last = $last) {\n      <ng-container [matColumnDef]="column.name" [sticky]="column.sticky">\n        <th mat-header-cell *matHeaderCellDef mat-sort-header [attr.rowspan]="pivotColumnRowCount"\n          class="ngm-analytical-grid__dimension"\n          [class.ngm-analytical-grid__measure]="column.property?.role === AggregationRole.measure"\n        >\n          <button *ngIf="column.name === rowTreeProperty()" mat-icon-button [displayDensity]="appearance?.displayDensity"\n            (click)="toggleRowUnfold($event)">\n            <mat-icon *ngIf="!rowUnfold">unfold_more</mat-icon>\n            <mat-icon *ngIf="rowUnfold">unfold_less</mat-icon>\n          </button>\n  \n          {{column.caption || column.name}}\n  \n          <button mat-icon-button displayDensity="compact" [color]="column.selections?.length ? \'accent\' : \'\'"\n            cdkOverlayOrigin #trigger="cdkOverlayOrigin"\n            (click)="$event.stopPropagation();$event.preventDefault();column.isFilterOpen=!column.isFilterOpen">\n            <mat-icon [color]="column.selections?.length ? \'accent\' : \'\'">more_vert</mat-icon>\n          </button>\n          <ng-template\n            cdkConnectedOverlay cdkConnectedOverlayHasBackdrop\n            [cdkConnectedOverlayOrigin]="trigger"\n            [cdkConnectedOverlayOpen]="column.isFilterOpen"\n            (backdropClick)="column.isFilterOpen=false"\n          >\n            <mat-card *ngIf="subscribeColumnMembers(column) | async as members" class="ngm-analytical-grid__filtering-card"\n              [displayDensity]="appearance?.displayDensity" >\n              <mat-card-title class="text-lg p-2">\n                <ngm-display-behaviour [option]="{value: column.name, label: column.caption}"></ngm-display-behaviour>\n              </mat-card-title>\n              <div class="flex flex-col justify-start items-stretch gap-1 px-2">\n                <div>{{\'Ngm.AnalyticalGrid.SORT\' | translate: {Default: \'SORT\'} }}</div>\n                <div class="flex justify-between items-center">\n                  <button mat-button displayDensity="cosy" [color]="matSortActive===column.name && matSortDirection===\'asc\' ? \'accent\' : \'\'"\n                    (click)="matSortActive===column.name && matSortDirection===\'asc\' ? ((matSortActive=null)&&matSortDirection=null) : ((matSortActive=column.name)&&matSortDirection=\'asc\')">\n                    <mat-icon>arrow_upward</mat-icon>\n                    {{ \'Ngm.AnalyticalGrid.ASCENDING\' | translate: {Default: \'ASCENDING\'} }}\n                  </button>\n                  <button mat-button displayDensity="cosy" [color]="matSortActive===column.name && matSortDirection===\'desc\' ? \'accent\' : \'\'"\n                    (click)="matSortActive===column.name && matSortDirection===\'desc\' ? ((matSortActive=null)&&matSortDirection=null) : ((matSortActive=column.name)&&matSortDirection=\'desc\')"\n                    ><mat-icon>arrow_downward</mat-icon>\n                    {{ \'Ngm.AnalyticalGrid.DESCENDGING\' | translate: {Default: \'DESCENDGING\'} }}\n                  </button>\n                </div>\n                <div>{{\'Ngm.AnalyticalGrid.MOVE\' | translate: {Default: \'MOVE\'} }}</div>\n                <div class="flex justify-between items-center">\n                  <button mat-button displayDensity="cosy" (click)="moveLeft(column.name)"><mat-icon>arrow_back</mat-icon>\n                    {{ \'Ngm.AnalyticalGrid.MOVELEFT\' | translate: {Default: \'MOVE LEFT\'} }}\n                  </button>\n                  <button mat-button displayDensity="cosy" (click)="moveRight(column.name)">{{ \'Ngm.AnalyticalGrid.MOVERIGHT\' | translate: {Default: \'MOVE RIGHT\'} }}<mat-icon>arrow_forward</mat-icon></button>\n                </div>\n\n                <button mat-button class="w-full" displayDensity="cosy" [color]="column.sticky?\'accent\':\'\'" (click)="column.sticky=!column.sticky">\n                  <mat-icon>push_pin</mat-icon>{{ \'Ngm.AnalyticalGrid.Pin\' | translate: {Default: \'Pin\'} }}\n                </button>\n  \n                <ngm-search class="shrink-0" [(ngModel)]="column.search" (ngModelChange)="onColumnMemberSearch(column, $event)"></ngm-search>\n              </div>\n              <div class="ngm-analytical-grid__filtering">\n                <mat-divider ngmAppearance="dashed"></mat-divider>\n                \n                <cdk-virtual-scroll-viewport [itemSize]="virtualScrollItemSize" minBufferPx="200" maxBufferPx="400" class="ngm-analytical-grid__viewport">\n                  <mat-selection-list *ngIf="subscribeColumnFilteredMembers(column) | async as members" [displayDensity]="appearance?.displayDensity"\n                    [(ngModel)]="column._selections">\n                    <div matSubheader class="ngm-selection-list__select-all flex">\n                      <mat-checkbox class="flex-1" labelPosition="before"\n                        [checked]="allFiltering(column, members)"\n                        [indeterminate]="someFiltering(column, members)"\n                        (change)="onFilterSelectAll($event, column, members)"\n                      >{{ \'Ngm.AnalyticalGrid.SelectAll\' | translate: {Default: \'Select All\'} }}</mat-checkbox>\n                    </div>\n                    <mat-list-option *cdkVirtualFor="let member of members" class="rounded-lg"\n                      [value]="member.value"\n                      >\n                      <ngm-display-behaviour class="flex-1"\n                        [option]="member"\n                        [displayBehaviour]="column.displayBehaviour">\n                      </ngm-display-behaviour>\n                    </mat-list-option>\n                  </mat-selection-list>\n                </cdk-virtual-scroll-viewport>\n              </div>\n              <mat-divider ngmAppearance="dashed"></mat-divider>\n              <div class="ngm-analytical-grid__filtering-actions pt-2">\n                <div ngmButtonGroup displayDensity="cosy">\n                  <button mat-flat-button displayDensity="cosy"\n                    (click)="column.isFilterOpen=false;column._selections=column.selections">\n                    {{ \'Ngm.Common.Cancel\' | translate: {Default: \'Cancel\'} }}\n                  </button>\n                  <button mat-raised-button color="accent" displayDensity="cosy" [disabled]="!column._selections?.length"\n                    (click)="column.isFilterOpen=false;onFilterApply(column, members)">\n                    {{ \'Ngm.Common.Apply\' | translate: {Default: \'Apply\'} }}\n                  </button>\n                </div>\n              </div>\n            </mat-card>\n          </ng-template>\n        </th>\n        \n        <td mat-cell *matCellDef="let element;" [attr.colspan]="last && pivotColumnRowCount > 1 ? 2 : 1"\n          class="ngm-analytical-grid__dimension"\n          [class.ngm-analytical-grid__measure]="column.property?.role === AggregationRole.measure"\n          [class.selected-member]="isRowCell(element, column, j)"\n          [class.selected]="column.name === selected.column?.name"\n          (click)="selectCell(column)"\n        >\n          <div class="flex justify-start items-center">\n            <ng-container *ngIf="column.name === rowTreeProperty()">\n              <button mat-icon-button [displayDensity]="appearance?.displayDensity"\n                  [style.visibility]="!element.expandable ? \'hidden\' : \'\'"\n                  [style.marginLeft.px]="element.level * treeNodePadding"\n                  (click)="toggleRowTree($event, element)"\n                  >\n                  <mat-icon class="mat-icon-rtl-mirror">\n                    {{rowTreeControl.isExpanded(element) ? \'expand_more\' : \'chevron_right\'}}\n                  </mat-icon>\n              </button>\n            </ng-container>\n      \n            <ngm-display-behaviour *ngIf="column.property?.role !== AggregationRole.measure" class="flex-1"\n              [option]="{key: element[column.name], value: element[column.name], caption: element[column.memberCaption]}"\n              [displayBehaviour]="column.displayBehaviour">\n            </ngm-display-behaviour>\n          </div>\n        </td>\n      </ng-container>\n    }\n    \n    <ng-container *ngIf="pivotColumnRowCount > 1">\n      <ng-container *ngFor="let columnAxis of columnAxes; let i = index" [matColumnDef]="columnAxis.dimension">\n        <th *matHeaderCellDef mat-header-cell>\n          <button *ngIf="columnAxis.displayHierarchy" mat-icon-button [displayDensity]="appearance?.displayDensity"\n            (click)="toggleColumnUnfold($event)">\n            <mat-icon *ngIf="!columnUnfold">unfold_more</mat-icon>\n            <mat-icon *ngIf="columnUnfold">unfold_less</mat-icon>\n          </button>\n          {{columnAxis.caption || columnAxis.dimension}}\n          \n          <ng-container *ngIf="options?.sortable && columnAxis.dimension !== C_MEASURES">\n            <button mat-icon-button *ngIf="columnAxis.sortDirection" displayDensity="compact"\n              (click)="toggleColumnOrder(i)">\n              <mat-icon *ngIf="columnAxis.sortDirection===\'asc\'">arrow_left</mat-icon>\n              <mat-icon *ngIf="columnAxis.sortDirection===\'desc\'">arrow_right</mat-icon>\n            </button>\n            <button mat-icon-button *ngIf="!columnAxis.sortDirection" displayDensity="compact" class="ngm-analytical-grid__want-order"\n              (click)="toggleColumnOrder(i)">\n              <mat-icon>arrow_left</mat-icon>\n            </button>\n          </ng-container>\n        </th>\n\n        <td mat-cell *matCellDef="let element;">\n        </td>\n      </ng-container>\n    </ng-container>\n\n    \x3c!-- columns --\x3e\n    <ng-container *ngFor="let columns of pivotColumns; let i = index; last as last">\n      <ng-container [matColumnDef]="column.name" *ngFor="let column of columns; let j = index;">\n        <th mat-header-cell *matHeaderCellDef \n          [attr.colspan]="column.colspan"\n          [class.ngm-analytical-grid__measure]="last"\n          [class.selected-member]="selected.columnMembers?.[column.name]"\n          [class.selected]="selected.column?.name === column.name"\n          (click)="onClickColumnHeader($event, column)"\n          >\n          <div class="flex justify-start items-center" [style.marginTop.px]="column.treeLevel * treeNodePadding">\n            <button mat-icon-button *ngIf="column.expandable" [displayDensity]="appearance?.displayDensity"\n              [style.visibility]="!column.expandable ? \'hidden\' : \'\'"\n              (click)="toggleColumnTree(column)"\n              >\n              <mat-icon class="mat-icon-rtl-mirror">\n                {{columnTreeControl.isExpanded(column) ? \'expand_more\' : \'chevron_right\'}}\n              </mat-icon>\n            </button>\n\n            <div class="pivot-column-header-content">\n              {{column.caption || column.name}}\n            </div>\n\n            <div *ngIf="last" mat-sort-header [disabled]="!options?.sortable"></div>\n          </div>\n        </th>\n\n        <ng-container *ngIf="last">\n          <td mat-cell *matCellDef="let element;" class="ngm-analytical-grid__measure"\n            [class.selected-cell]="selected.column?.name === column.name"\n            [class.ngm-analytical-grid__cell-empty]="isNil(element[column.name]?.value)"\n            [ngStyle]="element[column.name]?.cellStyles"\n            [ngClass]="element[column.name]?.classes"\n            (mousedown)="selectCell(column)">\n            <div *ngIf="column.bar" [ngStyle]="element[column.name]?.barStyles"\n              [ngClass]="element[column.name]?.barClasses"\n              class="ngm-analytical-grid__cell-bar"\n            ></div>\n            <span *ngIf="element[column.name]?.value === null || element[column.name]?.value === undefined; else cell" class="cell-value">-</span>\n            <ng-template #cell>\n              <span *ngIf="column.formatting?.currencyCode || options?.currencyCode; else plain" class="cell-value">\n                {{element[column.name]?.value | currency: column.formatting?.currencyCode || options?.currencyCode:\'symbol\':column.formatting?.digitsInfo || options?.digitsInfo}}\n              </span>\n            </ng-template>\n\n            <ng-template #plain>\n              <span class="cell-value">\n                <span *ngIf="(column.formatting?.unit ?? options?.unit) === \'%\'; else digits" class="ngm-analytical-grid__measure-value">\n                  {{element[column.name].value * 100 | number: column.formatting?.digitsInfo || options?.digitsInfo ?? \'0.0-2\'}}\n                </span>\n                \n                <span *ngIf="column.formatting?.unit || options?.unit" class="ngm-analytical-grid__measure-unit">\n                  {{column.formatting?.unit || options?.unit}}\n                </span>\n              </span>\n            </ng-template>\n\n            <ng-template #digits>\n              <span class="ngm-analytical-grid__measure-value">\n                {{element[column.name]?.value | number: column.formatting?.digitsInfo || options?.digitsInfo || \'0.0-2\'}}\n              </span>\n            </ng-template>\n          </td>\n        </ng-container>\n      </ng-container>\n    </ng-container>\n    \n    \x3c!-- 单独设置一行抬头是因为全部放在下面循环里创建的话没有被识别出来, 还未找到原因 --\x3e\n    <tr mat-header-row *matHeaderRowDef="matHeaders; sticky:options?.sticky" [ngStyle]="styling?.bar"></tr>\n    <tr mat-header-row *matHeaderRowDef="matRestHeaders[0]; sticky:options?.sticky" [class.empty]="!matRestHeaders[0]" [ngStyle]="styling?.bar"></tr>\n    <tr mat-header-row *matHeaderRowDef="matRestHeaders[1]; sticky:options?.sticky;" [class.empty]="!matRestHeaders[1]" [ngStyle]="styling?.bar"></tr>\n\n    \x3c!-- 循环里的 mat-header-row 当变化时没有被识别出来, 所以固定写死几行 header row 用 empty class 的方式将空行其隐藏 --\x3e\n    \x3c!-- <ng-container *ngFor="let columns of displayedColumns;">\n      <tr mat-header-row *matHeaderRowDef="columns; sticky:options?.sticky"></tr>\n    </ng-container> --\x3e\n\n    <tr mat-row *matRowDef="let row; columns: matRowColumns; let i = index"\n      [class.selected]="isRowSelected(row, i)"\n      (click)="selectRow(i, row)"\n      >\n    </tr>\n  </table>\n  </ng-template>\n</div>\n\n<mat-paginator *ngIf="options?.paging" [displayDensity]="appearance?.displayDensity"\n  [pageSize]="options?.pageSize" [pageSizeOptions]="[20, 50, 100]" showFirstLastButtons></mat-paginator>\n\n<div *ngIf="isLoading$ | async" class="absolute top-0 left-0 w-full h-full flex justify-center items-center">\n  <mat-spinner strokeWidth="2" diameter="30"></mat-spinner>\n</div>\n',host:{"[attr.tabindex]":"disabled ? -1 : 0","[attr.disabled]":"disabled || null","[attr.aria-disabled]":"disabled.toString()",class:"ngm-analytical-grid mat-focus-indicator"},providers:[NgmAnalyticsBusinessService,{provide:paginator.Zf,useValue:{formFieldAppearance:"outline"}}],styles:[analytical_grid_componentngResource_default()]}),(0,tslib_es6.w6)("design:paramtypes",[ngx_translate_core.sK,core.ChangeDetectorRef,a11y.tE,core.ElementRef])],AnalyticalGridComponent);var overlay=__webpack_require__("./node_modules/@angular/cdk/fesm2022/overlay.mjs"),fesm2022_forms=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs"),card=__webpack_require__("./node_modules/@angular/material/fesm2022/card.mjs"),fesm2022_checkbox=__webpack_require__("./node_modules/@angular/material/fesm2022/checkbox.mjs"),divider=__webpack_require__("./node_modules/@angular/material/fesm2022/divider.mjs"),form_field=__webpack_require__("./node_modules/@angular/material/fesm2022/form-field.mjs"),icon=__webpack_require__("./node_modules/@angular/material/fesm2022/icon.mjs"),input=__webpack_require__("./node_modules/@angular/material/fesm2022/input.mjs"),list=__webpack_require__("./node_modules/@angular/material/fesm2022/list.mjs"),menu=__webpack_require__("./node_modules/@angular/material/fesm2022/menu.mjs"),progress_spinner=__webpack_require__("./node_modules/@angular/material/fesm2022/progress-spinner.mjs"),tooltip=__webpack_require__("./node_modules/@angular/material/fesm2022/tooltip.mjs"),common_module=__webpack_require__("./packages/angular/common/common.module.ts");let AnalyticalGridModule=class AnalyticalGridModule{};AnalyticalGridModule=(0,tslib_es6.gn)([(0,core.NgModule)({imports:[common.CommonModule,fesm2022_forms.u5,a11y.rt,table.p0,paginator.TU,fesm2022_button.ot,icon.Ps,menu.Tx,progress_spinner.Cq,divider.t,tooltip.AV,sort.JX,overlay.U8,card.QW,list.ie,form_field.lN,input.c,fesm2022_checkbox.p9,ngx_translate_core.aw,core_module.A,common_module.N],exports:[AnalyticalGridComponent],declarations:[AnalyticalGridComponent],providers:[]})],AnalyticalGridModule);let GridsComponent=class GridsComponent{constructor(){this.a={dataSettings:{dataSource:"Sales",entitySet:"SalesOrder",analytics:{rows:[{dimension:"[Product]"}],columns:[{dimension:src.QPo,measure:"Sales"}]}}},this.b={dataSettings:{dataSource:"Sales",entitySet:"SalesOrder",analytics:{rows:[{dimension:"[Department]"}],columns:[{dimension:src.QPo,measure:"Sales"}]}}},this.grid=this.a}switch(){this.grid===this.a?this.grid=this.b:this.grid=this.a}};GridsComponent=(0,tslib_es6.gn)([(0,core.Component)({standalone:!0,imports:[common.CommonModule,fesm2022_button.ot,AnalyticalGridModule],selector:"ngm-story-component-switch-grid",template:'<button mat-button (click)="switch()">Switch</button>\n    <ngm-analytical-grid\n      style="width: 400px; height: 400px;"\n      [dataSettings]="grid.dataSettings"\n      [options]="grid.options"\n    ></ngm-analytical-grid> '})],GridsComponent);const analytical_grid_component_stories={title:"Story/AnalyticalGrid",component:AnalyticalGridComponent,decorators:[(0,dist.applicationConfig)({providers:[(0,animations.provideAnimations)(),(0,http.h_)(),(0,translate.qX)(),(0,core.importProvidersFrom)(core_module.A)]}),(0,dist.moduleMetadata)({imports:[AnalyticalGridModule,GridsComponent],providers:[core_service.q,{provide:types.fH,useClass:agent_mock_service.ch,multi:!0},{provide:types.OF,useValue:{type:"SQL",factory:(_ref=(0,asyncToGenerator.Z)((function*(){const{SQLDataSource}=yield __webpack_require__.e(3958).then(__webpack_require__.bind(__webpack_require__,"./packages/sql/src/index.ts"));return SQLDataSource})),function factory(){return _ref.apply(this,arguments)})},multi:!0},{provide:types.ET,useValue:{name:"Sales",type:"SQL",agentType:src.buO.Browser,settings:{ignoreUnknownProperty:!0},schema:{cubes:[agent_mock_service.nH,{...agent_mock_service.nH,name:"SalesOrder10s"}]}},multi:!0}]})]};var _ref;const render=args=>({props:args,styles:[".ngm-analytical-grid {height: 400px;}"]}),A1Primary={render,args:{title:"Primary Analytical Grid",appearance:{},dataSettings:{dataSource:"Sales",entitySet:"SalesOrder",analytics:{rows:[{dimension:"[Product]"}],columns:[{dimension:src.QPo,measure:"Sales"}]}},options:{}}},A2Sticky={render,args:{title:"Primary Analytical Grid",appearance:{},dataSettings:{dataSource:"Sales",entitySet:"SalesOrder",analytics:{rows:[{dimension:"[Product]"}],columns:[{dimension:src.QPo,measure:"Sales"}]}},options:{sticky:!0}}},A3StickyGrid={render,args:{title:"Primary Analytical Grid",appearance:{},dataSettings:{dataSource:"Sales",entitySet:"SalesOrder",analytics:{rows:[{dimension:"[Product]"}],columns:[{dimension:src.QPo,measure:"Sales"}]}},options:{sticky:!0,grid:!0}}},Loading={render,args:{title:"Loading Analytical Grid",appearance:{},dataSettings:{dataSource:"Sales",entitySet:"SalesOrder10s",analytics:{rows:[{dimension:"[Product]"}],columns:[{dimension:src.QPo,measure:"Sales"}]}},options:{}}},DensityCompact={render,args:{title:"Analytical Grid compact",appearance:{displayDensity:displayDensity.A.compact},dataSettings:{dataSource:"Sales",entitySet:"SalesOrder",analytics:{rows:[{dimension:"[Product]"}],columns:[{dimension:src.QPo,measure:"Sales"}]}},options:{}}},DisplayHierarchy={render,args:{title:"Analytical Grid Hierarchy",appearance:{displayDensity:displayDensity.A.compact},dataSettings:{dataSource:"Sales",entitySet:"SalesOrder",analytics:{rows:[{dimension:"[Product]",displayHierarchy:!0}],columns:[{dimension:src.QPo,measure:"Sales"}]}},options:{}}},ShowToolbar={render,args:{title:"Analytical Grid Show Toolbar",appearance:{},dataSettings:{dataSource:"Sales",entitySet:"SalesOrder",analytics:{rows:[{dimension:"[Product]"}],columns:[{dimension:src.QPo,measure:"Sales"}]}},options:{showToolbar:!0}}},analytical_grid_component_stories_Error={render,args:{title:"Analytical Grid Error",appearance:{},dataSettings:{dataSource:"Sales",entitySet:"SalesOrder",analytics:{rows:[{dimension:"[Product]"}],columns:[{dimension:src.QPo,measure:"Sales1"}]}},options:{showToolbar:!0}}},Paging={render,args:{title:"Primary Analytical Grid",appearance:{},dataSettings:{dataSource:"Sales",entitySet:"SalesOrder",analytics:{rows:[{dimension:"[Product]"}],columns:[{dimension:src.QPo,measure:"Sales"}]}},options:{paging:!0,pageSize:3}}},PagingCompact={render,args:{title:"Primary Analytical Grid",dataSettings:{dataSource:"Sales",entitySet:"SalesOrder",analytics:{rows:[{dimension:"[Product]"}],columns:[{dimension:src.QPo,measure:"Sales"}]}},options:{paging:!0,pageSize:3},appearance:{displayDensity:displayDensity.A.compact}}},PagingError={render,args:{title:"Primary Analytical Grid",dataSettings:{dataSource:"Sales",entitySet:"SalesOrder",analytics:{rows:[{dimension:"[Product]"}],columns:[{dimension:src.QPo,measure:"Sales1"}]}},options:{paging:!0,pageSize:3,showToolbar:!0},appearance:{displayDensity:displayDensity.A.compact}}},Sortable={render,args:{title:"Sortable",appearance:{},dataSettings:{dataSource:"Sales",entitySet:"SalesOrder",analytics:{rows:[{dimension:"[Product]"},{dimension:"[Department]"}],columns:[{dimension:src.QPo,measure:"Sales"}]}},options:{sortable:!0}}},MultipleMeasures={render,args:{title:"Multiple Measures Grid",appearance:{},dataSettings:{dataSource:"Sales",entitySet:"SalesOrder",analytics:{rows:[{dimension:"[Product]"}],columns:[{dimension:"[Department]"},{dimension:src.QPo,measure:"Sales"},{dimension:src.QPo,measure:"Cost"}]}},options:{}}},SwitchTemplate={render:args=>({props:args,template:"<ngm-story-component-switch-grid></ngm-story-component-switch-grid>"}),args:{}};A1Primary.parameters={...A1Primary.parameters,docs:{...A1Primary.parameters?.docs,source:{originalSource:"{\n  render,\n  args: {\n    title: 'Primary Analytical Grid',\n    appearance: {},\n    dataSettings: {\n      dataSource: 'Sales',\n      entitySet: 'SalesOrder',\n      analytics: {\n        rows: [{\n          dimension: '[Product]'\n        }],\n        columns: [{\n          dimension: C_MEASURES,\n          measure: 'Sales'\n        }]\n      }\n    },\n    options: {}\n  }\n}",...A1Primary.parameters?.docs?.source}}},A2Sticky.parameters={...A2Sticky.parameters,docs:{...A2Sticky.parameters?.docs,source:{originalSource:"{\n  render,\n  args: {\n    title: 'Primary Analytical Grid',\n    appearance: {},\n    dataSettings: {\n      dataSource: 'Sales',\n      entitySet: 'SalesOrder',\n      analytics: {\n        rows: [{\n          dimension: '[Product]'\n        }],\n        columns: [{\n          dimension: C_MEASURES,\n          measure: 'Sales'\n        }]\n      }\n    },\n    options: {\n      sticky: true\n    }\n  }\n}",...A2Sticky.parameters?.docs?.source}}},A3StickyGrid.parameters={...A3StickyGrid.parameters,docs:{...A3StickyGrid.parameters?.docs,source:{originalSource:"{\n  render,\n  args: {\n    title: 'Primary Analytical Grid',\n    appearance: {},\n    dataSettings: {\n      dataSource: 'Sales',\n      entitySet: 'SalesOrder',\n      analytics: {\n        rows: [{\n          dimension: '[Product]'\n        }],\n        columns: [{\n          dimension: C_MEASURES,\n          measure: 'Sales'\n        }]\n      }\n    },\n    options: {\n      sticky: true,\n      grid: true\n    }\n  }\n}",...A3StickyGrid.parameters?.docs?.source}}},Loading.parameters={...Loading.parameters,docs:{...Loading.parameters?.docs,source:{originalSource:"{\n  render,\n  args: {\n    title: 'Loading Analytical Grid',\n    appearance: {},\n    dataSettings: {\n      dataSource: 'Sales',\n      entitySet: 'SalesOrder10s',\n      analytics: {\n        rows: [{\n          dimension: '[Product]'\n        }],\n        columns: [{\n          dimension: C_MEASURES,\n          measure: 'Sales'\n        }]\n      }\n    },\n    options: {}\n  }\n}",...Loading.parameters?.docs?.source}}},DensityCompact.parameters={...DensityCompact.parameters,docs:{...DensityCompact.parameters?.docs,source:{originalSource:"{\n  render,\n  args: {\n    title: 'Analytical Grid compact',\n    appearance: {\n      displayDensity: DisplayDensity.compact\n    },\n    dataSettings: {\n      dataSource: 'Sales',\n      entitySet: 'SalesOrder',\n      analytics: {\n        rows: [{\n          dimension: '[Product]'\n        }],\n        columns: [{\n          dimension: C_MEASURES,\n          measure: 'Sales'\n        }]\n      }\n    },\n    options: {}\n  }\n}",...DensityCompact.parameters?.docs?.source}}},DisplayHierarchy.parameters={...DisplayHierarchy.parameters,docs:{...DisplayHierarchy.parameters?.docs,source:{originalSource:"{\n  render,\n  args: {\n    title: 'Analytical Grid Hierarchy',\n    appearance: {\n      displayDensity: DisplayDensity.compact\n    },\n    dataSettings: {\n      dataSource: 'Sales',\n      entitySet: 'SalesOrder',\n      analytics: {\n        rows: [{\n          dimension: '[Product]',\n          displayHierarchy: true\n        }],\n        columns: [{\n          dimension: C_MEASURES,\n          measure: 'Sales'\n        }]\n      }\n    },\n    options: {}\n  }\n}",...DisplayHierarchy.parameters?.docs?.source}}},ShowToolbar.parameters={...ShowToolbar.parameters,docs:{...ShowToolbar.parameters?.docs,source:{originalSource:"{\n  render,\n  args: {\n    title: 'Analytical Grid Show Toolbar',\n    appearance: {},\n    dataSettings: {\n      dataSource: 'Sales',\n      entitySet: 'SalesOrder',\n      analytics: {\n        rows: [{\n          dimension: '[Product]'\n        }],\n        columns: [{\n          dimension: C_MEASURES,\n          measure: 'Sales'\n        }]\n      }\n    },\n    options: {\n      showToolbar: true\n    }\n  }\n}",...ShowToolbar.parameters?.docs?.source}}},analytical_grid_component_stories_Error.parameters={...analytical_grid_component_stories_Error.parameters,docs:{...analytical_grid_component_stories_Error.parameters?.docs,source:{originalSource:"{\n  render,\n  args: {\n    title: 'Analytical Grid Error',\n    appearance: {},\n    dataSettings: {\n      dataSource: 'Sales',\n      entitySet: 'SalesOrder',\n      analytics: {\n        rows: [{\n          dimension: '[Product]'\n        }],\n        columns: [{\n          dimension: C_MEASURES,\n          measure: 'Sales1'\n        }]\n      }\n    },\n    options: {\n      showToolbar: true\n    }\n  }\n}",...analytical_grid_component_stories_Error.parameters?.docs?.source}}},Paging.parameters={...Paging.parameters,docs:{...Paging.parameters?.docs,source:{originalSource:"{\n  render,\n  args: {\n    title: 'Primary Analytical Grid',\n    appearance: {},\n    dataSettings: {\n      dataSource: 'Sales',\n      entitySet: 'SalesOrder',\n      analytics: {\n        rows: [{\n          dimension: '[Product]'\n        }],\n        columns: [{\n          dimension: C_MEASURES,\n          measure: 'Sales'\n        }]\n      }\n    },\n    options: {\n      paging: true,\n      pageSize: 3\n    }\n  }\n}",...Paging.parameters?.docs?.source}}},PagingCompact.parameters={...PagingCompact.parameters,docs:{...PagingCompact.parameters?.docs,source:{originalSource:"{\n  render,\n  args: {\n    title: 'Primary Analytical Grid',\n    dataSettings: {\n      dataSource: 'Sales',\n      entitySet: 'SalesOrder',\n      analytics: {\n        rows: [{\n          dimension: '[Product]'\n        }],\n        columns: [{\n          dimension: C_MEASURES,\n          measure: 'Sales'\n        }]\n      }\n    },\n    options: {\n      paging: true,\n      pageSize: 3\n    },\n    appearance: {\n      displayDensity: DisplayDensity.compact\n    }\n  }\n}",...PagingCompact.parameters?.docs?.source}}},PagingError.parameters={...PagingError.parameters,docs:{...PagingError.parameters?.docs,source:{originalSource:"{\n  render,\n  args: {\n    title: 'Primary Analytical Grid',\n    dataSettings: {\n      dataSource: 'Sales',\n      entitySet: 'SalesOrder',\n      analytics: {\n        rows: [{\n          dimension: '[Product]'\n        }],\n        columns: [{\n          dimension: C_MEASURES,\n          measure: 'Sales1'\n        }]\n      }\n    },\n    options: {\n      paging: true,\n      pageSize: 3,\n      showToolbar: true\n    },\n    appearance: {\n      displayDensity: DisplayDensity.compact\n    }\n  }\n}",...PagingError.parameters?.docs?.source}}},Sortable.parameters={...Sortable.parameters,docs:{...Sortable.parameters?.docs,source:{originalSource:"{\n  render,\n  args: {\n    title: 'Sortable',\n    appearance: {},\n    dataSettings: {\n      dataSource: 'Sales',\n      entitySet: 'SalesOrder',\n      analytics: {\n        rows: [{\n          dimension: '[Product]'\n        }, {\n          dimension: '[Department]'\n        }],\n        columns: [{\n          dimension: C_MEASURES,\n          measure: 'Sales'\n        }]\n      }\n    },\n    options: {\n      sortable: true\n    }\n  }\n}",...Sortable.parameters?.docs?.source}}},MultipleMeasures.parameters={...MultipleMeasures.parameters,docs:{...MultipleMeasures.parameters?.docs,source:{originalSource:"{\n  render,\n  args: {\n    title: 'Multiple Measures Grid',\n    appearance: {},\n    dataSettings: {\n      dataSource: 'Sales',\n      entitySet: 'SalesOrder',\n      analytics: {\n        rows: [{\n          dimension: '[Product]'\n        }],\n        columns: [{\n          dimension: '[Department]'\n        }, {\n          dimension: C_MEASURES,\n          measure: 'Sales'\n        }, {\n          dimension: C_MEASURES,\n          measure: 'Cost'\n        }]\n      }\n    },\n    options: {}\n  }\n}",...MultipleMeasures.parameters?.docs?.source}}},SwitchTemplate.parameters={...SwitchTemplate.parameters,docs:{...SwitchTemplate.parameters?.docs,source:{originalSource:"{\n  render: args => ({\n    props: args,\n    template: `<ngm-story-component-switch-grid></ngm-story-component-switch-grid>`\n  }),\n  args: {}\n}",...SwitchTemplate.parameters?.docs?.source}}};const __namedExportsOrder=["A1Primary","A2Sticky","A3StickyGrid","Loading","DensityCompact","DisplayHierarchy","ShowToolbar","Error","Paging","PagingCompact","PagingError","Sortable","MultipleMeasures","SwitchTemplate"]},"?d4c0":()=>{}}]);