"use strict";(self.webpackChunkocap=self.webpackChunkocap||[]).push([[9653],{"./node_modules/d3-geo-projection/src/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function noop(){}function buffer(){var line,lines=[];return{point:function(x,y,m){line.push([x,y,m])},lineStart:function(){lines.push(line=[])},lineEnd:noop,rejoin:function(){lines.length>1&&lines.push(lines.pop().concat(lines.shift()))},result:function(){var result=lines;return lines=[],line=null,result}}}__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{geoAiry:()=>airy,geoAiryRaw:()=>airyRaw,geoAitoff:()=>aitoff,geoAitoffRaw:()=>aitoffRaw,geoArmadillo:()=>armadillo,geoArmadilloRaw:()=>armadilloRaw,geoAugust:()=>august,geoAugustRaw:()=>augustRaw,geoBaker:()=>baker,geoBakerRaw:()=>bakerRaw,geoBerghaus:()=>berghaus,geoBerghausRaw:()=>berghausRaw,geoBertin1953:()=>bertin,geoBertin1953Raw:()=>bertin1953Raw,geoBoggs:()=>boggs,geoBoggsRaw:()=>boggsRaw,geoBonne:()=>bonne,geoBonneRaw:()=>bonneRaw,geoBottomley:()=>bottomley,geoBottomleyRaw:()=>bottomleyRaw,geoBromley:()=>bromley,geoBromleyRaw:()=>bromleyRaw,geoChamberlin:()=>chamberlin,geoChamberlinAfrica:()=>chamberlinAfrica,geoChamberlinRaw:()=>chamberlinRaw,geoCollignon:()=>collignon,geoCollignonRaw:()=>collignonRaw,geoCraig:()=>craig,geoCraigRaw:()=>craigRaw,geoCraster:()=>craster,geoCrasterRaw:()=>crasterRaw,geoCylindricalEqualArea:()=>cylindricalEqualArea,geoCylindricalEqualAreaRaw:()=>cylindricalEqualAreaRaw,geoCylindricalStereographic:()=>cylindricalStereographic,geoCylindricalStereographicRaw:()=>cylindricalStereographicRaw,geoEckert1:()=>eckert1,geoEckert1Raw:()=>eckert1Raw,geoEckert2:()=>eckert2,geoEckert2Raw:()=>eckert2Raw,geoEckert3:()=>eckert3,geoEckert3Raw:()=>eckert3Raw,geoEckert4:()=>eckert4,geoEckert4Raw:()=>eckert4Raw,geoEckert5:()=>eckert5,geoEckert5Raw:()=>eckert5Raw,geoEckert6:()=>eckert6,geoEckert6Raw:()=>eckert6Raw,geoEisenlohr:()=>eisenlohr,geoEisenlohrRaw:()=>eisenlohrRaw,geoFahey:()=>fahey,geoFaheyRaw:()=>faheyRaw,geoFoucaut:()=>foucaut,geoFoucautRaw:()=>foucautRaw,geoFoucautSinusoidal:()=>foucautSinusoidal,geoFoucautSinusoidalRaw:()=>foucautSinusoidalRaw,geoGilbert:()=>gilbert,geoGingery:()=>gingery,geoGingeryRaw:()=>gingeryRaw,geoGinzburg4:()=>ginzburg4,geoGinzburg4Raw:()=>ginzburg4Raw,geoGinzburg5:()=>ginzburg5,geoGinzburg5Raw:()=>ginzburg5Raw,geoGinzburg6:()=>ginzburg6,geoGinzburg6Raw:()=>ginzburg6Raw,geoGinzburg8:()=>ginzburg8,geoGinzburg8Raw:()=>ginzburg8Raw,geoGinzburg9:()=>ginzburg9,geoGinzburg9Raw:()=>ginzburg9Raw,geoGringorten:()=>gringorten,geoGringortenQuincuncial:()=>quincuncial_gringorten,geoGringortenRaw:()=>gringortenRaw,geoGuyou:()=>guyou,geoGuyouRaw:()=>guyouRaw,geoHammer:()=>hammer,geoHammerRaw:()=>hammerRaw,geoHammerRetroazimuthal:()=>hammerRetroazimuthal,geoHammerRetroazimuthalRaw:()=>hammerRetroazimuthalRaw,geoHealpix:()=>healpix,geoHealpixRaw:()=>healpixRaw,geoHill:()=>hill,geoHillRaw:()=>hillRaw,geoHomolosine:()=>homolosine,geoHomolosineRaw:()=>homolosineRaw,geoHufnagel:()=>hufnagel,geoHufnagelRaw:()=>hufnagelRaw,geoHyperelliptical:()=>hyperelliptical,geoHyperellipticalRaw:()=>hyperellipticalRaw,geoInterrupt:()=>interrupted,geoInterruptedBoggs:()=>interrupted_boggs,geoInterruptedHomolosine:()=>interrupted_homolosine,geoInterruptedMollweide:()=>interrupted_mollweide,geoInterruptedMollweideHemispheres:()=>mollweideHemispheres,geoInterruptedQuarticAuthalic:()=>quarticAuthalic,geoInterruptedSinuMollweide:()=>interrupted_sinuMollweide,geoInterruptedSinusoidal:()=>interrupted_sinusoidal,geoKavrayskiy7:()=>kavrayskiy7,geoKavrayskiy7Raw:()=>kavrayskiy7Raw,geoLagrange:()=>lagrange,geoLagrangeRaw:()=>lagrangeRaw,geoLarrivee:()=>larrivee,geoLarriveeRaw:()=>larriveeRaw,geoLaskowski:()=>laskowski,geoLaskowskiRaw:()=>laskowskiRaw,geoLittrow:()=>littrow,geoLittrowRaw:()=>littrowRaw,geoLoximuthal:()=>loximuthal,geoLoximuthalRaw:()=>loximuthalRaw,geoMiller:()=>miller,geoMillerRaw:()=>millerRaw,geoModifiedStereographic:()=>modifiedStereographic,geoModifiedStereographicAlaska:()=>modifiedStereographicAlaska,geoModifiedStereographicGs48:()=>modifiedStereographicGs48,geoModifiedStereographicGs50:()=>modifiedStereographicGs50,geoModifiedStereographicLee:()=>modifiedStereographicLee,geoModifiedStereographicMiller:()=>modifiedStereographicMiller,geoModifiedStereographicRaw:()=>modifiedStereographicRaw,geoMollweide:()=>mollweide,geoMollweideRaw:()=>mollweideRaw,geoMtFlatPolarParabolic:()=>mtFlatPolarParabolic,geoMtFlatPolarParabolicRaw:()=>mtFlatPolarParabolicRaw,geoMtFlatPolarQuartic:()=>mtFlatPolarQuartic,geoMtFlatPolarQuarticRaw:()=>mtFlatPolarQuarticRaw,geoMtFlatPolarSinusoidal:()=>mtFlatPolarSinusoidal,geoMtFlatPolarSinusoidalRaw:()=>mtFlatPolarSinusoidalRaw,geoNaturalEarth2:()=>naturalEarth2,geoNaturalEarth2Raw:()=>naturalEarth2Raw,geoNellHammer:()=>nellHammer,geoNellHammerRaw:()=>nellHammerRaw,geoNicolosi:()=>nicolosi,geoNicolosiRaw:()=>nicolosiRaw,geoPatterson:()=>patterson,geoPattersonRaw:()=>pattersonRaw,geoPeirceQuincuncial:()=>peirce,geoPolyconic:()=>polyconic,geoPolyconicRaw:()=>polyconicRaw,geoPolyhedral:()=>polyhedral,geoPolyhedralButterfly:()=>butterfly,geoPolyhedralCollignon:()=>polyhedral_collignon,geoPolyhedralWaterman:()=>waterman,geoProject:()=>project,geoQuantize:()=>quantize,geoQuincuncial:()=>quincuncial,geoRectangularPolyconic:()=>rectangularPolyconic,geoRectangularPolyconicRaw:()=>rectangularPolyconicRaw,geoRobinson:()=>robinson,geoRobinsonRaw:()=>robinsonRaw,geoSatellite:()=>satellite,geoSatelliteRaw:()=>satelliteRaw,geoSinuMollweide:()=>sinuMollweide,geoSinuMollweideRaw:()=>sinuMollweideRaw,geoSinusoidal:()=>sinusoidal,geoSinusoidalRaw:()=>sinusoidalRaw,geoStitch:()=>stitch,geoTimes:()=>times,geoTimesRaw:()=>timesRaw,geoTwoPointAzimuthal:()=>twoPointAzimuthal,geoTwoPointAzimuthalRaw:()=>twoPointAzimuthalRaw,geoTwoPointAzimuthalUsa:()=>twoPointAzimuthalUsa,geoTwoPointEquidistant:()=>twoPointEquidistant,geoTwoPointEquidistantRaw:()=>twoPointEquidistantRaw,geoTwoPointEquidistantUsa:()=>twoPointEquidistantUsa,geoVanDerGrinten:()=>vanDerGrinten,geoVanDerGrinten2:()=>vanDerGrinten2,geoVanDerGrinten2Raw:()=>vanDerGrinten2Raw,geoVanDerGrinten3:()=>vanDerGrinten3,geoVanDerGrinten3Raw:()=>vanDerGrinten3Raw,geoVanDerGrinten4:()=>vanDerGrinten4,geoVanDerGrinten4Raw:()=>vanDerGrinten4Raw,geoVanDerGrintenRaw:()=>vanDerGrintenRaw,geoWagner:()=>wagner,geoWagner4:()=>wagner4,geoWagner4Raw:()=>wagner4Raw,geoWagner6:()=>wagner6,geoWagner6Raw:()=>wagner6Raw,geoWagner7:()=>wagner7,geoWagnerRaw:()=>wagnerRaw,geoWiechel:()=>wiechel,geoWiechelRaw:()=>wiechelRaw,geoWinkel3:()=>winkel3,geoWinkel3Raw:()=>winkel3Raw});var epsilon=1e-6,epsilon2=1e-12,pi=Math.PI,halfPi=pi/2,quarterPi=pi/4,tau=2*pi,degrees=180/pi,radians=pi/180,abs=Math.abs,atan=Math.atan,atan2=Math.atan2,cos=Math.cos,hypot=(Math.ceil,Math.exp,Math.floor,Math.hypot),sin=(Math.log,Math.pow,Math.sin),sign=Math.sign||function(x){return x>0?1:x<0?-1:0},sqrt=Math.sqrt;Math.tan;function acos(x){return x>1?0:x<-1?pi:Math.acos(x)}function asin(x){return x>1?halfPi:x<-1?-halfPi:Math.asin(x)}function haversin(x){return(x=sin(x/2))*x}function pointEqual(a,b){return abs(a[0]-b[0])<epsilon&&abs(a[1]-b[1])<epsilon}function Intersection(point,points,other,entry){this.x=point,this.z=points,this.o=other,this.e=entry,this.v=!1,this.n=this.p=null}function rejoin(segments,compareIntersection,startInside,interpolate,stream){var i,n,subject=[],clip=[];if(segments.forEach((function(segment){if(!((n=segment.length-1)<=0)){var n,x,p0=segment[0],p1=segment[n];if(pointEqual(p0,p1)){if(!p0[2]&&!p1[2]){for(stream.lineStart(),i=0;i<n;++i)stream.point((p0=segment[i])[0],p0[1]);return void stream.lineEnd()}p1[0]+=2*epsilon}subject.push(x=new Intersection(p0,segment,null,!0)),clip.push(x.o=new Intersection(p0,null,x,!1)),subject.push(x=new Intersection(p1,segment,null,!1)),clip.push(x.o=new Intersection(p1,null,x,!0))}})),subject.length){for(clip.sort(compareIntersection),rejoin_link(subject),rejoin_link(clip),i=0,n=clip.length;i<n;++i)clip[i].e=startInside=!startInside;for(var points,point,start=subject[0];;){for(var current=start,isSubject=!0;current.v;)if((current=current.n)===start)return;points=current.z,stream.lineStart();do{if(current.v=current.o.v=!0,current.e){if(isSubject)for(i=0,n=points.length;i<n;++i)stream.point((point=points[i])[0],point[1]);else interpolate(current.x,current.n.x,1,stream);current=current.n}else{if(isSubject)for(points=current.p.z,i=points.length-1;i>=0;--i)stream.point((point=points[i])[0],point[1]);else interpolate(current.x,current.p.x,-1,stream);current=current.p}points=(current=current.o).z,isSubject=!isSubject}while(!current.v);stream.lineEnd()}}}function rejoin_link(array){if(n=array.length){for(var n,b,i=0,a=array[0];++i<n;)a.n=b=array[i],b.p=a,a=b;a.n=b=array[0],b.p=a}}class fsum_Adder{constructor(){this._partials=new Float64Array(32),this._n=0}add(x){const p=this._partials;let i=0;for(let j=0;j<this._n&&j<32;j++){const y=p[j],hi=x+y,lo=Math.abs(x)<Math.abs(y)?x-(hi-y):y-(hi-x);lo&&(p[i++]=lo),x=hi}return p[i]=x,this._n=i+1,this}valueOf(){const p=this._partials;let x,y,lo,n=this._n,hi=0;if(n>0){for(hi=p[--n];n>0&&(x=hi,y=p[--n],hi=x+y,lo=y-(hi-x),!lo););n>0&&(lo<0&&p[n-1]<0||lo>0&&p[n-1]>0)&&(y=2*lo,x=hi+y,y==x-hi&&(hi=x))}return hi}}function spherical(cartesian){return[atan2(cartesian[1],cartesian[0]),asin(cartesian[2])]}function cartesian(spherical){var lambda=spherical[0],phi=spherical[1],cosPhi=cos(phi);return[cosPhi*cos(lambda),cosPhi*sin(lambda),sin(phi)]}function cartesianDot(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function cartesianCross(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function cartesianAddInPlace(a,b){a[0]+=b[0],a[1]+=b[1],a[2]+=b[2]}function cartesianScale(vector,k){return[vector[0]*k,vector[1]*k,vector[2]*k]}function cartesianNormalizeInPlace(d){var l=sqrt(d[0]*d[0]+d[1]*d[1]+d[2]*d[2]);d[0]/=l,d[1]/=l,d[2]/=l}function longitude(point){return abs(point[0])<=pi?point[0]:sign(point[0])*((abs(point[0])+pi)%tau-pi)}function merge(arrays){return Array.from(function*flatten(arrays){for(const array of arrays)yield*array}(arrays))}function clip(pointVisible,clipLine,interpolate,start){return function(sink){var polygon,segments,ring,line=clipLine(sink),ringBuffer=buffer(),ringSink=clipLine(ringBuffer),polygonStarted=!1,clip={point,lineStart,lineEnd,polygonStart:function(){clip.point=pointRing,clip.lineStart=ringStart,clip.lineEnd=ringEnd,segments=[],polygon=[]},polygonEnd:function(){clip.point=point,clip.lineStart=lineStart,clip.lineEnd=lineEnd,segments=merge(segments);var startInside=function polygonContains(polygon,point){var lambda=longitude(point),phi=point[1],sinPhi=sin(phi),normal=[sin(lambda),-cos(lambda),0],angle=0,winding=0,sum=new fsum_Adder;1===sinPhi?phi=halfPi+epsilon:-1===sinPhi&&(phi=-halfPi-epsilon);for(var i=0,n=polygon.length;i<n;++i)if(m=(ring=polygon[i]).length)for(var ring,m,point0=ring[m-1],lambda0=longitude(point0),phi0=point0[1]/2+quarterPi,sinPhi0=sin(phi0),cosPhi0=cos(phi0),j=0;j<m;++j,lambda0=lambda1,sinPhi0=sinPhi1,cosPhi0=cosPhi1,point0=point1){var point1=ring[j],lambda1=longitude(point1),phi1=point1[1]/2+quarterPi,sinPhi1=sin(phi1),cosPhi1=cos(phi1),delta=lambda1-lambda0,sign=delta>=0?1:-1,absDelta=sign*delta,antimeridian=absDelta>pi,k=sinPhi0*sinPhi1;if(sum.add(atan2(k*sign*sin(absDelta),cosPhi0*cosPhi1+k*cos(absDelta))),angle+=antimeridian?delta+sign*tau:delta,antimeridian^lambda0>=lambda^lambda1>=lambda){var arc=cartesianCross(cartesian(point0),cartesian(point1));cartesianNormalizeInPlace(arc);var intersection=cartesianCross(normal,arc);cartesianNormalizeInPlace(intersection);var phiArc=(antimeridian^delta>=0?-1:1)*asin(intersection[2]);(phi>phiArc||phi===phiArc&&(arc[0]||arc[1]))&&(winding+=antimeridian^delta>=0?1:-1)}}return(angle<-epsilon||angle<epsilon&&sum<-epsilon2)^1&winding}(polygon,start);segments.length?(polygonStarted||(sink.polygonStart(),polygonStarted=!0),rejoin(segments,compareIntersection,startInside,interpolate,sink)):startInside&&(polygonStarted||(sink.polygonStart(),polygonStarted=!0),sink.lineStart(),interpolate(null,null,1,sink),sink.lineEnd()),polygonStarted&&(sink.polygonEnd(),polygonStarted=!1),segments=polygon=null},sphere:function(){sink.polygonStart(),sink.lineStart(),interpolate(null,null,1,sink),sink.lineEnd(),sink.polygonEnd()}};function point(lambda,phi){pointVisible(lambda,phi)&&sink.point(lambda,phi)}function pointLine(lambda,phi){line.point(lambda,phi)}function lineStart(){clip.point=pointLine,line.lineStart()}function lineEnd(){clip.point=point,line.lineEnd()}function pointRing(lambda,phi){ring.push([lambda,phi]),ringSink.point(lambda,phi)}function ringStart(){ringSink.lineStart(),ring=[]}function ringEnd(){pointRing(ring[0][0],ring[0][1]),ringSink.lineEnd();var i,m,segment,point,clean=ringSink.clean(),ringSegments=ringBuffer.result(),n=ringSegments.length;if(ring.pop(),polygon.push(ring),ring=null,n)if(1&clean){if((m=(segment=ringSegments[0]).length-1)>0){for(polygonStarted||(sink.polygonStart(),polygonStarted=!0),sink.lineStart(),i=0;i<m;++i)sink.point((point=segment[i])[0],point[1]);sink.lineEnd()}}else n>1&&2&clean&&ringSegments.push(ringSegments.pop().concat(ringSegments.shift())),segments.push(ringSegments.filter(validSegment))}return clip}}function validSegment(segment){return segment.length>1}function compareIntersection(a,b){return((a=a.x)[0]<0?a[1]-halfPi-epsilon:halfPi-a[1])-((b=b.x)[0]<0?b[1]-halfPi-epsilon:halfPi-b[1])}const antimeridian=clip((function(){return!0}),(function clipAntimeridianLine(stream){var clean,lambda0=NaN,phi0=NaN,sign0=NaN;return{lineStart:function(){stream.lineStart(),clean=1},point:function(lambda1,phi1){var sign1=lambda1>0?pi:-pi,delta=abs(lambda1-lambda0);abs(delta-pi)<epsilon?(stream.point(lambda0,phi0=(phi0+phi1)/2>0?halfPi:-halfPi),stream.point(sign0,phi0),stream.lineEnd(),stream.lineStart(),stream.point(sign1,phi0),stream.point(lambda1,phi0),clean=0):sign0!==sign1&&delta>=pi&&(abs(lambda0-sign0)<epsilon&&(lambda0-=sign0*epsilon),abs(lambda1-sign1)<epsilon&&(lambda1-=sign1*epsilon),phi0=function clipAntimeridianIntersect(lambda0,phi0,lambda1,phi1){var cosPhi0,cosPhi1,sinLambda0Lambda1=sin(lambda0-lambda1);return abs(sinLambda0Lambda1)>epsilon?atan((sin(phi0)*(cosPhi1=cos(phi1))*sin(lambda1)-sin(phi1)*(cosPhi0=cos(phi0))*sin(lambda0))/(cosPhi0*cosPhi1*sinLambda0Lambda1)):(phi0+phi1)/2}(lambda0,phi0,lambda1,phi1),stream.point(sign0,phi0),stream.lineEnd(),stream.lineStart(),stream.point(sign1,phi0),clean=0),stream.point(lambda0=lambda1,phi0=phi1),sign0=sign1},lineEnd:function(){stream.lineEnd(),lambda0=phi0=NaN},clean:function(){return 2-clean}}}),(function clipAntimeridianInterpolate(from,to,direction,stream){var phi;if(null==from)phi=direction*halfPi,stream.point(-pi,phi),stream.point(0,phi),stream.point(pi,phi),stream.point(pi,0),stream.point(pi,-phi),stream.point(0,-phi),stream.point(-pi,-phi),stream.point(-pi,0),stream.point(-pi,phi);else if(abs(from[0]-to[0])>epsilon){var lambda=from[0]<to[0]?pi:-pi;phi=direction*lambda/2,stream.point(-lambda,phi),stream.point(0,phi),stream.point(lambda,phi)}else stream.point(to[0],to[1])}),[-pi,-halfPi]);function constant(x){return function(){return x}}function compose(a,b){function compose(x,y){return x=a(x,y),b(x[0],x[1])}return a.invert&&b.invert&&(compose.invert=function(x,y){return(x=b.invert(x,y))&&a.invert(x[0],x[1])}),compose}function rotationIdentity(lambda,phi){return abs(lambda)>pi&&(lambda-=Math.round(lambda/tau)*tau),[lambda,phi]}function rotateRadians(deltaLambda,deltaPhi,deltaGamma){return(deltaLambda%=tau)?deltaPhi||deltaGamma?compose(rotationLambda(deltaLambda),rotationPhiGamma(deltaPhi,deltaGamma)):rotationLambda(deltaLambda):deltaPhi||deltaGamma?rotationPhiGamma(deltaPhi,deltaGamma):rotationIdentity}function forwardRotationLambda(deltaLambda){return function(lambda,phi){return abs(lambda+=deltaLambda)>pi&&(lambda-=Math.round(lambda/tau)*tau),[lambda,phi]}}function rotationLambda(deltaLambda){var rotation=forwardRotationLambda(deltaLambda);return rotation.invert=forwardRotationLambda(-deltaLambda),rotation}function rotationPhiGamma(deltaPhi,deltaGamma){var cosDeltaPhi=cos(deltaPhi),sinDeltaPhi=sin(deltaPhi),cosDeltaGamma=cos(deltaGamma),sinDeltaGamma=sin(deltaGamma);function rotation(lambda,phi){var cosPhi=cos(phi),x=cos(lambda)*cosPhi,y=sin(lambda)*cosPhi,z=sin(phi),k=z*cosDeltaPhi+x*sinDeltaPhi;return[atan2(y*cosDeltaGamma-k*sinDeltaGamma,x*cosDeltaPhi-z*sinDeltaPhi),asin(k*cosDeltaGamma+y*sinDeltaGamma)]}return rotation.invert=function(lambda,phi){var cosPhi=cos(phi),x=cos(lambda)*cosPhi,y=sin(lambda)*cosPhi,z=sin(phi),k=z*cosDeltaGamma-y*sinDeltaGamma;return[atan2(y*cosDeltaGamma+z*sinDeltaGamma,x*cosDeltaPhi+k*sinDeltaPhi),asin(k*cosDeltaPhi-x*sinDeltaPhi)]},rotation}function rotation(rotate){function forward(coordinates){return(coordinates=rotate(coordinates[0]*radians,coordinates[1]*radians))[0]*=degrees,coordinates[1]*=degrees,coordinates}return rotate=rotateRadians(rotate[0]*radians,rotate[1]*radians,rotate.length>2?rotate[2]*radians:0),forward.invert=function(coordinates){return(coordinates=rotate.invert(coordinates[0]*radians,coordinates[1]*radians))[0]*=degrees,coordinates[1]*=degrees,coordinates},forward}function circleStream(stream,radius,delta,direction,t0,t1){if(delta){var cosRadius=cos(radius),sinRadius=sin(radius),step=direction*delta;null==t0?(t0=radius+direction*tau,t1=radius-step/2):(t0=circleRadius(cosRadius,t0),t1=circleRadius(cosRadius,t1),(direction>0?t0<t1:t0>t1)&&(t0+=direction*tau));for(var point,t=t0;direction>0?t>t1:t<t1;t-=step)point=spherical([cosRadius,-sinRadius*cos(t),-sinRadius*sin(t)]),stream.point(point[0],point[1])}}function circleRadius(cosRadius,point){(point=cartesian(point))[0]-=cosRadius,cartesianNormalizeInPlace(point);var radius=acos(-point[1]);return((-point[2]<0?-radius:radius)+tau-epsilon)%tau}rotationIdentity.invert=rotationIdentity;var clipMax=1e9,clipMin=-clipMax;function clipRectangle(x0,y0,x1,y1){function visible(x,y){return x0<=x&&x<=x1&&y0<=y&&y<=y1}function interpolate(from,to,direction,stream){var a=0,a1=0;if(null==from||(a=corner(from,direction))!==(a1=corner(to,direction))||comparePoint(from,to)<0^direction>0)do{stream.point(0===a||3===a?x0:x1,a>1?y1:y0)}while((a=(a+direction+4)%4)!==a1);else stream.point(to[0],to[1])}function corner(p,direction){return abs(p[0]-x0)<epsilon?direction>0?0:3:abs(p[0]-x1)<epsilon?direction>0?2:1:abs(p[1]-y0)<epsilon?direction>0?1:0:direction>0?3:2}function compareIntersection(a,b){return comparePoint(a.x,b.x)}function comparePoint(a,b){var ca=corner(a,1),cb=corner(b,1);return ca!==cb?ca-cb:0===ca?b[1]-a[1]:1===ca?a[0]-b[0]:2===ca?a[1]-b[1]:b[0]-a[0]}return function(stream){var segments,polygon,ring,x__,y__,v__,x_,y_,v_,first,clean,activeStream=stream,bufferStream=buffer(),clipStream={point,lineStart:function lineStart(){clipStream.point=linePoint,polygon&&polygon.push(ring=[]);first=!0,v_=!1,x_=y_=NaN},lineEnd:function lineEnd(){segments&&(linePoint(x__,y__),v__&&v_&&bufferStream.rejoin(),segments.push(bufferStream.result()));clipStream.point=point,v_&&activeStream.lineEnd()},polygonStart:function polygonStart(){activeStream=bufferStream,segments=[],polygon=[],clean=!0},polygonEnd:function polygonEnd(){var startInside=function polygonInside(){for(var winding=0,i=0,n=polygon.length;i<n;++i)for(var a0,a1,ring=polygon[i],j=1,m=ring.length,point=ring[0],b0=point[0],b1=point[1];j<m;++j)a0=b0,a1=b1,b0=(point=ring[j])[0],b1=point[1],a1<=y1?b1>y1&&(b0-a0)*(y1-a1)>(b1-a1)*(x0-a0)&&++winding:b1<=y1&&(b0-a0)*(y1-a1)<(b1-a1)*(x0-a0)&&--winding;return winding}(),cleanInside=clean&&startInside,visible=(segments=merge(segments)).length;(cleanInside||visible)&&(stream.polygonStart(),cleanInside&&(stream.lineStart(),interpolate(null,null,1,stream),stream.lineEnd()),visible&&rejoin(segments,compareIntersection,startInside,interpolate,stream),stream.polygonEnd());activeStream=stream,segments=polygon=ring=null}};function point(x,y){visible(x,y)&&activeStream.point(x,y)}function linePoint(x,y){var v=visible(x,y);if(polygon&&ring.push([x,y]),first)x__=x,y__=y,v__=v,first=!1,v&&(activeStream.lineStart(),activeStream.point(x,y));else if(v&&v_)activeStream.point(x,y);else{var a=[x_=Math.max(clipMin,Math.min(clipMax,x_)),y_=Math.max(clipMin,Math.min(clipMax,y_))],b=[x=Math.max(clipMin,Math.min(clipMax,x)),y=Math.max(clipMin,Math.min(clipMax,y))];!function line(a,b,x0,y0,x1,y1){var r,ax=a[0],ay=a[1],t0=0,t1=1,dx=b[0]-ax,dy=b[1]-ay;if(r=x0-ax,dx||!(r>0)){if(r/=dx,dx<0){if(r<t0)return;r<t1&&(t1=r)}else if(dx>0){if(r>t1)return;r>t0&&(t0=r)}if(r=x1-ax,dx||!(r<0)){if(r/=dx,dx<0){if(r>t1)return;r>t0&&(t0=r)}else if(dx>0){if(r<t0)return;r<t1&&(t1=r)}if(r=y0-ay,dy||!(r>0)){if(r/=dy,dy<0){if(r<t0)return;r<t1&&(t1=r)}else if(dy>0){if(r>t1)return;r>t0&&(t0=r)}if(r=y1-ay,dy||!(r<0)){if(r/=dy,dy<0){if(r>t1)return;r>t0&&(t0=r)}else if(dy>0){if(r<t0)return;r<t1&&(t1=r)}return t0>0&&(a[0]=ax+t0*dx,a[1]=ay+t0*dy),t1<1&&(b[0]=ax+t1*dx,b[1]=ay+t1*dy),!0}}}}}(a,b,x0,y0,x1,y1)?v&&(activeStream.lineStart(),activeStream.point(x,y),clean=!1):(v_||(activeStream.lineStart(),activeStream.point(a[0],a[1])),activeStream.point(b[0],b[1]),v||activeStream.lineEnd(),clean=!1)}x_=x,y_=y,v_=v}return clipStream}}const identity=x=>x;function transformer(methods){return function(stream){var s=new TransformStream;for(var key in methods)s[key]=methods[key];return s.stream=stream,s}}function TransformStream(){}function streamGeometry(geometry,stream){geometry&&streamGeometryType.hasOwnProperty(geometry.type)&&streamGeometryType[geometry.type](geometry,stream)}TransformStream.prototype={constructor:TransformStream,point:function(x,y){this.stream.point(x,y)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var streamObjectType={Feature:function(object,stream){streamGeometry(object.geometry,stream)},FeatureCollection:function(object,stream){for(var features=object.features,i=-1,n=features.length;++i<n;)streamGeometry(features[i].geometry,stream)}},streamGeometryType={Sphere:function(object,stream){stream.sphere()},Point:function(object,stream){object=object.coordinates,stream.point(object[0],object[1],object[2])},MultiPoint:function(object,stream){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)object=coordinates[i],stream.point(object[0],object[1],object[2])},LineString:function(object,stream){streamLine(object.coordinates,stream,0)},MultiLineString:function(object,stream){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)streamLine(coordinates[i],stream,0)},Polygon:function(object,stream){streamPolygon(object.coordinates,stream)},MultiPolygon:function(object,stream){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)streamPolygon(coordinates[i],stream)},GeometryCollection:function(object,stream){for(var geometries=object.geometries,i=-1,n=geometries.length;++i<n;)streamGeometry(geometries[i],stream)}};function streamLine(coordinates,stream,closed){var coordinate,i=-1,n=coordinates.length-closed;for(stream.lineStart();++i<n;)coordinate=coordinates[i],stream.point(coordinate[0],coordinate[1],coordinate[2]);stream.lineEnd()}function streamPolygon(coordinates,stream){var i=-1,n=coordinates.length;for(stream.polygonStart();++i<n;)streamLine(coordinates[i],stream,1);stream.polygonEnd()}function src_stream(object,stream){object&&streamObjectType.hasOwnProperty(object.type)?streamObjectType[object.type](object,stream):streamGeometry(object,stream)}var x0=1/0,y0=x0,x1=-x0,y1=x1,boundsStream={point:function boundsPoint(x,y){x<x0&&(x0=x);x>x1&&(x1=x);y<y0&&(y0=y);y>y1&&(y1=y)},lineStart:noop,lineEnd:noop,polygonStart:noop,polygonEnd:noop,result:function(){var bounds=[[x0,y0],[x1,y1]];return x1=y1=-(y0=x0=1/0),bounds}};const bounds=boundsStream;function fit(projection,fitBounds,object){var clip=projection.clipExtent&&projection.clipExtent();return projection.scale(150).translate([0,0]),null!=clip&&projection.clipExtent(null),src_stream(object,projection.stream(bounds)),fitBounds(bounds.result()),null!=clip&&projection.clipExtent(clip),projection}function fitExtent(projection,extent,object){return fit(projection,(function(b){var w=extent[1][0]-extent[0][0],h=extent[1][1]-extent[0][1],k=Math.min(w/(b[1][0]-b[0][0]),h/(b[1][1]-b[0][1])),x=+extent[0][0]+(w-k*(b[1][0]+b[0][0]))/2,y=+extent[0][1]+(h-k*(b[1][1]+b[0][1]))/2;projection.scale(150*k).translate([x,y])}),object)}var maxDepth=16,cosMinDistance=cos(30*radians);function resample(project,delta2){return+delta2?function resample_resample(project,delta2){function resampleLineTo(x0,y0,lambda0,a0,b0,c0,x1,y1,lambda1,a1,b1,c1,depth,stream){var dx=x1-x0,dy=y1-y0,d2=dx*dx+dy*dy;if(d2>4*delta2&&depth--){var a=a0+a1,b=b0+b1,c=c0+c1,m=sqrt(a*a+b*b+c*c),phi2=asin(c/=m),lambda2=abs(abs(c)-1)<epsilon||abs(lambda0-lambda1)<epsilon?(lambda0+lambda1)/2:atan2(b,a),p=project(lambda2,phi2),x2=p[0],y2=p[1],dx2=x2-x0,dy2=y2-y0,dz=dy*dx2-dx*dy2;(dz*dz/d2>delta2||abs((dx*dx2+dy*dy2)/d2-.5)>.3||a0*a1+b0*b1+c0*c1<cosMinDistance)&&(resampleLineTo(x0,y0,lambda0,a0,b0,c0,x2,y2,lambda2,a/=m,b/=m,c,depth,stream),stream.point(x2,y2),resampleLineTo(x2,y2,lambda2,a,b,c,x1,y1,lambda1,a1,b1,c1,depth,stream))}}return function(stream){var lambda00,x00,y00,a00,b00,c00,lambda0,x0,y0,a0,b0,c0,resampleStream={point,lineStart,lineEnd,polygonStart:function(){stream.polygonStart(),resampleStream.lineStart=ringStart},polygonEnd:function(){stream.polygonEnd(),resampleStream.lineStart=lineStart}};function point(x,y){x=project(x,y),stream.point(x[0],x[1])}function lineStart(){x0=NaN,resampleStream.point=linePoint,stream.lineStart()}function linePoint(lambda,phi){var c=cartesian([lambda,phi]),p=project(lambda,phi);resampleLineTo(x0,y0,lambda0,a0,b0,c0,x0=p[0],y0=p[1],lambda0=lambda,a0=c[0],b0=c[1],c0=c[2],maxDepth,stream),stream.point(x0,y0)}function lineEnd(){resampleStream.point=point,stream.lineEnd()}function ringStart(){lineStart(),resampleStream.point=ringPoint,resampleStream.lineEnd=ringEnd}function ringPoint(lambda,phi){linePoint(lambda00=lambda,phi),x00=x0,y00=y0,a00=a0,b00=b0,c00=c0,resampleStream.point=linePoint}function ringEnd(){resampleLineTo(x0,y0,lambda0,a0,b0,c0,x00,y00,lambda00,a00,b00,c00,maxDepth,stream),resampleStream.lineEnd=lineEnd,lineEnd()}return resampleStream}}(project,delta2):function resampleNone(project){return transformer({point:function(x,y){x=project(x,y),this.stream.point(x[0],x[1])}})}(project)}var transformRadians=transformer({point:function(x,y){this.stream.point(x*radians,y*radians)}});function scaleTranslateRotate(k,dx,dy,sx,sy,alpha){if(!alpha)return function scaleTranslate(k,dx,dy,sx,sy){function transform(x,y){return[dx+k*(x*=sx),dy-k*(y*=sy)]}return transform.invert=function(x,y){return[(x-dx)/k*sx,(dy-y)/k*sy]},transform}(k,dx,dy,sx,sy);var cosAlpha=cos(alpha),sinAlpha=sin(alpha),a=cosAlpha*k,b=sinAlpha*k,ai=cosAlpha/k,bi=sinAlpha/k,ci=(sinAlpha*dy-cosAlpha*dx)/k,fi=(sinAlpha*dx+cosAlpha*dy)/k;function transform(x,y){return[a*(x*=sx)-b*(y*=sy)+dx,dy-b*x-a*y]}return transform.invert=function(x,y){return[sx*(ai*x-bi*y+ci),sy*(fi-bi*x-ai*y)]},transform}function projection_projection(project){return projectionMutator((function(){return project}))()}function projectionMutator(projectAt){var project,rotate,y0,x1,y1,projectResample,projectTransform,projectRotateTransform,cache,cacheStream,k=150,x=480,y=250,lambda=0,phi=0,deltaLambda=0,deltaPhi=0,deltaGamma=0,alpha=0,sx=1,sy=1,theta=null,preclip=antimeridian,x0=null,postclip=identity,delta2=.5;function projection(point){return projectRotateTransform(point[0]*radians,point[1]*radians)}function invert(point){return(point=projectRotateTransform.invert(point[0],point[1]))&&[point[0]*degrees,point[1]*degrees]}function recenter(){var center=scaleTranslateRotate(k,0,0,sx,sy,alpha).apply(null,project(lambda,phi)),transform=scaleTranslateRotate(k,x-center[0],y-center[1],sx,sy,alpha);return rotate=rotateRadians(deltaLambda,deltaPhi,deltaGamma),projectTransform=compose(project,transform),projectRotateTransform=compose(rotate,projectTransform),projectResample=resample(projectTransform,delta2),reset()}function reset(){return cache=cacheStream=null,projection}return projection.stream=function(stream){return cache&&cacheStream===stream?cache:cache=transformRadians(function transformRotate(rotate){return transformer({point:function(x,y){var r=rotate(x,y);return this.stream.point(r[0],r[1])}})}(rotate)(preclip(projectResample(postclip(cacheStream=stream)))))},projection.preclip=function(_){return arguments.length?(preclip=_,theta=void 0,reset()):preclip},projection.postclip=function(_){return arguments.length?(postclip=_,x0=y0=x1=y1=null,reset()):postclip},projection.clipAngle=function(_){return arguments.length?(preclip=+_?function circle(radius){var cr=cos(radius),delta=6*radians,smallRadius=cr>0,notHemisphere=abs(cr)>epsilon;function visible(lambda,phi){return cos(lambda)*cos(phi)>cr}function intersect(a,b,two){var n1=[1,0,0],n2=cartesianCross(cartesian(a),cartesian(b)),n2n2=cartesianDot(n2,n2),n1n2=n2[0],determinant=n2n2-n1n2*n1n2;if(!determinant)return!two&&a;var c1=cr*n2n2/determinant,c2=-cr*n1n2/determinant,n1xn2=cartesianCross(n1,n2),A=cartesianScale(n1,c1);cartesianAddInPlace(A,cartesianScale(n2,c2));var u=n1xn2,w=cartesianDot(A,u),uu=cartesianDot(u,u),t2=w*w-uu*(cartesianDot(A,A)-1);if(!(t2<0)){var t=sqrt(t2),q=cartesianScale(u,(-w-t)/uu);if(cartesianAddInPlace(q,A),q=spherical(q),!two)return q;var z,lambda0=a[0],lambda1=b[0],phi0=a[1],phi1=b[1];lambda1<lambda0&&(z=lambda0,lambda0=lambda1,lambda1=z);var delta=lambda1-lambda0,polar=abs(delta-pi)<epsilon;if(!polar&&phi1<phi0&&(z=phi0,phi0=phi1,phi1=z),polar||delta<epsilon?polar?phi0+phi1>0^q[1]<(abs(q[0]-lambda0)<epsilon?phi0:phi1):phi0<=q[1]&&q[1]<=phi1:delta>pi^(lambda0<=q[0]&&q[0]<=lambda1)){var q1=cartesianScale(u,(-w+t)/uu);return cartesianAddInPlace(q1,A),[q,spherical(q1)]}}}function code(lambda,phi){var r=smallRadius?radius:pi-radius,code=0;return lambda<-r?code|=1:lambda>r&&(code|=2),phi<-r?code|=4:phi>r&&(code|=8),code}return clip(visible,(function clipLine(stream){var point0,c0,v0,v00,clean;return{lineStart:function(){v00=v0=!1,clean=1},point:function(lambda,phi){var point2,point1=[lambda,phi],v=visible(lambda,phi),c=smallRadius?v?0:code(lambda,phi):v?code(lambda+(lambda<0?pi:-pi),phi):0;if(!point0&&(v00=v0=v)&&stream.lineStart(),v!==v0&&(!(point2=intersect(point0,point1))||pointEqual(point0,point2)||pointEqual(point1,point2))&&(point1[2]=1),v!==v0)clean=0,v?(stream.lineStart(),point2=intersect(point1,point0),stream.point(point2[0],point2[1])):(point2=intersect(point0,point1),stream.point(point2[0],point2[1],2),stream.lineEnd()),point0=point2;else if(notHemisphere&&point0&&smallRadius^v){var t;c&c0||!(t=intersect(point1,point0,!0))||(clean=0,smallRadius?(stream.lineStart(),stream.point(t[0][0],t[0][1]),stream.point(t[1][0],t[1][1]),stream.lineEnd()):(stream.point(t[1][0],t[1][1]),stream.lineEnd(),stream.lineStart(),stream.point(t[0][0],t[0][1],3)))}!v||point0&&pointEqual(point0,point1)||stream.point(point1[0],point1[1]),point0=point1,v0=v,c0=c},lineEnd:function(){v0&&stream.lineEnd(),point0=null},clean:function(){return clean|(v00&&v0)<<1}}}),(function interpolate(from,to,direction,stream){circleStream(stream,radius,delta,direction,from,to)}),smallRadius?[0,-radius]:[-pi,radius-pi])}(theta=_*radians):(theta=null,antimeridian),reset()):theta*degrees},projection.clipExtent=function(_){return arguments.length?(postclip=null==_?(x0=y0=x1=y1=null,identity):clipRectangle(x0=+_[0][0],y0=+_[0][1],x1=+_[1][0],y1=+_[1][1]),reset()):null==x0?null:[[x0,y0],[x1,y1]]},projection.scale=function(_){return arguments.length?(k=+_,recenter()):k},projection.translate=function(_){return arguments.length?(x=+_[0],y=+_[1],recenter()):[x,y]},projection.center=function(_){return arguments.length?(lambda=_[0]%360*radians,phi=_[1]%360*radians,recenter()):[lambda*degrees,phi*degrees]},projection.rotate=function(_){return arguments.length?(deltaLambda=_[0]%360*radians,deltaPhi=_[1]%360*radians,deltaGamma=_.length>2?_[2]%360*radians:0,recenter()):[deltaLambda*degrees,deltaPhi*degrees,deltaGamma*degrees]},projection.angle=function(_){return arguments.length?(alpha=_%360*radians,recenter()):alpha*degrees},projection.reflectX=function(_){return arguments.length?(sx=_?-1:1,recenter()):sx<0},projection.reflectY=function(_){return arguments.length?(sy=_?-1:1,recenter()):sy<0},projection.precision=function(_){return arguments.length?(projectResample=resample(projectTransform,delta2=_*_),reset()):sqrt(delta2)},projection.fitExtent=function(extent,object){return fitExtent(projection,extent,object)},projection.fitSize=function(size,object){return function fitSize(projection,size,object){return fitExtent(projection,[[0,0],size],object)}(projection,size,object)},projection.fitWidth=function(width,object){return function fitWidth(projection,width,object){return fit(projection,(function(b){var w=+width,k=w/(b[1][0]-b[0][0]),x=(w-k*(b[1][0]+b[0][0]))/2,y=-k*b[0][1];projection.scale(150*k).translate([x,y])}),object)}(projection,width,object)},projection.fitHeight=function(height,object){return function fitHeight(projection,height,object){return fit(projection,(function(b){var h=+height,k=h/(b[1][1]-b[0][1]),x=-k*b[0][0],y=(h-k*(b[1][1]+b[0][1]))/2;projection.scale(150*k).translate([x,y])}),object)}(projection,height,object)},function(){return project=projectAt.apply(this,arguments),projection.invert=project.invert&&invert,recenter()}}var math_abs=Math.abs,math_atan=Math.atan,math_atan2=Math.atan2,math_cos=(Math.ceil,Math.cos),math_exp=Math.exp,math_floor=Math.floor,math_log=Math.log,max=Math.max,min=Math.min,math_pow=Math.pow,round=Math.round,math_sign=Math.sign||function(x){return x>0?1:x<0?-1:0},math_sin=Math.sin,math_tan=Math.tan,math_epsilon=1e-6,math_epsilon2=1e-12,math_pi=Math.PI,math_halfPi=math_pi/2,math_quarterPi=math_pi/4,sqrt1_2=Math.SQRT1_2,sqrt2=math_sqrt(2),sqrtPi=math_sqrt(math_pi),math_tau=2*math_pi,math_degrees=180/math_pi,math_radians=math_pi/180;function math_asin(x){return x>1?math_halfPi:x<-1?-math_halfPi:Math.asin(x)}function math_acos(x){return x>1?0:x<-1?math_pi:Math.acos(x)}function math_sqrt(x){return x>0?Math.sqrt(x):0}function sinh(x){return(math_exp(x)-math_exp(-x))/2}function cosh(x){return(math_exp(x)+math_exp(-x))/2}function airyRaw(beta){var tanBeta_2=math_tan(beta/2),b=2*math_log(math_cos(beta/2))/(tanBeta_2*tanBeta_2);function forward(x,y){var cosx=math_cos(x),cosy=math_cos(y),siny=math_sin(y),cosz=cosy*cosx,k=-((1-cosz?math_log((1+cosz)/2)/(1-cosz):-.5)+b/(1+cosz));return[k*cosy*math_sin(x),k*siny]}return forward.invert=function(x,y){var delta,r=math_sqrt(x*x+y*y),z=-beta/2,i=50;if(!r)return[0,0];do{var z_2=z/2,cosz_2=math_cos(z_2),sinz_2=math_sin(z_2),tanz_2=sinz_2/cosz_2,lnsecz_2=-math_log(math_abs(cosz_2));z-=delta=(2/tanz_2*lnsecz_2-b*tanz_2-r)/(-lnsecz_2/(sinz_2*sinz_2)+1-b/(2*cosz_2*cosz_2))*(cosz_2<0?.7:1)}while(math_abs(delta)>math_epsilon&&--i>0);var sinz=math_sin(z);return[math_atan2(x*sinz,r*math_cos(z)),math_asin(y*sinz/r)]},forward}function airy(){var beta=math_halfPi,m=projectionMutator(airyRaw),p=m(beta);return p.radius=function(_){return arguments.length?m(beta=_*math_radians):beta*math_degrees},p.scale(179.976).clipAngle(147)}function aitoffRaw(x,y){var cosy=math_cos(y),sincia=function sinci(x){return x?x/Math.sin(x):1}(math_acos(cosy*math_cos(x/=2)));return[2*cosy*math_sin(x)*sincia,math_sin(y)*sincia]}function aitoff(){return projection_projection(aitoffRaw).scale(152.63)}function armadilloRaw(phi0){var sinPhi0=math_sin(phi0),cosPhi0=math_cos(phi0),sPhi0=phi0>=0?1:-1,tanPhi0=math_tan(sPhi0*phi0),k=(1+sinPhi0-cosPhi0)/2;function forward(lambda,phi){var cosPhi=math_cos(phi),cosLambda=math_cos(lambda/=2);return[(1+cosPhi)*math_sin(lambda),(sPhi0*phi>-math_atan2(cosLambda,tanPhi0)-.001?0:10*-sPhi0)+k+math_sin(phi)*cosPhi0-(1+cosPhi)*sinPhi0*cosLambda]}return forward.invert=function(x,y){var lambda=0,phi=0,i=50;do{var cosLambda=math_cos(lambda),sinLambda=math_sin(lambda),cosPhi=math_cos(phi),sinPhi=math_sin(phi),A=1+cosPhi,fx=A*sinLambda-x,fy=k+sinPhi*cosPhi0-A*sinPhi0*cosLambda-y,dxdLambda=A*cosLambda/2,dxdPhi=-sinLambda*sinPhi,dydLambda=sinPhi0*A*sinLambda/2,dydPhi=cosPhi0*cosPhi+sinPhi0*cosLambda*sinPhi,denominator=dxdPhi*dydLambda-dydPhi*dxdLambda,dLambda=(fy*dxdPhi-fx*dydPhi)/denominator/2,dPhi=(fx*dydLambda-fy*dxdLambda)/denominator;math_abs(dPhi)>2&&(dPhi/=2),lambda-=dLambda,phi-=dPhi}while((math_abs(dLambda)>math_epsilon||math_abs(dPhi)>math_epsilon)&&--i>0);return sPhi0*phi>-math_atan2(math_cos(lambda),tanPhi0)-.001?[2*lambda,phi]:null},forward}function armadillo(){var phi0=20*math_radians,sPhi0=phi0>=0?1:-1,tanPhi0=math_tan(sPhi0*phi0),m=projectionMutator(armadilloRaw),p=m(phi0),stream_=p.stream;return p.parallel=function(_){return arguments.length?(tanPhi0=math_tan((sPhi0=(phi0=_*math_radians)>=0?1:-1)*phi0),m(phi0)):phi0*math_degrees},p.stream=function(stream){var rotate=p.rotate(),rotateStream=stream_(stream),sphereStream=(p.rotate([0,0]),stream_(stream)),precision=p.precision();return p.rotate(rotate),rotateStream.sphere=function(){sphereStream.polygonStart(),sphereStream.lineStart();for(var lambda=-180*sPhi0;sPhi0*lambda<180;lambda+=90*sPhi0)sphereStream.point(lambda,90*sPhi0);if(phi0)for(;sPhi0*(lambda-=3*sPhi0*precision)>=-180;)sphereStream.point(lambda,sPhi0*-math_atan2(math_cos(lambda*math_radians/2),tanPhi0)*math_degrees);sphereStream.lineEnd(),sphereStream.polygonEnd()},rotateStream},p.scale(218.695).center([0,28.0974])}function augustRaw(lambda,phi){var tanPhi=math_tan(phi/2),k=math_sqrt(1-tanPhi*tanPhi),c=1+k*math_cos(lambda/=2),x=math_sin(lambda)*k/c,y=tanPhi/c,x2=x*x,y2=y*y;return[4/3*x*(3+x2-3*y2),4/3*y*(3+3*x2-y2)]}function august(){return projection_projection(augustRaw).scale(66.1603)}aitoffRaw.invert=function(x,y){if(!(x*x+4*y*y>math_pi*math_pi+math_epsilon)){var x1=x,y1=y,i=25;do{var f,sinx=math_sin(x1),sinx_2=math_sin(x1/2),cosx_2=math_cos(x1/2),siny=math_sin(y1),cosy=math_cos(y1),sin_2y=math_sin(2*y1),sin2y=siny*siny,cos2y=cosy*cosy,sin2x_2=sinx_2*sinx_2,c=1-cos2y*cosx_2*cosx_2,e=c?math_acos(cosy*cosx_2)*math_sqrt(f=1/c):f=0,fx=2*e*cosy*sinx_2-x,fy=e*siny-y,dxdx=f*(cos2y*sin2x_2+e*cosy*cosx_2*sin2y),dxdy=f*(.5*sinx*sin_2y-2*e*siny*sinx_2),dydx=.25*f*(sin_2y*sinx_2-e*siny*cos2y*sinx),dydy=f*(sin2y*cosx_2+e*sin2x_2*cosy),z=dxdy*dydx-dydy*dxdx;if(!z)break;var dx=(fy*dxdy-fx*dydy)/z,dy=(fx*dydx-fy*dxdx)/z;x1-=dx,y1-=dy}while((math_abs(dx)>math_epsilon||math_abs(dy)>math_epsilon)&&--i>0);return[x1,y1]}},augustRaw.invert=function(x,y){if(y*=3/8,!(x*=3/8)&&math_abs(y)>1)return null;var s=1+x*x+y*y,sin3Eta=math_sqrt((s-math_sqrt(s*s-4*y*y))/2),eta=math_asin(sin3Eta)/3,xi=sin3Eta?function arcosh(x){return math_log(x+math_sqrt(x*x-1))}(math_abs(y/sin3Eta))/3:function arsinh(x){return math_log(x+math_sqrt(x*x+1))}(math_abs(x))/3,cosEta=math_cos(eta),coshXi=cosh(xi),d=coshXi*coshXi-cosEta*cosEta;return[2*math_sign(x)*math_atan2(sinh(xi)*cosEta,.25-d),2*math_sign(y)*math_atan2(coshXi*math_sin(eta),.25+d)]};var sqrt8=math_sqrt(8),phi0=math_log(1+sqrt2);function bakerRaw(lambda,phi){var phi0=math_abs(phi);return phi0<math_quarterPi?[lambda,math_log(math_tan(math_quarterPi+phi/2))]:[lambda*math_cos(phi0)*(2*sqrt2-1/math_sin(phi0)),math_sign(phi)*(2*sqrt2*(phi0-math_quarterPi)-math_log(math_tan(phi0/2)))]}function baker(){return projection_projection(bakerRaw).scale(112.314)}function azimuthalRaw(scale){return function(x,y){var cx=cos(x),cy=cos(y),k=scale(cx*cy);return k===1/0?[2,0]:[k*cy*sin(x),k*sin(y)]}}function azimuthalInvert(angle){return function(x,y){var z=sqrt(x*x+y*y),c=angle(z),sc=sin(c),cc=cos(c);return[atan2(x*sc,z*cc),asin(z&&y*sc/z)]}}bakerRaw.invert=function(x,y){if((y0=math_abs(y))<phi0)return[x,2*math_atan(math_exp(y))-math_halfPi];var delta,y0,phi=math_quarterPi,i=25;do{var cosPhi_2=math_cos(phi/2),tanPhi_2=math_tan(phi/2);phi-=delta=(sqrt8*(phi-math_quarterPi)-math_log(tanPhi_2)-y0)/(sqrt8-cosPhi_2*cosPhi_2/(2*tanPhi_2))}while(math_abs(delta)>math_epsilon2&&--i>0);return[x/(math_cos(phi)*(sqrt8-1/math_sin(phi))),math_sign(y)*phi]};var azimuthalEquidistantRaw=azimuthalRaw((function(c){return(c=acos(c))&&c/sin(c)}));function berghausRaw(lobes){var k=2*math_pi/lobes;function forward(lambda,phi){var p=azimuthalEquidistantRaw(lambda,phi);if(math_abs(lambda)>math_halfPi){var theta=math_atan2(p[1],p[0]),r=math_sqrt(p[0]*p[0]+p[1]*p[1]),theta0=k*round((theta-math_halfPi)/k)+math_halfPi,alpha=math_atan2(math_sin(theta-=theta0),2-math_cos(theta));theta=theta0+math_asin(math_pi/r*math_sin(alpha))-alpha,p[0]=r*math_cos(theta),p[1]=r*math_sin(theta)}return p}return forward.invert=function(x,y){var r=math_sqrt(x*x+y*y);if(r>math_halfPi){var theta=math_atan2(y,x),theta0=k*round((theta-math_halfPi)/k)+math_halfPi,s=theta>theta0?-1:1,A=r*math_cos(theta0-theta),cotAlpha=1/math_tan(s*math_acos((A-math_pi)/math_sqrt(math_pi*(math_pi-2*A)+r*r)));theta=theta0+2*math_atan((cotAlpha+s*math_sqrt(cotAlpha*cotAlpha-3))/3),x=r*math_cos(theta),y=r*math_sin(theta)}return azimuthalEquidistantRaw.invert(x,y)},forward}function berghaus(){var lobes=5,m=projectionMutator(berghausRaw),p=m(lobes),projectionStream=p.stream,cr=-math_cos(.01*math_radians),sr=math_sin(.01*math_radians);return p.lobes=function(_){return arguments.length?m(lobes=+_):lobes},p.stream=function(stream){var rotate=p.rotate(),rotateStream=projectionStream(stream),sphereStream=(p.rotate([0,0]),projectionStream(stream));return p.rotate(rotate),rotateStream.sphere=function(){sphereStream.polygonStart(),sphereStream.lineStart();for(var i=0,delta=360/lobes,delta0=2*math_pi/lobes,phi=90-180/lobes,phi0=math_halfPi;i<lobes;++i,phi-=delta,phi0-=delta0)sphereStream.point(math_atan2(sr*math_cos(phi0),cr)*math_degrees,math_asin(sr*math_sin(phi0))*math_degrees),phi<-90?(sphereStream.point(-90,-180-phi-.01),sphereStream.point(-90,-180-phi+.01)):(sphereStream.point(90,phi+.01),sphereStream.point(90,phi-.01));sphereStream.lineEnd(),sphereStream.polygonEnd()},rotateStream},p.scale(87.8076).center([0,17.1875]).clipAngle(179.999)}azimuthalEquidistantRaw.invert=azimuthalInvert((function(z){return z}));var azimuthalEqualAreaRaw=azimuthalRaw((function(cxcy){return sqrt(2/(1+cxcy))}));function hammerRaw(A,B){if(arguments.length<2&&(B=A),1===B)return azimuthalEqualAreaRaw;if(B===1/0)return hammerQuarticAuthalicRaw;function forward(lambda,phi){var coordinates=azimuthalEqualAreaRaw(lambda/B,phi);return coordinates[0]*=A,coordinates}return forward.invert=function(x,y){var coordinates=azimuthalEqualAreaRaw.invert(x/A,y);return coordinates[0]*=B,coordinates},forward}function hammerQuarticAuthalicRaw(lambda,phi){return[lambda*math_cos(phi)/math_cos(phi/=2),2*math_sin(phi)]}function hammer(){var B=2,m=projectionMutator(hammerRaw),p=m(B);return p.coefficient=function(_){return arguments.length?m(B=+_):B},p.scale(169.529)}function solve(f,y,x){var delta,f0,f1,steps=100;x=void 0===x?0:+x,y=+y;do{(f0=f(x))===(f1=f(x+math_epsilon))&&(f1=f0+math_epsilon),x-=delta=-1*math_epsilon*(f0-y)/(f0-f1)}while(steps-- >0&&math_abs(delta)>math_epsilon);return steps<0?NaN:x}function solve2d(f,MAX_ITERATIONS,eps){return void 0===MAX_ITERATIONS&&(MAX_ITERATIONS=40),void 0===eps&&(eps=math_epsilon2),function(x,y,a,b){var err2,da,db;a=void 0===a?0:+a,b=void 0===b?0:+b;for(var i=0;i<MAX_ITERATIONS;i++){var p=f(a,b),tx=p[0]-x,ty=p[1]-y;if(math_abs(tx)<eps&&math_abs(ty)<eps)break;var h=tx*tx+ty*ty;if(h>err2)a-=da/=2,b-=db/=2;else{err2=h;var ea=(a>0?-1:1)*eps,eb=(b>0?-1:1)*eps,pa=f(a+ea,b),pb=f(a,b+eb),dxa=(pa[0]-p[0])/ea,dya=(pa[1]-p[1])/ea,dxb=(pb[0]-p[0])/eb,dyb=(pb[1]-p[1])/eb,D=dyb*dxa-dya*dxb,l=(math_abs(D)<.5?.5:1)/D;if(a+=da=(ty*dxb-tx*dyb)*l,b+=db=(tx*dya-ty*dxa)*l,math_abs(da)<eps&&math_abs(db)<eps)break}}return[a,b]}}function bertin1953Raw(){var hammer=hammerRaw(1.68,2);function forward(lambda,phi){if(lambda+phi<-1.4){var u=(lambda-phi+1.6)*(lambda+phi+1.4)/8;lambda+=u,phi-=.8*u*math_sin(phi+math_pi/2)}var r=hammer(lambda,phi),d=(1-math_cos(lambda*phi))/12;return r[1]<0&&(r[0]*=1+d),r[1]>0&&(r[1]*=1+d/1.5*r[0]*r[0]),r}return forward.invert=solve2d(forward),forward}function bertin(){return projection_projection(bertin1953Raw()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function mollweideBromleyTheta(cp,phi){var delta,cpsinPhi=cp*math_sin(phi),i=30;do{phi-=delta=(phi+math_sin(phi)-cpsinPhi)/(1+math_cos(phi))}while(math_abs(delta)>math_epsilon&&--i>0);return phi/2}function mollweideBromleyRaw(cx,cy,cp){function forward(lambda,phi){return[cx*lambda*math_cos(phi=mollweideBromleyTheta(cp,phi)),cy*math_sin(phi)]}return forward.invert=function(x,y){return y=math_asin(y/cy),[x/(cx*math_cos(y)),math_asin((2*y+math_sin(2*y))/cp)]},forward}azimuthalEqualAreaRaw.invert=azimuthalInvert((function(z){return 2*asin(z/2)})),hammerQuarticAuthalicRaw.invert=function(x,y){var phi=2*math_asin(y/2);return[x*math_cos(phi/2)/math_cos(phi),phi]};var mollweideRaw=mollweideBromleyRaw(sqrt2/math_halfPi,sqrt2,math_pi);function mollweide(){return projection_projection(mollweideRaw).scale(169.529)}var k=2.00276,w=1.11072;function boggsRaw(lambda,phi){var theta=mollweideBromleyTheta(math_pi,phi);return[k*lambda/(1/math_cos(phi)+w/math_cos(theta)),(phi+sqrt2*math_sin(theta))/k]}function boggs(){return projection_projection(boggsRaw).scale(160.857)}function parallel1(projectAt){var phi0=0,m=projectionMutator(projectAt),p=m(phi0);return p.parallel=function(_){return arguments.length?m(phi0=_*math_radians):phi0*math_degrees},p}function sinusoidalRaw(lambda,phi){return[lambda*math_cos(phi),phi]}function sinusoidal(){return projection_projection(sinusoidalRaw).scale(152.63)}function bonneRaw(phi0){if(!phi0)return sinusoidalRaw;var cotPhi0=1/math_tan(phi0);function forward(lambda,phi){var rho=cotPhi0+phi0-phi,e=rho?lambda*math_cos(phi)/rho:rho;return[rho*math_sin(e),cotPhi0-rho*math_cos(e)]}return forward.invert=function(x,y){var rho=math_sqrt(x*x+(y=cotPhi0-y)*y),phi=cotPhi0+phi0-rho;return[rho/math_cos(phi)*math_atan2(x,y),phi]},forward}function bonne(){return parallel1(bonneRaw).scale(123.082).center([0,26.1441]).parallel(45)}function bottomleyRaw(sinPsi){function forward(lambda,phi){var rho=math_halfPi-phi,eta=rho?lambda*sinPsi*math_sin(rho)/rho:rho;return[rho*math_sin(eta)/sinPsi,math_halfPi-rho*math_cos(eta)]}return forward.invert=function(x,y){var x1=x*sinPsi,y1=math_halfPi-y,rho=math_sqrt(x1*x1+y1*y1),eta=math_atan2(x1,y1);return[(rho?rho/math_sin(rho):1)*eta/sinPsi,math_halfPi-rho]},forward}function bottomley(){var sinPsi=.5,m=projectionMutator(bottomleyRaw),p=m(sinPsi);return p.fraction=function(_){return arguments.length?m(sinPsi=+_):sinPsi},p.scale(158.837)}boggsRaw.invert=function(x,y){var delta,phi,ky=k*y,theta=y<0?-math_quarterPi:math_quarterPi,i=25;do{phi=ky-sqrt2*math_sin(theta),theta-=delta=(math_sin(2*theta)+2*theta-math_pi*math_sin(phi))/(2*math_cos(2*theta)+2+math_pi*math_cos(phi)*sqrt2*math_cos(theta))}while(math_abs(delta)>math_epsilon&&--i>0);return phi=ky-sqrt2*math_sin(theta),[x*(1/math_cos(phi)+w/math_cos(theta))/k,phi]},sinusoidalRaw.invert=function(x,y){return[x/math_cos(y),y]};var W0,W1,X0,Y0,Z0,X1,Y1,Z1,X2,Y2,Z2,lambda00,phi00,centroid_x0,centroid_y0,z0,bromleyRaw=mollweideBromleyRaw(1,4/math_pi,math_pi);function bromley(){return projection_projection(bromleyRaw).scale(152.63)}var centroidStream={sphere:noop,point:centroidPoint,lineStart:centroidLineStart,lineEnd:centroidLineEnd,polygonStart:function(){centroidStream.lineStart=centroidRingStart,centroidStream.lineEnd=centroidRingEnd},polygonEnd:function(){centroidStream.lineStart=centroidLineStart,centroidStream.lineEnd=centroidLineEnd}};function centroidPoint(lambda,phi){lambda*=radians;var cosPhi=cos(phi*=radians);centroidPointCartesian(cosPhi*cos(lambda),cosPhi*sin(lambda),sin(phi))}function centroidPointCartesian(x,y,z){++W0,X0+=(x-X0)/W0,Y0+=(y-Y0)/W0,Z0+=(z-Z0)/W0}function centroidLineStart(){centroidStream.point=centroidLinePointFirst}function centroidLinePointFirst(lambda,phi){lambda*=radians;var cosPhi=cos(phi*=radians);centroid_x0=cosPhi*cos(lambda),centroid_y0=cosPhi*sin(lambda),z0=sin(phi),centroidStream.point=centroidLinePoint,centroidPointCartesian(centroid_x0,centroid_y0,z0)}function centroidLinePoint(lambda,phi){lambda*=radians;var cosPhi=cos(phi*=radians),x=cosPhi*cos(lambda),y=cosPhi*sin(lambda),z=sin(phi),w=atan2(sqrt((w=centroid_y0*z-z0*y)*w+(w=z0*x-centroid_x0*z)*w+(w=centroid_x0*y-centroid_y0*x)*w),centroid_x0*x+centroid_y0*y+z0*z);W1+=w,X1+=w*(centroid_x0+(centroid_x0=x)),Y1+=w*(centroid_y0+(centroid_y0=y)),Z1+=w*(z0+(z0=z)),centroidPointCartesian(centroid_x0,centroid_y0,z0)}function centroidLineEnd(){centroidStream.point=centroidPoint}function centroidRingStart(){centroidStream.point=centroidRingPointFirst}function centroidRingEnd(){centroidRingPoint(lambda00,phi00),centroidStream.point=centroidPoint}function centroidRingPointFirst(lambda,phi){lambda00=lambda,phi00=phi,lambda*=radians,phi*=radians,centroidStream.point=centroidRingPoint;var cosPhi=cos(phi);centroid_x0=cosPhi*cos(lambda),centroid_y0=cosPhi*sin(lambda),z0=sin(phi),centroidPointCartesian(centroid_x0,centroid_y0,z0)}function centroidRingPoint(lambda,phi){lambda*=radians;var cosPhi=cos(phi*=radians),x=cosPhi*cos(lambda),y=cosPhi*sin(lambda),z=sin(phi),cx=centroid_y0*z-z0*y,cy=z0*x-centroid_x0*z,cz=centroid_x0*y-centroid_y0*x,m=hypot(cx,cy,cz),w=asin(m),v=m&&-w/m;X2.add(v*cx),Y2.add(v*cy),Z2.add(v*cz),W1+=w,X1+=w*(centroid_x0+(centroid_x0=x)),Y1+=w*(centroid_y0+(centroid_y0=y)),Z1+=w*(z0+(z0=z)),centroidPointCartesian(centroid_x0,centroid_y0,z0)}function centroid(object){W0=W1=X0=Y0=Z0=X1=Y1=Z1=0,X2=new fsum_Adder,Y2=new fsum_Adder,Z2=new fsum_Adder,src_stream(object,centroidStream);var x=+X2,y=+Y2,z=+Z2,m=hypot(x,y,z);return m<epsilon2&&(x=X1,y=Y1,z=Z1,W1<epsilon&&(x=X0,y=Y0,z=Z0),(m=hypot(x,y,z))<epsilon2)?[NaN,NaN]:[atan2(y,x)*degrees,asin(z/m)*degrees]}function distance(dPhi,c1,s1,c2,s2,dLambda){var r,cosdLambda=math_cos(dLambda);if(math_abs(dPhi)>1||math_abs(dLambda)>1)r=math_acos(s1*s2+c1*c2*cosdLambda);else{var sindPhi=math_sin(dPhi/2),sindLambda=math_sin(dLambda/2);r=2*math_asin(math_sqrt(sindPhi*sindPhi+c1*c2*sindLambda*sindLambda))}return math_abs(r)>math_epsilon?[r,math_atan2(c2*math_sin(dLambda),c1*s2-s1*c2*cosdLambda)]:[0,0]}function angle(b,c,a){return math_acos((b*b+c*c-a*a)/(2*b*c))}function chamberlin_longitude(lambda){return lambda-2*math_pi*math_floor((lambda+math_pi)/(2*math_pi))}function chamberlinRaw(p0,p1,p2){for(var b,points=[[p0[0],p0[1],math_sin(p0[1]),math_cos(p0[1])],[p1[0],p1[1],math_sin(p1[1]),math_cos(p1[1])],[p2[0],p2[1],math_sin(p2[1]),math_cos(p2[1])]],a=points[2],i=0;i<3;++i,a=b)b=points[i],a.v=distance(b[1]-a[1],a[3],a[2],b[3],b[2],b[0]-a[0]),a.point=[0,0];var beta0=angle(points[0].v[0],points[2].v[0],points[1].v[0]),beta1=angle(points[0].v[0],points[1].v[0],points[2].v[0]),beta2=math_pi-beta0;points[2].point[1]=0,points[0].point[0]=-(points[1].point[0]=points[0].v[0]/2);var mean=[points[2].point[0]=points[0].point[0]+points[2].v[0]*math_cos(beta0),2*(points[0].point[1]=points[1].point[1]=points[2].v[0]*math_sin(beta0))];return function forward(lambda,phi){var i,sinPhi=math_sin(phi),cosPhi=math_cos(phi),v=new Array(3);for(i=0;i<3;++i){var p=points[i];if(v[i]=distance(phi-p[1],p[3],p[2],cosPhi,sinPhi,lambda-p[0]),!v[i][0])return p.point;v[i][1]=chamberlin_longitude(v[i][1]-p.v[1])}var point=mean.slice();for(i=0;i<3;++i){var j=2==i?0:i+1,a=angle(points[i].v[0],v[i][0],v[j][0]);v[i][1]<0&&(a=-a),i?1==i?(a=beta1-a,point[0]-=v[i][0]*math_cos(a),point[1]-=v[i][0]*math_sin(a)):(a=beta2-a,point[0]+=v[i][0]*math_cos(a),point[1]+=v[i][0]*math_sin(a)):(point[0]+=v[i][0]*math_cos(a),point[1]-=v[i][0]*math_sin(a))}return point[0]/=3,point[1]/=3,point}}function pointRadians(p){return p[0]*=math_radians,p[1]*=math_radians,p}function chamberlinAfrica(){return chamberlin([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function chamberlin(p0,p1,p2){var c=centroid({type:"MultiPoint",coordinates:[p0,p1,p2]}),R=[-c[0],-c[1]],r=rotation(R),f=chamberlinRaw(pointRadians(r(p0)),pointRadians(r(p1)),pointRadians(r(p2)));f.invert=solve2d(f);var p=projection_projection(f).rotate(R),center=p.center;return delete p.rotate,p.center=function(_){return arguments.length?center(r(_)):r.invert(center())},p.clipAngle(90)}function collignonRaw(lambda,phi){var alpha=math_sqrt(1-math_sin(phi));return[2/sqrtPi*lambda*alpha,sqrtPi*(1-alpha)]}function collignon(){return projection_projection(collignonRaw).scale(95.6464).center([0,30])}function craigRaw(phi0){var tanPhi0=math_tan(phi0);function forward(lambda,phi){return[lambda,(lambda?lambda/math_sin(lambda):1)*(math_sin(phi)*math_cos(lambda)-tanPhi0*math_cos(phi))]}return forward.invert=tanPhi0?function(x,y){x&&(y*=math_sin(x)/x);var cosLambda=math_cos(x);return[x,2*math_atan2(math_sqrt(cosLambda*cosLambda+tanPhi0*tanPhi0-y*y)-cosLambda,tanPhi0-y)]}:function(x,y){return[x,math_asin(x?y*math_tan(x)/x:y)]},forward}function craig(){return parallel1(craigRaw).scale(249.828).clipAngle(90)}collignonRaw.invert=function(x,y){var lambda=(lambda=y/sqrtPi-1)*lambda;return[lambda>0?x*math_sqrt(math_pi/lambda)/2:0,math_asin(1-lambda)]};var sqrt3=math_sqrt(3);function crasterRaw(lambda,phi){return[sqrt3*lambda*(2*math_cos(2*phi/3)-1)/sqrtPi,sqrt3*sqrtPi*math_sin(phi/3)]}function craster(){return projection_projection(crasterRaw).scale(156.19)}function cylindricalEqualAreaRaw(phi0){var cosPhi0=math_cos(phi0);function forward(lambda,phi){return[lambda*cosPhi0,math_sin(phi)/cosPhi0]}return forward.invert=function(x,y){return[x/cosPhi0,math_asin(y*cosPhi0)]},forward}function cylindricalEqualArea(){return parallel1(cylindricalEqualAreaRaw).parallel(38.58).scale(195.044)}function cylindricalStereographicRaw(phi0){var cosPhi0=math_cos(phi0);function forward(lambda,phi){return[lambda*cosPhi0,(1+cosPhi0)*math_tan(phi/2)]}return forward.invert=function(x,y){return[x/cosPhi0,2*math_atan(y/(1+cosPhi0))]},forward}function cylindricalStereographic(){return parallel1(cylindricalStereographicRaw).scale(124.75)}function eckert1Raw(lambda,phi){var alpha=math_sqrt(8/(3*math_pi));return[alpha*lambda*(1-math_abs(phi)/math_pi),alpha*phi]}function eckert1(){return projection_projection(eckert1Raw).scale(165.664)}function eckert2Raw(lambda,phi){var alpha=math_sqrt(4-3*math_sin(math_abs(phi)));return[2/math_sqrt(6*math_pi)*lambda*alpha,math_sign(phi)*math_sqrt(2*math_pi/3)*(2-alpha)]}function eckert2(){return projection_projection(eckert2Raw).scale(165.664)}function eckert3Raw(lambda,phi){var k=math_sqrt(math_pi*(4+math_pi));return[2/k*lambda*(1+math_sqrt(1-4*phi*phi/(math_pi*math_pi))),4/k*phi]}function eckert3(){return projection_projection(eckert3Raw).scale(180.739)}function eckert4Raw(lambda,phi){var k=(2+math_halfPi)*math_sin(phi);phi/=2;for(var i=0,delta=1/0;i<10&&math_abs(delta)>math_epsilon;i++){var cosPhi=math_cos(phi);phi-=delta=(phi+math_sin(phi)*(cosPhi+2)-k)/(2*cosPhi*(1+cosPhi))}return[2/math_sqrt(math_pi*(4+math_pi))*lambda*(1+math_cos(phi)),2*math_sqrt(math_pi/(4+math_pi))*math_sin(phi)]}function eckert4(){return projection_projection(eckert4Raw).scale(180.739)}function eckert5Raw(lambda,phi){return[lambda*(1+math_cos(phi))/math_sqrt(2+math_pi),2*phi/math_sqrt(2+math_pi)]}function eckert5(){return projection_projection(eckert5Raw).scale(173.044)}function eckert6Raw(lambda,phi){for(var k=(1+math_halfPi)*math_sin(phi),i=0,delta=1/0;i<10&&math_abs(delta)>math_epsilon;i++)phi-=delta=(phi+math_sin(phi)-k)/(1+math_cos(phi));return k=math_sqrt(2+math_pi),[lambda*(1+math_cos(phi))/k,2*phi/k]}function eckert6(){return projection_projection(eckert6Raw).scale(173.044)}crasterRaw.invert=function(x,y){var phi=3*math_asin(y/(sqrt3*sqrtPi));return[sqrtPi*x/(sqrt3*(2*math_cos(2*phi/3)-1)),phi]},eckert1Raw.invert=function(x,y){var alpha=math_sqrt(8/(3*math_pi)),phi=y/alpha;return[x/(alpha*(1-math_abs(phi)/math_pi)),phi]},eckert2Raw.invert=function(x,y){var alpha=2-math_abs(y)/math_sqrt(2*math_pi/3);return[x*math_sqrt(6*math_pi)/(2*alpha),math_sign(y)*math_asin((4-alpha*alpha)/3)]},eckert3Raw.invert=function(x,y){var k=math_sqrt(math_pi*(4+math_pi))/2;return[x*k/(1+math_sqrt(1-y*y*(4+math_pi)/(4*math_pi))),y*k/2]},eckert4Raw.invert=function(x,y){var A=y*math_sqrt((4+math_pi)/math_pi)/2,k=math_asin(A),c=math_cos(k);return[x/(2/math_sqrt(math_pi*(4+math_pi))*(1+c)),math_asin((k+A*(c+2))/(2+math_halfPi))]},eckert5Raw.invert=function(x,y){var k=math_sqrt(2+math_pi),phi=y*k/2;return[k*x/(1+math_cos(phi)),phi]},eckert6Raw.invert=function(x,y){var j=1+math_halfPi,k=math_sqrt(j/2);return[2*x*k/(1+math_cos(y*=k)),math_asin((y+math_sin(y))/j)]};var eisenlohrK=3+2*sqrt2;function eisenlohrRaw(lambda,phi){var s0=math_sin(lambda/=2),c0=math_cos(lambda),k=math_sqrt(math_cos(phi)),c1=math_cos(phi/=2),t=math_sin(phi)/(c1+sqrt2*c0*k),c=math_sqrt(2/(1+t*t)),v=math_sqrt((sqrt2*c1+(c0+s0)*k)/(sqrt2*c1+(c0-s0)*k));return[eisenlohrK*(c*(v-1/v)-2*math_log(v)),eisenlohrK*(c*t*(v+1/v)-2*math_atan(t))]}function eisenlohr(){return projection_projection(eisenlohrRaw).scale(62.5271)}eisenlohrRaw.invert=function(x,y){if(!(p=augustRaw.invert(x/1.2,1.065*y)))return null;var p,lambda=p[0],phi=p[1],i=20;x/=eisenlohrK,y/=eisenlohrK;do{var _0=lambda/2,_1=phi/2,s0=math_sin(_0),c0=math_cos(_0),s1=math_sin(_1),c1=math_cos(_1),cos1=math_cos(phi),k=math_sqrt(cos1),t=s1/(c1+sqrt2*c0*k),t2=t*t,c=math_sqrt(2/(1+t2)),v2=(sqrt2*c1+(c0+s0)*k)/(sqrt2*c1+(c0-s0)*k),v=math_sqrt(v2),vm1v=v-1/v,vp1v=v+1/v,fx=c*vm1v-2*math_log(v)-x,fy=c*t*vp1v-2*math_atan(t)-y,deltatDeltaLambda=s1&&sqrt1_2*k*s0*t2/s1,deltatDeltaPhi=(sqrt2*c0*c1+k)/(2*(c1+sqrt2*c0*k)*(c1+sqrt2*c0*k)*k),deltacDeltat=-.5*t*c*c*c,deltacDeltaLambda=deltacDeltat*deltatDeltaLambda,deltacDeltaPhi=deltacDeltat*deltatDeltaPhi,A=(A=2*c1+sqrt2*k*(c0-s0))*A*v,deltavDeltaLambda=(sqrt2*c0*c1*k+cos1)/A,deltavDeltaPhi=-sqrt2*s0*s1/(k*A),deltaxDeltaLambda=vm1v*deltacDeltaLambda-2*deltavDeltaLambda/v+c*(deltavDeltaLambda+deltavDeltaLambda/v2),deltaxDeltaPhi=vm1v*deltacDeltaPhi-2*deltavDeltaPhi/v+c*(deltavDeltaPhi+deltavDeltaPhi/v2),deltayDeltaLambda=t*vp1v*deltacDeltaLambda-2*deltatDeltaLambda/(1+t2)+c*vp1v*deltatDeltaLambda+c*t*(deltavDeltaLambda-deltavDeltaLambda/v2),deltayDeltaPhi=t*vp1v*deltacDeltaPhi-2*deltatDeltaPhi/(1+t2)+c*vp1v*deltatDeltaPhi+c*t*(deltavDeltaPhi-deltavDeltaPhi/v2),denominator=deltaxDeltaPhi*deltayDeltaLambda-deltayDeltaPhi*deltaxDeltaLambda;if(!denominator)break;var deltaLambda=(fy*deltaxDeltaPhi-fx*deltayDeltaPhi)/denominator,deltaPhi=(fx*deltayDeltaLambda-fy*deltaxDeltaLambda)/denominator;lambda-=deltaLambda,phi=max(-math_halfPi,min(math_halfPi,phi-deltaPhi))}while((math_abs(deltaLambda)>math_epsilon||math_abs(deltaPhi)>math_epsilon)&&--i>0);return math_abs(math_abs(phi)-math_halfPi)<math_epsilon?[0,phi]:i&&[lambda,phi]};var faheyK=math_cos(35*math_radians);function faheyRaw(lambda,phi){var t=math_tan(phi/2);return[lambda*faheyK*math_sqrt(1-t*t),(1+faheyK)*t]}function fahey(){return projection_projection(faheyRaw).scale(137.152)}function foucautRaw(lambda,phi){var k=phi/2,cosk=math_cos(k);return[2*lambda/sqrtPi*math_cos(phi)*cosk*cosk,sqrtPi*math_tan(k)]}function foucaut(){return projection_projection(foucautRaw).scale(135.264)}function foucautSinusoidalRaw(alpha){var beta=1-alpha,equatorial=raw(math_pi,0)[0]-raw(-math_pi,0)[0],ratio=math_sqrt(2*(raw(0,math_halfPi)[1]-raw(0,-math_halfPi)[1])/equatorial);function raw(lambda,phi){var cosphi=math_cos(phi),sinphi=math_sin(phi);return[cosphi/(beta+alpha*cosphi)*lambda,beta*phi+alpha*sinphi]}function forward(lambda,phi){var p=raw(lambda,phi);return[p[0]*ratio,p[1]/ratio]}function forwardMeridian(phi){return forward(0,phi)[1]}return forward.invert=function(x,y){var phi=solve(forwardMeridian,y);return[x/ratio*(alpha+beta/math_cos(phi)),phi]},forward}function foucautSinusoidal(){var alpha=.5,m=projectionMutator(foucautSinusoidalRaw),p=m(alpha);return p.alpha=function(_){return arguments.length?m(alpha=+_):alpha},p.scale(168.725)}function orthographicRaw(x,y){return[cos(y)*sin(x),sin(y)]}function orthographic(){return projection_projection(orthographicRaw).scale(249.5).clipAngle(90+epsilon)}function equirectangularRaw(lambda,phi){return[lambda,phi]}function gilbertForward(point){return[point[0]/2,math_asin(math_tan(point[1]/2*math_radians))*math_degrees]}function gilbertInvert(point){return[2*point[0],2*math_atan(math_sin(point[1]*math_radians))*math_degrees]}function gilbert(projectionType){null==projectionType&&(projectionType=orthographic);var projection=projectionType(),equirectangular=function projection_equirectangular(){return projection_projection(equirectangularRaw).scale(152.63)}().scale(math_degrees).precision(0).clipAngle(null).translate([0,0]);function gilbert(point){return projection(gilbertForward(point))}function property(name){gilbert[name]=function(){return arguments.length?(projection[name].apply(projection,arguments),gilbert):projection[name]()}}return projection.invert&&(gilbert.invert=function(point){return gilbertInvert(projection.invert(point))}),gilbert.stream=function(stream){var s1=projection.stream(stream),s0=equirectangular.stream({point:function(lambda,phi){s1.point(lambda/2,math_asin(math_tan(-phi/2*math_radians))*math_degrees)},lineStart:function(){s1.lineStart()},lineEnd:function(){s1.lineEnd()},polygonStart:function(){s1.polygonStart()},polygonEnd:function(){s1.polygonEnd()}});return s0.sphere=s1.sphere,s0},gilbert.rotate=function(_){return arguments.length?(equirectangular.rotate(_),gilbert):equirectangular.rotate()},gilbert.center=function(_){return arguments.length?(projection.center(gilbertForward(_)),gilbert):gilbertInvert(projection.center())},property("angle"),property("clipAngle"),property("clipExtent"),property("fitExtent"),property("fitHeight"),property("fitSize"),property("fitWidth"),property("scale"),property("translate"),property("precision"),gilbert.scale(249.5)}function gingeryRaw(rho,n){var k=2*math_pi/n,rho2=rho*rho;function forward(lambda,phi){var p=azimuthalEquidistantRaw(lambda,phi),x=p[0],y=p[1],r2=x*x+y*y;if(r2>rho2){var r=math_sqrt(r2),theta=math_atan2(y,x),theta0=k*round(theta/k),alpha=theta-theta0,rhoCosAlpha=rho*math_cos(alpha),k_=(rho*math_sin(alpha)-alpha*math_sin(rhoCosAlpha))/(math_halfPi-rhoCosAlpha),s_=gingeryLength(alpha,k_),e=(math_pi-rho)/gingeryIntegrate(s_,rhoCosAlpha,math_pi);x=r;var delta,i=50;do{x-=delta=(rho+gingeryIntegrate(s_,rhoCosAlpha,x)*e-r)/(s_(x)*e)}while(math_abs(delta)>math_epsilon&&--i>0);y=alpha*math_sin(x),x<math_halfPi&&(y-=k_*(x-math_halfPi));var s=math_sin(theta0),c=math_cos(theta0);p[0]=x*c-y*s,p[1]=x*s+y*c}return p}return forward.invert=function(x,y){var r2=x*x+y*y;if(r2>rho2){var r=math_sqrt(r2),theta=math_atan2(y,x),theta0=k*round(theta/k),dTheta=theta-theta0;x=r*math_cos(dTheta),y=r*math_sin(dTheta);for(var x_halfPi=x-math_halfPi,sinx=math_sin(x),alpha=y/sinx,delta=x<math_halfPi?1/0:0,i=10;;){var rhosinAlpha=rho*math_sin(alpha),rhoCosAlpha=rho*math_cos(alpha),sinRhoCosAlpha=math_sin(rhoCosAlpha),halfPi_RhoCosAlpha=math_halfPi-rhoCosAlpha,k_=(rhosinAlpha-alpha*sinRhoCosAlpha)/halfPi_RhoCosAlpha,s_=gingeryLength(alpha,k_);if(math_abs(delta)<math_epsilon2||! --i)break;alpha-=delta=(alpha*sinx-k_*x_halfPi-y)/(sinx-2*x_halfPi*(halfPi_RhoCosAlpha*(rhoCosAlpha+alpha*rhosinAlpha*math_cos(rhoCosAlpha)-sinRhoCosAlpha)-rhosinAlpha*(rhosinAlpha-alpha*sinRhoCosAlpha))/(halfPi_RhoCosAlpha*halfPi_RhoCosAlpha))}x=(r=rho+gingeryIntegrate(s_,rhoCosAlpha,x)*(math_pi-rho)/gingeryIntegrate(s_,rhoCosAlpha,math_pi))*math_cos(theta=theta0+alpha),y=r*math_sin(theta)}return azimuthalEquidistantRaw.invert(x,y)},forward}function gingeryLength(alpha,k){return function(x){var y_=alpha*math_cos(x);return x<math_halfPi&&(y_-=k),math_sqrt(1+y_*y_)}}function gingeryIntegrate(f,a,b){for(var h=(b-a)/50,s=f(a)+f(b),i=1,x=a;i<50;++i)s+=2*f(x+=h);return.5*s*h}function gingery(){var n=6,rho=30*math_radians,cRho=math_cos(rho),sRho=math_sin(rho),m=projectionMutator(gingeryRaw),p=m(rho,n),stream_=p.stream,cr=-math_cos(.01*math_radians),sr=math_sin(.01*math_radians);return p.radius=function(_){return arguments.length?(cRho=math_cos(rho=_*math_radians),sRho=math_sin(rho),m(rho,n)):rho*math_degrees},p.lobes=function(_){return arguments.length?m(rho,n=+_):n},p.stream=function(stream){var rotate=p.rotate(),rotateStream=stream_(stream),sphereStream=(p.rotate([0,0]),stream_(stream));return p.rotate(rotate),rotateStream.sphere=function(){sphereStream.polygonStart(),sphereStream.lineStart();for(var i=0,delta=2*math_pi/n,phi=0;i<n;++i,phi-=delta)sphereStream.point(math_atan2(sr*math_cos(phi),cr)*math_degrees,math_asin(sr*math_sin(phi))*math_degrees),sphereStream.point(math_atan2(sRho*math_cos(phi-delta/2),cRho)*math_degrees,math_asin(sRho*math_sin(phi-delta/2))*math_degrees);sphereStream.lineEnd(),sphereStream.polygonEnd()},rotateStream},p.rotate([90,-40]).scale(91.7095).clipAngle(179.999)}function ginzburgPolyconic(a,b,c,d,e,f,g,h){function forward(lambda,phi){if(!phi)return[a*lambda/math_pi,0];var phi2=phi*phi,xB=a+phi2*(b+phi2*(c+phi2*d)),yB=phi*(e-1+phi2*(f-h+phi2*g)),m=(xB*xB+yB*yB)/(2*yB),alpha=lambda*math_asin(xB/m)/math_pi;return[m*math_sin(alpha),phi*(1+phi2*h)+m*(1-math_cos(alpha))]}return arguments.length<8&&(h=0),forward.invert=function(x,y){var deltaLambda,deltaPhi,lambda=math_pi*x/a,phi=y,i=50;do{var phi2=phi*phi,xB=a+phi2*(b+phi2*(c+phi2*d)),yB=phi*(e-1+phi2*(f-h+phi2*g)),p=xB*xB+yB*yB,q=2*yB,m=p/q,m2=m*m,dAlphadLambda=math_asin(xB/m)/math_pi,alpha=lambda*dAlphadLambda,xB2=xB*xB,dxBdPhi=(2*b+phi2*(4*c+6*phi2*d))*phi,dyBdPhi=e+phi2*(3*f+5*phi2*g),dmdPhi=(2*(xB*dxBdPhi+yB*(dyBdPhi-1))*q-p*(2*(dyBdPhi-1)))/(q*q),cosAlpha=math_cos(alpha),sinAlpha=math_sin(alpha),mcosAlpha=m*cosAlpha,msinAlpha=m*sinAlpha,dAlphadPhi=lambda/math_pi*(1/math_sqrt(1-xB2/m2))*(dxBdPhi*m-xB*dmdPhi)/m2,fx=msinAlpha-x,fy=phi*(1+phi2*h)+m-mcosAlpha-y,deltaxDeltaPhi=dmdPhi*sinAlpha+mcosAlpha*dAlphadPhi,deltaxDeltaLambda=mcosAlpha*dAlphadLambda,deltayDeltaPhi=1+dmdPhi-(dmdPhi*cosAlpha-msinAlpha*dAlphadPhi),deltayDeltaLambda=msinAlpha*dAlphadLambda,denominator=deltaxDeltaPhi*deltayDeltaLambda-deltayDeltaPhi*deltaxDeltaLambda;if(!denominator)break;lambda-=deltaLambda=(fy*deltaxDeltaPhi-fx*deltayDeltaPhi)/denominator,phi-=deltaPhi=(fx*deltayDeltaLambda-fy*deltaxDeltaLambda)/denominator}while((math_abs(deltaLambda)>math_epsilon||math_abs(deltaPhi)>math_epsilon)&&--i>0);return[lambda,phi]},forward}faheyRaw.invert=function(x,y){var t=y/(1+faheyK);return[x&&x/(faheyK*math_sqrt(1-t*t)),2*math_atan(t)]},foucautRaw.invert=function(x,y){var k=math_atan(y/sqrtPi),cosk=math_cos(k),phi=2*k;return[x*sqrtPi/2/(math_cos(phi)*cosk*cosk),phi]},orthographicRaw.invert=azimuthalInvert(asin),equirectangularRaw.invert=equirectangularRaw;var ginzburg4Raw=ginzburgPolyconic(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function ginzburg4(){return projection_projection(ginzburg4Raw).scale(149.995)}var ginzburg5Raw=ginzburgPolyconic(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function ginzburg5(){return projection_projection(ginzburg5Raw).scale(153.93)}var ginzburg6Raw=ginzburgPolyconic(5/6*math_pi,-.62636,-.0344,0,1.3493,-.05524,0,.045);function ginzburg6(){return projection_projection(ginzburg6Raw).scale(130.945)}function ginzburg8Raw(lambda,phi){var lambda2=lambda*lambda,phi2=phi*phi;return[lambda*(1-.162388*phi2)*(.87-952426e-9*lambda2*lambda2),phi*(1+phi2/12)]}function ginzburg8(){return projection_projection(ginzburg8Raw).scale(131.747)}ginzburg8Raw.invert=function(x,y){var delta,lambda=x,phi=y,i=50;do{var phi2=phi*phi;phi-=delta=(phi*(1+phi2/12)-y)/(1+phi2/4)}while(math_abs(delta)>math_epsilon&&--i>0);i=50,x/=1-.162388*phi2;do{var lambda4=(lambda4=lambda*lambda)*lambda4;lambda-=delta=(lambda*(.87-952426e-9*lambda4)-x)/(.87-.00476213*lambda4)}while(math_abs(delta)>math_epsilon&&--i>0);return[lambda,phi]};var ginzburg9Raw=ginzburgPolyconic(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function ginzburg9(){return projection_projection(ginzburg9Raw).scale(131.087)}function square(project){var dx=project(math_halfPi,0)[0]-project(-math_halfPi,0)[0];function projectSquare(lambda,phi){var s=lambda>0?-.5:.5,point=project(lambda+s*math_pi,phi);return point[0]-=s*dx,point}return project.invert&&(projectSquare.invert=function(x,y){var s=x>0?-.5:.5,location=project.invert(x+s*dx,y),lambda=location[0]-s*math_pi;return lambda<-math_pi?lambda+=2*math_pi:lambda>math_pi&&(lambda-=2*math_pi),location[0]=lambda,location}),projectSquare}function gringortenRaw(lambda,phi){var sLambda=math_sign(lambda),sPhi=math_sign(phi),cosPhi=math_cos(phi),x=math_cos(lambda)*cosPhi,y=math_sin(lambda)*cosPhi,z=math_sin(sPhi*phi);lambda=math_abs(math_atan2(y,z)),phi=math_asin(x),math_abs(lambda-math_halfPi)>math_epsilon&&(lambda%=math_halfPi);var point=function gringortenHexadecant(lambda,phi){if(phi===math_halfPi)return[0,0];var x,i,sinPhi=math_sin(phi),r=sinPhi*sinPhi,r2=r*r,j=1+r2,k=1+3*r2,q=1-r2,z=math_asin(1/math_sqrt(j)),v=q+r*j*z,p2=(1-sinPhi)/v,p=math_sqrt(p2),a2=p2*j,a=math_sqrt(a2),h=p*q;if(0===lambda)return[0,-(h+r*a)];var delta,cosPhi=math_cos(phi),secPhi=1/cosPhi,drdPhi=2*sinPhi*cosPhi,dvdPhi=(-3*r+z*k)*drdPhi,dp2dPhi=(-v*cosPhi-(1-sinPhi)*dvdPhi)/(v*v),dra2dPhi=r*j*dp2dPhi+p2*k*drdPhi,mu=-secPhi*drdPhi,nu=-secPhi*dra2dPhi,zeta=-2*secPhi*(q*(.5*dp2dPhi/p)-2*r*p*drdPhi),lambda1=4*lambda/math_pi;if(lambda>.222*math_pi||phi<math_pi/4&&lambda>.175*math_pi){if(x=(h+r*math_sqrt(a2*(1+r2)-h*h))/(1+r2),lambda>math_pi/4)return[x,x];var x1=x,x0=.5*x;x=.5*(x0+x1),i=50;do{var f=x*(zeta+mu*math_sqrt(a2-x*x))+nu*math_asin(x/a)-lambda1;if(!f)break;f<0?x0=x:x1=x,x=.5*(x0+x1)}while(math_abs(x1-x0)>math_epsilon&&--i>0)}else{x=math_epsilon,i=25;do{var x2=x*x,g2=math_sqrt(a2-x2),zetaMug=zeta+mu*g2,f2=x*zetaMug+nu*math_asin(x/a)-lambda1;x-=delta=g2?f2/(zetaMug+(nu-mu*x2)/g2):0}while(math_abs(delta)>math_epsilon&&--i>0)}return[x,-h-r*math_sqrt(a2-x*x)]}(lambda>math_pi/4?math_halfPi-lambda:lambda,phi);return lambda>math_pi/4&&(z=point[0],point[0]=-point[1],point[1]=-z),point[0]*=sLambda,point[1]*=-sPhi,point}function gringorten(){return projection_projection(square(gringortenRaw)).scale(239.75)}function ellipticJ(u,m){var ai,b,phi,t,twon;if(m<math_epsilon)return[(t=math_sin(u))-(ai=m*(u-t*(b=math_cos(u)))/4)*b,b+ai*t,1-m*t*t/2,u-ai];if(m>=1-math_epsilon)return ai=(1-m)/4,phi=1/(b=cosh(u)),[(t=function tanh(x){return((x=math_exp(2*x))-1)/(x+1)}(u))+ai*((twon=b*sinh(u))-u)/(b*b),phi-ai*t*phi*(twon-u),phi+ai*t*phi*(twon+u),2*math_atan(math_exp(u))-math_halfPi+ai*(twon-u)/b];var a=[1,0,0,0,0,0,0,0,0],c=[math_sqrt(m),0,0,0,0,0,0,0,0],i=0;for(b=math_sqrt(1-m),twon=1;math_abs(c[i]/a[i])>math_epsilon&&i<8;)ai=a[i++],c[i]=(ai-b)/2,a[i]=(ai+b)/2,b=math_sqrt(ai*b),twon*=2;phi=twon*a[i]*u;do{phi=(math_asin(t=c[i]*math_sin(b=phi)/a[i])+phi)/2}while(--i);return[math_sin(phi),t=math_cos(phi),t/math_cos(phi-b),phi]}function ellipticF(phi,m){if(!m)return phi;if(1===m)return math_log(math_tan(phi/2+math_quarterPi));for(var a=1,b=math_sqrt(1-m),c=math_sqrt(m),i=0;math_abs(c)>math_epsilon;i++){if(phi%math_pi){var dPhi=math_atan(b*math_tan(phi)/a);dPhi<0&&(dPhi+=math_pi),phi+=dPhi+~~(phi/math_pi)*math_pi}else phi+=phi;c=(a+b)/2,b=math_sqrt(a*b),c=((a=c)-b)/2}return phi/(math_pow(2,i)*a)}function guyouRaw(lambda,phi){var k_=(sqrt2-1)/(sqrt2+1),k=math_sqrt(1-k_*k_),K=ellipticF(math_halfPi,k*k),psi=math_log(math_tan(math_pi/4+math_abs(phi)/2)),r=math_exp(-1*psi)/math_sqrt(k_),at=function guyouComplexAtan(x,y){var x2=x*x,y_1=y+1,t=1-x2-y*y;return[.5*((x>=0?math_halfPi:-math_halfPi)-math_atan2(t,2*x)),-.25*math_log(t*t+4*x2)+.5*math_log(y_1*y_1+x2)]}(r*math_cos(-1*lambda),r*math_sin(-1*lambda)),t=function ellipticFi(phi,psi,m){var r=math_abs(phi),sinhPsi=sinh(math_abs(psi));if(r){var cscPhi=1/math_sin(r),cotPhi2=1/(math_tan(r)*math_tan(r)),b=-(cotPhi2+m*(sinhPsi*sinhPsi*cscPhi*cscPhi)-1+m),cotLambda2=(-b+math_sqrt(b*b-(m-1)*cotPhi2*4))/2;return[ellipticF(math_atan(1/math_sqrt(cotLambda2)),m)*math_sign(phi),ellipticF(math_atan(math_sqrt((cotLambda2/cotPhi2-1)/m)),1-m)*math_sign(psi)]}return[0,ellipticF(math_atan(sinhPsi),1-m)*math_sign(psi)]}(at[0],at[1],k*k);return[-t[1],(phi>=0?1:-1)*(.5*K-t[0])]}function guyou(){return projection_projection(square(guyouRaw)).scale(151.496)}function hammerRetroazimuthalRaw(phi0){var sinPhi0=math_sin(phi0),cosPhi0=math_cos(phi0),rotate=hammerRetroazimuthalRotation(phi0);function forward(lambda,phi){var p=rotate(lambda,phi);lambda=p[0],phi=p[1];var sinPhi=math_sin(phi),cosPhi=math_cos(phi),cosLambda=math_cos(lambda),z=math_acos(sinPhi0*sinPhi+cosPhi0*cosPhi*cosLambda),sinz=math_sin(z),K=math_abs(sinz)>math_epsilon?z/sinz:1;return[K*cosPhi0*math_sin(lambda),(math_abs(lambda)>math_halfPi?K:-K)*(sinPhi0*cosPhi-cosPhi0*sinPhi*cosLambda)]}return rotate.invert=hammerRetroazimuthalRotation(-phi0),forward.invert=function(x,y){var rho=math_sqrt(x*x+y*y),sinz=-math_sin(rho),cosz=math_cos(rho),a=rho*cosz,b=-y*sinz,c=rho*sinPhi0,d=math_sqrt(a*a+b*b-c*c),phi=math_atan2(a*c+b*d,b*c-a*d),lambda=(rho>math_halfPi?-1:1)*math_atan2(x*sinz,rho*math_cos(phi)*cosz+y*math_sin(phi)*sinz);return rotate.invert(lambda,phi)},forward}function hammerRetroazimuthalRotation(phi0){var sinPhi0=math_sin(phi0),cosPhi0=math_cos(phi0);return function(lambda,phi){var cosPhi=math_cos(phi),x=math_cos(lambda)*cosPhi,y=math_sin(lambda)*cosPhi,z=math_sin(phi);return[math_atan2(y,x*cosPhi0-z*sinPhi0),math_asin(z*cosPhi0+x*sinPhi0)]}}function hammerRetroazimuthal(){var phi0=0,m=projectionMutator(hammerRetroazimuthalRaw),p=m(phi0),rotate_=p.rotate,stream_=p.stream,circle=function src_circle(){var ring,rotate,center=constant([0,0]),radius=constant(90),precision=constant(6),stream={point:function point(x,y){ring.push(x=rotate(x,y)),x[0]*=degrees,x[1]*=degrees}};function circle(){var c=center.apply(this,arguments),r=radius.apply(this,arguments)*radians,p=precision.apply(this,arguments)*radians;return ring=[],rotate=rotateRadians(-c[0]*radians,-c[1]*radians,0).invert,circleStream(stream,r,p,1),c={type:"Polygon",coordinates:[ring]},ring=rotate=null,c}return circle.center=function(_){return arguments.length?(center="function"==typeof _?_:constant([+_[0],+_[1]]),circle):center},circle.radius=function(_){return arguments.length?(radius="function"==typeof _?_:constant(+_),circle):radius},circle.precision=function(_){return arguments.length?(precision="function"==typeof _?_:constant(+_),circle):precision},circle}();return p.parallel=function(_){if(!arguments.length)return phi0*math_degrees;var r=p.rotate();return m(phi0=_*math_radians).rotate(r)},p.rotate=function(_){return arguments.length?(rotate_.call(p,[_[0],_[1]-phi0*math_degrees]),circle.center([-_[0],-_[1]]),p):((_=rotate_.call(p))[1]+=phi0*math_degrees,_)},p.stream=function(stream){return(stream=stream_(stream)).sphere=function(){stream.polygonStart();var p,ring=circle.radius(89.99)().coordinates[0],n=ring.length-1,i=-1;for(stream.lineStart();++i<n;)stream.point((p=ring[i])[0],p[1]);for(stream.lineEnd(),n=(ring=circle.radius(90.01)().coordinates[0]).length-1,stream.lineStart();--i>=0;)stream.point((p=ring[i])[0],p[1]);stream.lineEnd(),stream.polygonEnd()},stream},p.scale(79.4187).parallel(45).clipAngle(179.999)}function range(start,stop,step){start=+start,stop=+stop,step=(n=arguments.length)<2?(stop=start,start=0,1):n<3?1:+step;for(var i=-1,n=0|Math.max(0,Math.ceil((stop-start)/step)),range=new Array(n);++i<n;)range[i]=start+i*step;return range}gringortenRaw.invert=function(x,y){math_abs(x)>1&&(x=2*math_sign(x)-x),math_abs(y)>1&&(y=2*math_sign(y)-y);var sx=math_sign(x),sy=math_sign(y),x0=-sx*x,y0=-sy*y,t=y0/x0<1,p=function gringortenHexadecantInvert(x,y){var x0=0,x1=1,r=.5,i=50;for(;;){var r2=r*r,sinPhi=math_sqrt(r),z=math_asin(1/math_sqrt(1+r2)),v=1-r2+r*(1+r2)*z,p2=(1-sinPhi)/v,p=math_sqrt(p2),a2=p2*(1+r2),h=p*(1-r2),g=math_sqrt(a2-x*x),y0=y+h+r*g;if(math_abs(x1-x0)<math_epsilon2||0==--i||0===y0)break;y0>0?x0=r:x1=r,r=.5*(x0+x1)}if(!i)return null;var phi=math_asin(sinPhi),cosPhi=math_cos(phi),secPhi=1/cosPhi,drdPhi=2*sinPhi*cosPhi,dp2dPhi=(-v*cosPhi-(-3*r+z*(1+3*r2))*drdPhi*(1-sinPhi))/(v*v),dpdPhi=.5*dp2dPhi/p,dhdPhi=(1-r2)*dpdPhi-2*r*p*drdPhi;return[math_pi/4*(x*(-2*secPhi*dhdPhi+-secPhi*drdPhi*g)+-secPhi*(r*(1+r2)*dp2dPhi+p2*(1+3*r2)*drdPhi)*math_asin(x/math_sqrt(a2))),phi]}(t?y0:x0,t?x0:y0),lambda=p[0],phi=p[1],cosPhi=math_cos(phi);return t&&(lambda=-math_halfPi-lambda),[sx*(math_atan2(math_sin(lambda)*cosPhi,-math_sin(phi))+math_pi),sy*math_asin(math_cos(lambda)*cosPhi)]},guyouRaw.invert=function(x,y){var k_=(sqrt2-1)/(sqrt2+1),k=math_sqrt(1-k_*k_),j=function ellipticJi(u,v,m){var a,b,c;return u?(a=ellipticJ(u,m),v?(c=(b=ellipticJ(v,1-m))[1]*b[1]+m*a[0]*a[0]*b[0]*b[0],[[a[0]*b[2]/c,a[1]*a[2]*b[0]*b[1]/c],[a[1]*b[1]/c,-a[0]*a[2]*b[0]*b[2]/c],[a[2]*b[1]*b[2]/c,-m*a[0]*a[1]*b[0]/c]]):[[a[0],0],[a[1],0],[a[2],0]]):[[0,(b=ellipticJ(v,1-m))[0]/b[1]],[1/b[1],0],[b[2]/b[1],0]]}(.5*ellipticF(math_halfPi,k*k)-y,-x,k*k),tn=function guyouComplexDivide(a,b){var denominator=b[0]*b[0]+b[1]*b[1];return[(a[0]*b[0]+a[1]*b[1])/denominator,(a[1]*b[0]-a[0]*b[1])/denominator]}(j[0],j[1]);return[math_atan2(tn[1],tn[0])/-1,2*math_atan(math_exp(-.5*math_log(k_*tn[0]*tn[0]+k_*tn[1]*tn[1])))-math_halfPi]};var healpixParallel=math_asin(1-1/3)*math_degrees,healpixLambert=cylindricalEqualAreaRaw(0);function healpixRaw(H){var phi0=healpixParallel*math_radians,dx=collignonRaw(math_pi,phi0)[0]-collignonRaw(-math_pi,phi0)[0],y0=healpixLambert(0,phi0)[1],y1=collignonRaw(0,phi0)[1],dy1=sqrtPi-y1,k=math_tau/H,w=4/math_tau,h=y0+dy1*dy1*4/math_tau;function forward(lambda,phi){var point,phi2=math_abs(phi);if(phi2>phi0){var i=min(H-1,max(0,math_floor((lambda+math_pi)/k)));(point=collignonRaw(lambda+=math_pi*(H-1)/H-i*k,phi2))[0]=point[0]*math_tau/dx-math_tau*(H-1)/(2*H)+i*math_tau/H,point[1]=y0+4*(point[1]-y1)*dy1/math_tau,phi<0&&(point[1]=-point[1])}else point=healpixLambert(lambda,phi);return point[0]*=w,point[1]/=h,point}return forward.invert=function(x,y){x/=w;var y2=math_abs(y*=h);if(y2>y0){var i=min(H-1,max(0,math_floor((x+math_pi)/k)));x=(x+math_pi*(H-1)/H-i*k)*dx/math_tau;var point=collignonRaw.invert(x,.25*(y2-y0)*math_tau/dy1+y1);return point[0]-=math_pi*(H-1)/H-i*k,y<0&&(point[1]=-point[1]),point}return healpixLambert.invert(x,y)},forward}function sphereTop(x,i){return[x,1&i?90-math_epsilon:healpixParallel]}function sphereBottom(x,i){return[x,1&i?-90+math_epsilon:-healpixParallel]}function sphereNudge(d){return[d[0]*(1-math_epsilon),d[1]]}function healpix(){var H=4,m=projectionMutator(healpixRaw),p=m(H),stream_=p.stream;return p.lobes=function(_){return arguments.length?m(H=+_):H},p.stream=function(stream){var rotate=p.rotate(),rotateStream=stream_(stream),sphereStream=(p.rotate([0,0]),stream_(stream));return p.rotate(rotate),rotateStream.sphere=function(){src_stream(function sphere(step){var c=[].concat(range(-180,180+step/2,step).map(sphereTop),range(180,-180-step/2,-step).map(sphereBottom));return{type:"Polygon",coordinates:[180===step?c.map(sphereNudge):c]}}(180/H),sphereStream)},rotateStream},p.scale(239.75)}function hillRaw(K){var B,L=1+K,Bt=math_asin(math_sin(1/L)),A=2*math_sqrt(math_pi/(B=math_pi+4*Bt*L)),rho0=.5*A*(L+math_sqrt(K*(2+K))),K2=K*K,L2=L*L;function forward(lambda,phi){var rho,omega,t=1-math_sin(phi);if(t&&t<2){var delta,theta=math_halfPi-phi,i=25;do{var sinTheta=math_sin(theta),cosTheta=math_cos(theta),Bt_Bt1=Bt+math_atan2(sinTheta,L-cosTheta),C=1+L2-2*L*cosTheta;theta-=delta=(theta-K2*Bt-L*sinTheta+C*Bt_Bt1-.5*t*B)/(2*L*sinTheta*Bt_Bt1)}while(math_abs(delta)>math_epsilon2&&--i>0);rho=A*math_sqrt(C),omega=lambda*Bt_Bt1/math_pi}else rho=A*(K+t),omega=lambda*Bt/math_pi;return[rho*math_sin(omega),rho0-rho*math_cos(omega)]}return forward.invert=function(x,y){var rho2=x*x+(y-=rho0)*y,cosTheta=(1+L2-rho2/(A*A))/(2*L),theta=math_acos(cosTheta),sinTheta=math_sin(theta),Bt_Bt1=Bt+math_atan2(sinTheta,L-cosTheta);return[math_asin(x/math_sqrt(rho2))*math_pi/Bt_Bt1,math_asin(1-2*(theta-K2*Bt-L*sinTheta+(1+L2-2*L*cosTheta)*Bt_Bt1)/B)]},forward}function hill(){var K=1,m=projectionMutator(hillRaw),p=m(K);return p.ratio=function(_){return arguments.length?m(K=+_):K},p.scale(167.774).center([0,18.67])}var sinuMollweidePhi=.7109889596207567,sinuMollweideY=.0528035274542;function sinuMollweideRaw(lambda,phi){return phi>-sinuMollweidePhi?((lambda=mollweideRaw(lambda,phi))[1]+=sinuMollweideY,lambda):sinusoidalRaw(lambda,phi)}function sinuMollweide(){return projection_projection(sinuMollweideRaw).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function homolosineRaw(lambda,phi){return math_abs(phi)>sinuMollweidePhi?((lambda=mollweideRaw(lambda,phi))[1]-=phi>0?sinuMollweideY:-sinuMollweideY,lambda):sinusoidalRaw(lambda,phi)}function homolosine(){return projection_projection(homolosineRaw).scale(152.63)}function hufnagelRaw(a,b,psiMax,ratio){var k=math_sqrt(4*math_pi/(2*psiMax+(1+a-b/2)*math_sin(2*psiMax)+(a+b)/2*math_sin(4*psiMax)+b/2*math_sin(6*psiMax))),c=math_sqrt(ratio*math_sin(psiMax)*math_sqrt((1+a*math_cos(2*psiMax)+b*math_cos(4*psiMax))/(1+a+b))),M=psiMax*mapping(1);function radius(psi){return math_sqrt(1+a*math_cos(2*psi)+b*math_cos(4*psi))}function mapping(t){var psi=t*psiMax;return(2*psi+(1+a-b/2)*math_sin(2*psi)+(a+b)/2*math_sin(4*psi)+b/2*math_sin(6*psi))/psiMax}function inversemapping(psi){return radius(psi)*math_sin(psi)}var forward=function(lambda,phi){var psi=psiMax*solve(mapping,M*math_sin(phi)/psiMax,phi/math_pi);isNaN(psi)&&(psi=psiMax*math_sign(phi));var kr=k*radius(psi);return[kr*c*lambda/math_pi*math_cos(psi),kr/c*math_sin(psi)]};return forward.invert=function(x,y){var psi=solve(inversemapping,y*c/k);return[x*math_pi/(math_cos(psi)*k*c*radius(psi)),math_asin(psiMax*mapping(psi/psiMax)/M)]},0===psiMax&&(k=math_sqrt(ratio/math_pi),(forward=function(lambda,phi){return[lambda*k,math_sin(phi)/k]}).invert=function(x,y){return[x/k,math_asin(y*k)]}),forward}function hufnagel(){var a=1,b=0,psiMax=45*math_radians,ratio=2,mutate=projectionMutator(hufnagelRaw),projection=mutate(a,b,psiMax,ratio);return projection.a=function(_){return arguments.length?mutate(a=+_,b,psiMax,ratio):a},projection.b=function(_){return arguments.length?mutate(a,b=+_,psiMax,ratio):b},projection.psiMax=function(_){return arguments.length?mutate(a,b,psiMax=+_*math_radians,ratio):psiMax*math_degrees},projection.ratio=function(_){return arguments.length?mutate(a,b,psiMax,ratio=+_):ratio},projection.scale(180.739)}function adsimp(f,a,b,fa,fm,fb,V0,tol,maxdepth,depth,state){if(state.nanEncountered)return NaN;var h,f1,f2,sl,sr,s2,m,V1,V2,err;if(f1=f(a+.25*(h=b-a)),f2=f(b-.25*h),isNaN(f1))state.nanEncountered=!0;else{if(!isNaN(f2))return err=((s2=(sl=h*(fa+4*f1+fm)/12)+(sr=h*(fm+4*f2+fb)/12))-V0)/15,depth>maxdepth?(state.maxDepthCount++,s2+err):Math.abs(err)<tol?s2+err:(V1=adsimp(f,a,m=a+.5*h,fa,f1,fm,sl,.5*tol,maxdepth,depth+1,state),isNaN(V1)?(state.nanEncountered=!0,NaN):(V2=adsimp(f,m,b,fm,f2,fb,sr,.5*tol,maxdepth,depth+1,state),isNaN(V2)?(state.nanEncountered=!0,NaN):V1+V2));state.nanEncountered=!0}}function integrate(f,a,b,tol,maxdepth){void 0===tol&&(tol=1e-8),void 0===maxdepth&&(maxdepth=20);var fa=f(a),fm=f(.5*(a+b)),fb=f(b);return adsimp(f,a,b,fa,fm,fb,(fa+4*fm+fb)*(b-a)/6,tol,maxdepth,1,{maxDepthCount:0,nanEncountered:!1})}function hyperellipticalRaw(alpha,k,gamma){function elliptic(f){return alpha+(1-alpha)*math_pow(1-math_pow(f,k),1/k)}function z(f){return integrate(elliptic,0,f,1e-4)}for(var G=1/z(1),n=1e3,m=(1+1e-8)*G,approx=[],i=0;i<=n;i++)approx.push(z(i/n)*m);function Y(sinphi){var rmin=0,rmax=n,r=500;do{approx[r]>sinphi?rmax=r:rmin=r,r=rmin+rmax>>1}while(r>rmin);var u=approx[r+1]-approx[r];return u&&(u=(sinphi-approx[r+1])/u),(r+1+u)/n}var ratio=2*Y(1)/math_pi*G/gamma,forward=function(lambda,phi){var y=Y(math_abs(math_sin(phi))),x=elliptic(y)*lambda;return y/=ratio,[x,phi>=0?y:-y]};return forward.invert=function(x,y){var phi;return math_abs(y*=ratio)<1&&(phi=math_sign(y)*math_asin(z(math_abs(y))*G)),[x/elliptic(math_abs(y)),phi]},forward}function hyperelliptical(){var alpha=0,k=2.5,gamma=1.183136,m=projectionMutator(hyperellipticalRaw),p=m(alpha,k,gamma);return p.alpha=function(_){return arguments.length?m(alpha=+_,k,gamma):alpha},p.k=function(_){return arguments.length?m(alpha,k=+_,gamma):k},p.gamma=function(_){return arguments.length?m(alpha,k,gamma=+_):gamma},p.scale(152.63)}function interrupted_pointEqual(a,b){return math_abs(a[0]-b[0])<math_epsilon&&math_abs(a[1]-b[1])<math_epsilon}function interpolateLine(coordinates,m){for(var p1,dx,dy,i=-1,n=coordinates.length,p0=coordinates[0],resampled=[];++i<n;){dx=((p1=coordinates[i])[0]-p0[0])/m,dy=(p1[1]-p0[1])/m;for(var j=0;j<m;++j)resampled.push([p0[0]+j*dx,p0[1]+j*dy]);p0=p1}return resampled.push(p1),resampled}function interrupted(project,lobes,inverse){var sphere,bounds;function forward(lambda,phi){for(var sign=phi<0?-1:1,lobe=lobes[+(phi<0)],i=0,n=lobe.length-1;i<n&&lambda>lobe[i][2][0];++i);var p=project(lambda-lobe[i][1][0],phi);return p[0]+=project(lobe[i][1][0],sign*phi>sign*lobe[i][0][1]?lobe[i][0][1]:phi)[0],p}inverse?forward.invert=inverse(forward):project.invert&&(forward.invert=function(x,y){for(var bound=bounds[+(y<0)],lobe=lobes[+(y<0)],i=0,n=bound.length;i<n;++i){var b=bound[i];if(b[0][0]<=x&&x<b[1][0]&&b[0][1]<=y&&y<b[1][1]){var p=project.invert(x-project(lobe[i][1][0],0)[0],y);return p[0]+=lobe[i][1][0],interrupted_pointEqual(forward(p[0],p[1]),[x,y])?p:null}}});var p=projection_projection(forward),stream_=p.stream;return p.stream=function(stream){var rotate=p.rotate(),rotateStream=stream_(stream),sphereStream=(p.rotate([0,0]),stream_(stream));return p.rotate(rotate),rotateStream.sphere=function(){src_stream(sphere,sphereStream)},rotateStream},p.lobes=function(_){return arguments.length?(sphere=function interpolateSphere(lobes){var lobe,lambda0,phi0,phi1,lambda2,phi2,i,arrays,coordinates=[],n=lobes[0].length;for(i=0;i<n;++i)lambda0=(lobe=lobes[0][i])[0][0],phi0=lobe[0][1],phi1=lobe[1][1],lambda2=lobe[2][0],phi2=lobe[2][1],coordinates.push(interpolateLine([[lambda0+math_epsilon,phi0+math_epsilon],[lambda0+math_epsilon,phi1-math_epsilon],[lambda2-math_epsilon,phi1-math_epsilon],[lambda2-math_epsilon,phi2+math_epsilon]],30));for(i=lobes[1].length-1;i>=0;--i)lambda0=(lobe=lobes[1][i])[0][0],phi0=lobe[0][1],phi1=lobe[1][1],lambda2=lobe[2][0],phi2=lobe[2][1],coordinates.push(interpolateLine([[lambda2-math_epsilon,phi2-math_epsilon],[lambda2-math_epsilon,phi1+math_epsilon],[lambda0+math_epsilon,phi1+math_epsilon],[lambda0+math_epsilon,phi0-math_epsilon]],30));return{type:"Polygon",coordinates:[(arrays=coordinates,Array.from(function*merge_flatten(arrays){for(const array of arrays)yield*array}(arrays)))]}}(_),lobes=_.map((function(lobe){return lobe.map((function(l){return[[l[0][0]*math_radians,l[0][1]*math_radians],[l[1][0]*math_radians,l[1][1]*math_radians],[l[2][0]*math_radians,l[2][1]*math_radians]]}))})),bounds=lobes.map((function(lobe){return lobe.map((function(l){var t,x0=project(l[0][0],l[0][1])[0],x1=project(l[2][0],l[2][1])[0],y0=project(l[1][0],l[0][1])[1],y1=project(l[1][0],l[1][1])[1];return y0>y1&&(t=y0,y0=y1,y1=t),[[x0,y0],[x1,y1]]}))})),p):lobes.map((function(lobe){return lobe.map((function(l){return[[l[0][0]*math_degrees,l[0][1]*math_degrees],[l[1][0]*math_degrees,l[1][1]*math_degrees],[l[2][0]*math_degrees,l[2][1]*math_degrees]]}))}))},null!=lobes&&p.lobes(lobes),p}sinuMollweideRaw.invert=function(x,y){return y>-sinuMollweidePhi?mollweideRaw.invert(x,y-sinuMollweideY):sinusoidalRaw.invert(x,y)},homolosineRaw.invert=function(x,y){return math_abs(y)>sinuMollweidePhi?mollweideRaw.invert(x,y+(y>0?sinuMollweideY:-sinuMollweideY)):sinusoidalRaw.invert(x,y)};var lobes=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function interrupted_boggs(){return interrupted(boggsRaw,lobes).scale(160.857)}var homolosine_lobes=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function interrupted_homolosine(){return interrupted(homolosineRaw,homolosine_lobes).scale(152.63)}var mollweide_lobes=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function interrupted_mollweide(){return interrupted(mollweideRaw,mollweide_lobes).scale(169.529)}var mollweideHemispheres_lobes=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function mollweideHemispheres(){return interrupted(mollweideRaw,mollweideHemispheres_lobes).scale(169.529).rotate([20,0])}var sinuMollweide_lobes=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function interrupted_sinuMollweide(){return interrupted(sinuMollweideRaw,sinuMollweide_lobes,solve2d).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var sinusoidal_lobes=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function interrupted_sinusoidal(){return interrupted(sinusoidalRaw,sinusoidal_lobes).scale(152.63).rotate([-20,0])}function kavrayskiy7Raw(lambda,phi){return[3/math_tau*lambda*math_sqrt(math_pi*math_pi/3-phi*phi),phi]}function kavrayskiy7(){return projection_projection(kavrayskiy7Raw).scale(158.837)}function lagrangeRaw(n){function forward(lambda,phi){if(math_abs(math_abs(phi)-math_halfPi)<math_epsilon)return[0,phi<0?-2:2];var sinPhi=math_sin(phi),v=math_pow((1+sinPhi)/(1-sinPhi),n/2),c=.5*(v+1/v)+math_cos(lambda*=n);return[2*math_sin(lambda)/c,(v-1/v)/c]}return forward.invert=function(x,y){var y0=math_abs(y);if(math_abs(y0-2)<math_epsilon)return x?null:[0,math_sign(y)*math_halfPi];if(y0>2)return null;var x2=(x/=2)*x,y2=(y/=2)*y,t=2*y/(1+x2+y2);return t=math_pow((1+t)/(1-t),1/n),[math_atan2(2*x,1-x2-y2)/n,math_asin((t-1)/(t+1))]},forward}function lagrange(){var n=.5,m=projectionMutator(lagrangeRaw),p=m(n);return p.spacing=function(_){return arguments.length?m(n=+_):n},p.scale(124.75)}kavrayskiy7Raw.invert=function(x,y){return[math_tau/3*x/math_sqrt(math_pi*math_pi/3-y*y),y]};var pi_sqrt2=math_pi/sqrt2;function larriveeRaw(lambda,phi){return[lambda*(1+math_sqrt(math_cos(phi)))/2,phi/(math_cos(phi/2)*math_cos(lambda/6))]}function larrivee(){return projection_projection(larriveeRaw).scale(97.2672)}function laskowskiRaw(lambda,phi){var lambda2=lambda*lambda,phi2=phi*phi;return[lambda*(.975534+phi2*(-.0143059*lambda2-.119161+-.0547009*phi2)),phi*(1.00384+lambda2*(.0802894+-.02855*phi2+199025e-9*lambda2)+phi2*(.0998909+-.0491032*phi2))]}function laskowski(){return projection_projection(laskowskiRaw).scale(139.98)}function littrowRaw(lambda,phi){return[math_sin(lambda)/math_cos(phi),math_tan(phi)*math_cos(lambda)]}function littrow(){return projection_projection(littrowRaw).scale(144.049).clipAngle(89.999)}function loximuthalRaw(phi0){var cosPhi0=math_cos(phi0),tanPhi0=math_tan(math_quarterPi+phi0/2);function forward(lambda,phi){var y=phi-phi0,x=math_abs(y)<math_epsilon?lambda*cosPhi0:math_abs(x=math_quarterPi+phi/2)<math_epsilon||math_abs(math_abs(x)-math_halfPi)<math_epsilon?0:lambda*y/math_log(math_tan(x)/tanPhi0);return[x,y]}return forward.invert=function(x,y){var lambda,phi=y+phi0;return[math_abs(y)<math_epsilon?x/cosPhi0:math_abs(lambda=math_quarterPi+phi/2)<math_epsilon||math_abs(math_abs(lambda)-math_halfPi)<math_epsilon?0:x*math_log(math_tan(lambda)/tanPhi0)/y,phi]},forward}function loximuthal(){return parallel1(loximuthalRaw).parallel(40).scale(158.837)}function millerRaw(lambda,phi){return[lambda,1.25*math_log(math_tan(math_quarterPi+.4*phi))]}function miller(){return projection_projection(millerRaw).scale(108.318)}function modifiedStereographicRaw(C){var m=C.length-1;function forward(lambda,phi){for(var t,cosPhi=math_cos(phi),k=2/(1+cosPhi*math_cos(lambda)),zr=k*cosPhi*math_sin(lambda),zi=k*math_sin(phi),i=m,w=C[i],ar=w[0],ai=w[1];--i>=0;)ar=(w=C[i])[0]+zr*(t=ar)-zi*ai,ai=w[1]+zr*ai+zi*t;return[ar=zr*(t=ar)-zi*ai,ai=zr*ai+zi*t]}return forward.invert=function(x,y){var i=20,zr=x,zi=y;do{for(var t,j=m,w=C[j],ar=w[0],ai=w[1],br=0,bi=0;--j>=0;)br=ar+zr*(t=br)-zi*bi,bi=ai+zr*bi+zi*t,ar=(w=C[j])[0]+zr*(t=ar)-zi*ai,ai=w[1]+zr*ai+zi*t;var deltar,deltai,denominator=(br=ar+zr*(t=br)-zi*bi)*br+(bi=ai+zr*bi+zi*t)*bi;zr-=deltar=((ar=zr*(t=ar)-zi*ai-x)*br+(ai=zr*ai+zi*t-y)*bi)/denominator,zi-=deltai=(ai*br-ar*bi)/denominator}while(math_abs(deltar)+math_abs(deltai)>math_epsilon*math_epsilon&&--i>0);if(i){var rho=math_sqrt(zr*zr+zi*zi),c=2*math_atan(.5*rho),sinc=math_sin(c);return[math_atan2(zr*sinc,rho*math_cos(c)),rho?math_asin(zi*sinc/rho):0]}},forward}larriveeRaw.invert=function(x,y){var x0=math_abs(x),y0=math_abs(y),lambda=math_epsilon,phi=math_halfPi;y0<pi_sqrt2?phi*=y0/pi_sqrt2:lambda+=6*math_acos(pi_sqrt2/y0);for(var i=0;i<25;i++){var sinPhi=math_sin(phi),sqrtcosPhi=math_sqrt(math_cos(phi)),sinPhi_2=math_sin(phi/2),cosPhi_2=math_cos(phi/2),sinLambda_6=math_sin(lambda/6),cosLambda_6=math_cos(lambda/6),f0=.5*lambda*(1+sqrtcosPhi)-x0,f1=phi/(cosPhi_2*cosLambda_6)-y0,df0dPhi=sqrtcosPhi?-.25*lambda*sinPhi/sqrtcosPhi:0,df0dLambda=.5*(1+sqrtcosPhi),df1dPhi=(1+.5*phi*sinPhi_2/cosPhi_2)/(cosPhi_2*cosLambda_6),df1dLambda=phi/cosPhi_2*(sinLambda_6/6)/(cosLambda_6*cosLambda_6),denom=df0dPhi*df1dLambda-df1dPhi*df0dLambda,dPhi=(f0*df1dLambda-f1*df0dLambda)/denom,dLambda=(f1*df0dPhi-f0*df1dPhi)/denom;if(phi-=dPhi,lambda-=dLambda,math_abs(dPhi)<math_epsilon&&math_abs(dLambda)<math_epsilon)break}return[x<0?-lambda:lambda,y<0?-phi:phi]},laskowskiRaw.invert=function(x,y){var lambda=math_sign(x)*math_pi,phi=y/2,i=50;do{var lambda2=lambda*lambda,phi2=phi*phi,lambdaPhi=lambda*phi,fx=lambda*(.975534+phi2*(-.0143059*lambda2-.119161+-.0547009*phi2))-x,fy=phi*(1.00384+lambda2*(.0802894+-.02855*phi2+199025e-9*lambda2)+phi2*(.0998909+-.0491032*phi2))-y,deltaxDeltaLambda=.975534-phi2*(.119161+3*lambda2*.0143059+.0547009*phi2),deltaxDeltaPhi=-lambdaPhi*(.238322+.2188036*phi2+.0286118*lambda2),deltayDeltaLambda=lambdaPhi*(.1605788+7961e-7*lambda2+-.0571*phi2),deltayDeltaPhi=1.00384+lambda2*(.0802894+199025e-9*lambda2)+phi2*(3*(.0998909-.02855*lambda2)-.245516*phi2),denominator=deltaxDeltaPhi*deltayDeltaLambda-deltayDeltaPhi*deltaxDeltaLambda,deltaLambda=(fy*deltaxDeltaPhi-fx*deltayDeltaPhi)/denominator,deltaPhi=(fx*deltayDeltaLambda-fy*deltaxDeltaLambda)/denominator;lambda-=deltaLambda,phi-=deltaPhi}while((math_abs(deltaLambda)>math_epsilon||math_abs(deltaPhi)>math_epsilon)&&--i>0);return i&&[lambda,phi]},littrowRaw.invert=function(x,y){var x2=x*x,y2_1=y*y+1,x2_y2_1=x2+y2_1,cosPhi=x?sqrt1_2*math_sqrt((x2_y2_1-math_sqrt(x2_y2_1*x2_y2_1-4*x2))/x2):1/math_sqrt(y2_1);return[math_asin(x*cosPhi),math_sign(y)*math_acos(cosPhi)]},millerRaw.invert=function(x,y){return[x,2.5*math_atan(math_exp(.8*y))-.625*math_pi]};var alaska=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],gs48=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],gs50=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],modifiedStereographic_miller=[[.9245,0],[0,0],[.01943,0]],lee=[[.721316,0],[0,0],[-.00881625,-.00617325]];function modifiedStereographicAlaska(){return modifiedStereographic(alaska,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function modifiedStereographicGs48(){return modifiedStereographic(gs48,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function modifiedStereographicGs50(){return modifiedStereographic(gs50,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function modifiedStereographicMiller(){return modifiedStereographic(modifiedStereographic_miller,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function modifiedStereographicLee(){return modifiedStereographic(lee,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function modifiedStereographic(coefficients,rotate){var p=projection_projection(modifiedStereographicRaw(coefficients)).rotate(rotate).clipAngle(90),r=rotation(rotate),center=p.center;return delete p.rotate,p.center=function(_){return arguments.length?center(r(_)):r.invert(center())},p}var sqrt6=math_sqrt(6),sqrt7=math_sqrt(7);function mtFlatPolarParabolicRaw(lambda,phi){var theta=math_asin(7*math_sin(phi)/(3*sqrt6));return[sqrt6*lambda*(2*math_cos(2*theta/3)-1)/sqrt7,9*math_sin(theta/3)/sqrt7]}function mtFlatPolarParabolic(){return projection_projection(mtFlatPolarParabolicRaw).scale(164.859)}function mtFlatPolarQuarticRaw(lambda,phi){for(var delta,k=(1+sqrt1_2)*math_sin(phi),theta=phi,i=0;i<25&&(theta-=delta=(math_sin(theta/2)+math_sin(theta)-k)/(.5*math_cos(theta/2)+math_cos(theta)),!(math_abs(delta)<math_epsilon));i++);return[lambda*(1+2*math_cos(theta)/math_cos(theta/2))/(3*sqrt2),2*math_sqrt(3)*math_sin(theta/2)/math_sqrt(2+sqrt2)]}function mtFlatPolarQuartic(){return projection_projection(mtFlatPolarQuarticRaw).scale(188.209)}function mtFlatPolarSinusoidalRaw(lambda,phi){for(var delta,A=math_sqrt(6/(4+math_pi)),k=(1+math_pi/4)*math_sin(phi),theta=phi/2,i=0;i<25&&(theta-=delta=(theta/2+math_sin(theta)-k)/(.5+math_cos(theta)),!(math_abs(delta)<math_epsilon));i++);return[A*(.5+math_cos(theta))*lambda/1.5,A*theta]}function mtFlatPolarSinusoidal(){return projection_projection(mtFlatPolarSinusoidalRaw).scale(166.518)}function naturalEarth2Raw(lambda,phi){var phi2=phi*phi,phi4=phi2*phi2,phi6=phi2*phi4;return[lambda*(.84719-.13063*phi2+phi6*phi6*(.05494*phi2-.04515-.02326*phi4+.00331*phi6)),phi*(1.01183+phi4*phi4*(.01926*phi2-.02625-.00396*phi4))]}function naturalEarth2(){return projection_projection(naturalEarth2Raw).scale(175.295)}function nellHammerRaw(lambda,phi){return[lambda*(1+math_cos(phi))/2,2*(phi-math_tan(phi/2))]}function nellHammer(){return projection_projection(nellHammerRaw).scale(152.63)}mtFlatPolarParabolicRaw.invert=function(x,y){var theta=3*math_asin(y*sqrt7/9);return[x*sqrt7/(sqrt6*(2*math_cos(2*theta/3)-1)),math_asin(3*math_sin(theta)*sqrt6/7)]},mtFlatPolarQuarticRaw.invert=function(x,y){var sinTheta_2=y*math_sqrt(2+sqrt2)/(2*math_sqrt(3)),theta=2*math_asin(sinTheta_2);return[3*sqrt2*x/(1+2*math_cos(theta)/math_cos(theta/2)),math_asin((sinTheta_2+math_sin(theta))/(1+sqrt1_2))]},mtFlatPolarSinusoidalRaw.invert=function(x,y){var A=math_sqrt(6/(4+math_pi)),theta=y/A;return math_abs(math_abs(theta)-math_halfPi)<math_epsilon&&(theta=theta<0?-math_halfPi:math_halfPi),[1.5*x/(A*(.5+math_cos(theta))),math_asin((theta/2+math_sin(theta))/(1+math_pi/4))]},naturalEarth2Raw.invert=function(x,y){var delta,phi2,phi4,phi6,phi=y,i=25;do{phi-=delta=(phi*(1.01183+(phi4=(phi2=phi*phi)*phi2)*phi4*(.01926*phi2-.02625-.00396*phi4))-y)/(1.01183+phi4*phi4*(.21186*phi2-.23625+-.05148*phi4))}while(math_abs(delta)>math_epsilon2&&--i>0);return[x/(.84719-.13063*(phi2=phi*phi)+(phi6=phi2*(phi4=phi2*phi2))*phi6*(.05494*phi2-.04515-.02326*phi4+.00331*phi6)),phi]},nellHammerRaw.invert=function(x,y){for(var p=y/2,i=0,delta=1/0;i<10&&math_abs(delta)>math_epsilon;++i){var c=math_cos(y/2);y-=delta=(y-math_tan(y/2)-p)/(1-.5/(c*c))}return[2*x/(1+math_cos(y)),y]};var quarticAuthalic_lobes=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function quarticAuthalic(){return interrupted(hammerRaw(1/0),quarticAuthalic_lobes).rotate([20,0]).scale(152.63)}function nicolosiRaw(lambda,phi){var sinPhi=math_sin(phi),q=math_cos(phi),s=math_sign(lambda);if(0===lambda||math_abs(phi)===math_halfPi)return[0,phi];if(0===phi)return[lambda,0];if(math_abs(lambda)===math_halfPi)return[lambda*q,math_halfPi*sinPhi];var b=math_pi/(2*lambda)-2*lambda/math_pi,c=2*phi/math_pi,d=(1-c*c)/(sinPhi-c),b2=b*b,d2=d*d,b2d2=1+b2/d2,d2b2=1+d2/b2,M=(b*sinPhi/d-b/2)/b2d2,N=(d2*sinPhi/b2+d/2)/d2b2,n=N*N-(d2*sinPhi*sinPhi/b2+d*sinPhi-1)/d2b2;return[math_halfPi*(M+math_sqrt(M*M+q*q/b2d2)*s),math_halfPi*(N+math_sqrt(n<0?0:n)*math_sign(-phi*b)*s)]}function nicolosi(){return projection_projection(nicolosiRaw).scale(127.267)}nicolosiRaw.invert=function(x,y){var x2=(x/=math_halfPi)*x,x2y2=x2+(y/=math_halfPi)*y,pi2=math_pi*math_pi;return[x?(x2y2-1+math_sqrt((1-x2y2)*(1-x2y2)+4*x2))/(2*x)*math_halfPi:0,solve((function(phi){return x2y2*(math_pi*math_sin(phi)-2*phi)*math_pi+4*phi*phi*(y-math_sin(phi))+2*math_pi*phi-pi2*y}),0)]};var pattersonK1=1.0148,pattersonK2=.23185,pattersonK3=-.14499,pattersonK4=.02406,pattersonC1=pattersonK1,pattersonC2=5*pattersonK2,pattersonC3=7*pattersonK3,pattersonC4=9*pattersonK4;function pattersonRaw(lambda,phi){var phi2=phi*phi;return[lambda,phi*(pattersonK1+phi2*phi2*(pattersonK2+phi2*(pattersonK3+pattersonK4*phi2)))]}function patterson(){return projection_projection(pattersonRaw).scale(139.319)}function polyconicRaw(lambda,phi){if(math_abs(phi)<math_epsilon)return[lambda,0];var tanPhi=math_tan(phi),k=lambda*math_sin(phi);return[math_sin(k)/tanPhi,phi+(1-math_cos(k))/tanPhi]}function polyconic(){return projection_projection(polyconicRaw).scale(103.74)}pattersonRaw.invert=function(x,y){y>1.790857183?y=1.790857183:y<-1.790857183&&(y=-1.790857183);var delta,yc=y;do{var y2=yc*yc;yc-=delta=(yc*(pattersonK1+y2*y2*(pattersonK2+y2*(pattersonK3+pattersonK4*y2)))-y)/(pattersonC1+y2*y2*(pattersonC2+y2*(pattersonC3+pattersonC4*y2)))}while(math_abs(delta)>math_epsilon);return[x,yc]},polyconicRaw.invert=function(x,y){if(math_abs(y)<math_epsilon)return[x,0];var delta,k=x*x+y*y,phi=.5*y,i=10;do{var tanPhi=math_tan(phi),secPhi=1/math_cos(phi),j=k-2*y*phi+phi*phi;phi-=delta=(tanPhi*j+2*(phi-y))/(2+j*secPhi*secPhi+2*(phi-y)*tanPhi)}while(math_abs(delta)>math_epsilon&&--i>0);return tanPhi=math_tan(phi),[(math_abs(y)<math_abs(phi+1/tanPhi)?math_asin(x*tanPhi):math_sign(y)*math_sign(x)*(math_acos(math_abs(x*tanPhi))+math_halfPi))/math_sin(phi),phi]};var area_lambda00,area_phi00,lambda0,cosPhi0,sinPhi0,bounds_lambda0,bounds_phi0,lambda1,phi1,lambda2,bounds_lambda00,bounds_phi00,p0,deltaSum,ranges,bounds_range,areaRingSum=new fsum_Adder,areaSum=new fsum_Adder,areaStream={point:noop,lineStart:noop,lineEnd:noop,polygonStart:function(){areaRingSum=new fsum_Adder,areaStream.lineStart=areaRingStart,areaStream.lineEnd=areaRingEnd},polygonEnd:function(){var areaRing=+areaRingSum;areaSum.add(areaRing<0?tau+areaRing:areaRing),this.lineStart=this.lineEnd=this.point=noop},sphere:function(){areaSum.add(tau)}};function areaRingStart(){areaStream.point=areaPointFirst}function areaRingEnd(){areaPoint(area_lambda00,area_phi00)}function areaPointFirst(lambda,phi){areaStream.point=areaPoint,area_lambda00=lambda,area_phi00=phi,lambda0=lambda*=radians,cosPhi0=cos(phi=(phi*=radians)/2+quarterPi),sinPhi0=sin(phi)}function areaPoint(lambda,phi){var dLambda=(lambda*=radians)-lambda0,sdLambda=dLambda>=0?1:-1,adLambda=sdLambda*dLambda,cosPhi=cos(phi=(phi*=radians)/2+quarterPi),sinPhi=sin(phi),k=sinPhi0*sinPhi,u=cosPhi0*cosPhi+k*cos(adLambda),v=k*sdLambda*sin(adLambda);areaRingSum.add(atan2(v,u)),lambda0=lambda,cosPhi0=cosPhi,sinPhi0=sinPhi}var bounds_boundsStream={point:bounds_boundsPoint,lineStart:boundsLineStart,lineEnd:boundsLineEnd,polygonStart:function(){bounds_boundsStream.point=boundsRingPoint,bounds_boundsStream.lineStart=boundsRingStart,bounds_boundsStream.lineEnd=boundsRingEnd,deltaSum=new fsum_Adder,areaStream.polygonStart()},polygonEnd:function(){areaStream.polygonEnd(),bounds_boundsStream.point=bounds_boundsPoint,bounds_boundsStream.lineStart=boundsLineStart,bounds_boundsStream.lineEnd=boundsLineEnd,areaRingSum<0?(bounds_lambda0=-(lambda1=180),bounds_phi0=-(phi1=90)):deltaSum>epsilon?phi1=90:deltaSum<-epsilon&&(bounds_phi0=-90),bounds_range[0]=bounds_lambda0,bounds_range[1]=lambda1},sphere:function(){bounds_lambda0=-(lambda1=180),bounds_phi0=-(phi1=90)}};function bounds_boundsPoint(lambda,phi){ranges.push(bounds_range=[bounds_lambda0=lambda,lambda1=lambda]),phi<bounds_phi0&&(bounds_phi0=phi),phi>phi1&&(phi1=phi)}function linePoint(lambda,phi){var p=cartesian([lambda*radians,phi*radians]);if(p0){var normal=cartesianCross(p0,p),inflection=cartesianCross([normal[1],-normal[0],0],normal);cartesianNormalizeInPlace(inflection),inflection=spherical(inflection);var phii,delta=lambda-lambda2,sign=delta>0?1:-1,lambdai=inflection[0]*degrees*sign,antimeridian=abs(delta)>180;antimeridian^(sign*lambda2<lambdai&&lambdai<sign*lambda)?(phii=inflection[1]*degrees)>phi1&&(phi1=phii):antimeridian^(sign*lambda2<(lambdai=(lambdai+360)%360-180)&&lambdai<sign*lambda)?(phii=-inflection[1]*degrees)<bounds_phi0&&(bounds_phi0=phii):(phi<bounds_phi0&&(bounds_phi0=phi),phi>phi1&&(phi1=phi)),antimeridian?lambda<lambda2?bounds_angle(bounds_lambda0,lambda)>bounds_angle(bounds_lambda0,lambda1)&&(lambda1=lambda):bounds_angle(lambda,lambda1)>bounds_angle(bounds_lambda0,lambda1)&&(bounds_lambda0=lambda):lambda1>=bounds_lambda0?(lambda<bounds_lambda0&&(bounds_lambda0=lambda),lambda>lambda1&&(lambda1=lambda)):lambda>lambda2?bounds_angle(bounds_lambda0,lambda)>bounds_angle(bounds_lambda0,lambda1)&&(lambda1=lambda):bounds_angle(lambda,lambda1)>bounds_angle(bounds_lambda0,lambda1)&&(bounds_lambda0=lambda)}else ranges.push(bounds_range=[bounds_lambda0=lambda,lambda1=lambda]);phi<bounds_phi0&&(bounds_phi0=phi),phi>phi1&&(phi1=phi),p0=p,lambda2=lambda}function boundsLineStart(){bounds_boundsStream.point=linePoint}function boundsLineEnd(){bounds_range[0]=bounds_lambda0,bounds_range[1]=lambda1,bounds_boundsStream.point=bounds_boundsPoint,p0=null}function boundsRingPoint(lambda,phi){if(p0){var delta=lambda-lambda2;deltaSum.add(abs(delta)>180?delta+(delta>0?360:-360):delta)}else bounds_lambda00=lambda,bounds_phi00=phi;areaStream.point(lambda,phi),linePoint(lambda,phi)}function boundsRingStart(){areaStream.lineStart()}function boundsRingEnd(){boundsRingPoint(bounds_lambda00,bounds_phi00),areaStream.lineEnd(),abs(deltaSum)>epsilon&&(bounds_lambda0=-(lambda1=180)),bounds_range[0]=bounds_lambda0,bounds_range[1]=lambda1,p0=null}function bounds_angle(lambda0,lambda1){return(lambda1-=lambda0)<0?lambda1+360:lambda1}function rangeCompare(a,b){return a[0]-b[0]}function rangeContains(range,x){return range[0]<=range[1]?range[0]<=x&&x<=range[1]:x<range[0]||range[1]<x}function interpolate(a,b){var x0=a[0]*radians,y0=a[1]*radians,x1=b[0]*radians,y1=b[1]*radians,cy0=cos(y0),sy0=sin(y0),cy1=cos(y1),sy1=sin(y1),kx0=cy0*cos(x0),ky0=cy0*sin(x0),kx1=cy1*cos(x1),ky1=cy1*sin(x1),d=2*asin(sqrt(haversin(y1-y0)+cy0*cy1*haversin(x1-x0))),k=sin(d),interpolate=d?function(t){var B=sin(t*=d)/k,A=sin(d-t)/k,x=A*kx0+B*kx1,y=A*ky0+B*ky1,z=A*sy0+B*sy1;return[atan2(y,x)*degrees,atan2(z,sqrt(x*x+y*y))*degrees]}:function(){return[x0*degrees,y0*degrees]};return interpolate.distance=d,interpolate}function matrix(a,b){var u=subtract(a[1],a[0]),v=subtract(b[1],b[0]),phi=function matrix_angle(a,b){return math_atan2(a[0]*b[1]-a[1]*b[0],a[0]*b[0]+a[1]*b[1])}(u,v),s=matrix_length(u)/matrix_length(v);return multiply([1,0,a[0][0],0,1,a[0][1]],multiply([s,0,0,0,s,0],multiply([math_cos(phi),math_sin(phi),0,-math_sin(phi),math_cos(phi),0],[1,0,-b[0][0],0,1,-b[0][1]])))}function multiply(a,b){return[a[0]*b[0]+a[1]*b[3],a[0]*b[1]+a[1]*b[4],a[0]*b[2]+a[1]*b[5]+a[2],a[3]*b[0]+a[4]*b[3],a[3]*b[1]+a[4]*b[4],a[3]*b[2]+a[4]*b[5]+a[5]]}function subtract(a,b){return[a[0]-b[0],a[1]-b[1]]}function matrix_length(v){return math_sqrt(v[0]*v[0]+v[1]*v[1])}function polyhedral(root,face){function forward(lambda,phi){var t,node=face(lambda,phi),point=node.project([lambda*math_degrees,phi*math_degrees]);return(t=node.transform)?[t[0]*point[0]+t[1]*point[1]+t[2],-(t[3]*point[0]+t[4]*point[1]+t[5])]:(point[1]=-point[1],point)}function faceInvert(node,coordinates){var invert=node.project.invert,t=node.transform,point=coordinates;if(t&&(t=function inverse(m){var k=1/(m[0]*m[4]-m[1]*m[3]);return[k*m[4],-k*m[1],k*(m[1]*m[5]-m[2]*m[4]),-k*m[3],k*m[0],k*(m[2]*m[3]-m[0]*m[5])]}(t),point=[t[0]*point[0]+t[1]*point[1]+t[2],t[3]*point[0]+t[4]*point[1]+t[5]]),invert&&node===function faceDegrees(coordinates){return face(coordinates[0]*math_radians,coordinates[1]*math_radians)}(p=invert(point)))return p;for(var p,children=node.children,i=0,n=children&&children.length;i<n;++i)if(p=faceInvert(children[i],coordinates))return p}!function recurse(node,parent){if(node.edges=function faceEdges(face){for(var n=face.length,edges=[],a=face[n-1],i=0;i<n;++i)edges.push([a,a=face[i]]);return edges}(node.face),parent.face){var shared=node.shared=function sharedEdge(a,b){for(var x,y,n=a.length,found=null,i=0;i<n;++i){x=a[i];for(var j=b.length;--j>=0;)if(y=b[j],x[0]===y[0]&&x[1]===y[1]){if(found)return[found,x];found=x}}}(node.face,parent.face),m=matrix(shared.map(parent.project),shared.map(node.project));node.transform=parent.transform?multiply(parent.transform,m):m;for(var edges=parent.edges,i=0,n=edges.length;i<n;++i)polyhedral_pointEqual(shared[0],edges[i][1])&&polyhedral_pointEqual(shared[1],edges[i][0])&&(edges[i]=node),polyhedral_pointEqual(shared[0],edges[i][0])&&polyhedral_pointEqual(shared[1],edges[i][1])&&(edges[i]=node);for(i=0,n=(edges=node.edges).length;i<n;++i)polyhedral_pointEqual(shared[0],edges[i][0])&&polyhedral_pointEqual(shared[1],edges[i][1])&&(edges[i]=parent),polyhedral_pointEqual(shared[0],edges[i][1])&&polyhedral_pointEqual(shared[1],edges[i][0])&&(edges[i]=parent)}else node.transform=parent.transform;node.children&&node.children.forEach((function(child){recurse(child,node)}));return node}(root,{transform:null}),hasInverse(root)&&(forward.invert=function(x,y){var coordinates=faceInvert(root,[x,-y]);return coordinates&&(coordinates[0]*=math_radians,coordinates[1]*=math_radians,coordinates)});var proj=projection_projection(forward),stream_=proj.stream;return proj.stream=function(stream){var rotate=proj.rotate(),rotateStream=stream_(stream),sphereStream=(proj.rotate([0,0]),stream_(stream));return proj.rotate(rotate),rotateStream.sphere=function(){sphereStream.polygonStart(),sphereStream.lineStart(),outline(sphereStream,root),sphereStream.lineEnd(),sphereStream.polygonEnd()},rotateStream},proj.angle(-30)}function outline(stream,node,parent){var point,edge,edges=node.edges,n=edges.length,multiPoint={type:"MultiPoint",coordinates:node.face},b=function src_bounds(feature){var i,n,a,b,merged,deltaMax,delta;if(phi1=lambda1=-(bounds_lambda0=bounds_phi0=1/0),ranges=[],src_stream(feature,bounds_boundsStream),n=ranges.length){for(ranges.sort(rangeCompare),i=1,merged=[a=ranges[0]];i<n;++i)rangeContains(a,(b=ranges[i])[0])||rangeContains(a,b[1])?(bounds_angle(a[0],b[1])>bounds_angle(a[0],a[1])&&(a[1]=b[1]),bounds_angle(b[0],a[1])>bounds_angle(a[0],a[1])&&(a[0]=b[0])):merged.push(a=b);for(deltaMax=-1/0,i=0,a=merged[n=merged.length-1];i<=n;a=b,++i)b=merged[i],(delta=bounds_angle(a[1],b[0]))>deltaMax&&(deltaMax=delta,bounds_lambda0=b[0],lambda1=a[1])}return ranges=bounds_range=null,bounds_lambda0===1/0||bounds_phi0===1/0?[[NaN,NaN],[NaN,NaN]]:[[bounds_lambda0,bounds_phi0],[lambda1,phi1]]}({type:"MultiPoint",coordinates:node.face.filter((function(d){return 90!==math_abs(d[1])}))}),inside=!1,j=-1,dx=b[1][0]-b[0][0],c=180===dx||360===dx?[(b[0][0]+b[1][0])/2,(b[0][1]+b[1][1])/2]:centroid(multiPoint);if(parent)for(;++j<n&&edges[j]!==parent;);++j;for(var i=0;i<n;++i)edge=edges[(i+j)%n],Array.isArray(edge)?(inside||(stream.point((point=interpolate(edge[0],c)(math_epsilon))[0],point[1]),inside=!0),stream.point((point=interpolate(edge[1],c)(math_epsilon))[0],point[1])):(inside=!1,edge!==parent&&outline(stream,edge,node))}function polyhedral_pointEqual(a,b){return a&&b&&a[0]===b[0]&&a[1]===b[1]}function hasInverse(node){return node.project.invert||node.children&&node.children.some(hasInverse)}function gnomonicRaw(x,y){var cy=cos(y),k=cos(x)*cy;return[cy*sin(x)/k,sin(y)/k]}function gnomonic(){return projection_projection(gnomonicRaw).scale(144.049).clipAngle(60)}gnomonicRaw.invert=azimuthalInvert(atan);var octahedron=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]];const polyhedral_octahedron=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map((function(face){return face.map((function(i){return octahedron[i]}))}));function butterfly(faceProjection){faceProjection=faceProjection||function(face){var c=centroid({type:"MultiPoint",coordinates:face});return gnomonic().scale(1).translate([0,0]).rotate([-c[0],-c[1]])};var faces=polyhedral_octahedron.map((function(face){return{face,project:faceProjection(face)}}));return[-1,0,0,1,0,1,4,5].forEach((function(d,i){var node=faces[d];node&&(node.children||(node.children=[])).push(faces[i])})),polyhedral(faces[0],(function(lambda,phi){return faces[lambda<-math_pi/2?phi<0?6:4:lambda<0?phi<0?2:0:lambda<math_pi/2?phi<0?3:1:phi<0?7:5]})).angle(-30).scale(101.858).center([0,45])}var kx=2/math_sqrt(3);function collignonK(a,b){var p=collignonRaw(a,b);return[p[0]*kx,p[1]]}function polyhedral_collignon(faceProjection){faceProjection=faceProjection||function(face){var c=centroid({type:"MultiPoint",coordinates:face});return projection_projection(collignonK).translate([0,0]).scale(1).rotate(c[1]>0?[-c[0],0]:[180-c[0],180])};var faces=polyhedral_octahedron.map((function(face){return{face,project:faceProjection(face)}}));return[-1,0,0,1,0,1,4,5].forEach((function(d,i){var node=faces[d];node&&(node.children||(node.children=[])).push(faces[i])})),polyhedral(faces[0],(function(lambda,phi){return faces[lambda<-math_pi/2?phi<0?6:4:lambda<0?phi<0?2:0:lambda<math_pi/2?phi<0?3:1:phi<0?7:5]})).angle(-30).scale(121.906).center([0,48.5904])}function waterman(faceProjection){faceProjection=faceProjection||function(face){var c=6===face.length?centroid({type:"MultiPoint",coordinates:face}):face[0];return gnomonic().scale(1).translate([0,0]).rotate([-c[0],-c[1]])};var w5=polyhedral_octahedron.map((function(face){for(var b,xyz=face.map(waterman_cartesian),n=xyz.length,a=xyz[n-1],hexagon=[],i=0;i<n;++i)b=xyz[i],hexagon.push(waterman_spherical([.9486832980505138*a[0]+.31622776601683794*b[0],.9486832980505138*a[1]+.31622776601683794*b[1],.9486832980505138*a[2]+.31622776601683794*b[2]]),waterman_spherical([.9486832980505138*b[0]+.31622776601683794*a[0],.9486832980505138*b[1]+.31622776601683794*a[1],.9486832980505138*b[2]+.31622776601683794*a[2]])),a=b;return hexagon})),cornerNormals=[],parents=[-1,0,0,1,0,1,4,5];w5.forEach((function(hexagon,j){for(var a,b,face=polyhedral_octahedron[j],n=face.length,normals=cornerNormals[j]=[],i=0;i<n;++i)w5.push([face[i],hexagon[(2*i+2)%(2*n)],hexagon[(2*i+1)%(2*n)]]),parents.push(j),normals.push((a=waterman_cartesian(hexagon[(2*i+2)%(2*n)]),b=waterman_cartesian(hexagon[(2*i+1)%(2*n)]),[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]))}));var faces=w5.map((function(face){return{project:faceProjection(face),face}}));return parents.forEach((function(d,i){var parent=faces[d];parent&&(parent.children||(parent.children=[])).push(faces[i])})),polyhedral(faces[0],(function face(lambda,phi){var cosphi=math_cos(phi),p=[cosphi*math_cos(lambda),cosphi*math_sin(lambda),math_sin(phi)],hexagon=lambda<-math_pi/2?phi<0?6:4:lambda<0?phi<0?2:0:lambda<math_pi/2?phi<0?3:1:phi<0?7:5,n=cornerNormals[hexagon];return faces[dot(n[0],p)<0?8+3*hexagon:dot(n[1],p)<0?8+3*hexagon+1:dot(n[2],p)<0?8+3*hexagon+2:hexagon]})).angle(-30).scale(110.625).center([0,45])}function dot(a,b){for(var i=0,n=a.length,s=0;i<n;++i)s+=a[i]*b[i];return s}function waterman_spherical(cartesian){return[math_atan2(cartesian[1],cartesian[0])*math_degrees,math_asin(max(-1,min(1,cartesian[2])))*math_degrees]}function waterman_cartesian(coordinates){var lambda=coordinates[0]*math_radians,phi=coordinates[1]*math_radians,cosphi=math_cos(phi);return[cosphi*math_cos(lambda),cosphi*math_sin(lambda),math_sin(phi)]}collignonK.invert=function(x,y){return collignonRaw.invert(x/kx,y)};const src_noop=()=>{};function project(object,projection){var project,stream=projection.stream;if(!stream)throw new Error("invalid projection");switch(object&&object.type){case"Feature":project=projectFeature;break;case"FeatureCollection":project=projectFeatureCollection;break;default:project=projectGeometry}return project(object,stream)}function projectFeatureCollection(o,stream){return{type:"FeatureCollection",features:o.features.map((function(f){return projectFeature(f,stream)}))}}function projectFeature(o,stream){return{type:"Feature",id:o.id,properties:o.properties,geometry:projectGeometry(o.geometry,stream)}}function projectGeometry(o,stream){if(!o)return null;if("GeometryCollection"===o.type)return function projectGeometryCollection(o,stream){return{type:"GeometryCollection",geometries:o.geometries.map((function(o){return projectGeometry(o,stream)}))}}(o,stream);var sink;switch(o.type){case"Point":case"MultiPoint":sink=sinkPoint;break;case"LineString":case"MultiLineString":sink=sinkLine;break;case"Polygon":case"MultiPolygon":case"Sphere":sink=sinkPolygon;break;default:return null}return src_stream(o,stream(sink)),sink.result()}var points=[],lines=[],sinkPoint={point:function(x,y){points.push([x,y])},result:function(){var result=points.length?points.length<2?{type:"Point",coordinates:points[0]}:{type:"MultiPoint",coordinates:points}:null;return points=[],result}},sinkLine={lineStart:src_noop,point:function(x,y){points.push([x,y])},lineEnd:function(){points.length&&(lines.push(points),points=[])},result:function(){var result=lines.length?lines.length<2?{type:"LineString",coordinates:lines[0]}:{type:"MultiLineString",coordinates:lines}:null;return lines=[],result}},sinkPolygon={polygonStart:src_noop,lineStart:src_noop,point:function(x,y){points.push([x,y])},lineEnd:function(){var n=points.length;if(n){do{points.push(points[0].slice())}while(++n<4);lines.push(points),points=[]}},polygonEnd:src_noop,result:function(){if(!lines.length)return null;var polygons=[],holes=[];return lines.forEach((function(ring){!function clockwise(ring){if((n=ring.length)<4)return!1;for(var n,i=0,area=ring[n-1][1]*ring[0][0]-ring[n-1][0]*ring[0][1];++i<n;)area+=ring[i-1][1]*ring[i][0]-ring[i-1][0]*ring[i][1];return area<=0}(ring)?holes.push(ring):polygons.push([ring])})),holes.forEach((function(hole){var point=hole[0];polygons.some((function(polygon){if(function contains(ring,point){for(var x=point[0],y=point[1],contains=!1,i=0,n=ring.length,j=n-1;i<n;j=i++){var pi=ring[i],xi=pi[0],yi=pi[1],pj=ring[j],xj=pj[0],yj=pj[1];yi>y^yj>y&&x<(xj-xi)*(y-yi)/(yj-yi)+xi&&(contains=!contains)}return contains}(polygon[0],point))return polygon.push(hole),!0}))||polygons.push([hole])})),lines=[],polygons.length?polygons.length>1?{type:"MultiPolygon",coordinates:polygons}:{type:"Polygon",coordinates:polygons[0]}:null}};function quincuncial(project){var dx=project(math_halfPi,0)[0]-project(-math_halfPi,0)[0];function projectQuincuncial(lambda,phi){var t=math_abs(lambda)<math_halfPi,p=project(t?lambda:lambda>0?lambda-math_pi:lambda+math_pi,phi),x=(p[0]-p[1])*sqrt1_2,y=(p[0]+p[1])*sqrt1_2;if(t)return[x,y];var d=dx*sqrt1_2,s=x>0^y>0?-1:1;return[s*x-math_sign(y)*d,s*y-math_sign(x)*d]}return project.invert&&(projectQuincuncial.invert=function(x0,y0){var x=(x0+y0)*sqrt1_2,y=(y0-x0)*sqrt1_2,t=math_abs(x)<.5*dx&&math_abs(y)<.5*dx;if(!t){var d=dx*sqrt1_2,s=x>0^y>0?-1:1,x1=-s*x0+(y>0?1:-1)*d,y1=-s*y0+(x>0?1:-1)*d;x=(-x1-y1)*sqrt1_2,y=(x1-y1)*sqrt1_2}var p=project.invert(x,y);return t||(p[0]+=x>0?math_pi:-math_pi),p}),projection_projection(projectQuincuncial).rotate([-90,-90,45]).clipAngle(179.999)}function quincuncial_gringorten(){return quincuncial(gringortenRaw).scale(176.423)}function peirce(){return quincuncial(guyouRaw).scale(111.48)}function quantize(input,digits){if(!(0<=(digits=+digits)&&digits<=20))throw new Error("invalid digits");function quantizePoint(input){var n=input.length,i=2,output=new Array(n);for(output[0]=+input[0].toFixed(digits),output[1]=+input[1].toFixed(digits);i<n;)output[i]=input[i],++i;return output}function quantizePoints(input){return input.map(quantizePoint)}function quantizePointsNoDuplicates(input){for(var point0=quantizePoint(input[0]),output=[point0],i=1;i<input.length;i++){var point=quantizePoint(input[i]);(point.length>2||point[0]!=point0[0]||point[1]!=point0[1])&&(output.push(point),point0=point)}return 1===output.length&&input.length>1&&output.push(quantizePoint(input[input.length-1])),output}function quantizePolygon(input){return input.map(quantizePointsNoDuplicates)}function quantizeGeometry(input){if(null==input)return input;var output;switch(input.type){case"GeometryCollection":output={type:"GeometryCollection",geometries:input.geometries.map(quantizeGeometry)};break;case"Point":output={type:"Point",coordinates:quantizePoint(input.coordinates)};break;case"MultiPoint":output={type:input.type,coordinates:quantizePoints(input.coordinates)};break;case"LineString":output={type:input.type,coordinates:quantizePointsNoDuplicates(input.coordinates)};break;case"MultiLineString":case"Polygon":output={type:input.type,coordinates:quantizePolygon(input.coordinates)};break;case"MultiPolygon":output={type:"MultiPolygon",coordinates:input.coordinates.map(quantizePolygon)};break;default:return input}return null!=input.bbox&&(output.bbox=input.bbox),output}function quantizeFeature(input){var output={type:"Feature",properties:input.properties,geometry:quantizeGeometry(input.geometry)};return null!=input.id&&(output.id=input.id),null!=input.bbox&&(output.bbox=input.bbox),output}if(null!=input)switch(input.type){case"Feature":return quantizeFeature(input);case"FeatureCollection":var output={type:"FeatureCollection",features:input.features.map(quantizeFeature)};return null!=input.bbox&&(output.bbox=input.bbox),output;default:return quantizeGeometry(input)}return input}function rectangularPolyconicRaw(phi0){var sinPhi0=math_sin(phi0);function forward(lambda,phi){var A=sinPhi0?math_tan(lambda*sinPhi0/2)/sinPhi0:lambda/2;if(!phi)return[2*A,-phi0];var E=2*math_atan(A*math_sin(phi)),cotPhi=1/math_tan(phi);return[math_sin(E)*cotPhi,phi+(1-math_cos(E))*cotPhi-phi0]}return forward.invert=function(x,y){if(math_abs(y+=phi0)<math_epsilon)return[sinPhi0?2*math_atan(sinPhi0*x/2)/sinPhi0:x,0];var delta,k=x*x+y*y,phi=0,i=10;do{var tanPhi=math_tan(phi),secPhi=1/math_cos(phi),j=k-2*y*phi+phi*phi;phi-=delta=(tanPhi*j+2*(phi-y))/(2+j*secPhi*secPhi+2*(phi-y)*tanPhi)}while(math_abs(delta)>math_epsilon&&--i>0);var E=x*(tanPhi=math_tan(phi)),A=math_tan(math_abs(y)<math_abs(phi+1/tanPhi)?.5*math_asin(E):.5*math_acos(E)+math_pi/4)/math_sin(phi);return[sinPhi0?2*math_atan(sinPhi0*A)/sinPhi0:2*A,phi]},forward}function rectangularPolyconic(){return parallel1(rectangularPolyconicRaw).scale(131.215)}var robinson_K=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function robinsonRaw(lambda,phi){var k,i=min(18,36*math_abs(phi)/math_pi),i0=math_floor(i),di=i-i0,ax=(k=robinson_K[i0])[0],ay=k[1],bx=(k=robinson_K[++i0])[0],by=k[1],cx=(k=robinson_K[min(19,++i0)])[0],cy=k[1];return[lambda*(bx+di*(cx-ax)/2+di*di*(cx-2*bx+ax)/2),math_sign(phi)*(by+di*(cy-ay)/2+di*di*(cy-2*by+ay)/2)]}function robinson(){return projection_projection(robinsonRaw).scale(152.63)}function satelliteRaw(P,omega){var vertical=function satelliteVerticalRaw(P){function forward(lambda,phi){var cosPhi=math_cos(phi),k=(P-1)/(P-cosPhi*math_cos(lambda));return[k*cosPhi*math_sin(lambda),k*math_sin(phi)]}return forward.invert=function(x,y){var rho2=x*x+y*y,rho=math_sqrt(rho2),sinc=(P-math_sqrt(1-rho2*(P+1)/(P-1)))/((P-1)/rho+rho/(P-1));return[math_atan2(x*sinc,rho*math_sqrt(1-sinc*sinc)),rho?math_asin(y*sinc/rho):0]},forward}(P);if(!omega)return vertical;var cosOmega=math_cos(omega),sinOmega=math_sin(omega);function forward(lambda,phi){var coordinates=vertical(lambda,phi),y=coordinates[1],A=y*sinOmega/(P-1)+cosOmega;return[coordinates[0]*cosOmega/A,y/A]}return forward.invert=function(x,y){var k=(P-1)/(P-1-y*sinOmega);return vertical.invert(k*x,k*y*cosOmega)},forward}function satellite(){var distance=2,omega=0,m=projectionMutator(satelliteRaw),p=m(distance,omega);return p.distance=function(_){return arguments.length?m(distance=+_,omega):distance},p.tilt=function(_){return arguments.length?m(distance,omega=_*math_radians):omega*math_degrees},p.scale(432.147).clipAngle(math_acos(1/distance)*math_degrees-1e-6)}robinson_K.forEach((function(d){d[1]*=1.593415793900743})),robinsonRaw.invert=function(x,y){var phi=90*y,i=min(18,math_abs(phi/5)),i0=max(0,math_floor(i));do{var ay=robinson_K[i0][1],by=robinson_K[i0+1][1],cy=robinson_K[min(19,i0+2)][1],u=cy-ay,v=cy-2*by+ay,t=2*(math_abs(y)-by)/u,c=v/u,di=t*(1-c*t*(1-2*c*t));if(di>=0||1===i0){phi=(y>=0?5:-5)*(di+i);var delta,j=50;do{di=(i=min(18,math_abs(phi)/5))-(i0=math_floor(i)),ay=robinson_K[i0][1],by=robinson_K[i0+1][1],cy=robinson_K[min(19,i0+2)][1],phi-=(delta=math_sign(y)*(by+di*(cy-ay)/2+di*di*(cy-2*by+ay)/2)-y)*math_degrees}while(math_abs(delta)>math_epsilon2&&--j>0);break}}while(--i0>=0);var ax=robinson_K[i0][0],bx=robinson_K[i0+1][0],cx=robinson_K[min(19,i0+2)][0];return[x/(bx+di*(cx-ax)/2+di*di*(cx-2*bx+ax)/2),phi*math_radians]};var epsilonInverse=1e4,stitch_x0=-180,x0e=stitch_x0+1e-4,stitch_x1=180,x1e=stitch_x1-1e-4,stitch_y0=-90,y0e=stitch_y0+1e-4,stitch_y1=90,y1e=stitch_y1-1e-4;function nonempty(coordinates){return coordinates.length>0}function normalizePoint(y){return y===stitch_y0||y===stitch_y1?[0,y]:[stitch_x0,(x=y,Math.floor(x*epsilonInverse)/epsilonInverse)];var x}function clampPoint(p){var x=p[0],y=p[1],clamped=!1;return x<=x0e?(x=stitch_x0,clamped=!0):x>=x1e&&(x=stitch_x1,clamped=!0),y<=y0e?(y=stitch_y0,clamped=!0):y>=y1e&&(y=stitch_y1,clamped=!0),clamped?[x,y]:p}function clampPoints(points){return points.map(clampPoint)}function extractFragments(rings,polygon,fragments){for(var j=0,m=rings.length;j<m;++j){var ring=rings[j].slice();fragments.push({index:-1,polygon,ring});for(var i=0,n=ring.length;i<n;++i){var point=ring[i],x=point[0],y=point[1];if(x<=x0e||x>=x1e||y<=y0e||y>=y1e){ring[i]=clampPoint(point);for(var k=i+1;k<n;++k){var pointk=ring[k],xk=pointk[0],yk=pointk[1];if(xk>x0e&&xk<x1e&&yk>y0e&&yk<y1e)break}if(k===i+1)continue;if(i){var fragmentBefore={index:-1,polygon,ring:ring.slice(0,i+1)};fragmentBefore.ring[fragmentBefore.ring.length-1]=normalizePoint(y),fragments[fragments.length-1]=fragmentBefore}else fragments.pop();if(k>=n)break;fragments.push({index:-1,polygon,ring:ring=ring.slice(k-1)}),ring[0]=normalizePoint(ring[0][1]),i=-1,n=ring.length}}}}function stitchFragments(fragments){var i,fragment,start,startFragment,end,endFragment,n=fragments.length,fragmentByStart={},fragmentByEnd={};for(i=0;i<n;++i)start=(fragment=fragments[i]).ring[0],end=fragment.ring[fragment.ring.length-1],start[0]!==end[0]||start[1]!==end[1]?(fragment.index=i,fragmentByStart[start]=fragmentByEnd[end]=fragment):(fragment.polygon.push(fragment.ring),fragments[i]=null);for(i=0;i<n;++i)if(fragment=fragments[i]){if(start=fragment.ring[0],end=fragment.ring[fragment.ring.length-1],startFragment=fragmentByEnd[start],endFragment=fragmentByStart[end],delete fragmentByStart[start],delete fragmentByEnd[end],start[0]===end[0]&&start[1]===end[1]){fragment.polygon.push(fragment.ring);continue}startFragment?(delete fragmentByEnd[start],delete fragmentByStart[startFragment.ring[0]],startFragment.ring.pop(),fragments[startFragment.index]=null,fragment={index:-1,polygon:startFragment.polygon,ring:startFragment.ring.concat(fragment.ring)},startFragment===endFragment?fragment.polygon.push(fragment.ring):(fragment.index=n++,fragments.push(fragmentByStart[fragment.ring[0]]=fragmentByEnd[fragment.ring[fragment.ring.length-1]]=fragment))):endFragment?(delete fragmentByStart[end],delete fragmentByEnd[endFragment.ring[endFragment.ring.length-1]],fragment.ring.pop(),fragment={index:n++,polygon:endFragment.polygon,ring:fragment.ring.concat(endFragment.ring)},fragments[endFragment.index]=null,fragments.push(fragmentByStart[fragment.ring[0]]=fragmentByEnd[fragment.ring[fragment.ring.length-1]]=fragment)):(fragment.ring.push(fragment.ring[0]),fragment.polygon.push(fragment.ring))}}function stitchFeature(input){var output={type:"Feature",geometry:stitchGeometry(input.geometry)};return null!=input.id&&(output.id=input.id),null!=input.bbox&&(output.bbox=input.bbox),null!=input.properties&&(output.properties=input.properties),output}function stitchGeometry(input){if(null==input)return input;var output,fragments,i,n;switch(input.type){case"GeometryCollection":output={type:"GeometryCollection",geometries:input.geometries.map(stitchGeometry)};break;case"Point":output={type:"Point",coordinates:clampPoint(input.coordinates)};break;case"MultiPoint":case"LineString":output={type:input.type,coordinates:clampPoints(input.coordinates)};break;case"MultiLineString":output={type:"MultiLineString",coordinates:input.coordinates.map(clampPoints)};break;case"Polygon":var polygon=[];extractFragments(input.coordinates,polygon,fragments=[]),stitchFragments(fragments),output={type:"Polygon",coordinates:polygon};break;case"MultiPolygon":fragments=[],i=-1,n=input.coordinates.length;for(var polygons=new Array(n);++i<n;)extractFragments(input.coordinates[i],polygons[i]=[],fragments);stitchFragments(fragments),output={type:"MultiPolygon",coordinates:polygons.filter(nonempty)};break;default:return input}return null!=input.bbox&&(output.bbox=input.bbox),output}function stitch(input){if(null==input)return input;switch(input.type){case"Feature":return stitchFeature(input);case"FeatureCollection":var output={type:"FeatureCollection",features:input.features.map(stitchFeature)};return null!=input.bbox&&(output.bbox=input.bbox),output;default:return stitchGeometry(input)}}function timesRaw(lambda,phi){var t=math_tan(phi/2),s=math_sin(math_quarterPi*t);return[lambda*(.74482-.34588*s*s),1.70711*t]}function times(){return projection_projection(timesRaw).scale(146.153)}function twoPoint(raw,p0,p1){var i=interpolate(p0,p1),o=i(.5),a=rotation([-o[0],-o[1]])(p0),b=i.distance/2,y=-math_asin(math_sin(a[1]*math_radians)/math_sin(b)),R=[-o[0],-o[1],-(a[0]>0?math_pi-y:y)*math_degrees],p=projection_projection(raw(b)).rotate(R),r=rotation(R),center=p.center;return delete p.rotate,p.center=function(_){return arguments.length?center(r(_)):r.invert(center())},p.clipAngle(90)}function twoPointAzimuthalRaw(d){var cosd=math_cos(d);function forward(lambda,phi){var coordinates=gnomonicRaw(lambda,phi);return coordinates[0]*=cosd,coordinates}return forward.invert=function(x,y){return gnomonicRaw.invert(x/cosd,y)},forward}function twoPointAzimuthalUsa(){return twoPointAzimuthal([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function twoPointAzimuthal(p0,p1){return twoPoint(twoPointAzimuthalRaw,p0,p1)}function twoPointEquidistantRaw(z0){if(!(z0*=2))return azimuthalEquidistantRaw;var lambdaa=-z0/2,lambdab=-lambdaa,z02=z0*z0,tanLambda0=math_tan(lambdab),S=.5/math_sin(lambdab);function forward(lambda,phi){var za=math_acos(math_cos(phi)*math_cos(lambda-lambdaa)),zb=math_acos(math_cos(phi)*math_cos(lambda-lambdab));return[((za*=za)-(zb*=zb))/(2*z0),(phi<0?-1:1)*math_sqrt(4*z02*zb-(z02-za+zb)*(z02-za+zb))/(2*z0)]}return forward.invert=function(x,y){var t,d,y2=y*y,cosza=math_cos(math_sqrt(y2+(t=x+lambdaa)*t)),coszb=math_cos(math_sqrt(y2+(t=x+lambdab)*t));return[math_atan2(d=cosza-coszb,t=(cosza+coszb)*tanLambda0),(y<0?-1:1)*math_acos(math_sqrt(t*t+d*d)*S)]},forward}function twoPointEquidistantUsa(){return twoPointEquidistant([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function twoPointEquidistant(p0,p1){return twoPoint(twoPointEquidistantRaw,p0,p1)}function vanDerGrintenRaw(lambda,phi){if(math_abs(phi)<math_epsilon)return[lambda,0];var sinTheta=math_abs(phi/math_halfPi),theta=math_asin(sinTheta);if(math_abs(lambda)<math_epsilon||math_abs(math_abs(phi)-math_halfPi)<math_epsilon)return[0,math_sign(phi)*math_pi*math_tan(theta/2)];var cosTheta=math_cos(theta),A=math_abs(math_pi/lambda-lambda/math_pi)/2,A2=A*A,G=cosTheta/(sinTheta+cosTheta-1),P=G*(2/sinTheta-1),P2=P*P,P2_A2=P2+A2,G_P2=G-P2,Q=A2+G;return[math_sign(lambda)*math_pi*(A*G_P2+math_sqrt(A2*G_P2*G_P2-P2_A2*(G*G-P2)))/P2_A2,math_sign(phi)*math_pi*(P*Q-A*math_sqrt((A2+1)*P2_A2-Q*Q))/P2_A2]}function vanDerGrinten(){return projection_projection(vanDerGrintenRaw).scale(79.4183)}function vanDerGrinten2Raw(lambda,phi){if(math_abs(phi)<math_epsilon)return[lambda,0];var sinTheta=math_abs(phi/math_halfPi),theta=math_asin(sinTheta);if(math_abs(lambda)<math_epsilon||math_abs(math_abs(phi)-math_halfPi)<math_epsilon)return[0,math_sign(phi)*math_pi*math_tan(theta/2)];var cosTheta=math_cos(theta),A=math_abs(math_pi/lambda-lambda/math_pi)/2,A2=A*A,x1=cosTheta*(math_sqrt(1+A2)-A*cosTheta)/(1+A2*sinTheta*sinTheta);return[math_sign(lambda)*math_pi*x1,math_sign(phi)*math_pi*math_sqrt(1-x1*(2*A+x1))]}function vanDerGrinten2(){return projection_projection(vanDerGrinten2Raw).scale(79.4183)}function vanDerGrinten3Raw(lambda,phi){if(math_abs(phi)<math_epsilon)return[lambda,0];var sinTheta=phi/math_halfPi,theta=math_asin(sinTheta);if(math_abs(lambda)<math_epsilon||math_abs(math_abs(phi)-math_halfPi)<math_epsilon)return[0,math_pi*math_tan(theta/2)];var A=(math_pi/lambda-lambda/math_pi)/2,y1=sinTheta/(1+math_cos(theta));return[math_pi*(math_sign(lambda)*math_sqrt(A*A+1-y1*y1)-A),math_pi*y1]}function vanDerGrinten3(){return projection_projection(vanDerGrinten3Raw).scale(79.4183)}function vanDerGrinten4Raw(lambda,phi){if(!phi)return[lambda,0];var phi0=math_abs(phi);if(!lambda||phi0===math_halfPi)return[0,phi];var B=phi0/math_halfPi,B2=B*B,C=(8*B-B2*(B2+2)-5)/(2*B2*(B-1)),C2=C*C,BC=B*C,B_C2=B2+C2+2*BC,B_3C=B+3*C,lambda0=lambda/math_halfPi,lambda1=lambda0+1/lambda0,D=math_sign(math_abs(lambda)-math_halfPi)*math_sqrt(lambda1*lambda1-4),D2=D*D,x1=(D*(B_C2+C2-1)+2*math_sqrt(B_C2*(B2+C2*D2-1)+(1-B2)*(B2*(B_3C*B_3C+4*C2)+12*BC*C2+4*C2*C2)))/(4*B_C2+D2);return[math_sign(lambda)*math_halfPi*x1,math_sign(phi)*math_halfPi*math_sqrt(1+D*math_abs(x1)-x1*x1)]}function vanDerGrinten4(){return projection_projection(vanDerGrinten4Raw).scale(127.16)}function wagnerRaw(poleline,parallels,inflation,ratio){var phi1=math_pi/3;poleline=max(poleline,math_epsilon),parallels=max(parallels,math_epsilon),poleline=min(poleline,math_halfPi),parallels=min(parallels,math_pi-math_epsilon),inflation=max(inflation,0),inflation=min(inflation,100-math_epsilon);var vratio=(ratio=max(ratio,math_epsilon))/100,m2=math_acos((inflation/100+1)*math_cos(phi1))/phi1,m1=math_sin(poleline)/math_sin(m2*math_halfPi),n=parallels/math_pi,k=math_sqrt(vratio*math_sin(poleline/2)/math_sin(parallels/2));return function wagnerFormula(cx,cy,m1,m2,n){function forward(lambda,phi){var s=m1*math_sin(m2*phi),c0=math_sqrt(1-s*s),c1=math_sqrt(2/(1+c0*math_cos(lambda*=n)));return[cx*c0*c1*math_sin(lambda),cy*s*c1]}return forward.invert=function(x,y){var t1=x/cx,t2=y/cy,p=math_sqrt(t1*t1+t2*t2),c=2*math_asin(p/2);return[math_atan2(x*math_tan(c),cx*p)/n,p&&math_asin(y*math_sin(c)/(cy*m1*p))/m2]},forward}(k/math_sqrt(n*m1*m2),1/(k*math_sqrt(n*m1*m2)),m1,m2,n)}function wagner(){var poleline=65*math_radians,parallels=60*math_radians,inflation=20,ratio=200,mutate=projectionMutator(wagnerRaw),projection=mutate(poleline,parallels,inflation,ratio);return projection.poleline=function(_){return arguments.length?mutate(poleline=+_*math_radians,parallels,inflation,ratio):poleline*math_degrees},projection.parallels=function(_){return arguments.length?mutate(poleline,parallels=+_*math_radians,inflation,ratio):parallels*math_degrees},projection.inflation=function(_){return arguments.length?mutate(poleline,parallels,inflation=+_,ratio):inflation},projection.ratio=function(_){return arguments.length?mutate(poleline,parallels,inflation,ratio=+_):ratio},projection.scale(163.775)}function wagner7(){return wagner().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}timesRaw.invert=function(x,y){var t=y/1.70711,s=math_sin(math_quarterPi*t);return[x/(.74482-.34588*s*s),2*math_atan(t)]},vanDerGrintenRaw.invert=function(x,y){if(math_abs(y)<math_epsilon)return[x,0];if(math_abs(x)<math_epsilon)return[0,math_halfPi*math_sin(2*math_atan(y/math_pi))];var x2=(x/=math_pi)*x,y2=(y/=math_pi)*y,x2_y2=x2+y2,z=x2_y2*x2_y2,c1=-math_abs(y)*(1+x2_y2),c2=c1-2*y2+x2,c3=-2*c1+1+2*y2+z,d=y2/c3+(2*c2*c2*c2/(c3*c3*c3)-9*c1*c2/(c3*c3))/27,a1=(c1-c2*c2/(3*c3))/c3,m1=2*math_sqrt(-a1/3),theta1=math_acos(3*d/(a1*m1))/3;return[math_pi*(x2_y2-1+math_sqrt(1+2*(x2-y2)+z))/(2*x),math_sign(y)*math_pi*(-m1*math_cos(theta1+math_pi/3)-c2/(3*c3))]},vanDerGrinten2Raw.invert=function(x,y){if(!x)return[0,math_halfPi*math_sin(2*math_atan(y/math_pi))];var x1=math_abs(x/math_pi),A=(1-x1*x1-(y/=math_pi)*y)/(2*x1),B=math_sqrt(A*A+1);return[math_sign(x)*math_pi*(B-A),math_sign(y)*math_halfPi*math_sin(2*math_atan2(math_sqrt((1-2*A*x1)*(A+B)-x1),math_sqrt(B+A+x1)))]},vanDerGrinten3Raw.invert=function(x,y){if(!y)return[x,0];var y1=y/math_pi,A=(math_pi*math_pi*(1-y1*y1)-x*x)/(2*math_pi*x);return[x?math_pi*(math_sign(x)*math_sqrt(A*A+1)-A):0,math_halfPi*math_sin(2*math_atan(y1))]},vanDerGrinten4Raw.invert=function(x,y){var delta;if(!x||!y)return[x,y];var sy=math_sign(y);y=math_abs(y)/math_pi;var x1=math_sign(x)*x/math_halfPi,D=(x1*x1-1+4*y*y)/math_abs(x1),D2=D*D,B=y*(2-(y>.5?min(y,math_abs(x)):0)),r=x*x+y*y,i=50;do{var B2=B*B,C=(8*B-B2*(B2+2)-5)/(2*B2*(B-1)),C_=(3*B-B2*B-10)/(2*B2*B),C2=C*C,BC=B*C,B_C=B+C,B_C2=B_C*B_C,B_3C=B+3*C,F_=-2*B_C*(4*BC*C2+(1-4*B2+3*B2*B2)*(1+C_)+C2*(14*B2-6-D2+(8*B2-8-2*D2)*C_)+BC*(12*B2-8+(10*B2-10-D2)*C_)),sqrtF=math_sqrt(B_C2*(B2+C2*D2-1)+(1-B2)*(B2*(B_3C*B_3C+4*C2)+C2*(12*BC+4*C2)));B-=delta=(D*(B_C2+C2-1)+2*sqrtF-x1*(4*B_C2+D2))/(D*(2*C*C_+2*B_C*(1+C_))+F_/sqrtF-8*B_C*(D*(-1+C2+B_C2)+2*sqrtF)*(1+C_)/(D2+4*B_C2))}while(delta*r*r>math_epsilon&&--i>0);return[math_sign(x)*(math_sqrt(D*D+4)+D)*math_pi/4,sy*math_halfPi*B]};var A=4*math_pi+3*math_sqrt(3),B=2*math_sqrt(2*math_pi*math_sqrt(3)/A),wagner4Raw=mollweideBromleyRaw(B*math_sqrt(3)/math_pi,B,A/6);function wagner4(){return projection_projection(wagner4Raw).scale(176.84)}function wagner6Raw(lambda,phi){return[lambda*math_sqrt(1-3*phi*phi/(math_pi*math_pi)),phi]}function wagner6(){return projection_projection(wagner6Raw).scale(152.63)}function wiechelRaw(lambda,phi){var cosPhi=math_cos(phi),sinPhi=math_cos(lambda)*cosPhi,sin1_Phi=1-sinPhi,cosLambda=math_cos(lambda=math_atan2(math_sin(lambda)*cosPhi,-math_sin(phi))),sinLambda=math_sin(lambda);return[sinLambda*(cosPhi=math_sqrt(1-sinPhi*sinPhi))-cosLambda*sin1_Phi,-cosLambda*cosPhi-sinLambda*sin1_Phi]}function wiechel(){return projection_projection(wiechelRaw).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)}function winkel3Raw(lambda,phi){var coordinates=aitoffRaw(lambda,phi);return[(coordinates[0]+lambda/math_halfPi)/2,(coordinates[1]+phi)/2]}function winkel3(){return projection_projection(winkel3Raw).scale(158.837)}wagner6Raw.invert=function(x,y){return[x/math_sqrt(1-3*y*y/(math_pi*math_pi)),y]},wiechelRaw.invert=function(x,y){var w=(x*x+y*y)/-2,k=math_sqrt(-w*(2+w)),b=y*w+x*k,a=x*w-y*k,D=math_sqrt(a*a+b*b);return[math_atan2(k*b,D*(1+w)),D?-math_asin(k*a/D):0]},winkel3Raw.invert=function(x,y){var lambda=x,phi=y,i=25;do{var F,cosphi=math_cos(phi),sinphi=math_sin(phi),sin_2phi=math_sin(2*phi),sin2phi=sinphi*sinphi,cos2phi=cosphi*cosphi,sinlambda=math_sin(lambda),coslambda_2=math_cos(lambda/2),sinlambda_2=math_sin(lambda/2),sin2lambda_2=sinlambda_2*sinlambda_2,C=1-cos2phi*coslambda_2*coslambda_2,E=C?math_acos(cosphi*coslambda_2)*math_sqrt(F=1/C):F=0,fx=.5*(2*E*cosphi*sinlambda_2+lambda/math_halfPi)-x,fy=.5*(E*sinphi+phi)-y,dxdlambda=.5*F*(cos2phi*sin2lambda_2+E*cosphi*coslambda_2*sin2phi)+.5/math_halfPi,dxdphi=F*(sinlambda*sin_2phi/4-E*sinphi*sinlambda_2),dydlambda=.125*F*(sin_2phi*sinlambda_2-E*sinphi*cos2phi*sinlambda),dydphi=.5*F*(sin2phi*coslambda_2+E*sin2lambda_2*cosphi)+.5,denominator=dxdphi*dydlambda-dydphi*dxdlambda,dlambda=(fy*dxdphi-fx*dydphi)/denominator,dphi=(fx*dydlambda-fy*dxdlambda)/denominator;lambda-=dlambda,phi-=dphi}while((math_abs(dlambda)>math_epsilon||math_abs(dphi)>math_epsilon)&&--i>0);return[lambda,phi]}}}]);